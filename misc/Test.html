<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
<link rel="stylesheet" href="../theme/css/my.css" /><h1>Test</h1>
<h1>2PC</h1>
<ul>
<li>XA 协议中分为两部分：事务管理器和本地资源管理器。<ul>
<li>其中本地资源管理器往往由数据库实现，比如 Oracle、MYSQL 这些数据库都实现了 XA 接口，而事务管理器则作为一个全局的调度者。</li>
</ul>
</li>
<li>优点：<ul>
<li>严格保障事务 ACID 特性；</li>
<li>想使用本地事务一样透明；</li>
<li>对业务侵⼊很小。</li>
</ul>
</li>
<li>缺点：<ul>
<li>强一致性的同步阻塞协议，锁定全部资源。</li>
</ul>
</li>
</ul>
<h1>3PC</h1>
<ul>
<li>是 2PC 的一种改进版本。</li>
<li>CanCommit、PreCommit、DoCommit 三个阶段。</li>
<li>在第一阶段，只是询问所有参与者是否可可以执行事务操作，并不在本阶段执行事务操作。当协调者收到所有的参与者都返回 YES 时，在第二阶段才执行事务操作，然后在第三阶段在执行 commit 或者 rollback。</li>
<li>2PC 中只有协调者有超时机制，3PC 在协调者和参与者中都引入了超时机制，协调者出现故障后，参与者就不会一直阻塞。</li>
<li>多了一次网络通信，性能上反而变得更差</li>
</ul>