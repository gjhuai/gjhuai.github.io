<p>[TOC]</p>
<p>参考：<a href="https://www.cnblogs.com/bigbrotherer/p/7241845.html">CentOS7安装MySQL</a></p>
<h1>删除MariaDB怎么操作</h1>
<p>在CentOS中默认安装有MariaDB，不想用接卸载了。</p>
<ul>
<li>首先、查询所安装的MariaDB组件：</li>
</ul>
<pre><code class="language-shell">[root@localhost logs]# rpm -qa | grep Maria*
MariaDB-server-5.5.49-1.el7.centos.x86_64
MariaDB-common-5.5.49-1.el7.centos.x86_64
MariaDB-client-5.5.49-1.el7.centos.x86_64
</code></pre>
<ul>
<li>卸载数据库：</li>
</ul>
<pre><code class="language-shell">[root@localhost logs]# yum -y remove mari*
</code></pre>
<ul>
<li>删除数据库文件：</li>
</ul>
<pre><code class="language-shell">[root@localhost logs]# rm -rf /var/lib/mysql/*
</code></pre>
<ul>
<li>再查看一下还有没有残留，如果有，再删除</li>
</ul>
<pre><code class="language-shell">[root@localhost logs]# rpm -qa | grep Maria*
</code></pre>
<h1>CentOS7安装MySQL</h1>
<p>在CentOS中默认安装有MariaDB，这个是MySQL的分支，但为了需要，还是要在系统中安装MySQL，而且安装完成之后可以直接覆盖掉MariaDB。</p>
<ul>
<li>1、下载并安装MySQL官方的 Yum Repository<blockquote>
<p><code>[root@localhost ~]# wget -i -c http://dev.mysql.com/get/mysql57-community-release-el7-10.noarch.rpm</code></p>
</blockquote>
</li>
</ul>
<p>使用上面的命令就直接下载了安装用的Yum Repository，大概25KB的样子，然后就可以直接yum安装了。</p>
<blockquote>
<p><code>[root@localhost ~]# yum -y install mysql57-community-release-el7-10.noarch.rpm</code></p>
</blockquote>
<p>之后就开始安装MySQL服务器。</p>
<blockquote>
<p><code>[root@localhost ~]# yum -y install mysql-community-server</code></p>
</blockquote>
<p>这步可能会花些时间，安装完成后就会覆盖掉之前的mariadb。</p>
<p>至此MySQL就安装完成了，然后是对MySQL的一些设置。</p>
<ul>
<li>2、MySQL数据库设置</li>
</ul>
<p>首先启动MySQL</p>
<blockquote>
<p><code>[root@localhost ~]# systemctl start  mysqld.service</code></p>
</blockquote>
<p>查看MySQL运行状态，运行状态如图：</p>
<blockquote>
<p><code>[root@localhost ~]# systemctl status mysqld.service</code></p>
</blockquote>
<p>此时MySQL已经开始正常运行，不过要想进入MySQL还得先找出此时root用户的密码，通过如下命令可以在日志文件中找出密码：</p>
<blockquote>
<p><code>[root@localhost ~]# grep "password" /var/log/mysqld.log</code>
A temporary password is generated for miner@localhost: Vaj4edh+G2j6</p>
</blockquote>
<p>如下命令进入数据库：</p>
<blockquote>
<p><code>[root@localhost ~]# mysql -uroot -p</code></p>
</blockquote>
<p>输入初始密码，此时不能做任何事情，因为MySQL默认必须修改密码之后才能操作数据库：</p>
<blockquote>
<p><code>mysql&gt; ALTER USER 'root'@'localhost' IDENTIFIED BY 'new password';</code></p>
</blockquote>
<p>这里有个问题，新密码设置的时候如果设置的过于简单会报错：</p>
<blockquote>
<p>ERROR 1819 (HY000): Your password does not satisfy the current policy requirements</p>
</blockquote>
<p>但此时还有一个问题，就是因为安装了Yum Repository，以后每次yum操作都会自动更新，需要把这个卸载掉：</p>
<blockquote>
<p><code>[root@localhost ~]# yum -y remove mysql57-community-release-el7-10.noarch</code></p>
</blockquote>
<p>此时才算真的完成了。</p>
<h1>MySQL赋给用户权限</h1>
<p>命令格式：</p>
<blockquote>
<p><code>mysql&gt; grant 权限1,权限2,…权限n on 数据库名称.表名称 to 用户名@用户地址 identified by '连接口令';</code>
- 权限1,权限2,…权限n代表  <code>select,insert,update,delete,create,drop,index,alter,grant,references,reload,shutdown,process,file</code> 等14个权限。
- 当权限1,权限2,…权限n被 <code>all privileges</code> 或者 <code>all</code> 代替，表示赋予用户全部权限。
- 当 <code>数据库名称.表名</code> 称被 <code>*.*</code> 代替，表示赋予用户操作服务器上所有数据库所有表的权限。
- 用户地址可以是 <code>localhost</code> ，也可以是ip地址、机器名字、域名。也可以用 <code>'%'</code> 表示从任何地址连接。
- <code>'连接口令'</code> 不能为空，否则创建失败。</p>
</blockquote>
<pre><code class="language-shell"># 给来自10.163.225.87的用户joe分配可对数据库vtdc的employee表进行select,insert,update,delete,create,drop等操作的权限，并设定口令为123。
mysql&gt;grant select,insert,update,delete,create,drop on vtdc.employee to joe@10.163.225.87 identified by '123';

# 给来自10.163.225.87的用户joe分配可对数据库vtdc所有表进行所有操作的权限，并设定口令为123。
mysql&gt;grant all privileges on vtdc.* to joe@10.163.225.87 identified by '123';

# 给来自10.163.225.87的用户joe分配可对所有数据库的所有表进行所有操作的权限，并设定口令为123。
mysql&gt;grant all privileges on *.* to joe@10.163.225.87 identified by '123';

# 给本机用户joe分配可对所有数据库的所有表进行所有操作的权限，并设定口令为123。
mysql&gt;grant all privileges on *.* to joe@localhost identified by '123';
</code></pre>