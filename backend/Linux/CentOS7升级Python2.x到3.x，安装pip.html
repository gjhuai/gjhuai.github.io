<p>[TOC]</p>
<h2>下载并安装</h2>
<pre><code class="language-shell"># yum install gcc gcc-c++ -y   #此命令非必需，缺少gcc时执行
# 下载python3
wget https://www.python.org/downloads/release/python-372/
tar xvf Python-3.7.2.tar.xz 
cd Python-3.7.2/
# 编译
./configure
make
make install
</code></pre>
<h2>设置3.X为默认版本</h2>
<ul>
<li>验证此时默认版本</li>
</ul>
<pre><code class="language-shell">$ python -V       #一个是旧版本，一个是新版本
Python 2.7.5
$ python3 -V     #新版本
Python 3.7.2
$ ls -al /usr/bin | grep python
...
lrwxrwxrwx. 1 root root 7 May 26 2017 python -&gt; python2  # 在 /usr/bin 下面。可以看到 python 链接的是 python 2.7
</code></pre>
<ul>
<li>切换默认版本</li>
</ul>
<pre><code class="language-shell"># 将原来 python 的软链接重命名
mv /usr/bin/python2.7 /usr/bin/python2
# 将 python 链接至 python3
ln -s /usr/local/bin/python3 /usr/bin/python
</code></pre>
<h2>修改一些系统工具</h2>
<p>yum、firewall-cmd等工具都是基于python2.7开发的，升级python3后，都不能使用了，需要将文件头 #!/usr/bin/python 改为 #!/usr/bin/python2.7。
需要修改文件：
/usr/bin/yum
/usr/libexec/urlgrabber-ext-down
/usr/bin/firewall-cmd
...</p>
<h2>安装pip</h2>
<p>从 Python 2 版本 &gt;=2.7.9 或 Python 3 版本 &gt;=3.4 开始，官网的安装包中已经自带了 pip，在安装时用户可以直接选择安装。或者如果使用由 <code>virtualenv</code> 或者 <code>pyvenv</code> 创建的 Virtual Environment，那么 pip 也是被默认安装的。
如果没有在安装的时候，选择上安装pip，那么也可以从本地安装。例如，直接使用<code>get-pip.py</code>进行安装。首先从官网下载<code>get-pip.py</code>，然后直接运行<code>python get-pip.py</code>即可。</p>
<p>参考：<a href="http://flintx.me/2017/12/15/Centos%207%20Python3%20%E4%BB%A5%E5%8F%8A%20pip3%20%E5%AE%89%E8%A3%85/">Centos 7 Python3 以及 pip3 安装</a></p>
<h3>安装pip2</h3>
<pre><code class="language-python"># 首先安装 epel 扩展源
$ sudo yum -y install epel-release
# 安装 python-pip
$ sudo yum -y install python-pip
# 清除 cache
$ sudo yum clean all
# 测试（任意目录下）
$ pip -V
pip 8.1.2 from /usr/lib/python2.7/site-packages (python 2.7)
</code></pre>
<h3>手动安装pip3</h3>
<pre><code class="language-python"># 下载源代码
$ wget --no-check-certificate https://github.com/pypa/pip/archive/19.0.3.tar.gz
# 解压文件
$ tar -zvxf 19.0.3.tar.gz
$ cd pip-19.0.3
# 使用 Python 3 安装
$ python3 setup.py install
# 配置软链接
$ sudo ln -s /usr/local/bin/pip /usr/bin/pip3
# 测试（任意目录下）
$ pip3 -V
pip 9.0.1 from /usr/local/lib/python3.6/site-packages (python 3.6)
</code></pre>
<hr />
<h2>安装ssl模块</h2>
<p>参考：<a href="https://www.aikaiyuan.com/12064.html">centos 6 编译安装 python 3.7</a>
CentOS等linux下python需要通过源码编译安装，默认情况下未安装ssl，需要先安装openssl，而且必须是源码编译安装，因为python编译安装时，需要编译ssl代码。
- 源码安装openssl</p>
<pre><code class="language-shell"># wget https://www.openssl.org/source/openssl-1.0.2o.tar.gz  # 可以下载最新版本
# cd openssl-1.0.2o
# ./config --prefix=/usr/local/openssl --openssldir=/usr/local/openssl
# make
# make install
</code></pre>
<ul>
<li>下载python3.7</li>
</ul>
<pre><code class="language-shell"># wget https://www.python.org/ftp/python/3.7.0/Python-3.7.0.tgz
# cd Python-3.7.0
</code></pre>
<ul>
<li>修改ssl路径</li>
</ul>
<h1><code>vim Modules/Setup.dist</code></h1>
<blockquote>
<p>SSL=/usr/local/openssl
_ssl _ssl.c \
     -DUSE_SSL -I$(SSL)/include -I$(SSL)/include/openssl \
    -L$(SSL)/lib -lssl -lcrypto</p>
</blockquote>
<ul>
<li>重新编译安装</li>
</ul>
<pre><code class="language-shell"># ./configure --enable-optimizations --with-openssl=/usr/local/openssl
# make
# make install
</code></pre>