<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
<link rel="stylesheet" href="../theme/css/my.css" /><p>[TOC]</p>
<h1>常用命令</h1>
<h2>Linux 统计文件夹下文件个数及目录个数</h2>
<ol>
<li>
<p>统计文件夹下文件的个数
<code>ls -l | grep "^-" | wc -l</code></p>
</li>
<li>
<p>统计文件夹下目录的个数
<code>ls -l | grep "^d" | wc -l</code></p>
</li>
<li>
<p>统计文件夹下文件个数，包括子文件
<code>ls -lR | grep "^-" | wc -l</code></p>
</li>
<li>
<p>统计文件夹下目录个数，包括子目录
<code>ls -lR | grep "^d" | wc -l</code></p>
</li>
</ol>
<p>wc命令： (Word Count)功能为统计指定文件中的字节数、字数、行数，并将统计结果显示输出。</p>
<p>wc [-lcw]</p>
<p>-c 统计字节数
-l 统计行数
-m 统计字符数，此标志不能与-c标志一起使用
-w 统计字数。一个字定义为由空白、跳格或换行字符分隔的字符串</p>
<h2>使用ps/awk杀死进程</h2>
<pre><code class="language-shell">#!/bin/bash
# Grabs and kill a process from the pidlist that has the word myapp
​
pid=`ps aux | grep myapp | awk '{print $2}'`
kill -9 $pid
</code></pre>
<h2>查看程序端口占用情况</h2>
<p>netstat   -anp   |   grep  portno
即：netstat –apn | grep 8080</p>
<p>其中最后一栏是 * PID/Program name *</p>
<h2>查看linux磁盘空间容量</h2>
<p>查看磁盘使用情况
df -lh</p>
<p>查看目录的磁盘占用情况
du -sh * | sort -h</p>
<p>crontab</p>
<p>Ubuntu查看crontab运行日志</p>
<p>修改rsyslog文件，将/etc/rsyslog.d/50-default.conf 文件中的#cron.*前的#删掉；
重启rsyslog服务service rsyslog restart；
重启cron服务service cron restart</p>
<h2>ssh 证书登录</h2>
<ol>
<li>在windows下，创建 <code>~\.ssh</code> 目录；</li>
<li>在<code>~\.ssh</code>下，执行<code>ssh-keygen -t rsa</code>，生成私钥 <code>id_rsa</code>, 公钥 <code>id_rsa.pub</code>;</li>
<li>将公钥 <code>id_rsa.pub</code> 拷贝到 linux 的 <code>~/.ssh</code> 目录下，改名为 <code>authorized_keys</code>；</li>
<li>修改 ssh 配置是否开启证书登录: <code>vi /etc/ssh/sshd_config</code></li>
</ol>
<pre><code class="language-shell">RSAAuthentication yes     # 是否允许用户自行使用成对的密钥系统进行登入行为 version 2
PubkeyAuthentication yes  # 是否允许用户自行使用成对的密钥系统进行登入行为
AuthorizedKeysFile        # 公钥数据路径 用户目录下  .ssh/authorized_keys
</code></pre>
<p>修改完成后， <code>sudo systemctl restart sshd</code> 重启ssh服务；
5. 登录服务器: <code>ssh -i ~\.ssh\id_rsa gjh@10.19.12.12</code></p>
<h2>linux下ssh客户端以及sftp文件传送的一般用法</h2>
<p>linux下ssh客户端以及sftp文件传送的一般用法</p>
<p>以前在windows上，我要用ssh连接服务器，我一般都用putty。
    这段时间一直在linux上工作，由于linux上一般都自带ssh客户端，也就是ssh命令了，此外还有一个命令sftp，用来安全的传送文件，今天为了管理linux服务器，用到了linux下的这两个命令行工具，现就其最常用的用法描述如下：
    假定服务器ip为61.145.34.33，ssh服务的端口号为9186，服务器上有个用户为sshuser；
    用ssh登录服务器的命令为：
    &gt;ssh -l sshuser 61.145.34.33 -p 9186
    回车后，如果是第一次登录，会提示你一条认证信息，你键入yes即可，接着输入服务器sshuser的密码登录即可；</p>
<pre><code>用sftp登录服务器的命令为：
&gt;sftp -oPort=9186 sshuser@61.145.34.33
回车后，输入服务器sshuser的密码登录，然后会显示一个sftp&gt;的环境，这个时候，键入help你会看到所有命令的帮助，跟ftp命令行工具非常类似，比如get,put等等。

至于这两个命令行的其他用法，可参看其联机手册...
</code></pre>
<h2>修改home下的中文目录为英文目录</h2>
<p>在终端下输入命令：
     export LANG=en_US
     xdg-user-dirs-gtk-update
这个时候会弹出一个配置界面，提示是否将中文目录切换为英文目录。选中不再提示，确定。系统会删除没有内容的中文目录，而有内容的目录会保持。并创建8个相应的英文目录如下：“Desktop”、“Download”、“Templates”、“Public”、“Documents”、“Music”、“Pictures”、“Videos”。此时，您在“位置”里看到的常用中文目录已经变成英文目录。只需要将原中文目录的内容拷贝到相应英文目录，并删除中文目录即可。
接下来再执行
     export LANG=zh_CN.UTF-8
以显示中文。</p>
<p>OK，行了，三个命令就行。可就为一次改变要记三个命令，也麻烦。能不能不记啦。当然可以，那您注销，然后在登录界面选择语言种类为“English(united states)”，进入系统后你就发现整个系统都变成English了，同时还会弹出一个对话框提示是否切换用户目录，选择“Update names”，确认并再注销，在登录界面选择“汉语”，进入系统后事个系统又变成了Chinese了，同样会弹出同一个对话框，选择"Keep old names"。OK，大功告成，一个命令都不需要记，就可完成您想要的结果。</p>
<h2>分区方案</h2>
<p>/boot    200M    Linux的内核及引导系统程序所需要的文件，比如 vmlinuz initrd.img文件都位于这个目录中。在一般情况下，GRUB或LILO系统引导管理器也位于这个目录；启动撞在文件存放位置，如kernels，initrd，grub。</p>
<p>/              100G    用于存储系统文件
/home    200G    用户工作目录；个人配置文件，如个人环境变量等；所有账号分配一个工作目录。
swap是内存的两倍</p>
<h2>find</h2>
<pre><code class="language-shell">
find . -name .gradle -exec rm -rf {} \;

find . -type f -exec ls -l {} \;

</code></pre>
<h2>linux解压缩命令</h2>
<p>tar</p>
<p>-c: 建立压缩档案
-x：解压
-t：查看内容
-r：向压缩归档文件末尾追加文件
-u：更新原压缩包中的文件</p>
<p>这五个是独立的命令，压缩解压都要用到其中一个，可以和别的命令连用但只能用其中一个。下面的参数是根据需要在压缩或解压档案时可选的。</p>
<p>-z：有gzip属性的
-j：有bz2属性的
-Z：有compress属性的
-v：显示所有过程
-O：将文件解开到标准输出</p>
<p>下面的参数-f是必须的</p>
<p>-f: 使用档案名字，切记，这个参数是最后一个参数，后面只能接档案名。</p>
<p>压缩</p>
<p>tar –cvf jpg.tar *.jpg //将目录里所有jpg文件打包成tar.jpg</p>
<p>tar –czf jpg.tar.gz *.jpg   //将目录里所有jpg文件打包成jpg.tar后，并且将其用gzip压缩，生成一个gzip压缩过的包，命名为jpg.tar.gz</p>
<p>tar –cjf jpg.tar.bz2 *.jpg //将目录里所有jpg文件打包成jpg.tar后，并且将其用bzip2压缩，生成一个bzip2压缩过的包，命名为jpg.tar.bz2</p>
<p>tar –cZf jpg.tar.Z *.jpg   //将目录里所有jpg文件打包成jpg.tar后，并且将其用compress压缩，生成一个umcompress压缩过的包，命名为jpg.tar.Z</p>
<p>rar a jpg.rar *.jpg //rar格式的压缩，需要先下载rar for linux</p>
<p>zip jpg.zip *.jpg //zip格式的压缩，需要先下载zip for linux</p>
<p>解压</p>
<p>1、<em>.tar 用 tar –xvf 解压
2、</em>.gz 用 gzip -d或者gunzip 解压
3、<em>.tar.gz和</em>.tgz 用 tar –xzf 解压
4、<em>.bz2 用 bzip2 -d或者用bunzip2 解压
5、</em>.tar.bz2用tar –xjf 解压
6、<em>.Z 用 uncompress 解压
7、</em>.tar.Z 用tar –xZf 解压
8、<em>.rar 用 unrar e解压
9、</em>.zip 用 unzip 解压</p>
<h2>nohup命令</h2>
<p>该命令的一般形式为：<code>nohup command &amp;</code></p>
<p>如果使用nohup命令提交作业，那么在缺省情况下该作业的所有输出都被重定向到一个名为 nohup.out的文件中，除非另外指定了输出文件：
  <code>nohup command &gt; myout.file 2&gt;&amp;1 &amp;</code>
  在上面的例子中，输出被重定向到myout.file文件中。
  使用 jobs 查看任务。
  使用 fg %n 关闭。</p>
<h2>添加sudoer</h2>
<p>1）进入超级用户模式。也就是输入"su -",系统会让你输入超级用户密码，输入密码后就进入了超级用户模式。（当然，你也可以直接用root用）
2）添加文件的写权限。也就是输入命令"chmod u+w /etc/sudoers"。
3）编辑/etc/sudoers文件。也就是输入命令"vim /etc/sudoers",输入"i"进入编辑模式，找到这一 行："root ALL=(ALL) ALL"在起下面添加"xxx ALL=(ALL) ALL"(这里的xxx是你的用户名)，然后保存（就是先按一 下Esc键，然后输入":wq"）退出。
4）撤销文件的写权限。也就是输入命令"chmod u-w /etc/sudoers"。 </p>
<h1>Linux的文件权限与目录配置</h1>
<ul>
<li><strong>使用者与群组</strong></li>
</ul>
<p><img alt="" src="_v_images/2019-11-18-21-04-32.png" /></p>
<p>帐号 --&gt; /etc/passwd
密码 --&gt; /etc/shadow
group --&gt; /etc/group</p>
<ul>
<li><strong>文件属性</strong></li>
</ul>
<p><img alt="" src="_v_images/2019-11-18-21-04-54.png" /></p>
<p>系统默认语系 --&gt; /etc/sysconfig/i18n</p>
<p><code>改变文件属怅不权限</code></p>
<ul>
<li>chgrp ：改变所属群组   --&gt; chgrp  groupname filename</li>
<li>chown ：改变拥有者     --&gt; chown [-R] 账号名称 filename/dir;   chown [-R] 账号名称:组名 filename/dir </li>
<li>chmod ：改变权限, SUID, SGID, SBIT 等</li>
</ul>
<p>r:4
w:2
x:1 </p>
<pre><code class="language-shell">chmod 777 .bashrc
chmod  u/g/o/a  +/-/=  rwx   filename/dir
chmod  u=rwx,go=rx  .bashrc
</code></pre>
<p>将权限去掉而保留已存在的权限？如：要拿掉全部人的可执行权限
<code>chmod  a-x  .bashrc</code></p>
<p><img alt="" src="_v_images/2019-11-18-21-06-39.png" /></p>
<ul>
<li><strong>Linux更改文件拥有者|chown命令用法</strong></li>
</ul>
<p>http://www.isstudy.com/linux/4123.html</p>
<p>chown [-R] 账户名称：用户组名称、文件或目录</p>
<p>参数：
-R ：进行递归的持续更改，即将同子目录下的所有文件、目录都更新问这个用户组。通常用在更改某一目录的情况。
范例：</p>
<pre><code class="language-shell"> [root@linux ~]#chown bin install.log
[root@linux ~]#ls –l
-rw-r--r--  1  bin  users  24343 Jun 23 08:33  install.log
[root@linux ~]#chown  root:root  install.log
[root@linux ~]#ls  -l

-rw-r--r--  1  root  root  24343 Jun 23 08:33  install.log
</code></pre>