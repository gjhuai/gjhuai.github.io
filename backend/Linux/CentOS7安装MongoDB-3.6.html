<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
<link rel="stylesheet" href="../theme/css/my.css" /><p>[TOC]</p>
<h2>配置yum源</h2>
<p><code>vim /etc/yum.repos.d/mongodb-org-3.6.repo</code></p>
<pre><code class="language-shell">[mongodb-org-3.6]
name=MongoDB Repository
baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.6/x86_64/
gpgcheck=1
enabled=1
gpgkey=https://www.mongodb.org/static/pgp/server-3.6.asc
</code></pre>
<h2>安装与配置</h2>
<ul>
<li>yum安装
<code>yum -y install mongodb-org</code></li>
<li>查看mongodb的位置
<code>whereis mongod</code></li>
<li>创建数据目录与日志目录，并授权
<code>mkdir -p /data/mongodb/data /data/mongodb/logs</code>        # 一般分配到独立的大分区
<code>chown mongod.mongod /data/mongodb/data /data/mongodb/logs -R</code>     #默认是使用mongod执行的，所以需要修改一下目录权限</li>
<li>修改配置
<code>vim /etc/mongod.conf</code></li>
</ul>
<pre><code class="language-shell"># where to write logging data.
systemLog:
  destination: file
  logAppend: true
  path: /data/mongodb/logs/mongod.log # 修改日志文件位置

# Where and how to store data.
storage:
  dbPath: /data/mongodb/data    #修改数据文件存放位置
  journal:
    enabled: true
......
# network interfaces
net:
  port: 27017
  bindIp: 0.0.0.0   #修改监听所有IP的端口
</code></pre>
<h2>启动MongoDB</h2>
<ul>
<li>启动mongodb ：
<code>systemctl start mongod.service</code></li>
<li>停止mongodb ：
<code>systemctl stop mongod.service</code></li>
<li>查到mongodb的状态：
<code>systemctl status mongod.service</code></li>
<li>设置为自启动
<code>systemctl enable mongod.service</code></li>
</ul>
<h2>防火墙设置</h2>
<ul>
<li>开放端口
<code>firewall-cmd --zone=public --permanent --add-port=27017/tcp</code></li>
<li>重启防火墙
<code>firewall-cmd --reload</code></li>
<li>查看端口是否开放
<code>firewall-cmd --zone=public --list-ports</code></li>
</ul>
<h2>用户管理（未试验）</h2>
<ul>
<li>创建验证用户
<code>db.createUser({user:"root",pwd:"rootpassword",roles:[{role:"root",db:"admin"}]})</code></li>
<li>修改配置文件，添加上验证</li>
</ul>
<pre><code class="language-shell">security:
    authorization: enabled
</code></pre>
<ul>
<li>重启mongd服务：<code>systemctl restart mongod.service</code></li>
<li>登录验证
<code>mongo -u root -p rootpassword --authenticationDatabase admin</code></li>
</ul>
<h2>可视化工具</h2>
<ul>
<li>NoSQL Manager for MongoDB : http://dev.snhb.group:82/soft/dev/NoSQLManagerforMongoDB.zip</li>
</ul>