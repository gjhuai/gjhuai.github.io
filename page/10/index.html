<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/10/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-Java/02-Maven常用" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/Java/02-Maven%E5%B8%B8%E7%94%A8/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:11.117Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<h2 id="向repo发布第三方jar"><a href="#向repo发布第三方jar" class="headerlink" title="向repo发布第三方jar"></a>向repo发布第三方jar</h2><p>mvn deploy:deploy-file -DgroupId=com.oracle -DartifactId=ojdbc6 -Dversion=11.2.0.4 -Dpackaging=jar -Dfile=ojdbc6 .jar -DrepositoryId=gm-repo -Durl=<a target="_blank" rel="noopener" href="http://dev.snhb.group:8081/nexus/content/repositories/releases">http://dev.snhb.group:8081/nexus/content/repositories/releases</a></p>
<h2 id="跳过测试"><a href="#跳过测试" class="headerlink" title="跳过测试"></a>跳过测试</h2><p>-DskipTests，不执行测试用例，但编译测试用例类生成相应的class文件至target/test-classes下。<br>-Dmaven.test.skip=true，不执行测试用例，也不编译测试用例类。</p>
<h2 id="常用repository仓库"><a href="#常用repository仓库" class="headerlink" title="常用repository仓库"></a>常用repository仓库</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyun-repo<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>Aliyun repo<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pluginRepositories</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">pluginRepository</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyun-repo<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">pluginRepository</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">pluginRepositories</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="指定编码"><a href="#指定编码" class="headerlink" title="指定编码"></a>指定编码</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 文件拷贝时的编码 --&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span>  </span><br><span class="line"><span class="comment">&lt;!-- 编译时的编码 --&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">maven.compiler.encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">maven.compiler.encoding</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="指定编译的JDK版本"><a href="#指定编译的JDK版本" class="headerlink" title="指定编译的JDK版本"></a>指定编译的JDK版本</h2><p><strong>Setting the -source and -target of the Java Compiler</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="使用atom语法"><a href="#使用atom语法" class="headerlink" title="使用atom语法"></a>使用atom语法</h2><p>mvn io.takari.polyglot:polyglot-translate-plugin:translate -Dinput=pom.xml -Doutput=pom.atom</p>
<h2 id="创建web项目"><a href="#创建web项目" class="headerlink" title="创建web项目"></a>创建web项目</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mvn archetype:generate -DgroupId=&#123;project-packaging&#125;</span><br><span class="line">	-DartifactId=&#123;project-name&#125;</span><br><span class="line">	-DarchetypeArtifactId=maven-archetype-webapp</span><br><span class="line">	-DinteractiveMode=false</span><br><span class="line">或</span><br><span class="line">mvn archetype:generate -DarchetypeArtifactId=maven-archetype-webapp -DinteractiveMode=false -DgroupId=com.cdjdgm -DartifactId=webshell</span><br></pre></td></tr></table></figure>

<h2 id="Dependency-Scope"><a href="#Dependency-Scope" class="headerlink" title="Dependency Scope"></a>Dependency Scope</h2><ul>
<li>compile<br>默认的scope，表示 dependency 都可以在生命周期中使用。而且，这些dependencies 会传递到依赖的项目中。</li>
<li>provided<br>跟compile相似，但是表明了dependency 由JDK或者容器提供，例如Servlet AP和一些Java EE APIs。这个scope 只能作用在编译和测试时，同时没有传递性。        </li>
<li>runtime<br>表示dependency不作用在编译时，但会作用在运行和测试时</li>
<li>test<br>表示dependency作用在测试时，不作用在运行时。</li>
<li>system<br>跟provided 相似，但是在系统中要以外部JAR包的形式提供，maven不会在repository查找它。 </li>
</ul>
<h2 id="发布部署Nexus"><a href="#发布部署Nexus" class="headerlink" title="发布部署Nexus"></a>发布部署Nexus</h2><p>pom.xml文件：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">distributionManagement</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>releases<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://dev.snhb.group:8081/nexus/content/repositories/releases/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">snapshotRepository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://dev.snhb.group:8081/nexus/content/repositories/snapshots/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">snapshotRepository</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">distributionManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>~/.m2/settings.xml:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servers</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">server</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>releases<span class="tag">&lt;/<span class="name">id</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">username</span>&gt;</span>deployment<span class="tag">&lt;/<span class="name">username</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">password</span>&gt;</span>your_pwd<span class="tag">&lt;/<span class="name">password</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;/<span class="name">server</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">servers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="向仓库导入jar包"><a href="#向仓库导入jar包" class="headerlink" title="向仓库导入jar包"></a>向仓库导入jar包</h2><ol>
<li><p>安装到本地库：<br>mvn install:install-file -Dfile=D:\JAR_LIB\pinyin4j-2.5.0.jar -DgroupId=net.sourceforge.pinyin4j -DartifactId=pinyin4j -Dversion=2.5.0 -Dpackaging=jar  -DgeneratePom=true -DcreateChecksum=true</p>
</li>
<li><p>安装到私服<br>mvn deploy:deploy-file -Dfile=pinyin4j-2.5.0.jar -DgroupId=net.sourceforge.pinyin4j -DartifactId=pinyin4j -Dversion=2.5.0 -Dpackaging=jar -DrepositoryId=et_nexus_repo -Durl=<a target="_blank" rel="noopener" href="http://10.143.132.66:8081/nexus/content/repositories/thirdparty">http://10.143.132.66:8081/nexus/content/repositories/thirdparty</a></p>
</li>
</ol>
<h2 id="eclipse警告：maven-enforcer-plugin-goal-“enforce”-is-ignored-by-m2e"><a href="#eclipse警告：maven-enforcer-plugin-goal-“enforce”-is-ignored-by-m2e" class="headerlink" title="eclipse警告：maven-enforcer-plugin (goal “enforce”) is ignored by m2e."></a>eclipse警告：maven-enforcer-plugin (goal “enforce”) is ignored by m2e.</h2><p>警告状况描述：<br>父项目使用插件maven-enforcer-plugin，所有子项目中<parent>标签处均会提示maven-enforcer-plugin (goal “enforce”) is ignored by m2e警告信息。<br>警告引发原因：<br>MyEclipse/Eclipse使用的m2e插件，所以会忽略没有与m2e插件关联的maven插件，从而造成警告信息。<br>警告解决方法：<br>为父项目加入lifecycle-mapping插件即可。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">pluginManagement</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- This plugin&#x27;s configuration is used to store Eclipse m2e settings </span></span><br><span class="line"><span class="comment">    only. It has no influence on the Maven build itself. --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.eclipse.m2e<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lifecycle-mapping<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">lifecycleMappingMetadata</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pluginExecutions</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">pluginExecution</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">pluginExecutionFilter</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-enforcer-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">versionRange</span>&gt;</span>[1.0.0,)<span class="tag">&lt;/<span class="name">versionRange</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">goal</span>&gt;</span>enforce<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">pluginExecutionFilter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">ignore</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">pluginExecution</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">pluginExecutions</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">lifecycleMappingMetadata</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">pluginManagement</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/Java/02-Maven%E5%B8%B8%E7%94%A8/" data-id="ckqg285st0009rcfpd5ap9ik6" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Java/01-gradle常识" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/Java/01-gradle%E5%B8%B8%E8%AF%86/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:11.116Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<h1 id="Gradle介绍"><a href="#Gradle介绍" class="headerlink" title="Gradle介绍"></a>Gradle介绍</h1><h2 id="1-纲要"><a href="#1-纲要" class="headerlink" title="1 纲要"></a>1 纲要</h2><h3 id="1-1-项目、文件及目录"><a href="#1-1-项目、文件及目录" class="headerlink" title="1.1 项目、文件及目录"></a>1.1 项目、文件及目录</h3><ul>
<li>build.gradle    主编译文件</li>
<li>gradle.properties    属性文件</li>
<li>settings.gradle    项目配置文件</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">src &#123;	<span class="comment">//目录结构而已，不是代码</span></span><br><span class="line">   main &#123;</span><br><span class="line">       java</span><br><span class="line">       resources</span><br><span class="line">   &#125;</span><br><span class="line">   test &#123;</span><br><span class="line">       java</span><br><span class="line">       resources</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-2-plugin"><a href="#1-2-plugin" class="headerlink" title="1.2 plugin"></a>1.2 plugin</h3><ul>
<li>apply plugin: “java”</li>
<li>apply plugin: “eclipse”</li>
<li>apply plugin: “eclipse-wtp”</li>
<li>apply plugin: “idea”</li>
</ul>
<h3 id="1-3-dependency"><a href="#1-3-dependency" class="headerlink" title="1.3 dependency"></a>1.3 dependency</h3><p>group:name/artifact:version<br>查看：<a target="_blank" rel="noopener" href="http://192.168.0.207:8081/nexus/content/groups/public/">http://192.168.0.207:8081/nexus/content/groups/public/</a></p>
<p>几种Scope： compile, runtime, testCompile, testRuntime</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">apply <span class="attr">plugin:</span> <span class="string">&#x27;java&#x27;</span></span><br><span class="line"></span><br><span class="line">repositories &#123;</span><br><span class="line">    mavenCentral()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">	compile project(<span class="string">&#x27;:shared&#x27;</span>)</span><br><span class="line">	</span><br><span class="line">    testCompile <span class="string">&#x27;junit:junit:4.11&#x27;</span></span><br><span class="line"></span><br><span class="line">    runtime files(<span class="string">&#x27;libs/a.jar&#x27;</span>, <span class="string">&#x27;libs/b.jar&#x27;</span>)</span><br><span class="line">    runtime fileTree(<span class="attr">dir:</span> <span class="string">&#x27;libs&#x27;</span>, <span class="attr">include:</span> <span class="string">&#x27;*.jar&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>排除传递依赖</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">configurations &#123;</span><br><span class="line">    compile.exclude <span class="attr">module:</span> <span class="string">&#x27;commons&#x27;</span></span><br><span class="line">    all*.exclude <span class="attr">group:</span> <span class="string">&#x27;org.gradle.test.excludes&#x27;</span>, <span class="attr">module:</span> <span class="string">&#x27;reports&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    compile(<span class="string">&quot;org.gradle.test.excludes:api:1.0&quot;</span>) &#123;</span><br><span class="line">        exclude <span class="attr">module:</span> <span class="string">&#x27;shared&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    compile (<span class="string">&quot;com.alibaba:dubbo:2.5.3&quot;</span>) &#123; transitive = <span class="literal">false</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>查看依赖Tree： gradle dependencies &gt; dependencies.txt</p>
<h3 id="1-4-task"><a href="#1-4-task" class="headerlink" title="1.4 task"></a>1.4 task</h3><ul>
<li>默认任务</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">E:</span>\gradle_project&gt;gradle build </span><br><span class="line">:compileJava </span><br><span class="line">:processResources </span><br><span class="line">:classes </span><br><span class="line">:jar </span><br><span class="line">:assemble </span><br><span class="line">:compileTestJava </span><br><span class="line">:processTestResources </span><br><span class="line">:testClasses </span><br><span class="line">:test </span><br><span class="line">:check </span><br><span class="line">:build </span><br><span class="line"></span><br><span class="line">BUILD SUCCESSFUL</span><br></pre></td></tr></table></figure>

<ul>
<li>自定义任务<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">task hello &lt;&lt; &#123;		<span class="comment">// &lt;&lt; 向Task的actions集合里添加Action</span></span><br><span class="line">    println <span class="string">&#x27;Hello 2&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">hello.doFirst &#123;</span><br><span class="line">    println <span class="string">&#x27;Hello 1&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">hello.doLast &#123;</span><br><span class="line">    println <span class="string">&#x27;Hello 3&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">hello &lt;&lt; &#123;</span><br><span class="line">    println <span class="string">&#x27;Hello 4&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>指定任务类型</strong> : 通过参数type指定该task的类型后，就可以使用该类型task提供的特殊变量或函数。</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">task copyDocs(<span class="attr">type:</span> Copy) &#123;</span><br><span class="line">    from <span class="string">&#x27;src/main/doc&#x27;</span></span><br><span class="line">    into <span class="string">&#x27;build/target/doc&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Task依赖</strong></p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">task scp(<span class="attr">dependsOn:</span>assemble) &#123;</span><br><span class="line">	......</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">taskX.dependsOn taskY</span><br></pre></td></tr></table></figure>

<h2 id="2-重点"><a href="#2-重点" class="headerlink" title="2 重点"></a>2 重点</h2><h3 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h3><p><code>gradle init --type java-library</code> 创建java项目<br><code>gradle init --type pom</code>   转换maven项目</p>
<h3 id="常用指令"><a href="#常用指令" class="headerlink" title="常用指令"></a>常用指令</h3><ul>
<li>gradle assemble</li>
<li>gradle build</li>
<li>gradle dependencies</li>
<li>gradle clean</li>
<li>gradle jar</li>
<li>gradle war</li>
<li>gradle check</li>
<li>gradle test</li>
<li>gradle classes</li>
</ul>
<h3 id="变量与字符串"><a href="#变量与字符串" class="headerlink" title="变量与字符串"></a>变量与字符串</h3><p>“$username”  vs  ‘$username’</p>
<p>“${project.name}”  vs “$project.name”</p>
<h4 id="常用属性"><a href="#常用属性" class="headerlink" title="常用属性"></a>常用属性</h4><p>project.name 可简写为$name, $name 在Task中表示taskName<br>project.version</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">version = <span class="string">&#x27;1.0&#x27;</span></span><br><span class="line">buildDir = <span class="string">&quot;target&quot;</span></span><br><span class="line"></span><br><span class="line">sourceSets &#123;</span><br><span class="line">    main &#123;</span><br><span class="line">        java &#123;</span><br><span class="line">            srcDir <span class="string">&#x27;src/java&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">        resources &#123;</span><br><span class="line">            srcDir <span class="string">&#x27;src/resources&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        output.resourcesDir = <span class="string">&quot;$&#123;buildDir&#125;/classes/main&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="定义属性"><a href="#定义属性" class="headerlink" title="定义属性"></a>定义属性</h3><p>查看属性： gradle properties</p>
<ul>
<li>System Properties : 指JVM的system properties<br>  gradle xxx -DmySystemProp=xxxx</li>
<li>Project Properties : Gradle专门为Project定义的属性<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gradle xxx -PmyProjectProp=xxxxx</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (project.hasProperty(<span class="string">&quot;profile&quot;</span>)) &#123;</span><br><span class="line">       <span class="comment">//System.setProperty(&quot;spring.profiles.active&quot;, project[&quot;profile&quot;])</span></span><br><span class="line">       profile = project[<span class="string">&quot;profile&quot;</span>]</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></li>
<li>Ext Properties : 动态属性<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ext &#123;</span><br><span class="line">    <span class="keyword">if</span> (project.hasProperty(<span class="string">&quot;profile&quot;</span>)) &#123;</span><br><span class="line">        profile = project[<span class="string">&quot;profile&quot;</span>]</span><br><span class="line">    &#125; <span class="keyword">else</span>  &#123;</span><br><span class="line">        profile = <span class="string">&quot;dev&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    profiles =  [<span class="string">&quot;dev&quot;</span>, <span class="string">&quot;prod&quot;</span>, <span class="string">&quot;demo&quot;</span>]</span><br><span class="line"></span><br><span class="line">    serverRoot = <span class="string">&quot;tomcat_dip&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="多项目构建"><a href="#多项目构建" class="headerlink" title="多项目构建"></a>多项目构建</h3><ul>
<li><p>多项目定义及结构<br>settings.gradle</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">include <span class="string">&#x27;dip-appbox-service&#x27;</span></span><br><span class="line">include <span class="string">&#x27;dip-appbox-web&#x27;</span></span><br><span class="line"></span><br><span class="line">include <span class="string">&#x27;idbp-res&#x27;</span>; project(<span class="string">&quot;:idbp-res&quot;</span>).projectDir = file(<span class="string">&quot;../idbp-res&quot;</span>)</span><br><span class="line">include <span class="string">&#x27;idbp-portal&#x27;</span>; project(<span class="string">&quot;:idbp-portal&quot;</span>).projectDir = file(<span class="string">&quot;../idbp-core/idbp-portal&quot;</span>)</span><br></pre></td></tr></table></figure></li>
<li><p>多项目的集中配置</p>
<ul>
<li>allprojects{xxx} 这段代码表示，对于所有的project</li>
<li>subprojects{xxxx}的这段代码表示，对于所有的子project</li>
<li>project(‘:core’){xxxx}</li>
</ul>
</li>
<li><p>多项目的Task执行</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">allprojects&#123;</span><br><span class="line">	task hello &lt;&lt;&#123;</span><br><span class="line">		println <span class="string">&quot;hello world&quot;</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>gradle hello : 在所有项目上执行<br>gradle :core:hello : 仅在core项目上执行，等效于进入core项目根目录，直接执行gradle hello</p>
<h3 id="包含文件"><a href="#包含文件" class="headerlink" title="包含文件"></a>包含文件</h3><p>apply from: “./libraries.gradle”</p>
<h3 id="几个常用插件"><a href="#几个常用插件" class="headerlink" title="几个常用插件"></a>几个常用插件</h3><p>apply plugin: ‘maven-publish’</p>
<p>scp</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">configurations &#123;</span><br><span class="line">    sshAntTask</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">	sshAntTask <span class="string">&quot;org.apache.ant:ant-jsch:1.7.1&quot;</span>, <span class="string">&quot;jsch:jsch:0.1.29&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">task scp(<span class="attr">dependsOn:</span>assemble) &#123;</span><br><span class="line">    doLast  &#123;</span><br><span class="line">    	ant.taskdef(<span class="attr">name:</span> <span class="string">&#x27;sshexec&#x27;</span>,</span><br><span class="line">        	<span class="symbol">classname:</span> <span class="string">&#x27;org.apache.tools.ant.taskdefs.optional.ssh.SSHExec&#x27;</span>,</span><br><span class="line">        	<span class="symbol">classpath:</span> project.configurations.sshAntTask.asPath)</span><br><span class="line">        ant.sshexec(<span class="attr">host:</span> <span class="string">&quot;$&#123;serverIP&#125;&quot;</span>, <span class="attr">username:</span> <span class="string">&quot;$&#123;serverAccount&#125;&quot;</span>, <span class="attr">password:</span> <span class="string">&quot;$&#123;serverPwd&#125;&quot;</span>,</span><br><span class="line">        	<span class="symbol">command:</span> <span class="string">&quot;cd $&#123;serverRoot&#125;/appbox/; /bin/bash -l ./shutdown.sh; rm -rf webapps/ROOT*; rm -rf work;&quot;</span>, <span class="attr">trust:</span> <span class="string">&#x27;true&#x27;</span>, <span class="attr">failonerror:</span> <span class="string">&#x27;true&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        ant.taskdef(</span><br><span class="line">            <span class="symbol">name:</span> <span class="string">&quot;scp&quot;</span>,</span><br><span class="line">            <span class="symbol">classname:</span> <span class="string">&quot;org.apache.tools.ant.taskdefs.optional.ssh.Scp&quot;</span>,</span><br><span class="line">            <span class="symbol">classpath:</span> configurations.sshAntTask.asPath)</span><br><span class="line"></span><br><span class="line">        ant.scp(<span class="attr">todir:</span> <span class="string">&quot;$&#123;serverAccount&#125;:$&#123;serverPwd&#125;@$&#123;serverIP&#125;:~/$&#123;serverRoot&#125;/appbox/webapps&quot;</span>, <span class="attr">trust:</span> <span class="literal">true</span>)&#123;</span><br><span class="line">            fileset(<span class="attr">dir:</span> <span class="string">&quot;$&#123;project.buildDir&#125;/libs&quot;</span>) &#123;</span><br><span class="line">                include(<span class="attr">name:</span> <span class="string">&quot;**/*.war&quot;</span>)      <span class="comment">// in as a parameter to the</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ant.sshexec(<span class="attr">host:</span> <span class="string">&quot;$&#123;serverIP&#125;&quot;</span>, <span class="attr">username:</span> <span class="string">&quot;$&#123;serverAccount&#125;&quot;</span>, <span class="attr">password:</span> <span class="string">&quot;$&#123;serverPwd&#125;&quot;</span>,</span><br><span class="line">            <span class="symbol">command:</span> <span class="string">&quot;cd $&#123;serverRoot&#125;/appbox/;/bin/bash -l ./startup.sh&quot;</span>, <span class="attr">trust:</span> <span class="string">&#x27;true&#x27;</span>, <span class="attr">failonerror:</span> <span class="string">&#x27;true&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/Java/01-gradle%E5%B8%B8%E8%AF%86/" data-id="ckqg285st0008rcfp0qfig9gu" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Doing/职责" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/Doing/%E8%81%8C%E8%B4%A3/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:11.110Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="JD"><a href="#JD" class="headerlink" title="JD"></a>JD</h1><ul>
<li>职位描述：<ul>
<li>技术<ul>
<li>战略规划：参与部门的发展战略规划，依据发展战略负责部门技术方向研究和总体规划，负责技术层面的管理工作；</li>
<li>1、 技术规划：结合业务发展需求和现状，制定技术发展战略、对系统架构发展进行规划、组织制定和实施重大技术决策和方案；</li>
<li>3、 技术架构设计：带领技术团队设计与实现产品的技术架构，主导架构评审，保障技术的合理性与可行性；解决目前部门已使用技术框架中存在的问题并进行有效优化；负责部门软件构件库的搭建、第三方控件的选型；</li>
</ul>
</li>
<li>管理<ul>
<li>2、 流程规范制定：主导制定并持续优化研发工作流程和规范，保证高效率高质量的技术产出，促进技术成果的沉淀共享，确保技术成果的有效性和持续性；</li>
<li>4、 目标制定：负责研发部门整体目标制定，推进团队目标、个人目标和工作计划的制定和落地执行；</li>
<li>5、 团队建设：负责技术团队的招聘、建设、培养，提升团队的工作质量、效率和技术能力，优化项目人员结构，明确职责，定期进行技术培训或分享；</li>
</ul>
</li>
<li>6、 保障业务：最大程度支撑部门产品的技术实现和稳定运行，力求技术稳定性和先进性为部门发展提供动力，容量规划预备业务的快速增长；完成各项技术工作相关数据统计分析报告，并据此对部门发展提出合理化建议；</li>
<li>7、 新技术研究：研究部门战略发展相关最新产品和技术的发展方向，调研与产品相符的最新技术，并在系统中使用以提升产品体验。</li>
<li>8、 完成上级领导交办的其他工作；</li>
</ul>
</li>
<li>职位要求：<ul>
<li>1、 8 年以上开发经验，3 年以上的 Java 开发经验；</li>
<li>2、 具备良好的基本功，熟练使用基本的数据结构和算法，深入理解多线程、socket 等相关技术；</li>
<li>3、 熟练掌握 Spring 等主流的开发框架，深入理解框架实现原理及特性；</li>
<li>4、 具备良好的编码习惯，结构清晰，命名规范，逻辑性强，代码冗余率低；</li>
<li>5、 熟悉 Java 的高级特性，深入理解各种设计模式和应用场景；</li>
<li>6、 有大规模分布式系统的开发和高可用相关的实践经验，具备设计复杂系统的能力；</li>
<li>7、 熟练掌握 Mongodb 数据库，具备 Mongodb 索引优化、查询优化、分库分表优化、数据库备份还原应用的能力；</li>
<li>8、 熟练掌握 MySql 数据库，具备 MySql 索引优化、查询优化、分库分表优化、数据库备份还原应用的能力；</li>
<li>9、 熟练掌握一种以上非关系型数据库，理解其使用场景及限制，如：Redis、Memcached 等；</li>
<li>10、 熟悉分布式系统，熟练掌握一种以上服务框架和消息中间件，如：kafka，了解其实现原理；</li>
<li>11、 熟悉负载均衡和 HA 的基本原理，熟练掌握一种以上的 HA 框架，如：ZooKeeper、KeepAlived、LVS、DNAT、SNAT 等；</li>
<li>12、 熟悉前端开发基本原理，熟练掌握一种以上的 web 框架，如：React、Vue、Angulard；</li>
<li>13、 对 BIM、GIS 有相关开发经验者优先；</li>
<li>14、 具有团队精神和责任感，自驱力强，对技术有持续的热情；</li>
<li>15、 具有 10 人以上团队管理经验；</li>
<li>16、 统招 211、985 重点大学研究生以上学历；</li>
</ul>
</li>
</ul>
<h1 id="如何学习新技术？"><a href="#如何学习新技术？" class="headerlink" title="如何学习新技术？"></a>如何学习新技术？</h1><ul>
<li>快速了解：看视频，入门 blog，专题 blog。</li>
<li>解读代码：去搞清楚每一行代码，并笔记记录。<ul>
<li>代码选择：github 上的 code tutrial 库最佳，零散代码亦可。</li>
<li>不是为了保留代码，是为了记住、理解代码。</li>
<li>code tutorial 库可长期维护，温故知新。</li>
</ul>
</li>
<li>系统学习：看书，做笔记。<ul>
<li>在掌握技术的用法后，看一本书（不要太多的书）系统的梳理知识点。</li>
</ul>
</li>
</ul>
<h1 id="听娱乐"><a href="#听娱乐" class="headerlink" title="听娱乐"></a>听娱乐</h1><ul>
<li>NCE 英文歌</li>
<li>听书籍，拒绝碎片化</li>
<li>听广播</li>
</ul>
<h1 id="面试问题集"><a href="#面试问题集" class="headerlink" title="面试问题集"></a>面试问题集</h1><ul>
<li>1、JVM 内存模型、GC 垃圾回收</li>
<li>2、JVM 问题定位，调试</li>
<li>3、Tomcat 及 JVM 调优</li>
</ul>
<h1 id="TODO-LIST"><a href="#TODO-LIST" class="headerlink" title="TODO-LIST"></a>TODO-LIST</h1><ul>
<li>弄清这几个接口干什么用的 <code>GenericFilterBean implements Filter, BeanNameAware, EnvironmentAware, EnvironmentCapable, ServletContextAware, InitializingBean, DisposableBean</code></li>
<li>智能报表</li>
<li>flutter 的学习</li>
<li>Spring Cloud 学习</li>
<li>MySQL 主从，读写分离</li>
<li>TOGAF 咨询方案，企业架构学习</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/Doing/%E8%81%8C%E8%B4%A3/" data-id="ckqg285sr0007rcfpf72l9oae" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Doing/挖矿的7个步骤" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/Doing/%E6%8C%96%E7%9F%BF%E7%9A%847%E4%B8%AA%E6%AD%A5%E9%AA%A4/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:11.109Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="步骤一：发起交易"><a href="#步骤一：发起交易" class="headerlink" title="步骤一：发起交易"></a>步骤一：发起交易</h1><ul>
<li>用户进入钱包，执行一个交易操作，他将一个加密货币或者一个 token 发送给另一个用户。</li>
</ul>
<h1 id="步骤二：进入交易池"><a href="#步骤二：进入交易池" class="headerlink" title="步骤二：进入交易池"></a>步骤二：进入交易池</h1><ul>
<li>现在这个交易被钱包广播，等待区块链上的矿工们来拾取它。在被拾取前，它会一直在“未确认交易池”中等待。</li>
<li>所有等待被处理的交易都会在未确认交易池中，未确认交易池不是网络上的一个巨大的池，而是很多小的分散在矿工本地的缓存池。</li>
</ul>
<h1 id="步骤三：确认待打包的交易"><a href="#步骤三：确认待打包的交易" class="headerlink" title="步骤三：确认待打包的交易"></a>步骤三：确认待打包的交易</h1><ul>
<li>区块链网络上的矿工(有时叫节点，但不完全一样)从未确认交易池中选择交易打包成数据块。除了一些额外的元数据外，数据块基本上就是交易数据(此时仍然是未确认交易)。每个矿工打包它们拾取的交易数据块，多个矿工可以选择同样的交易数据打包。例如，两个矿工，矿工 A 和矿工 B 都决定打包交易 X。</li>
<li>每个区块链对数据块都有最大限制。在比特币区块链上，这个最大值是 1MB。</li>
<li>在打包交易前，矿工需要先根据区块链的历史数据检查这个交易是否有资格被打包。根据区块链历史数据记录，如果支付者的钱包里有足够的余额，这笔交易被认为是有效的，并且可以被打包上链。</li>
<li>假如一个比特币持有者想要加速他的交易进度，他可以选择支付更高的挖矿奖励。矿工通常会优先打包这些支付更高挖矿奖励的交易。</li>
</ul>
<h1 id="步骤四：计算签名出块"><a href="#步骤四：计算签名出块" class="headerlink" title="步骤四：计算签名出块"></a>步骤四：计算签名出块</h1><ul>
<li>矿工的工作就是选择交易数据并打包成块。要把这些块添加到区块链上(这意味着让区块链上所有节点都接受这个块的数据)，这个数据块首先需要签名(也叫“工作证明”)。这个签名是在解决了一个非常复杂的数学问题后得到的，这个签名是独一无二的。每个区块需要解决的数学问题难度是一样的。为了解决这个数学问题，需要耗费相当多的算力(所以，要消耗相当多的电力)。这个过程就被叫做挖矿。如果你想知道更多关于这个问题的内容，请继续阅读，如果你只想简单了解一下，请跳到# 步骤五。</li>
<li>挖矿即哈希(工作量证明)</li>
<li>矿工在打包块时需要解决的数学问题实际上就是找到一个以一定量的零开头的哈希函数的输出结果(就是签名)。这听起来很复杂对吗？但是它并不难理解。</li>
<li>开始之前，我们需要先了解一下什么是哈希函数。哈希函数很难解，但其结果非常容易验证。</li>
<li>哈希函数的输入值可以是任意字符串，随机输出一个 32 位的字母和数字的字符串。如果输入中有任何一点小小的变动，输出也将会随机改变。然而，同样的输入字符串只会得到同样的输出。</li>
<li>矿工要打包的交易数据就是一个字符串，将它进行哈希计算，就会得到一个 32 位的输出值。比特币区块链有一个规则，要求打包的数据块签名必须以一定数量的零开头。然而哈希计算的输出值是对它的每个输入值都是随机的，那么，输入的字符串哈希后没有得到这么多零开头的值怎么办呢？这就是为什么矿工需要不断的去改变块里面一个叫”nonce”的值，每改变一次 nonce 的值，就会改变块的数据，哈希运算后得到的签名也会不一样，也就是，每改变一次 nonce 的值，就会得到一个全新的签名。</li>
<li>矿工无限次重复改变 nonce 的值，直到得到一个符合要求的签名。</li>
<li>下图例子中，签名是以 7 个零开头的。但是具体需要多少个零，取决于区块链上的区块难度。区块难度的问题相对要难一些，所以我建议你先收藏 block difficulty 。</li>
<li>这就是矿工们为什么需要为它们打包的数据块找到一个合格的签名，也是需要那么多算力来解决这个数学问题的原因。试想一下需要这么多次更改 nonce 值并计算需要多少时间和算力呀。此外，当更多的矿工加入到区块链，哈希运算的难度也将增加并且会导致更高的电费支出。现在我们继续第五# 步。</li>
<li>注意：此过程实际上不是定义为数学问题，而是定义确定性问题 - 计算机对数字执行预先确定的操作，以查看输出是否可取。</li>
</ul>
<h1 id="步骤五：广播区块"><a href="#步骤五：广播区块" class="headerlink" title="步骤五：广播区块"></a>步骤五：广播区块</h1><ul>
<li>矿工找到了一个合格的签名，他就可以向其他所有矿工广播他的数据块和签名。</li>
</ul>
<h1 id="步骤六：验证区块"><a href="#步骤六：验证区块" class="headerlink" title="步骤六：验证区块"></a>步骤六：验证区块</h1><ul>
<li>其他矿工现在要确认通过广播收到的数据块的签名合法性，他们要对这个数据块进行哈希运算检查它是否输出一个以这么多零开头的签名。如果检查通过，其他矿工就会认为这个数据块有效，并且同意将它添加到区块链上(他们达成了共识，即他们所有矿工都同意彼此，所以术语叫共识算法)。这也是“工作量证明”的来源。签名就是矿工工作的证明(已花费的算力)，现在，数据块可以加到区块链上了，并且分发到网络上所有其他节点。只要这个数据块中的所有交易数据都跟区块链上的历史数据符合，其他节点将接收这个数据块并将其保存。</li>
</ul>
<h1 id="步骤七"><a href="#步骤七" class="headerlink" title="步骤七"></a>步骤七</h1><ul>
<li>当一个数据块被添加到区块链上后，这条区块链上的所有块都认为它是正确的。例如，我的交易包含在第 502 号块中，并且这条区块链现在最长是第 507 号块，它的意思就是说我的交易数据被确认过 5 次(507-502)。它被认为是正确的，因为每次有其他块上链的时候，区块链都会就所有交易记录达成共识，包括你的交易和你的块。你可以说，到这个时候，你交易已经被确认了 5 次。这也是 Etherscan 在显示交易详细信息时所指的。你的交易被确认的次数越多(即嵌入区块链越深)，攻击者就越难更改它。</li>
<li>每当新的交易加入到区块链，所有矿工都需要从第三# 步重新开始，打包一个新的交易数据块。</li>
<li>在完成一个块上链前，矿工们不能继续挖矿。</li>
<li>1、它可能包含已添加到区块链上已经确认过的交易(请记住，多个矿工可以选择同一个交易数据处理)，任何重新发起的交易都可能导致它们无效，因为支付者的余额可能已经不足。</li>
<li>2、每个块都需要将区块链上的最后一个块的哈希签名添加到到他们自己的元数据中。这也是让数据块链起来的原因。假如一个矿工打包的是已经上链的块，其他矿工会注意到它的签名和区块链上最后一个数据块对不上，并且会拒绝这个块。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/Doing/%E6%8C%96%E7%9F%BF%E7%9A%847%E4%B8%AA%E6%AD%A5%E9%AA%A4/" data-id="ckqg285sq0006rcfpcoyu1fgk" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Doing/工作日志" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/Doing/%E5%B7%A5%E4%BD%9C%E6%97%A5%E5%BF%97/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:11.108Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Golang"><a href="#Golang" class="headerlink" title="Golang"></a>Golang</h1><h2 id="Go-modules使用步骤："><a href="#Go-modules使用步骤：" class="headerlink" title="Go modules使用步骤："></a>Go modules使用步骤：</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/fly910905/article/details/104297446#Go%20modules%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4%EF%BC%9A">https://blog.csdn.net/fly910905/article/details/104297446#Go%20modules%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4%EF%BC%9A</a></p>
<p>go mod init<br>go mod tidy<br>go mod verify<br>go mod vendor</p>
<h1 id="golang如何将interface转为int-string-slice-struct等类型"><a href="#golang如何将interface转为int-string-slice-struct等类型" class="headerlink" title="golang如何将interface转为int, string, slice, struct等类型"></a>golang如何将interface转为int, string, slice, struct等类型</h1><p><a target="_blank" rel="noopener" href="http://www.fidding.me/article/99">http://www.fidding.me/article/99</a></p>
<h1 id="Spring-Boot"><a href="#Spring-Boot" class="headerlink" title="Spring Boot"></a>Spring Boot</h1><ul>
<li><p>＠EnableAutoConfiguration<br>通过＠EnableAutoConfiguration 启用 Spring 应用程序上下文的自动配 ，这个注解会导人一个 EnableAutoConfigurationlmportSelector 的类，而 AutoConfigurationlmportSelector这个类会去读取一个 spring.factories下 key 为 EnableAutoConfiguration 对应的类全限定名的值。</p>
</li>
<li><p>exclude 一个AutoConfiguration<br>在<code>application.properties</code>文件加入下面这行。<br><code>spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration</code></p>
</li>
</ul>
<p>或者<br><code>@EnableAutoConfiguration(exclude=SecurityAutoConfiguration.class)</code><br>@SpringBootApplication 的exclude 不起作用。</p>
<ul>
<li>@EnableConfigurationProperties</li>
</ul>
<h1 id="Yapi安装启动"><a href="#Yapi安装启动" class="headerlink" title="Yapi安装启动"></a>Yapi安装启动</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mkdir yapi</span><br><span class="line">cd yapi</span><br><span class="line">git clone https://github.com/YMFE/yapi.git vendors //或者下载 zip 包解压到 vendors 目录（clone 整个仓库大概 140+ M，可以通过 `git clone --depth=1 https://github.com/YMFE/yapi.git vendors` 命令减少，大概 10+ M）</span><br><span class="line">cp vendors/config_example.json ./config.json //复制完成后请修改相关配置</span><br><span class="line">cd vendors</span><br><span class="line">npm install --production --registry https://registry.npm.taobao.org</span><br><span class="line">npm run install-server //安装程序会初始化数据库索引和管理员账号，管理员账号名可在 config.json 配置</span><br><span class="line">node server/app.js //启动服务器后，请访问 127.0.0.1:&#123;config.json配置的端口&#125;，初次运行会有个编译的过程，请耐心等候</span><br></pre></td></tr></table></figure>

<h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><p>启动yapi:  /home/dyys/my-yapi/start-yapi.sh</p>
<p>利用pm2方便服务管理维护。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">npm install pm2 -g  //安装pm2</span><br><span class="line">cd  &#123;项目目录&#125;</span><br><span class="line">pm2 start &quot;vendors/server/app.js&quot; --name yapi //pm2管理yapi服务</span><br><span class="line">pm2 info yapi //查看服务信息</span><br><span class="line">pm2 stop yapi //停止服务</span><br><span class="line">pm2 restart yapi //重启服务</span><br></pre></td></tr></table></figure>

<h1 id="安装gitweb"><a href="#安装gitweb" class="headerlink" title="安装gitweb"></a>安装gitweb</h1><p>参考：<br><a target="_blank" rel="noopener" href="http://aandds.com/blog/tool-fcgiwrap.html">fcgiwrap和nginx安装</a></p>
<p><a target="_blank" rel="noopener" href="https://windard.com/blog/2020/06/26/Linux-Service">Systemctl用法详解</a></p>
<h2 id="安装和配置fcgiwrap"><a href="#安装和配置fcgiwrap" class="headerlink" title="安装和配置fcgiwrap"></a>安装和配置fcgiwrap</h2><ul>
<li>安装： <code>yum install fcgiwrap</code></li>
<li>启动：<code>systemctl status fcgiwrap.service</code></li>
</ul>
<p>文件 <code>/lib/systemd/system/fcgiwrap.service</code> ：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Simple CGI Server</span><br><span class="line">After=nss-user-lookup.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">EnvironmentFile=/etc/sysconfig/fcgiwrap</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">ExecStart=/usr/sbin/fcgiwrap <span class="variable">$&#123;DAEMON_OPTS&#125;</span> -c <span class="variable">$&#123;DAEMON_PROCS&#125;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 方式一：nohup fcgiwrap -f -c 4 -s unix:/run/fcgiwrap.socket &amp; ：nginx和web服务必须是一台电脑</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 方式二：nohup fcgiwrap -f -c 4 -s tcp:0.0.0.0:9000 &amp; ：两台电脑</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动 2 个 fcgiwrap worker 进程</span></span><br><span class="line">ExecStart=/usr/sbin/fcgiwrap -f -c 2 -s unix:/run/fcgiwrap.socket</span><br><span class="line"><span class="meta">#</span><span class="bash"> 暂停1秒，等待 /run/fcgiwrap.socket 生成</span></span><br><span class="line">ExecStartPost=/bin/sleep 1</span><br><span class="line">ExecStartPost=/usr/bin/chown nginx:nginx /run/fcgiwrap.socket</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">User=nginx</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Group=nginx</span></span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line"><span class="meta">#</span><span class="bash">WantedBy=multi-user.target</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Also=fcgiwrap.socket</span></span><br></pre></td></tr></table></figure>
<ul>
<li>修改监听套接字文件的 owner：<code>chown nginx:nginx /var/run/fcgiwrap.socket</code>。 fcgiwrap.service文件已经写入，可以省去。</li>
<li>自启动： <code>systemctl enabled fcgiwrap.service</code></li>
</ul>
<h2 id="安装gitweb-1"><a href="#安装gitweb-1" class="headerlink" title="安装gitweb"></a>安装gitweb</h2><p><code>yum install gitweb</code></p>
<p>默认gitweb是安装到apache目录中的，也就是/var/www/git目录下，专门用来显示gitweb页面</p>
<h2 id="配置nginx"><a href="#配置nginx" class="headerlink" title="配置nginx"></a>配置nginx</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">location /gitweb.cgi &#123;</span><br><span class="line">     root /var/www/git/;</span><br><span class="line">	 include fastcgi_params;</span><br><span class="line">     gzip off;</span><br><span class="line">     fastcgi_param SCRIPT_NAME /var/www/git/gitweb.cgi;</span><br><span class="line">     fastcgi_param GITWEB_CONFIG /etc/gitweb.conf;</span><br><span class="line">     fastcgi_pass  unix:/var/run/fcgiwrap.socket;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location / &#123;</span><br><span class="line">    root /var/www/git/;</span><br><span class="line">    index gitweb.cgi;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="配置ReviewBoard的Repository"><a href="#配置ReviewBoard的Repository" class="headerlink" title="配置ReviewBoard的Repository"></a>配置ReviewBoard的Repository</h2><p>Raw File URL Mask: <a target="_blank" rel="noopener" href="http://192.168.31.200:8180/?p=blocks/blocks-components.git;a=blob_plain;f=">http://192.168.31.200:8180/?p=blocks/blocks-components.git;a=blob_plain;f=</a><filename>;h=<revision></p>
<h1 id="整合gogs-与-ReviewBoard"><a href="#整合gogs-与-ReviewBoard" class="headerlink" title="整合gogs 与 ReviewBoard"></a>整合gogs 与 ReviewBoard</h1><p>reviewboard 对 gogs 这种第三方的git仓库支持，在添加<code>Repository</code>时，只能通过<code>Raw file URL mask</code>来实现。<br><a target="_blank" rel="noopener" href="https://github.com/gogs/gogs/issues/4857">Add get blob API #4857</a></p>
<p>错误：<br><a target="_blank" rel="noopener" href="https://www.mail-archive.com/reviewboard@googlegroups.com/msg20895.html">Re: fatal: Not a git repository: ‘None’ (HTTP 400, API Error 224)</a></p>
<p>rbtools.api.errors.BadRequestError: fatal: not a git repository: ‘None’</p>
<p>示例：<br>Repository type: Git<br>Path: <a target="_blank" rel="noopener" href="http://cddyys.ddns.net:3000/blocks/blocks-components.git">http://cddyys.ddns.net:3000/blocks/blocks-components.git</a><br>Raw File URL Mask: <a target="_blank" rel="noopener" href="http://cddyys.ddns.net:3000/blocks/blocks-components/raw/2.0.x/">http://cddyys.ddns.net:3000/blocks/blocks-components/raw/2.0.x/</a><filename>?id=<revision></p>
<p>git diff –full-index &gt;b.diff</p>
<p>rbt post -p -d –tracking-branch=origin/2.0.x –diff-filename=a.diff –summary=init_blog –description= “complete blog index” –target-people=guanjh</p>
<h1 id="调试ex-user"><a href="#调试ex-user" class="headerlink" title="调试ex-user"></a>调试ex-user</h1><ul>
<li>注释掉Task.class的@Component，WebDestroyAction.class的@Component</li>
</ul>
<h1 id="spring容器启动后执行"><a href="#spring容器启动后执行" class="headerlink" title="spring容器启动后执行"></a>spring容器启动后执行</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/xiaojin21cen/article/details/83418470">Spring 容器启动完成后，执行初始化加载工作</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InitBeanTest</span> <span class="keyword">implements</span> <span class="title">ApplicationListener</span>&lt;<span class="title">ContextRefreshedEvent</span>&gt; </span>&#123;</span><br><span class="line">	<span class="comment">// 此方法会被多次调用</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onApplicationEvent</span><span class="params">(ContextRefreshedEvent event)</span> </span>&#123;</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		在web 项目中，存在两个容器，一个是root application context，另一个就是我们自己的 projectName-servlet context（作为 root application context 的子容器）。</span></span><br><span class="line"><span class="comment">		这种情况下，就会造成 onApplicationEvent 方法被执行两次。</span></span><br><span class="line"><span class="comment">		为了避免上面提到的问题，我们可以只在 root application context 初始化完成后调用逻辑代码</span></span><br><span class="line"><span class="comment">		*/</span></span><br><span class="line">		<span class="keyword">if</span>(event.getApplicationContext().getParent() == <span class="keyword">null</span>)&#123;<span class="comment">//root application context 没有parent</span></span><br><span class="line">            <span class="comment">//TODO 这里写下将要初始化的内容</span></span><br><span class="line">        &#125;</span><br><span class="line">	&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="在spring-boot工程环境的junit测试"><a href="#在spring-boot工程环境的junit测试" class="headerlink" title="在spring-boot工程环境的junit测试"></a>在spring-boot工程环境的junit测试</h1><h2 id="基于纯spring方式"><a href="#基于纯spring方式" class="headerlink" title="基于纯spring方式"></a>基于纯spring方式</h2><p>此方式事务是起作用的。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.ex&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.web.bind.annotation.RestController&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.boot.autoconfigure.SpringBootApplication&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.web.servlet.config.annotation.EnableWebMvc&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">&quot;assignable&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;com.ex.web.aspect.AppSignCheck&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">&quot;assignable&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;com.ex.admin.aspect.AdminPermissionAspect&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.dyys.framework.util.SpringHelper&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dsMain&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">tx:annotation-driven</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- DAO接口所在包名，Spring会自动查找其下的类 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">&quot;mainSqlScannerConfigurer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.beetl.sql.ext.spring.BeetlSqlScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 哪些类可以自动注入 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.ex&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 通过类后缀 来自动注入Dao --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;daoSuffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Mapper&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlManagerFactoryBeanName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;mainSqlManager&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;mainSqlManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.beetl.sql.ext.spring.SqlManagerFactoryBean&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cs&quot;</span> &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span>  <span class="attr">class</span>=<span class="string">&quot;org.beetl.sql.ext.spring.SpringConnectionSource&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;masterSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dsMain&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 还可以设置从数据库 slaves --&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dbStyle&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.beetl.sql.core.db.MySqlStyle&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlLoader&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.beetl.sql.core.loader.MarkdownClasspathLoader&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlRoot&quot;</span> <span class="attr">value</span>=<span class="string">&quot;sql&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;nc&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.beetl.sql.core.DefaultNameConversion&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;interceptors&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.beetl.sql.ext.DebugInterceptor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>测试用例为</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="meta">@PropertySource(&quot;classpath:application.properties&quot;)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(locations = &#123;&quot;classpath*:spring-test.xml&quot;&#125;)</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration(exclude= WebMvcAutoConfiguration.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CoinTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CoinService coinService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCoinAndFinanceAccount</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Coin coin = <span class="keyword">new</span> Coin(<span class="string">&quot;WKKk&quot;</span>, CoinGroup.MAINSTREAM_COIN.value());</span><br><span class="line">        Long adminId = <span class="number">11L</span>;</span><br><span class="line">        coin = coinService.addCoinAndFinanceAccount(coin, adminId);</span><br><span class="line">        Assert.assertNotNull(coin);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="基于spring-boot方式"><a href="#基于spring-boot方式" class="headerlink" title="基于spring-boot方式"></a>基于spring-boot方式</h2><p>此方式事务不起作用。<br>重写一个Application类。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication(exclude= WebMvcAutoConfiguration.class)</span></span><br><span class="line"><span class="meta">@ComponentScan(excludeFilters = &#123;</span></span><br><span class="line"><span class="meta">        @ComponentScan.Filter(type= FilterType.ASSIGNABLE_TYPE, value = &#123;WebApplication.class, AppSignCheck.class,</span></span><br><span class="line"><span class="meta">                AdminPermissionAspect.class&#125;),</span></span><br><span class="line"><span class="meta">        @ComponentScan.Filter(type= FilterType.ANNOTATION, value=&#123;EnableWebMvc.class, Controller.class, RestController.class&#125;)</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"><span class="meta">@EnableTransactionManagement</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(TestApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Order(-100)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SpringHelper <span class="title">springHelper</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> SpringHelper();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试用例为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="meta">@SpringBootTest(classes = TestApplication.class, webEnvironment = SpringBootTest.WebEnvironment.NONE)</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CoinServiceTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CoinService coinService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCoinAndFinanceAccount</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Coin coin = <span class="keyword">new</span> Coin(<span class="string">&quot;WKKk&quot;</span>, CoinGroup.MAINSTREAM_COIN.value());</span><br><span class="line">        Long adminId = <span class="number">11L</span>;</span><br><span class="line">        coin = coinService.addCoinAndFinanceAccount(coin, adminId);</span><br><span class="line">        Assert.assertNotNull(coin);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="mintty乱码"><a href="#mintty乱码" class="headerlink" title="mintty乱码"></a>mintty乱码</h1><p>在cmder的settings -&gt; 启动 -&gt; 任务 中设置：<br><code>mintty -o Locale=zh_CN -o Charset=GBK</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/Doing/%E5%B7%A5%E4%BD%9C%E6%97%A5%E5%BF%97/" data-id="ckqg285sp0005rcfphm7hdl7i" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Doing/wankoko" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/Doing/wankoko/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:11.105Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[toc]</p>
<h1 id="spring-boot连接mysql异常"><a href="#spring-boot连接mysql异常" class="headerlink" title="spring-boot连接mysql异常"></a>spring-boot连接mysql异常</h1><h2 id="SSLHandshakeException-No-appropriate-protocol-protocol-is-disabled-or-cipher-suites-are-inappropriate"><a href="#SSLHandshakeException-No-appropriate-protocol-protocol-is-disabled-or-cipher-suites-are-inappropriate" class="headerlink" title="SSLHandshakeException: No appropriate protocol (protocol is disabled or cipher suites are inappropriate)"></a>SSLHandshakeException: No appropriate protocol (protocol is disabled or cipher suites are inappropriate)</h2><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/38205947/sslhandshakeexception-no-appropriate-protocol">https://stackoverflow.com/questions/38205947/sslhandshakeexception-no-appropriate-protocol</a></p>
<p>解决办法<br>修改文件 <code>C:\Program Files\Java\jdk1.8.0_291\jre\lib\security\java.security</code>，找到</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">jdk.tls.disabledAlgorithms=SSLv3, TLSv1, TLSv1.1, RC4, DES, MD5withRSA, \</span><br><span class="line">    DH keySize &lt; 1024, EC keySize &lt; 224, 3DES_EDE_CBC, anon, NULL, \</span><br><span class="line">    include jdk.disabled.namedCurves</span><br></pre></td></tr></table></figure>
<p>去掉 <code>TLSv1, TLSv1.1</code> 这两项即可。</p>
<h2 id="WARN-Establishing-SSL-connection-without-server’s-identity-verification-is-not-recommended-According-to-MySQL-5-5-45"><a href="#WARN-Establishing-SSL-connection-without-server’s-identity-verification-is-not-recommended-According-to-MySQL-5-5-45" class="headerlink" title="WARN: Establishing SSL connection without server’s identity verification is not recommended. According to MySQL 5.5.45+"></a>WARN: Establishing SSL connection without server’s identity verification is not recommended. According to MySQL 5.5.45+</h2><p>修改 <code>jdbc:mysql://127.0.0.1:3306/test?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false</code> ，加上 <code>useSSL=false</code>即可。</p>
<h1 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h1><h2 id="Maven-的聚合（多模块）和-Parent-继承"><a href="#Maven-的聚合（多模块）和-Parent-继承" class="headerlink" title="Maven 的聚合（多模块）和 Parent 继承"></a>Maven 的聚合（多模块）和 Parent 继承</h2><p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1452768">https://cloud.tencent.com/developer/article/1452768</a></p>
<p>虽然聚合通常伴随着父POM的继承关系，但是这两者不是必须同时存在的，从上面两者的介绍可以看出来，这两者的都有不同的作用，他们的作用不依赖于另一个的配置。</p>
<p>父POM是为了抽取统一的配置信息和依赖版本控制，方便子POM直接引用，简化子POM的配置。聚合（多模块）则是为了方便一组项目进行统一的操作而作为一个大的整体，所以要真正根据这两者不同的作用来使用，不必为了聚合而继承同一个父POM，也不比为了继承父POM而设计成多模块。</p>
<h2 id="Maven全局排除-exclude-globally"><a href="#Maven全局排除-exclude-globally" class="headerlink" title="Maven全局排除 exclude globally"></a>Maven全局排除 exclude globally</h2><ul>
<li><p>方式一：I created an empty jar and created this dependency:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>system<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">systemPath</span>&gt;</span>$&#123;basedir&#125;/src/lib/empty.jar<span class="tag">&lt;/<span class="name">systemPath</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>方式二：使用<code>maven-enforcer-plugin</code>插件</p>
</li>
</ul>
<h1 id="commons-lang3中常用方法"><a href="#commons-lang3中常用方法" class="headerlink" title="commons-lang3中常用方法"></a>commons-lang3中常用方法</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_35418518/article/details/89519979">https://blog.csdn.net/qq_35418518/article/details/89519979</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_37334135/article/details/95480230">https://blog.csdn.net/qq_37334135/article/details/95480230</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/Doing/wankoko/" data-id="ckqg285so0004rcfpfgrwgbv4" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Doing/IPFS" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/Doing/IPFS/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:11.104Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<h1 id="Filecoin的终极指南：深挖Filecoin白皮书"><a href="#Filecoin的终极指南：深挖Filecoin白皮书" class="headerlink" title="Filecoin的终极指南：深挖Filecoin白皮书"></a>Filecoin的终极指南：深挖Filecoin白皮书</h1><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/87632601">https://zhuanlan.zhihu.com/p/87632601</a></p>
<h2 id="Filecoin网络如何运作？"><a href="#Filecoin网络如何运作？" class="headerlink" title="Filecoin网络如何运作？"></a>Filecoin网络如何运作？</h2><ul>
<li><p>在Filecoin中有3组用户：客户、存储矿工以及检索矿工。</p>
</li>
<li><p>什么是客户、存储矿工以及检索矿工？</p>
</li>
<li><p>什么是碎片？</p>
</li>
<li><p>What’s 扇区？</p>
</li>
<li><p>What’s 分配表？</p>
</li>
<li><p>什么是订单</p>
</li>
<li><p>什么是订单簿？</p>
</li>
<li><p>什么是保证？</p>
</li>
<li><p>存储市场的买盘、卖盘如何运作的？</p>
<ul>
<li>Manage.PledgeSector</li>
<li>Put.AddOrders</li>
<li>Put.MatchOrders</li>
<li>Put.ReceivePiece</li>
<li>Manage.AssignOrders</li>
<li>Manage.SealSector</li>
<li>Manage.ProveSector</li>
<li>Manage.RepairOrders</li>
</ul>
</li>
<li><p>检索市场的买盘、卖盘如何运作的？</p>
<ul>
<li>Get.AddOrders</li>
<li>Get.MatchOrders</li>
<li>Put.SendPiece</li>
</ul>
</li>
</ul>
<p>下图显示发生在网络上的所有活动</p>
<p><img src="_v_images/20200709161327521_9951.png" alt="发生在网络上的所有活动"></p>
<h2 id="对Filecoin协议的深入研究"><a href="#对Filecoin协议的深入研究" class="headerlink" title="对Filecoin协议的深入研究"></a>对Filecoin协议的深入研究</h2><ul>
<li>什么是DSN?</li>
<li>DSN安全操作协调协议有哪些？</li>
<li>DSN对两种错误进行容错：管理容错、存储容错。什么是管理容错？什么是存储容错？</li>
<li>以往的共识算法有哪些弊端？</li>
<li>Filecoin的共识算法是什么？什么是PoST（Proof-of-Spacetime）？</li>
</ul>
<h2 id="其他一些问题"><a href="#其他一些问题" class="headerlink" title="其他一些问题"></a>其他一些问题</h2><h2 id="Filecoin协议改进的可能性"><a href="#Filecoin协议改进的可能性" class="headerlink" title="Filecoin协议改进的可能性"></a>Filecoin协议改进的可能性</h2><h1 id="Filecoin-矿工是怎么赚取FIL的"><a href="#Filecoin-矿工是怎么赚取FIL的" class="headerlink" title="Filecoin: 矿工是怎么赚取FIL的"></a>Filecoin: 矿工是怎么赚取FIL的</h1><ul>
<li><p>Filecoin系统的参与者有哪些？<br><img src="_v_images/20200709165423472_14025.png" alt="Filecoin体系里面价值和代币是如何转移的"></p>
</li>
<li><p>Filecoin的挖矿与BTC有什么不同？</p>
</li>
<li><p>存储矿工收益来自哪3个方面？</p>
</li>
<li><p>检索矿工收益来自哪个方面？</p>
</li>
</ul>
<p><img src="_v_images/20200709170111900_23514.png" alt="供需曲线"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/Doing/IPFS/" data-id="ckqg285sn0003rcfpbpkx0wqe" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Doing/01-HowToStudy" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/Doing/01-HowToStudy/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:11.103Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="1-学习方法及工具"><a href="#1-学习方法及工具" class="headerlink" title="1. 学习方法及工具"></a>1. 学习方法及工具</h1><h2 id="1-1-两遍笔记法"><a href="#1-1-两遍笔记法" class="headerlink" title="1.1. 两遍笔记法"></a>1.1. 两遍笔记法</h2><h3 id="1-1-1-视频学习"><a href="#1-1-1-视频学习" class="headerlink" title="1.1.1. 视频学习"></a>1.1.1. 视频学习</h3><ul>
<li>视频只听一遍，没听懂才可以看多遍。（看视频太花时间）</li>
<li>边听边切图做Word笔记。</li>
<li>看完后，整理Word笔记，写成Markdown笔记。</li>
<li>定期复习很重要。</li>
</ul>
<h3 id="1-1-2-书籍、博客学习"><a href="#1-1-2-书籍、博客学习" class="headerlink" title="1.1.2. 书籍、博客学习"></a>1.1.2. 书籍、博客学习</h3><ul>
<li>纸质笔记本只能做大纲式的笔记，千万不要写细节。<ul>
<li>大纲式笔记只记录三种内容：1、各级标题 2、关键字（不能记录大段文字） 3、疑问点</li>
<li>大纲式笔记便于回忆复习。</li>
</ul>
</li>
<li>大纲式纸质笔记需要整理、完善成Markdown笔记。</li>
</ul>
<h3 id="1-1-3-Markdown笔记心得"><a href="#1-1-3-Markdown笔记心得" class="headerlink" title="1.1.3. Markdown笔记心得"></a>1.1.3. Markdown笔记心得</h3><ul>
<li>图片标记：要有一个好的图片编辑工具，并非常熟练使用。</li>
<li>小PDF文件：做成链接，便于Chrome浏览</li>
</ul>
<h2 id="1-2-Markdown编辑工具"><a href="#1-2-Markdown编辑工具" class="headerlink" title="1.2. Markdown编辑工具"></a>1.2. Markdown编辑工具</h2><h3 id="1-2-1-Markdown编辑器选择"><a href="#1-2-1-Markdown编辑器选择" class="headerlink" title="1.2.1. Markdown编辑器选择"></a>1.2.1. Markdown编辑器选择</h3><ul>
<li>好的MD编辑器的标准：<ol>
<li>可以贴图，且图片保存在文件的同级目录，相对地址加载</li>
<li>支持大纲，且有标题能多级编号</li>
<li>可以即时预览</li>
</ol>
</li>
</ul>
<h3 id="1-2-2-VSCode常用markdown插件"><a href="#1-2-2-VSCode常用markdown插件" class="headerlink" title="1.2.2. VSCode常用markdown插件"></a>1.2.2. VSCode常用markdown插件</h3><ul>
<li><p>Markdown All in One</p>
</li>
<li><p>markdown-index markdown add index</p>
</li>
<li><p>Paste Image</p>
<ol>
<li>文件–&gt;首选项–&gt;设置–&gt;填入paste，设置Path值为 ${currentFileDir}/img，（img目录会自动创建）</li>
<li>屏幕截图之后，使用ctrl + alt + v粘贴成markdown图片</li>
</ol>
</li>
<li><p>Markdown Preview Enhanced 。<br>  各种功能包括：</p>
<ul>
<li>文件导入</li>
<li>文件导出（HTML，PDF， Word，Ebook， RFT）</li>
<li>定制扩展 （修改默认 CSS）</li>
<li>princexml(导出PDF需要)<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/Max_xws/article/details/85319679">https://blog.csdn.net/Max_xws/article/details/85319679</a></li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/Doing/01-HowToStudy/" data-id="ckqg285sm0002rcfp70iadee7" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-database/《高性能MySQL》（1）" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/database/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDMySQL%E3%80%8B%EF%BC%881%EF%BC%89/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:11.098Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="第一章-MySQL-架构与历史"><a href="#第一章-MySQL-架构与历史" class="headerlink" title="第一章 MySQL 架构与历史"></a>第一章 MySQL 架构与历史</h1><h2 id="1-1-MySQL-的逻辑架构"><a href="#1-1-MySQL-的逻辑架构" class="headerlink" title="1.1 MySQL 的逻辑架构"></a>1.1 MySQL 的逻辑架构</h2><p><img src="_v_images/20210625103345187_236.png" alt="MySQL逻辑架构"></p>
<h2 id="1-3-事务"><a href="#1-3-事务" class="headerlink" title="1.3 事务"></a>1.3 事务</h2><ul>
<li>ACID<ul>
<li>原子性（atomicity）：一个事务必须被视为一个不可分割的最小工作单元，整个事务中的所有操作要么全部提交成功，要么全部失败回滚。</li>
<li>一致性（consistency）：数据库总是从一个一致性的状态转换到另外一个一致性的状态。</li>
<li>隔离性（isolation）：通常来说，一个事务所做的修改在最终提交以前，对其他事务是不可见的。</li>
<li>持久性（durability）：一旦事务提交，则其所做的修改就会永久保存到数据库中。</li>
</ul>
</li>
</ul>
<h3 id="1-3-1-隔离级别"><a href="#1-3-1-隔离级别" class="headerlink" title="1.3.1 隔离级别"></a>1.3.1 隔离级别</h3><ul>
<li>READ UNCOMMITTED（未提交读）：事务可以读取未提交的数据，这也被称为脏读（Dirty Read）。在实际应用中一般很少使用。</li>
<li>READ COMMITTED（提交读）：一个事务从开始直到提交之前，所做的任何修改对其他事务都是不可见的。这个级别有时候也叫做不可重复读（nonrepeatable read）</li>
<li>REPEATABLE READ（可重复读）：该级别保证了在同一个事务中多次读取同样记录的结果是一致的。它解决了脏读的问题，无法解决另外一个幻读（Phantom Read）的问题。<ul>
<li>幻读：指的是当某个事务在读取某个范围内的记录时，另外一个事务又在该范围内插入了新的记录，当之前的事务再次读取该范围的记录时，会产生幻行（Phantom Row）。</li>
</ul>
</li>
<li>SERIALIZABLE（可串行化）：它通过强制事务串行执行，避免了前面说的幻读的问题。SERIALIZABLE 会在读取的每一行数据上都加锁，所以可能导致大量的超时和锁争用的问题。</li>
</ul>
<h3 id="1-3-2-死锁"><a href="#1-3-2-死锁" class="headerlink" title="1.3.2 死锁"></a>1.3.2 死锁</h3><ul>
<li>当多个事务试图以不同的顺序锁定资源时，就可能会产生死锁。多个事务同时锁定同一个资源时，也会产生死锁。</li>
<li>为了解决这种问题，数据库系统实现了各种死锁检测和死锁超时机制。InnoDB 目前处理死锁的方法是，将持有最少行级排他锁的事务进行回滚。</li>
<li>死锁发生以后，只有部分或者完全回滚其中一个事务，才能打破死锁。</li>
</ul>
<h3 id="1-3-3-事务日志"><a href="#1-3-3-事务日志" class="headerlink" title="1.3.3 事务日志"></a>1.3.3 事务日志</h3><ul>
<li>使用事务日志，存储引擎在修改表的数据时只需要修改其内存拷贝，再把该修改行为记录到持久在硬盘上的事务日志中，而不用每次都将修改的数据本身持久到磁盘。</li>
<li>事务日志采用的是追加的方式，顺序 I/O，而不是随机 I/O，快得多。</li>
<li>预写式日志（Write-Ahead Logging）：事务日志持久以后，内存中被修改的数据在后台可以慢慢地刷回到磁盘。事务日志恢复数据。</li>
</ul>
<h2 id="1-4-多版本并发控制"><a href="#1-4-多版本并发控制" class="headerlink" title="1.4 多版本并发控制"></a>1.4 多版本并发控制</h2><ul>
<li>InnoDB 的 MVCC，是通过在每行记录后面保存两个隐藏的列来实现的。这两个列，一个保存了行的创建时间，一个保存行的过期时间（或删除时间）。当然存储的并不是实际的时间值，而是系统（事务）版本号。</li>
</ul>
<h2 id="1-5-MySQL-的存储引擎"><a href="#1-5-MySQL-的存储引擎" class="headerlink" title="1.5 MySQL 的存储引擎"></a>1.5 MySQL 的存储引擎</h2><ul>
<li>MySQL 会在数据库子目录下创建一个和表同名的.frm 文件保存表的定义。</li>
</ul>
<h3 id="1-5-1-InnoDB-存储引擎"><a href="#1-5-1-InnoDB-存储引擎" class="headerlink" title="1.5.1 InnoDB 存储引擎"></a>1.5.1 InnoDB 存储引擎</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/database/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDMySQL%E3%80%8B%EF%BC%881%EF%BC%89/" data-id="ckqg285t1000mrcfp6t43341c" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-database/索引" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/database/%E7%B4%A2%E5%BC%95/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:11.098Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h1><p><a target="_blank" rel="noopener" href="https://my.oschina.net/u/4407645/blog/3469303">https://my.oschina.net/u/4407645/blog/3469303</a></p>
<h1 id="位图索引（BitMap）"><a href="#位图索引（BitMap）" class="headerlink" title="位图索引（BitMap）"></a>位图索引（BitMap）</h1><ul>
<li>适用于值可枚举的字段</li>
</ul>
<h1 id="哈希索引"><a href="#哈希索引" class="headerlink" title="哈希索引"></a>哈希索引</h1><ul>
<li>适用于等值检索，通过一次哈希计算即可定位数据的位置。</li>
<li>与 JAVA 中 HashMap 的实现类似，是用冲突表的方式解决哈希冲突的。</li>
</ul>
<h1 id="B-TREE-索引"><a href="#B-TREE-索引" class="headerlink" title="B-TREE 索引"></a>B-TREE 索引</h1><ul>
<li>BTREE 索引是 RDBMS 最常用的索引</li>
<li>BTREE: 有序平衡 N 叉树, 每个节点有 N 个键值和 N+1 个指针, 指向 N+1 个子节点</li>
</ul>
<h1 id="倒排索引"><a href="#倒排索引" class="headerlink" title="倒排索引"></a>倒排索引</h1><ul>
<li>正向索引：给定文档标识，可以获取当前文档的（关键词、词频以及该词在文档中出现的位置信息）</li>
<li>反向索引：给定了关键词标识，可以获取关键词（所在的所有文档列表，同时包含词频、位置等信息）</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/database/%E7%B4%A2%E5%BC%95/" data-id="ckqg285t2000nrcfp1peq20lk" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/9/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><a class="page-number" href="/page/12/">12</a><span class="space">&hellip;</span><a class="page-number" href="/page/21/">21</a><a class="extend next" rel="next" href="/page/11/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/06/28/product/%E9%9C%80%E6%B1%82%E8%B0%83%E7%A0%94%E7%9A%84%E5%86%85%E5%AE%B9%E5%92%8C%E5%B7%A5%E4%BD%9C%E6%8C%87%E5%BC%95/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/06/28/product/%E9%93%81%E8%B7%AF6C%E4%B8%9A%E5%8A%A1%E7%BB%93%E6%9E%84/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/06/28/product/%E9%9C%80%E6%B1%82%E8%B0%83%E7%A0%94%E5%8F%8A%E5%88%86%E6%9E%90%E6%96%B9%E6%B3%95/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/06/28/product/%E6%B0%B4%E7%94%B5%E7%AB%99%E7%94%9F%E4%BA%A7%E8%BF%90%E8%A1%8C%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/06/28/product/%E6%B0%B4%E7%94%B5%E5%8E%82%E8%BF%90%E8%A1%8C%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>