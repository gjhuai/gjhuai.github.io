<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/11/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-database/Redis入门指南_第2版" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/database/Redis%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97_%E7%AC%AC2%E7%89%88/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:11.096Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="第-6-章-脚本"><a href="#第-6-章-脚本" class="headerlink" title="第 6 章 脚本"></a>第 6 章 脚本</h1><ul>
<li>6.1 概览<ul>
<li>使用脚本的好处<ul>
<li>1、减少网络开销</li>
<li>2、原子操作</li>
<li>3、复用</li>
<li>脚本类似 SQL 数据库的存储过程</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="第-7-章-持久化"><a href="#第-7-章-持久化" class="headerlink" title="第 7 章 持久化"></a>第 7 章 持久化</h1><h2 id="7-1-RDB-方式"><a href="#7-1-RDB-方式" class="headerlink" title="7.1 RDB 方式"></a>7.1 RDB 方式</h2><ul>
<li>RDB 方式的持久化是通过快照（Snapshot）完成的，当符合一定条件是 Redis 会将内存中的所有数据生成一份副本并存储在硬盘上，一个过程称之为“快照”。</li>
<li>触发快照的情形：<ul>
<li>1、根据配置规则进行自动快照。</li>
<li>2、用户执行 SAVE 或 BGSAVE 命令</li>
<li>3、执行 FLUSHALL 命令</li>
<li>4、执行复制（replication）时。</li>
</ul>
</li>
</ul>
<h3 id="7-1-5-快照原理"><a href="#7-1-5-快照原理" class="headerlink" title="7.1.5 快照原理"></a>7.1.5 快照原理</h3><pre><code>- 1、fork: Redis 使用 fork 函数复制一份当前进程（父进程）的副本（子进程）；
- 2、写文件: 父进程继续接收并处理客户端发来的命令，而子进程开始将内存中的数据写入硬盘中的临时文件；
- 3、替换: 当子进程写入完所有数据后，会用该临时文件替换旧的 RDB 文件（dump.rdb），至此一次快照操作完成。
- 新的 RDB 文件存储的是执行 fork 一刻的内存数据。
- 任何时候 RDB 文件都是完整的。
- 写时复制策略也保证了在 fork 的时刻虽然看上去生成了两份内存副本，但实际上内存的占用量并不会增加一倍。
- 通过 RDB 方式实现持久化，一 旦 Redis 异常退出，就会丢失最后一次快照以后更改的所有数据。
- 希望将损失降到最小，则可以使用 AOF 方式进行持久化。
</code></pre>
<h2 id="7-2-AOF-方式"><a href="#7-2-AOF-方式" class="headerlink" title="7.2 AOF 方式"></a>7.2 AOF 方式</h2><ul>
<li>AOF 可以将 Redis 执行的每一条写命令追加到硬盘文件中，这一过程显然会降低 Redis 的性能。</li>
</ul>
<h1 id="第-8-章-集群"><a href="#第-8-章-集群" class="headerlink" title="第 8 章 集群"></a>第 8 章 集群</h1><h2 id="8-1-复制"><a href="#8-1-复制" class="headerlink" title="8.1 复制"></a>8.1 复制</h2><ul>
<li>Redis 提供了复制(replication) 功能，自动将更新的数据从主库同步到其他从库。</li>
<li>一主多从</li>
<li>原理：<ul>
<li>从库启动后，向主库发送 SYNC 命令后，主库立即执行 RDB 快照，并缓存此期间接收到的命令；快照完成后，主库向从库发送快照文件和缓存命令；从库载入快照文件并执行缓存命令。完成复制初始化后，主库不断将写命令同步到从库。</li>
</ul>
</li>
<li>主库之从库可以为下一级从库的主库。即可以构建多级复制的结构。</li>
<li>从库持久化<ul>
<li>另一个相对耗时的操作是持久化，为了提高性能，可以通过复制功能建立-一个(或若干个)从数据库，并在从数据库中启用持久化，同时在主数据库禁用持久化。当从数据库崩溃重启后主数据库会自动将数据同步过来，所以无需担心数据丢失。</li>
<li>当开启复制且主数据库关闭持久化功能时，一-定不要使用 Supervisor 以及类似的进程管理工具令主数据库崩溃后自动重启。</li>
<li>哨兵能解决手工维护从库或主库的重启以及数据恢复的麻烦。</li>
</ul>
</li>
<li>无硬盘复制<ul>
<li>开启无硬盘复制选项后，Redis 在与从库进行复制初始化时将不会将快照内容存储到硬盘上，而是直接通过网络发送给从库，避免了硬盘的性能瓶颈。</li>
</ul>
</li>
<li>增量复制</li>
</ul>
<h2 id="8-2-哨兵"><a href="#8-2-哨兵" class="headerlink" title="8.2 哨兵"></a>8.2 哨兵</h2><ul>
<li>哨兵包括两个功能：<ul>
<li>1、监控主库和从库运行状态。</li>
<li>2、出现故障时，自动将从库转换为主库。</li>
</ul>
</li>
<li>哨兵典型架构</li>
<li>多哨兵架构</li>
</ul>
<h2 id="8-3-集群"><a href="#8-3-集群" class="headerlink" title="8.3 集群"></a>8.3 集群</h2><ul>
<li>集群的特点在于拥有和单机实例同样的性能，同时在网络分区后能够提供一定的可访问性以及对主数据库故障恢复的支持。另外集群支持几乎所有的单机实例支持的命令，对于涉及多键的命令(如 MGET),如果每个键都位于同一个节点中，则可以正常支持，否则会提示错误。除此之外集群还有一个限制是只能使用默认的 0 号数据库，如果执行 SELECT 切换数据库则会提示错误。</li>
<li>哨兵与集群是两个独立的功能，但从特性来看哨兵可以视为集群的子集，当不需要数据分片或者已经在客户端进行分片的场景下哨兵就足够使用了，但如果需要进行水平扩容，则集群是一个非常好的选择。</li>
</ul>
<h1 id="第-9-章-管理"><a href="#第-9-章-管理" class="headerlink" title="第 9 章 管理"></a>第 9 章 管理</h1><h2 id="9-2-通信协议"><a href="#9-2-通信协议" class="headerlink" title="9.2 通信协议"></a>9.2 通信协议</h2><ul>
<li>Redis 支持两种通信协议，一种是二进制安全的统一请求协议( unified request protocol),另一种是比较直观的便于在 telnet 程序中输入的简单协议。这两种协议只是命令的格式有区别，命令返回值的格式是一样的。</li>
<li>Redis 的 AOF 文件和主从复制时，主数库向从库发送的内容都使用了统一请求协议。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/database/Redis%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97_%E7%AC%AC2%E7%89%88/" data-id="ckqg285t1000lrcfpd9feai1q" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-database/MongoDB例子解读" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/database/MongoDB%E4%BE%8B%E5%AD%90%E8%A7%A3%E8%AF%BB/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:11.094Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="ReadPreference-读偏好"><a href="#ReadPreference-读偏好" class="headerlink" title="ReadPreference 读偏好"></a>ReadPreference 读偏好</h1><p><strong>MongoDB 有 5 种 ReadPreference 模式：</strong></p>
<ul>
<li>primary<ul>
<li>主节点，默认模式，读操作只在主节点，如果主节点不可用，报错或者抛出异常。</li>
</ul>
</li>
<li>primaryPreferred<ul>
<li>首选主节点，大多情况下读操作在主节点，如果主节点不可用，如故障转移，读操作在从节点。</li>
</ul>
</li>
<li>secondary<ul>
<li>从节点，读操作只在从节点， 如果从节点不可用，报错或者抛出异常。</li>
</ul>
</li>
<li>secondaryPreferred<ul>
<li>首选从节点，大多情况下读操作在从节点，特殊情况（如单主节点架构）读操作在主节点。</li>
</ul>
</li>
<li>nearest<ul>
<li>最邻近节点，读操作在最邻近的成员，可能是主节点或者从节点。</li>
</ul>
</li>
</ul>
<h1 id="MongoDB-应答机制"><a href="#MongoDB-应答机制" class="headerlink" title="MongoDB 应答机制"></a>MongoDB 应答机制</h1><ul>
<li>w : 该选项要求确认操作已经传播到指定数量的 mongod 实例或指定标签的 mongod 实例<ul>
<li>w:1(应答式写入)</li>
<li>w:0(非应答式写入)</li>
<li>w:&gt;1(用于副本集环境) 写入节点数</li>
</ul>
</li>
<li>j : 该选项要求确认写操作已经写入 journal 日志之后应答客户端(需要开启 journal 功能)</li>
<li>wtimeout: 该选项指定一个时间限制,以防止写操作无限制被阻塞导致无法应答给客户端</li>
</ul>
<h1 id="readConcern-原理解析"><a href="#readConcern-原理解析" class="headerlink" title="readConcern 原理解析"></a>readConcern 原理解析</h1><ul>
<li>readConcern 决定到某个读取数据时，能读到什么样的数据。<ul>
<li>local 能读取任意数据，这个是默认设置</li>
<li>majority 只能读取到『成功写入到大多数节点的数据』</li>
</ul>
</li>
<li>readConcern 的初衷在于解决『脏读』的问题</li>
</ul>
<h1 id="go-context-之-WithTimeout-的使用"><a href="#go-context-之-WithTimeout-的使用" class="headerlink" title="go context 之 WithTimeout 的使用"></a>go context 之 WithTimeout 的使用</h1><ul>
<li><ol>
<li>context 包的 WithTimeout()函数接受一个 Context 和超时时间作为参数，返回其子 Context 和取消函数 cancel</li>
</ol>
</li>
<li><ol start="2">
<li>新创建协程中传入子 Context 做参数，且需监控子 Context 的 Done 通道，若收到消息，则退出</li>
</ol>
</li>
<li><ol start="3">
<li>需要新协程结束时，在外面调用 cancel 函数，即会往子 Context 的 Done 通道发送消息</li>
</ol>
</li>
<li><ol start="4">
<li>若不调用 cancel 函数，到了原先创建 Context 时的超时时间，它也会自动调用 cancel()函数，即会往子 Context 的 Done 通道发送消息</li>
</ol>
</li>
</ul>
<h1 id="Golang-的-Tag-语法"><a href="#Golang-的-Tag-语法" class="headerlink" title="Golang 的 Tag 语法"></a>Golang 的 Tag 语法</h1><ul>
<li>通过 Tag 来增强结构体的定义，Tag 会带上一些 meta 信息。</li>
<li>Tag 在运行时可以通过 reflection 包来读取。</li>
<li>Tags 可以由键值对来组成，通过空格符来分割键值  ，可以通过反射的 Lookup 或者 Get 来获取键值对的值。</li>
<li>Tag 最常用的大概就是在 marshaling。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/database/MongoDB%E4%BE%8B%E5%AD%90%E8%A7%A3%E8%AF%BB/" data-id="ckqg285t0000jrcfpfc0z14kr" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-database/Redis" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/database/Redis/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:11.094Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Redis-适合做什么"><a href="#Redis-适合做什么" class="headerlink" title="Redis 适合做什么"></a>Redis 适合做什么</h1><ul>
<li>缓存<ul>
<li>Redis 字符串、哈希表两种数据结构适合用来储存大量的键值对信息</li>
</ul>
</li>
<li>队列<ul>
<li>使用“列表”数据结构，可以实现普通级和优先级队列的功能。</li>
<li>使用 有序集合”数据结构，可以实现优先级队列：</li>
<li>使用“哈希表”数据结构，可以实现延时队列。</li>
</ul>
</li>
<li>去重<ul>
<li>利用“集合”数据结构，可以实现小批量数据的去重</li>
<li>利用“字符串数据结构的位操作，可以实现布隆过滤器，从而实现超大规模的数据去重</li>
<li>利用 Redis 自带的 HyperLogLog 数据结构，可以实现超大规模数据的去重和计数。</li>
</ul>
</li>
<li>积分板<ul>
<li>Redis 的“有序集合”功能可实现积分板功能，还 实现自动排序、排名功能。</li>
</ul>
</li>
<li>“发布／订阅”<ul>
<li>Redis 带的 “发布／ 订阅”模式可以实现多对多的 发布／订阅”功能</li>
</ul>
</li>
</ul>
<h1 id="特点及用途"><a href="#特点及用途" class="headerlink" title="特点及用途"></a>特点及用途</h1><ul>
<li>字符串<ul>
<li>用来存储 Key-Value 结构数据</li>
<li>字符串只应用在小量级的数据记录中。如果数据量超过百万级别，那么使用字符串来保存简单的映射关系将会浪费大量内存。此时需要使用 Redis 的另一种数据结构 Hash。储存相同量级的数据， Hash 结构消耗的内存只有字符串结构的 1/4 ，但查询速度却不会比字符串差。</li>
<li>如果 Redis 中有大量 Key ，那么执行 “keys ＊” 命令会对 Redis 性能造成短暂影响，甚至导致 Redis 失去响应。 因此，绝对不应该在不清楚当前有多少 Key 的情况下冒然列出当前所有的 Key。</li>
</ul>
</li>
<li>列表<ul>
<li>给 10 万用户发送祝福短信。10 台服务器同时从 1 台公共的 Redis 列表左侧读取数据。由于 Redis 是单线程、单进程的数据库，因此 10 台服务器即使同时对列表执行“lpop”操作， redis 也会自动让它们排队，一个一个地弹出最左侧的数据。</li>
<li>列表就像是一根平放的水管，可以从左边往里塞入数据，也可以从右边往里塞入数据；以从左边读取数据，也可以从右边读取数据。</li>
<li>lpush, rpush, lrange(根据索引查看数据), lpop, rpop</li>
<li>在弹出数据的同时，被弹出的这个数据也会被从列表中删除。</li>
</ul>
</li>
<li>Set<ul>
<li>元素不能重复，没有顺序。</li>
<li>sadd, scard(获取数量), spop,smembers(获取所有数据), sismember, srem(删除)</li>
<li>sinter 交集, sunion 并集, sdiff 差集。</li>
<li>用途 1：根据集合内数据不重复的特性实现去重并记录信息。</li>
<li>用途 2：利用多个集合计算交集、并集和差集。</li>
</ul>
</li>
<li>哈希表（hash table）<ul>
<li>哈希表在 Key 里面还有 “字段”的概念， “字段” 下面才是“值”。即一个哈希表的 Key 里面可以设置成百 千个 值对。</li>
<li>使用晗希表不仅可以减少 Redis 的个数， 还能优化储存空间。储存相同的内容，占用的内存比字符串要小很多。</li>
<li>hset, hmset, hkeys(获取所有字段名), hget, hmget, hgetall, hdel, hexists, hlen</li>
</ul>
</li>
<li>发布/订阅<ul>
<li>方法：publish, pubsub, subscribe, listen</li>
</ul>
</li>
<li>有序集合（Sorted Set）zset<ul>
<li>有序集合里面的数据跟集合一样，也是不能 复的，但是每一个元素又关联了一个分数 Score，根据这个分数可以对元素进行排序。 分数可以重复。</li>
<li>实现排行榜功能</li>
<li>zadd, zincrby(修改评分), zrangebyscore(基于分数从小到大排序), zrevrangebyscore(从大到小排序), zrange(基于位置排序), zrevrange, zrank(查询值排名), zrevrank, zscore, zcard(查询有序集合里面一共有多少个值), zcount(查询在某个评分范围内的值有 少)</li>
</ul>
</li>
</ul>
<h1 id="安全管理"><a href="#安全管理" class="headerlink" title="安全管理"></a>安全管理</h1><ul>
<li>Redis 默认没有密码，并且只能本机访问。使用 redis-cli 连上以后可以执行任意命令。如果要开放外网连接，则需要设置密码，同时禁用危险命令或者对危险命令进行改名。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/database/Redis/" data-id="ckqg285t0000krcfpdxi11u49" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-database/MongoDB" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/database/MongoDB/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:11.093Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <ul>
<li>官方文档： <a target="_blank" rel="noopener" href="https://docs.mongodb.com/manual/">https://docs.mongodb.com/manual/</a></li>
</ul>
<h1 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h1><ul>
<li>文档数据库，使用 BSON 结构。<ul>
<li>没有 schema 限制，更灵活，存储速度更加快。</li>
</ul>
</li>
<li>即时查询能力<ul>
<li>保留了关系型数据库即时查询的能力，保留了索引（底层是基于 Btree）的能力。</li>
</ul>
</li>
<li>易伸缩<ul>
<li>易伸缩是指对数据集进行分片，将存储压力分摊给多台服务器。</li>
</ul>
</li>
<li>自动故障转移<ul>
<li>自动故障转移是副本集的概念，MongoDB 能检测主节点是否存活，当失活时能自动提升从节点为主节点，达到故障转移。</li>
</ul>
</li>
<li>速度<ul>
<li>fire and forget 驱动，即通过驱动调用写入时，可以立即得到返回得到成功的结果（即使是报错），这样让写入的速度更加快，当然会有一定的不安全性，完全依赖网络。</li>
</ul>
</li>
<li>Journaling 日志，持久性：<ul>
<li>像 mysql 的 bin-log 日志，当需要插入的时候会先往日志里面写入记录，再完成实际的数据操作，这样如果出现停电，进程突然中断的情况，可以保障数据不会错误，可以通过修复功能读取 Journaling 日志进行修复。</li>
</ul>
</li>
</ul>
<h1 id="vs-Redis"><a href="#vs-Redis" class="headerlink" title="vs Redis"></a>vs Redis</h1><ul>
<li>Redis 八大数据结构<ul>
<li>string, list, set, hash, zset, geospatial, hyperloglog, bitmaps</li>
<li>数据淘汰算法</li>
<li>10w QPS</li>
<li>无法统计</li>
</ul>
</li>
<li>Mongo 提供聚合函数</li>
<li>Mongodb 也可设置数据过期时间</li>
</ul>
<h1 id="用途"><a href="#用途" class="headerlink" title="用途"></a>用途</h1><ul>
<li>分布式日志收集<ul>
<li>ELK 复杂，耗内存</li>
<li>ES 最多支持 32G</li>
</ul>
</li>
<li>电子产品传感器<ul>
<li>40 亿个</li>
</ul>
</li>
<li>地理地图</li>
<li>数据爬虫<ul>
<li>Schema 经常变动</li>
</ul>
</li>
</ul>
<h1 id="大数据-3V"><a href="#大数据-3V" class="headerlink" title="大数据 3V"></a>大数据 3V</h1><ul>
<li>海量 Volume</li>
<li>多样 Variety</li>
<li>实时 Velocity</li>
</ul>
<h1 id="C-S-服务模型"><a href="#C-S-服务模型" class="headerlink" title="C/S 服务模型"></a>C/S 服务模型</h1><ul>
<li>mongod 服务端<ul>
<li>缺少内存配置，由 OS 管理内存</li>
<li>mongos 路由实现分片功能</li>
</ul>
</li>
<li>mongo 客户端<ul>
<li>js shell 类似 sql</li>
</ul>
</li>
</ul>
<h1 id="命令行工具"><a href="#命令行工具" class="headerlink" title="命令行工具"></a>命令行工具</h1><ul>
<li>mongodump 和 mongorestore，备份和恢复</li>
<li>mongoexport 和 mongoimport，用来导入导出 JSON、CSV 和 TSV 数据</li>
<li>mongosniff，网络嗅探工具，用来观察发送到数据库的操作。基本就是把网络上传输的 BSON 转换为易于人们阅读的 shell 语句。</li>
</ul>
<h1 id="操作入门"><a href="#操作入门" class="headerlink" title="操作入门"></a>操作入门</h1><ul>
<li>＿id 读作“ Object Id ”，它是由时间 、机器码、进程 pid 和自增计数器构成的，始终递增，但绝不重复。</li>
</ul>
<h1 id="聚合查询"><a href="#聚合查询" class="headerlink" title="聚合查询"></a>聚合查询</h1><ul>
<li>聚合功能可以把数据像放入传送带一样，先把原始数据按照一定的规则进行筛选处理，然后通过多个不同的数据处理阶段来处理数据，最终输出 个汇总的结果。</li>
<li>aggregate</li>
</ul>
<h1 id="优化和安全建议"><a href="#优化和安全建议" class="headerlink" title="优化和安全建议"></a>优化和安全建议</h1><ul>
<li>MongoDB 会自动监控 ，如果发现一个游标在 10 分钟内没有进行任何的数据库操作，就会把它关掉。</li>
</ul>
<h1 id="Java-开发"><a href="#Java-开发" class="headerlink" title="Java 开发"></a>Java 开发</h1><ul>
<li>官方驱动文档： <a target="_blank" rel="noopener" href="http://mongodb.github.io/mongo-java-driver/4.2">http://mongodb.github.io/mongo-java-driver/4.2</a></li>
<li>Getting Started<ul>
<li><a target="_blank" rel="noopener" href="https://www.mongodb.com/blog/post/getting-started-with-mongodb-and-java-part-i">https://www.mongodb.com/blog/post/getting-started-with-mongodb-and-java-part-i</a></li>
<li><a target="_blank" rel="noopener" href="https://www.mongodb.com/blog/post/getting-started-with-mongodb-and-java-part-ii">https://www.mongodb.com/blog/post/getting-started-with-mongodb-and-java-part-ii</a></li>
</ul>
</li>
<li>mongo-java-driver<ul>
<li>mongodb-driver-core 是核心库</li>
<li>mongodb-driver-sync 是非异步的同步版本，包含了一般 MongoCollection 的接口</li>
<li>mongodb-driver-legacy 兼容旧版本 API</li>
<li>mongodb-driver = mongodb-driver-sync + mongodb-driver-legacy</li>
<li>mongo-java-driver = mongodb-driver + mongodb-driver-core + bson</li>
</ul>
</li>
<li>Morphia<ul>
<li>Morphia is a really lightweight ODM (Object Document Mapper), so it’s similar to ORMs like Hibernate.</li>
</ul>
</li>
<li>Spring Data MongoDB<ul>
<li>Another frequently used ODM</li>
</ul>
</li>
<li>MongoJack<ul>
<li>直接将 JSON 映射成 Mongo 对象。不再需要将 JSON 转换成 Java 对象，再转为 Mongo 对象。</li>
</ul>
</li>
<li>Jongo<ul>
<li>another Jackson-based ODM, but provides an interesting extra in the form of supporting queries the way you’d write them in the shell.</li>
</ul>
</li>
</ul>
<h1 id="Golang-开发"><a href="#Golang-开发" class="headerlink" title="Golang 开发"></a>Golang 开发</h1><ul>
<li>Getting Started： <a target="_blank" rel="noopener" href="https://www.mongodb.com/blog/post/quick-start-golang--mongodb--starting-and-setup">https://www.mongodb.com/blog/post/quick-start-golang--mongodb--starting-and-setup</a></li>
</ul>
<h1 id="MongoDB-集群"><a href="#MongoDB-集群" class="headerlink" title="MongoDB 集群"></a>MongoDB 集群</h1><ul>
<li>1、Master-Slaver 是一种主从副本的模式，目前已经不推荐使用。<ul>
<li>一个主节点（Primary）和一个或多个从节点（Secondary）</li>
<li>可用于备份、故障恢复、读扩展等</li>
<li>只能有一个主节点，主节点提供所有的增、删、查、改服务，从节点不提供任何服务，但是可以通过设置使从节点提供查询服务。</li>
<li>每个从节点要知道主节点的地址，主节点记录在其上的所有操作，从节点定期轮询主节点获取这些操作，然后对自己的数据副本执行这些操作，从而保证从节点的数据与主节点一致。</li>
<li>当主节点出现故障时，只能人工介入，指定新的主节点，从节点不会自动升级为主节点。同时，在这段时间内，该集群架构只能处于只读状态。</li>
</ul>
</li>
<li>2、Replica Set 模式是一种互为主从的关系。Replica Set 将数据复制多份保存，不同服务器保存同一份数据，在出现故障时自动切换，实现故障转移，在实际生产中非常实用。<ul>
<li>也是一主多从，区别是：当集群中主节点发生故障时，副本集可以自动投票，选举出新的主节点，并引导其余的从节点连接新的主节点。</li>
<li>自带故障转移功能的主从复制。</li>
<li>只能有一个主节点。主节点负责数据的写入和更新，并在更新数据的同时，将操作信息写入名为 oplog 的日志文件当中。</li>
<li>从节点会定时轮询读取 oplog 日志，根据日志内容同步更新自身的数据，保持与主节点一致。</li>
<li>在副本集中还有一个额外的仲裁节点（不需要使用专用的硬件设备），负责在主节点发生故障时，参与选举新节点作为主节点。</li>
<li>副本集中的各节点会通过心跳信息来检测各自的健康状况，当主节点出现故障时，并选举其中一个作为新的主节点。为了保证选举票数不同，副本集的节点数保持为奇数。</li>
</ul>
</li>
<li>3、Sharding 模式适合处理大量数据，它将数据分开存储，不同服务器保存不同的数据，所有服务器数据的总和即为整个数据集。<ul>
<li>分片是指将数据拆分并分散存放在不同机器上的过程。</li>
<li>MongoDB 支持自动分片，可以使数据库架构对应用程序不可见。</li>
<li>需要三个重要的组件，分别是分片服务器（Shard Server）、配置服务器（Config Server）和路由服务器（Route Server）。<ul>
<li>需要三个重要的组件，分别是分片服务器（Shard Server）、配置服务器（Config Server）和路由服务器（Route Server）。</li>
<li>Shard Server 是一个 mongod 数据库实例，在实际生产中，一个 Shard Server 可由几台机器组成一个副本集来承担，防止因主节点单点故障导致整个系统崩溃。</li>
<li>Config Server 是独立的一个 mongod 进程，保存集群和分片的元数据。</li>
<li>Route Server 是独立的一个 mongos 进程，在集群中可作为路由使用，客户端由此接入，让整个集群看起来像是一个单一的数据库，提供客户端应用程序和分片集群之间的接口。它将客户端的请求路由给每个 Shard Server，在各 Shard Server 返回结果后进行聚合并返回客户端。</li>
</ul>
</li>
</ul>
</li>
<li>Sharding 模式追求的是高性能，而且是三种集群中最复杂的。在实际生产环境中，通常将 Replica Set 和 Sharding 两种技术结合使用。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/database/MongoDB/" data-id="ckqg285sz000ircfpfkrh13ox" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-backend/Linux/WSL2" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/backend/Linux/WSL2/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:11.084Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<p><a target="_blank" rel="noopener" href="https://adamtheautomator.com/windows-subsystem-for-linux/">https://adamtheautomator.com/windows-subsystem-for-linux/</a></p>
<h1 id="安装CentOS-WSL"><a href="#安装CentOS-WSL" class="headerlink" title="安装CentOS WSL"></a>安装CentOS WSL</h1><h2 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h2><ul>
<li>下载地址：<a target="_blank" rel="noopener" href="https://github.com/wsldl-pg/CentWSL/releases">https://github.com/wsldl-pg/CentWSL/releases</a></li>
</ul>
<h2 id="安装XFCE"><a href="#安装XFCE" class="headerlink" title="安装XFCE"></a>安装XFCE</h2><ul>
<li><p>1.先安装 epel-release （centos 的软件包yum源）<br><code>yum -y install epel-release</code></p>
</li>
<li><p>2.如果你的CENTOS是最小化安装的那默认都是不带X WINDOWS的，所以在安装这些桌面之前得先安装一下X WINDOWS，这个控制功能。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum upgrade</span><br><span class="line">yum -y groupinstall &quot;X Window System&quot;</span><br></pre></td></tr></table></figure></li>
<li><p>3.安装Xfce桌面环境<br><code>yum -y groupinstall install &quot;Xfce&quot;</code></p>
</li>
<li><p>4.增加中文字体</p>
<ul>
<li>先安装字体管理工具：<code>yum -y install xorg-x11-font-utils</code></li>
<li>将字体复制到 <code>/usr/share/fonts/chinese/</code> 目录下</li>
</ul>
</li>
<li><p>5.安装输入法</p>
<ul>
<li>选择fcitx输入法架构，不选择ibus</li>
<li>安装fcitx: <code>yum -y install fcitx fcitx-pinyin fcitx-configtool</code></li>
<li>修改locale：修改<code>/etc/locale.conf</code> 内容 <code>LANG=zh_CN.utf8</code><br>  参考： <a target="_blank" rel="noopener" href="https://blog.csdn.net/lemontree1945/article/details/80088986">https://blog.csdn.net/lemontree1945/article/details/80088986</a></li>
<li>增加环境变量<br>  参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_27785239/article/details/105874669">https://blog.csdn.net/qq_27785239/article/details/105874669</a>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export XIM=&quot;fcitx&quot;</span><br><span class="line">export XIM_PROGRAM=&quot;fcitx&quot;</span><br><span class="line">export XMODIFIERS=&quot;@im=fcitx&quot;</span><br><span class="line">export GTK_IM_MODULE=&quot;fcitx&quot;</span><br><span class="line">export QT_IM_MODULE=&quot;fcitx&quot;</span><br></pre></td></tr></table></figure></li>
<li>重启，在菜单 Settings -&gt; Fcitx Configuration里面配置（或者右上角键盘图标上配置）</li>
</ul>
</li>
</ul>
<ul>
<li>Add these variables in <code>~/.bashrc</code> file:<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export <span class="attr">DISPLAY</span>=$(cat /etc/resolv.conf | grep nameserver | awk <span class="string">&#x27;&#123;print $2; exit;&#125;&#x27;</span>):<span class="number">0.0</span></span><br><span class="line">export <span class="attr">LIBGL_ALWAYS_INDIRECT</span>=<span class="number">1</span></span><br></pre></td></tr></table></figure></li>
<li>Steps:<ul>
<li>Update and upgrade: <code>dnf upgrade</code></li>
<li>Install XFCE group pacakge: <code>dnf group install &quot;Xfce Desktop&quot;</code></li>
<li>Start XFCE: startxfce4 or xfce4-session</li>
</ul>
</li>
</ul>
<h2 id="增加菜单项"><a href="#增加菜单项" class="headerlink" title="增加菜单项"></a>增加菜单项</h2><p>进入目录 <code>/usr/share/applications</code> ，复制一个菜单项修改</p>
<h2 id="idea中-fcitx-无法输入中文"><a href="#idea中-fcitx-无法输入中文" class="headerlink" title="idea中 fcitx 无法输入中文"></a>idea中 fcitx 无法输入中文</h2><ol>
<li><p>修改<code>/etc/locale.conf</code> 内容 <code>LANG=zh_CN.utf8</code><br>参考： <a target="_blank" rel="noopener" href="https://blog.csdn.net/lemontree1945/article/details/80088986">https://blog.csdn.net/lemontree1945/article/details/80088986</a></p>
</li>
<li><p>增加环境变量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export XIM=&quot;fcitx&quot;</span><br><span class="line">export XIM_PROGRAM=&quot;fcitx&quot;</span><br><span class="line">export XMODIFIERS=&quot;@im=fcitx&quot;</span><br><span class="line">export GTK_IM_MODULE=&quot;fcitx&quot;</span><br><span class="line">export QT_IM_MODULE=&quot;fcitx&quot;</span><br></pre></td></tr></table></figure>
<p>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_27785239/article/details/105874669">https://blog.csdn.net/qq_27785239/article/details/105874669</a></p>
</li>
</ol>
<h2 id="idea打不开markdown文件"><a href="#idea打不开markdown文件" class="headerlink" title="idea打不开markdown文件"></a>idea打不开markdown文件</h2><p>错误信息如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">JCEF Browser component failed to start</span><br><span class="line">Missing native libraries : libXss.so.1</span><br></pre></td></tr></table></figure>

<p>修复： <code>yum install libXScrnSaver</code></p>
<h2 id="安装sublime"><a href="#安装sublime" class="headerlink" title="安装sublime"></a>安装sublime</h2><ol>
<li>下载Linux安装包: <a target="_blank" rel="noopener" href="https://download.sublimetext.com/sublime_text_3_build_3211_x64.tar.bz2">https://download.sublimetext.com/sublime_text_3_build_3211_x64.tar.bz2</a></li>
<li>解压: <code>tar -xvf sublime_text_3_build_3211_x64.tar.bz2</code></li>
<li>创建链接: <code>ln -s /opt/sublime_text_3/sublime_text /usr/bin/sublime_text</code></li>
<li>创建菜单项: <code>cp /opt/sublime_text_3/sublime_text.desktop /usr/share/applications/</code></li>
<li>修改文件路径： <code>sudo vi /usr/share/applications/sublime_text.desktop</code></li>
<li>禁止更新提示：Preferences =&gt; Settings -&gt; settings-user =&gt; 添加 <code>&quot;update_check&quot;: false</code></li>
<li>破解及使用指南： <a target="_blank" rel="noopener" href="https://www.codenong.com/js65a10209118f/">https://www.codenong.com/js65a10209118f/</a></li>
</ol>
<h1 id="安装Fedora-WSL"><a href="#安装Fedora-WSL" class="headerlink" title="安装Fedora WSL"></a>安装Fedora WSL</h1><h2 id="下载安装-1"><a href="#下载安装-1" class="headerlink" title="下载安装"></a>下载安装</h2><ul>
<li>下载地址：<a target="_blank" rel="noopener" href="https://github.com/WhitewaterFoundry/Fedora-Remix-for-WSL/releases">https://github.com/WhitewaterFoundry/Fedora-Remix-for-WSL/releases</a></li>
</ul>
<h2 id="安装XFCE-1"><a href="#安装XFCE-1" class="headerlink" title="安装XFCE"></a>安装XFCE</h2><ul>
<li>参考：<a target="_blank" rel="noopener" href="https://github.com/Biswa96/WSLInstall/blob/master/docs/Install_Desktop_Environments.md">https://github.com/Biswa96/WSLInstall/blob/master/docs/Install_Desktop_Environments.md</a></li>
<li>Add these variables in <code>~/.bashrc</code> file:<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export <span class="attr">DISPLAY</span>=$(cat /etc/resolv.conf | grep nameserver | awk <span class="string">&#x27;&#123;print $2; exit;&#125;&#x27;</span>):<span class="number">0.0</span></span><br><span class="line">export <span class="attr">LIBGL_ALWAYS_INDIRECT</span>=<span class="number">1</span></span><br></pre></td></tr></table></figure></li>
<li>Steps:<ul>
<li>Update and upgrade: <code>dnf upgrade</code></li>
<li>Install XFCE group pacakge: <code>dnf group install &quot;Xfce Desktop&quot;</code></li>
<li>Start XFCE: startxfce4 or xfce4-session</li>
</ul>
</li>
</ul>
<h2 id="yum-vs-dnf"><a href="#yum-vs-dnf" class="headerlink" title="yum vs dnf"></a>yum vs dnf</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/sfakh/article/details/109273318">https://blog.csdn.net/sfakh/article/details/109273318</a></p>
<h1 id="安装Ubuntu-wsl"><a href="#安装Ubuntu-wsl" class="headerlink" title="安装Ubuntu wsl"></a>安装Ubuntu wsl</h1><p>参考： <a target="_blank" rel="noopener" href="https://medium.com/@japheth.yates/the-complete-wsl2-gui-setup-2582828f4577">https://medium.com/@japheth.yates/the-complete-wsl2-gui-setup-2582828f4577</a></p>
<h1 id="CentOS7下安装Golang"><a href="#CentOS7下安装Golang" class="headerlink" title="CentOS7下安装Golang"></a><a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhzhlong/p/12695301.html">CentOS7下安装Golang</a></h1><p>安装文档：<a target="_blank" rel="noopener" href="https://golang.google.cn/doc/install">https://golang.google.cn/doc/install</a></p>
<ol>
<li><p>下载：<a target="_blank" rel="noopener" href="https://golang.google.cn/dl/">https://golang.google.cn/dl/</a></p>
</li>
<li><p>解压：解压压缩包到/usr/local目录<br><code>tar -C /usr/local -xzf go1.13.linux-amd64.tar.gz</code></p>
</li>
<li><p>配置环境变量</p>
</li>
</ol>
<p><code>vi /etc/profile </code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 最后一行添加</span><br><span class="line">export GOROOT=/usr/lib/golang</span><br><span class="line">export PATH=$PATH:$GOROOT/bin</span><br></pre></td></tr></table></figure>
<p><code>source /etc/profile</code></p>
<p>查看版本<br><code>go version</code></p>
<ol start="4">
<li>设置代理<br>命令行执行：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">go env -w GO111MODULE=auto</span><br><span class="line">go env -w GOPROXY=https://goproxy.io,direct</span><br></pre></td></tr></table></figure></li>
</ol>
<p>原理参考： <a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1593734">https://cloud.tencent.com/developer/article/1593734</a></p>
<ol start="5">
<li>设置GOPATH<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_33938733/article/details/88009373">GOPATH 的默认值</a></li>
</ol>
<p><code>source /etc/profile</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export GOPATH=/opt/gopath</span><br><span class="line">export PATH=$PATH:$GOPATH/bin</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/backend/Linux/WSL2/" data-id="ckqg285v6004trcfp0oovbf5o" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-backend/Linux/VIM使用记录" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/backend/Linux/VIM%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:11.083Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="★命令模式"><a href="#★命令模式" class="headerlink" title="★命令模式"></a>★命令模式</h2><h3 id="移动光标"><a href="#移动光标" class="headerlink" title="移动光标"></a>移动光标</h3><ul>
<li>h 或 向左方向键(←) → 光标向左移动一个字元 </li>
<li>j 或 向下方向鍵(↓) → 光标向下移动一个字元 </li>
<li>k 或 向上方向鍵(↑) → 光标向上移动一个字元 </li>
<li>l 或 向右方向鍵(→) → 光标向右移动一个字元 </li>
<li>[Ctrl] + [f] → 屏幕『向下』移动一页，相当于 [Page Down]按键 </li>
<li>[Ctrl] + [ b ] → 屏幕『向上』移动一页，相当于 [Page Up] 按键 </li>
<li>n<space> → n 表示『数字』。按下数字后再按空白鍵，光标会向右移动这一行的 n 个字元 </li>
<li>0 → 数字『 0 』：移动到这一行的最前面字元处  </li>
<li>$ → 移动到这一行的最后面字元处 </li>
<li>G → 移动到这个文件的最后一行 </li>
<li>nG → n 为数字。移动到这个文件的第 n 行(可配合 :set nu) </li>
<li>gg → 移动到这个文件的第一行，相当于 1G </li>
<li>n<Enter> → n 为数字。光标向下移动 n 行</li>
</ul>
<h3 id="查找与替换"><a href="#查找与替换" class="headerlink" title="查找与替换"></a>查找与替换</h3><ul>
<li>/word → 向光标之下查找一个名称为 word 的字符串。如想查找 eric4ever 字符串，输入 /eric4ever 即可 </li>
<li>?word → 向光标之上查找一个名称为 word 的字符串 </li>
<li>n → 『重复前一个查找的动作』 </li>
<li>N → 与 n 刚好相反，为『反向』进行前一个查找动作 </li>
<li>:n1,n2s/word1/word2/g → n1 与 n2 均为数字。在第 n1 与 n2 行之间查找 word1 字符串，并将该字符串替换为 word2。如：在 1 到 9 行之间查找 eric4ever 并替换为 ERIC4EVER 则：『:1,9s/eric4ever/ERIC4EVER/g』 </li>
<li>:1,$s/word1/word2/g → 从第一行到最后一行查找 word1 字符串，并将该字符串替换为 word2 </li>
<li>:1,$s/word1/word2/gc → 从第一行到最后一行查找 word1 字符串，并将该字符窗替换为 word2，替换前显示提示对话框是否确认替换</li>
</ul>
<h3 id="删除、复制与粘贴"><a href="#删除、复制与粘贴" class="headerlink" title="删除、复制与粘贴"></a>删除、复制与粘贴</h3><ul>
<li>x, X → 在一行字当中，x 为向后刪除一个字元 (相当于 [del] 按键)， X 为向前刪除一个字元(相当于 [backspace] 按键) </li>
<li>dd → 刪除光标所在的那一整列 </li>
<li>ndd → n 为数字。刪除光标所在的向下 n 列 </li>
<li>yy → 复制光标所在的那一行 </li>
<li>nyy → n 为数字。复制光标所在的向下 n 列 </li>
<li>p, P → p 为将已复制的内容粘贴在光标下一行上，P 则为粘贴在光标的上一行 </li>
<li>u → 还原前一个动作 </li>
<li>[Ctrl]+r → 重做上一个动作 </li>
<li>. → 小数点，意思是重复前一个动作</li>
</ul>
<h2 id="★编辑模式"><a href="#★编辑模式" class="headerlink" title="★编辑模式"></a>★编辑模式</h2><ul>
<li>i, I → 插入：在目前的光标所在处插入输入的文字，已存在的文字会向后退； 其中， i 为『从目前光标所在处插入』， I 为『在目前所在行的第一個非空白字元处开始插入』 </li>
<li>a, A → a 为『从目前光标所在的下一个字元处开始插入』， A 为『从光标所在行的最后一个字元处开始插入』 </li>
<li>o, O → o 为『在目前光标所在的下一行处插入新的一行』， O 为『在目前光标所在处的上一行插入新的一行』 </li>
<li>r, R → r 为『取代光标所在的那一个字元』， R 为『一直取代光标所在的文字，直到按下 ESC 为止』 </li>
<li>Esc → 退出编辑模式，回到一般模式中 </li>
</ul>
<h2 id="★末行指令模式"><a href="#★末行指令模式" class="headerlink" title="★末行指令模式"></a>★末行指令模式</h2><ul>
<li>:w → 将编辑的文件写入到硬盘上 </li>
<li>:q → 退出 vi </li>
<li>:wq → 保存后退出，若为 :wq! 则为强制保存为退出 </li>
<li>:set nu → 显示行号 </li>
<li>:set nonu → 取消显示行号</li>
</ul>
<p><img src="_v_images/2019-11-18-20-45-53.png"></p>
<h2 id="1、正则表达式查找"><a href="#1、正则表达式查找" class="headerlink" title="1、正则表达式查找"></a>1、正则表达式查找</h2><p><a target="_blank" rel="noopener" href="http://freetravel.blog.sohu.com/106769983.html">http://freetravel.blog.sohu.com/106769983.html</a></p>
<ul>
<li><ol>
<li>继续查找。n, 3n, N</li>
</ol>
</li>
<li><ol start="2">
<li>向上搜索。?</li>
</ol>
</li>
<li><ol start="3">
<li>\c 忽略大小写，而\C对大小写敏感。</li>
</ol>
</li>
<li><ol start="4">
<li>查找当前词。 * 向下， # 向上</li>
</ol>
</li>
<li><ol start="5">
<li>特殊字符。 .*[]^%/?~$ 加反斜杠 \。而\e表示<esc>；\t表示<tab>；\r表示- <cr>；\b表示<bs>。</li>
</ol>
</li>
<li><ol start="6">
<li>匹配换行或空格。\n 换行；\s 空白，注意是空白不是空格。_s 匹配换行或者空- 格；_a表示匹配换行或者一个字母。</li>
</ol>
</li>
<li><ol start="7">
<li>限定词首或者词尾。&lt; 以指定字符串开始的单词&lt;，  &gt; 以指定字符串结尾的单词</li>
</ol>
</li>
<li><ol start="8">
<li>行首和行尾。输入/^string 查找以string开始的行，输入/string$则查找以string- 结束的行。这个模式不会忽略前导或者后置的空格。</li>
</ol>
</li>
<li><ol start="9">
<li>可重复的字符。<em>重复多次或者0次，如： /be</em>  或 (be)*。+ 重复至少一次到无数- 次。 = 重复0次或者一次。{n,m} 重复n到m次。</li>
</ol>
</li>
<li><ol start="10">
<li> 匹配列表中的一个。| 分割的列表。如：/one|two|three，　　/end(if|- while|for)将会查找endif，endwhile以及endfor。</li>
</ol>
</li>
<li><ol start="11">
<li>特殊的字符集合。 \d 代替[0-9]； \D 代替非数字[^0-9]；\s表示空白字符代替[ - ] (<Tab> 和<Space>)；\S表示非空白字符代替[^ ]；\l表示小写字母代替[a-z]；\L表- 示非小写字母代替[^a-z]；\u表示大写字母代替[A-Z]；\U表示非大写字母代替[^A-Z]。</li>
</ol>
</li>
<li><ol start="12">
<li>搜索并替换。简单形式是 :s/from/to/； :%s/from/to/就是在全文查找from并替- 换为to；:1,50s/from/to/表示在第1行和第50行之间（包括1和50行）进行搜索和替换。</li>
</ol>
</li>
<li><ol start="13">
<li>替换的确认方式。默认是无须确认；g表示直接替换无须进行确认；c表示在进行替换- 前需要用户进行确认。</li>
</ol>
</li>
<li>这时你可以选择(y/n/a/q/1/^E/^Y）:y表示同意当前替换；n表示不同意当前替换；a表示- 替换当前和后面的并且不再确认；q表示立即结束替换操作；1表示把当前的替换后结束替换- 操作；^E向上滚屏^Y向下滚屏，用来帮助查看前后内容以决定进行操作。</li>
<li><ol start="14">
<li>查找历史。 上下键</li>
</ol>
</li>
</ul>
<h2 id="2、按目录查找字符串"><a href="#2、按目录查找字符串" class="headerlink" title="2、按目录查找字符串"></a>2、按目录查找字符串</h2><p>使用 vimgrep<br><a target="_blank" rel="noopener" href="http://www.nerdlinux.com/post/43/">http://www.nerdlinux.com/post/43/</a><br><a target="_blank" rel="noopener" href="http://blog.csdn.net/unbutun/article/details/6591257">http://blog.csdn.net/unbutun/article/details/6591257</a><br><a target="_blank" rel="noopener" href="http://blog.csdn.net/qilihechuncai/article/details/8587389">http://blog.csdn.net/qilihechuncai/article/details/8587389</a></p>
<h2 id="3、查看-转换文件编码"><a href="#3、查看-转换文件编码" class="headerlink" title="3、查看/转换文件编码"></a>3、查看/转换文件编码</h2><p><a target="_blank" rel="noopener" href="http://blog.csdn.net/dengxu11/article/details/6763765">http://blog.csdn.net/dengxu11/article/details/6763765</a>  </p>
<p> :set fenc=gbk 然后保存文件即可转换编码</p>
<p><a target="_blank" rel="noopener" href="http://sosowo.org/archives/60">http://sosowo.org/archives/60</a></p>
<h2 id="4、列模式"><a href="#4、列模式" class="headerlink" title="4、列模式"></a>4、列模式</h2><p>c+q 进入列模式<br><a target="_blank" rel="noopener" href="http://blog.csdn.net/hywhy/article/details/5862456">http://blog.csdn.net/hywhy/article/details/5862456</a></p>
<h2 id="5、文件比较"><a href="#5、文件比较" class="headerlink" title="5、文件比较"></a>5、文件比较</h2><p><a target="_blank" rel="noopener" href="http://bbs.ednchina.com/BLOG_ARTICLE_222557.HTM">http://bbs.ednchina.com/BLOG_ARTICLE_222557.HTM</a></p>
<h2 id="6、多Tab"><a href="#6、多Tab" class="headerlink" title="6、多Tab"></a>6、多Tab</h2><p>:tabnew</p>
<h2 id="7、outline"><a href="#7、outline" class="headerlink" title="7、outline"></a>7、outline</h2><p>ctags+taglist</p>
<h2 id="8、FileExplorer"><a href="#8、FileExplorer" class="headerlink" title="8、FileExplorer"></a>8、FileExplorer</h2><p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/ifys/archive/2010/10/24/1860610.html">http://www.cnblogs.com/ifys/archive/2010/10/24/1860610.html</a>  前面四部分。</p>
<p>ctags+taglist+bufexplorer+winmanager</p>
<p>NERDTree</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/backend/Linux/VIM%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/" data-id="ckqg285v4004srcfpeolddm2m" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-backend/Linux/lubuntu版本：Desktop与Alternate区别" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/backend/Linux/lubuntu%E7%89%88%E6%9C%AC%EF%BC%9ADesktop%E4%B8%8EAlternate%E5%8C%BA%E5%88%AB/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:11.082Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>大概的概括是：desktop 是livecd+图形安装cd，server是服务器版，alternate是文本安装模式的。</p>
<h3 id="Desktop版本："><a href="#Desktop版本：" class="headerlink" title="Desktop版本："></a>Desktop版本：</h3><p>其实desktop 是Live CD 的名字，也就是刻录在光盘上运行的Linux，是一套已经装好的系统。把它烧录到光盘上放进光驱就可以直接运行这套完整的linux 。当然你也可以在运行之后把它“ 安装” 到硬盘上，而这样的安装更像是一种拷贝或者还原，类似ghost 。</p>
<p>Live CD可以免安装体验 也可以用于网络诊断 比较方便。<br>Live CD可以用于在windows引导不了时做一些工作，相当于一个移动的操作系统。<br>Live CD还可以用于备份系统 还可以用于安装gentoo lfs等发行版。<br>Live CD还有一个最主要的工作是恢复引导分区。</p>
<p>The default “Desktop” installer requires 384-800 MB of RAM (depending on your selected options.) If you have any problems, or if you’re comfortable using a keyboard interface, try the alternate installer to install on computers with less RAM or a hard disk smaller than 4.3 GB.</p>
<h3 id="Alternate版本："><a href="#Alternate版本：" class="headerlink" title="Alternate版本："></a>Alternate版本：</h3><p>alternate 是标准的安装CD ，包含了一些桌面程序，可以用高级安装模式安装，在安装时可以划分分区。也可以当作Server 来用，不过一些 Server 程序要自己通过网络来安装Alternate 安装过程会有高级分区以及grub 安装选项,Desktop 没有.alternate 既能安装desktop 也能安装server。</p>
<ul>
<li>创建预配置OEM系统；</li>
<li>设置自动布置；</li>
<li>在无网络链接情况下从旧系统升级；</li>
<li>LVM和/或RAID分区；</li>
<li>在小于256MB内存的系统上安装（但是注意相应地低内存系统可能无法运行完整的桌面环境）。</li>
</ul>
<p>Alternate ISOs are for low-RAM PCs and those that can only boot from CD. Computers with less than 400 MB of RAM are considered low-RAM computers.</p>
<h3 id="Server版本："><a href="#Server版本：" class="headerlink" title="Server版本："></a>Server版本：</h3><p>server版本就不多介绍了，主要用于服务器的搭建，自带没有桌面环境，不建议新手安装。</p>
<p>以上就是他们之间的区别，按照你的需求来选择吧！</p>
<p>最后如果安装软磁盘阵列请您选择Alternate版本或者Server版本。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/backend/Linux/lubuntu%E7%89%88%E6%9C%AC%EF%BC%9ADesktop%E4%B8%8EAlternate%E5%8C%BA%E5%88%AB/" data-id="ckqg285v6004urcfphe0gdp97" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-backend/Linux/Fedora使用记录" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/backend/Linux/Fedora%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:11.081Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Add国内yum源"><a href="#Add国内yum源" class="headerlink" title="Add国内yum源"></a>Add国内yum源</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> /etc/yum.repos.d</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> wget http://mirrors.163.com/.<span class="built_in">help</span>/fedora-163.repo</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> wget http://mirrors.163.com/.<span class="built_in">help</span>/fedora-updates-163.repo</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> yum makecache</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="增加FZUG-源"><a href="#增加FZUG-源" class="headerlink" title="增加FZUG 源"></a>增加FZUG 源</h1><ul>
<li>一、安装 FZUG 源<br><a target="_blank" rel="noopener" href="https://github.com/FZUG/repo/wiki/%E6%B7%BB%E5%8A%A0-FZUG-%E6%BA%90">FZUG 源安装指南</a><br><code>dnf install https://mirrors.tuna.tsinghua.edu.cn/fzug/free/30/x86_64/fzug-release-30-0.1.noarch.rpm</code><br>Fedora 31 用户，暂时可用以上链接。虽然版本叫 30, 但是在 31 的系统上是能够正确选择 Fedora 31 的仓库的。</li>
</ul>
<ul>
<li>二、Fedora安装rpmfusion源方法</li>
</ul>
<p>1、下载两个文件：</p>
<p>　　1）<a target="_blank" rel="noopener" href="http://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-stable.noarch.rpm">http://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-stable.noarch.rpm</a></p>
<p>　　2）<a target="_blank" rel="noopener" href="http://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-stable.noarch.rpm">http://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-stable.noarch.rpm</a></p>
<p>2、安装这两个文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install rpmfusion-free-release-stable.noarch.rpm</span><br><span class="line">yum install rpmfusion-nonfree-release-stable.noarch.rpm</span><br></pre></td></tr></table></figure>

<p>3、生成缓存: yum makecache</p>
<h1 id="安装JDK"><a href="#安装JDK" class="headerlink" title="安装JDK"></a>安装JDK</h1><p>打开dnfdragora，搜索 JDK，安装 java-1.8.0-openjdk-devel 即可</p>
<h1 id="安装Amazon-Corretto-JDK"><a href="#安装Amazon-Corretto-JDK" class="headerlink" title="安装Amazon Corretto JDK"></a>安装Amazon Corretto JDK</h1><p><a target="_blank" rel="noopener" href="https://docs.aws.amazon.com/corretto/latest/corretto-8-ug/downloads-list.html">https://docs.aws.amazon.com/corretto/latest/corretto-8-ug/downloads-list.html</a></p>
<p>sudo yum install -y java-1.8.0-amazon-corretto*.rpm</p>
<h1 id="Fedora27-安装输入法"><a href="#Fedora27-安装输入法" class="headerlink" title="Fedora27 安装输入法"></a>Fedora27 安装输入法</h1><ul>
<li>安装fcitx<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo dnf install fcitx fcitx-libpinyin fcitx-qt4 kcm-fcitx</span><br><span class="line">dnf install fcitx-configtool</span><br></pre></td></tr></table></figure>
安装好以后，运行fcitx，再运行fcitx-configtool。在配置选项里加入输入法。如果系统语言为英文，记得勾选掉下面的“Only Show Current Language”选项。然后点击应用。</li>
</ul>
<p>运行一下命令来切换系统默认输入法至fcitx： <code>imsettings-switch fcitx</code></p>
<p>此处会有报错，请忽略，然后重启电脑。安装完成。</p>
<h1 id="修改home下的中文目录为英文目录"><a href="#修改home下的中文目录为英文目录" class="headerlink" title="修改home下的中文目录为英文目录"></a>修改home下的中文目录为英文目录</h1><ul>
<li><p>安装 <code>xdg-user-dirs-gtk</code><br><code>yum install -y xdg-user-dirs-gtk</code></p>
</li>
<li><p>切换英文Lang</p>
</li>
</ul>
<p>打开终端，在终端下输入命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export LANG=en_US</span><br><span class="line">xdg-user-dirs-gtk-update</span><br></pre></td></tr></table></figure>

<p>这个时候会弹出一个配置界面，提示是否将中文目录切换为英文目录。选中不再提示，确定。系统会删除没有内容的中文目录，而有内容的目录会保持。并创建8个 相应的英文目录。<br>此时，您在“位置”里看到的常用中文目录已经变成英文目录。只需要将原中文目录的内容拷贝到相应英文目录，并删 除中文目录即可。</p>
<ul>
<li>恢复中文Lang</li>
</ul>
<p><code>export LANG=zh_CN.UTF-8</code></p>
<h1 id="删除多余内核"><a href="#删除多余内核" class="headerlink" title="删除多余内核"></a>删除多余内核</h1><p>删除旧内核</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> rpm -qa | grep kernel</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yum remove kernel-core-4.18.0 kernel-devel-4.18.0 kernel-tools-libs-4.18.0 kernel-headers-4.18.0</span></span><br></pre></td></tr></table></figure>

<h1 id="安装wechat"><a href="#安装wechat" class="headerlink" title="安装wechat"></a>安装wechat</h1><p>使用FZUG源，打开dnfdragora，搜索 wechat，安装即可</p>
<h1 id="安装wps"><a href="#安装wps" class="headerlink" title="安装wps"></a>安装wps</h1><p>下载wps： <a target="_blank" rel="noopener" href="https://linux.wps.cn/">https://linux.wps.cn/</a><br>安装： <code>yum install wps-office-11.1.0.9662-1.x86_64.rpm</code></p>
<h1 id="安装qq"><a href="#安装qq" class="headerlink" title="安装qq"></a>安装qq</h1><p>下载： <a target="_blank" rel="noopener" href="https://im.qq.com/linuxqq/download.html">https://im.qq.com/linuxqq/download.html</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install gtk2.x86_64 # centos</span><br><span class="line">sudo rpm -ivh linuxqq_1.0.1-b1-100_mips64el.rpm</span><br></pre></td></tr></table></figure>

<h1 id="FTP客户端-FileZilla"><a href="#FTP客户端-FileZilla" class="headerlink" title="FTP客户端-FileZilla"></a>FTP客户端-FileZilla</h1><p>在dnfdragora中安装</p>
<h1 id="SSH客户端EasySSH"><a href="#SSH客户端EasySSH" class="headerlink" title="SSH客户端EasySSH"></a>SSH客户端EasySSH</h1><ul>
<li>方法1</li>
</ul>
<p>1、下载easyssh*.rpm版本<br><a target="_blank" rel="noopener" href="https://download.copr.fedorainfracloud.org/results/deadmozay/easyssh/fedora-32-x86_64/00865362-easyssh/">https://download.copr.fedorainfracloud.org/results/deadmozay/easyssh/fedora-32-x86_64/00865362-easyssh/</a><br>2、安装： <code>yum install -y easyssh*.rpm</code></p>
<ul>
<li>方法2</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/yum.repo.d/</span><br><span class="line">wget https://copr.fedorainfracloud.org/coprs/deadmozay/easyssh/repo/fedora-32/deadmozay-easyssh-fedora-32.repo</span><br><span class="line">yum install -y easyssh</span><br></pre></td></tr></table></figure>

<h1 id="openbox分屏"><a href="#openbox分屏" class="headerlink" title="openbox分屏"></a>openbox分屏</h1><p>lxqt默认使用openbox窗口管理器。openbox可以通过配置keybind实现分屏。</p>
<p><a target="_blank" rel="noopener" href="https://askubuntu.com/questions/1182097/lubuntu-19-10-20-04-how-to-tile-windows-the-window-tiling-section-is-missing">https://askubuntu.com/questions/1182097/lubuntu-19-10-20-04-how-to-tile-windows-the-window-tiling-section-is-missing</a><br><a target="_blank" rel="noopener" href="https://www.allartsoftworks.com/it/articles/howto-resize-split-windows-lxde-lubuntu-openbox-how-to-resize-windows-with-hotkeys-under-lubuntu-lxde/">https://www.allartsoftworks.com/it/articles/howto-resize-split-windows-lxde-lubuntu-openbox-how-to-resize-windows-with-hotkeys-under-lubuntu-lxde/</a></p>
<p>编辑<code>~/.config/openbox/lxqt-rc.xml</code>，加入以下内容。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- Lubuntu specific. Keybindings for window tiling   --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--  # HalfLeftScreen  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">keybind</span> <span class="attr">key</span>=<span class="string">&quot;C-W-Left&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">&quot;UnmaximizeFull&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">&quot;MoveResizeTo&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">height</span>&gt;</span>100%<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">width</span>&gt;</span>50%<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">keybind</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- # HalfRightScreen  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">keybind</span> <span class="attr">key</span>=<span class="string">&quot;C-W-Right&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">&quot;UnmaximizeFull&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">&quot;MoveResizeTo&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x</span>&gt;</span>-0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">height</span>&gt;</span>100%<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">width</span>&gt;</span>50%<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">keybind</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- # HalfUpperScreen  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">keybind</span> <span class="attr">key</span>=<span class="string">&quot;C-W-Up&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">&quot;UnmaximizeFull&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">&quot;MoveResizeTo&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">width</span>&gt;</span>100%<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">height</span>&gt;</span>50%<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">keybind</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- # HalfLowerScreen --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">keybind</span> <span class="attr">key</span>=<span class="string">&quot;C-W-Down&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">&quot;UnmaximizeFull&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">&quot;MoveResizeTo&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">y</span>&gt;</span>-0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">width</span>&gt;</span>100%<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">height</span>&gt;</span>50%<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">keybind</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>配置完后，在终端执行<code>openbox --reconfigure</code> 是配置生效。</p>
<h1 id="IDEA显示Run-Dashboard窗口"><a href="#IDEA显示Run-Dashboard窗口" class="headerlink" title="IDEA显示Run Dashboard窗口"></a>IDEA显示Run Dashboard窗口</h1><p>在Settings -&gt; Plugins 中增加Spring Boot支持</p>
<p>在.idea下的workspace.xml中，找到 <code>&lt;component name=&quot;RunDashboard&quot;&gt;</code>，加入：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;option name=&quot;configurationTypes&quot;&gt;  </span><br><span class="line">     &lt;set&gt;  </span><br><span class="line">       &lt;option value=&quot;SpringBootApplicationConfigurationType&quot; /&gt;  </span><br><span class="line">     &lt;/set&gt;  </span><br><span class="line">&lt;/option&gt; </span><br></pre></td></tr></table></figure>

<p>重新打开项目，在View -&gt; Tools Windows下，可以看到<code>Run Dashboard</code>，运行SpringBoot程序就可以看到这个窗口了。</p>
<h1 id="yum-install-redis"><a href="#yum-install-redis" class="headerlink" title="yum install redis"></a>yum install redis</h1><ul>
<li><p>安装<br><code>yum install redis</code></p>
</li>
<li><p>启动<br><code>service redis start</code> 或 <code>systemctl start redis</code></p>
</li>
<li><p>查看redis安装时创建的文件<br><code>rpm -qa |grep redis</code><br><code>rpm -ql redis</code></p>
</li>
<li><p>查看redis版本：<br><code>redis-cli --version</code></p>
</li>
<li><p>设置为开机自动启动<br><code>chkconfig redis on</code> 或 <code>systemctl enable redis.service</code></p>
</li>
<li><p>开启Redis远程登录连接</p>
</li>
</ul>
<p>redis默认只能localhost访问，所以需要开启远程登录。解决方法如下：<br>在redis的配置文件/etc/redis.conf中<br>将bind 127.0.0.1 改成了 bind 0.0.0.0<br>然后要配置防火墙 开放端口6379</p>
<ul>
<li>连接redis</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[gjh@localhost nacos]$ redis-cli</span><br><span class="line">127.0.0.1:6379&gt; set key1 &quot;hello world&quot;</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; get key1</span><br><span class="line">&quot;hello world&quot;</span><br><span class="line">127.0.0.1:6379&gt; del key1</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; get key1</span><br><span class="line">(nil)</span><br></pre></td></tr></table></figure>

<h1 id="yum用法"><a href="#yum用法" class="headerlink" title="yum用法"></a>yum用法</h1><ul>
<li><p>查询<br>使用 yum search <term> [more_terms] 命令，能够在已启用的软件包仓库中，对所有软件包的名称、描述和概述中进行搜索，最后，yum 会以显示符合合条件的搜索结果列表。<br>yum list 以及相关的一些命令则能够为你提供有关软件包、软件包集和软件仓库的信息。<br>所有的 yum list 命令都能够使用 glob 表达式作为参数，对输出结果进行过滤。在 glob 表达式中，你可以使用 * 代表任何数量个字符，使用 ? 代表任何一个字符。通过后面的示例，你可以对 glob 表达式有些简单的认识。<br>yum list <glob_expr> [more_glob_exprs] ── 列出所有符合 glob 表达式的软件包<br>yum list all ── 列出所有已安装的和可用的软件包<br>yum list installed ── 列出所有已经安装在系统中的软件包。输出结果的最右边一列是取得该软件包的软件仓库。标识为 installed 的软件包则说明它是做为系统基本组件而预安装的。<br>yum list available ── 列出所有启用的软件仓库中可用的软件包<br>yum grouplist ── 列出所有软件包组<br>yum repolist ── 列出所有启用的软件仓库的 ID，名称 及其包含的软件包的数量<br>yum info <package_name> [more_names] 命令可查看一个或多个软件包的信息 (此处同样可以应用 glob 表达式)。</p>
</li>
<li><p>install &amp; uninstall<br>yum install softwarename  #安装<br>yum remove softwarename #卸载软件<br>yum reinstall softwarename #重新安装<br>yum clean all #清空yum缓存</p>
</li>
<li><p>升级<br>yum check-update: 可以了解系统中哪些已安装的包当前有更新<br>yum update：升级所有包同时也升级软件和系统内核<br>yum upgrade：只升级所有包，不升级软件和系统内核<br>yum history #查看系统软件改变历史</p>
</li>
</ul>
<p>yum使用upgrade选项，等价于打开obsoletes配置的yum update。而默认中/etc/yum.conf配置文件obsoletes是打开的，因此这两个指令选项是等价的。<br>这是一个yum缓存配置文件的示例，obsoletes定义了更新时处理软件包的取代关系，简单来讲，1表示更新旧的rpm包的同时会删除旧包，0表示更新的时候不会删除旧包，</p>
<p>因此，yum update和yum upgrade的功能都是一样的，都是将需要更新的package更新到源中的最新版。唯一不同的是，yum upgrade会删除旧版本的package，而yum update则会保留(obsoletes=0)。</p>
<p>生产环境中建议使用yum update，防止因为替换，导致旧的软件包依赖出现问题。</p>
<h1 id="npm错误"><a href="#npm错误" class="headerlink" title="npm错误"></a>npm错误</h1><p><code>使用 npm start 影响项目出现 Error: ENOSPC: System limit for number of file watchers reached, watch</code></p>
<p>原来在 fedorac，entos，ubuntu 等系统中，由于 gulp serve 跟踪项目的文件数有限制，必须要设置一下，解除设置才可以继续跟踪。还有可能是因为 gulp 的 watch 需要监听很多文件的改动，但是 fedora，ubuntu 系统的文件句柄其实是有限制的，因此可以使用下面的命令解除</p>
<p><code>echo fs.inotify.max_user_watches=524288 | sudo tee -a /etc/sysctl.conf &amp;&amp; sudo sysctl -p</code></p>
<h1 id="挂载VMWare的共享目录"><a href="#挂载VMWare的共享目录" class="headerlink" title="挂载VMWare的共享目录"></a>挂载VMWare的共享目录</h1><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/skyheaving/p/12286513.html">https://www.cnblogs.com/skyheaving/p/12286513.html</a></p>
<ul>
<li>打开<code>/etc/fuse.conf</code> 的 <code>user_allow_other</code> 注释</li>
<li>在<code>/etc/fstab</code>文件中，添加 <code>.host:/D /home/gjh/dd fuse.vmhgfs-fuse    allow_other,max_write=61440,defaults   0 0</code><br>  PS: <code>max_write=61440</code> 的作用是防止不能写入稍大文件。</li>
<li>立即生效： <code>mount -a</code></li>
<li>卸载 <code>umount /mnt/hgfs</code></li>
</ul>
<h1 id="安装sublime"><a href="#安装sublime" class="headerlink" title="安装sublime"></a>安装sublime</h1><p>按照官网的指导安装。<a target="_blank" rel="noopener" href="https://www.sublimetext.com/docs/3/linux_repositories.html#dnf">https://www.sublimetext.com/docs/3/linux_repositories.html#dnf</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Install the GPG key:</span></span><br><span class="line">sudo rpm -v --import https://download.sublimetext.com/sublimehq-rpm-pub.gpg</span><br><span class="line"><span class="meta">#</span><span class="bash"> Select the Stable channel to use:</span></span><br><span class="line">sudo dnf config-manager --add-repo https://download.sublimetext.com/rpm/stable/x86_64/sublime-text.repo</span><br><span class="line"><span class="meta">#</span><span class="bash"> Update dnf and install Sublime Text</span></span><br><span class="line">sudo dnf install sublime-text</span><br></pre></td></tr></table></figure>

<ul>
<li>破解<br><a target="_blank" rel="noopener" href="https://www.codenong.com/js65a10209118f/">sublime text Build 3211最详细的安装方法</a></li>
</ul>
<h1 id="保存-git账号密码"><a href="#保存-git账号密码" class="headerlink" title="保存 git账号密码"></a>保存 git账号密码</h1><p>1.在~/下， touch创建文件 .git-credentials, 用vim编辑此文件，输入内容格式：</p>
<p>touch .git-credentials<br>vim .git-credentials<br>在里面按“i”然后输入： https://{username}:{password}@github.com </p>
<p>比如 <a target="_blank" rel="noopener" href="https://account:password@github.com/">https://account:password@github.com</a></p>
<ol start="2">
<li>在终端下执行</li>
</ol>
<p>git config –global credential.helper store<br>3. 可以看到~/.gitconfig文件，会多了一项：</p>
<p>[credential]<br>helper = store</p>
<h1 id="Fedora使用"><a href="#Fedora使用" class="headerlink" title="Fedora使用"></a>Fedora使用</h1><p>PCManFM无法启动xterm： <code>sudo ln -s /usr/bin/lxterminal /usr/bin/xterm</code></p>
<h1 id="maven私服不能下载snapshots依赖"><a href="#maven私服不能下载snapshots依赖" class="headerlink" title="maven私服不能下载snapshots依赖"></a>maven私服不能下载snapshots依赖</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">profiles</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 根据仓库id激活下面的配置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>xx-nexus<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">activation</span>&gt;</span><span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span><span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>xx-nexus<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 私服地址 --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://xx.xx.xx.xx:8081/repository/xx_group/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">releases</span>&gt;</span><span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span><span class="tag">&lt;/<span class="name">releases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span><span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span><span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="开始菜单修改"><a href="#开始菜单修改" class="headerlink" title="开始菜单修改"></a>开始菜单修改</h1><p>注意几个目录和文件。</p>
<ul>
<li><code>/usr/share/applications/</code>下的<code>.desktop</code>文件和 <code>mimeinfo.cache</code>文件</li>
<li><code>~/.local/share/applications/</code>下的<code>.desktop</code>文件和<code>mimeinfo.cache</code>文·件 </li>
<li><code>/etc/gnome/defaults.list</code>和<code>~/.local/share/applications/default.list</code> 文件保存的是文件的打开方式。</li>
</ul>
<h1 id="find的用法"><a href="#find的用法" class="headerlink" title="find的用法"></a>find的用法</h1><p>实例<br>将目前目录及其子目录下所有延伸档名是 c 的文件列出来。<br><code># find . -name &quot;*.c&quot;</code></p>
<p>将目前目录其其下子目录中所有一般文件列出<br><code># find . -type f</code></p>
<p>将目前目录及其子目录下所有最近 20 天内更新过的文件列出·<br><code># find . -ctime -20</code></p>
<p>查找/var/log目录中更改时间在7日以前的普通文件，并在删除之前询问它们：<br><code># find /var/log -type f -mtime +7 -ok rm &#123;&#125; \;</code></p>
<p>查找前目录中文件属主具有读、写权限，并且文件所属组的用户和其他用户具有读权限的文件：<br><code># find . -type f -perm 644 -exec ls -l &#123;&#125; \;</code></p>
<p>为了查找系统中所有文件长度为0的普通文件，并列出它们的完整路径：<br><code># find / -type f -size 0 -exec ls -l &#123;&#125; \;</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/backend/Linux/Fedora%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/" data-id="ckqg285v3004rrcfp0123fg85" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-backend/Linux/CentOS7安装MySQL5.7" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/backend/Linux/CentOS7%E5%AE%89%E8%A3%85MySQL5.7/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:11.077Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<p>参考：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/bigbrotherer/p/7241845.html">CentOS7安装MySQL</a></p>
<h1 id="删除MariaDB怎么操作"><a href="#删除MariaDB怎么操作" class="headerlink" title="删除MariaDB怎么操作"></a>删除MariaDB怎么操作</h1><p>在CentOS中默认安装有MariaDB，不想用接卸载了。</p>
<ul>
<li><p>首先、查询所安装的MariaDB组件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost logs]# rpm -qa | grep Maria*</span><br><span class="line">MariaDB-server-5.5.49-1.el7.centos.x86_64</span><br><span class="line">MariaDB-common-5.5.49-1.el7.centos.x86_64</span><br><span class="line">MariaDB-client-5.5.49-1.el7.centos.x86_64</span><br></pre></td></tr></table></figure></li>
<li><p>卸载数据库：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost logs]# yum -y remove mari*</span><br></pre></td></tr></table></figure></li>
<li><p>删除数据库文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost logs]# rm -rf /var/lib/mysql/*</span><br></pre></td></tr></table></figure></li>
<li><p>再查看一下还有没有残留，如果有，再删除</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost logs]# rpm -qa | grep Maria*</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="CentOS7安装MySQL"><a href="#CentOS7安装MySQL" class="headerlink" title="CentOS7安装MySQL"></a>CentOS7安装MySQL</h1><p>在CentOS中默认安装有MariaDB，这个是MySQL的分支，但为了需要，还是要在系统中安装MySQL，而且安装完成之后可以直接覆盖掉MariaDB。</p>
<ul>
<li>1、下载并安装MySQL官方的 Yum Repository<blockquote>
<p><code>[root@localhost ~]# wget -i -c http://dev.mysql.com/get/mysql57-community-release-el7-10.noarch.rpm</code></p>
</blockquote>
</li>
</ul>
<p>使用上面的命令就直接下载了安装用的Yum Repository，大概25KB的样子，然后就可以直接yum安装了。</p>
<blockquote>
<p><code>[root@localhost ~]# yum -y install mysql57-community-release-el7-10.noarch.rpm</code></p>
</blockquote>
<p>之后就开始安装MySQL服务器。</p>
<blockquote>
<p><code>[root@localhost ~]# yum -y install mysql-community-server</code></p>
</blockquote>
<p>这步可能会花些时间，安装完成后就会覆盖掉之前的mariadb。</p>
<p>至此MySQL就安装完成了，然后是对MySQL的一些设置。</p>
<ul>
<li>2、MySQL数据库设置</li>
</ul>
<p>首先启动MySQL</p>
<blockquote>
<p><code>[root@localhost ~]# systemctl start  mysqld.service</code></p>
</blockquote>
<p>查看MySQL运行状态，运行状态如图：</p>
<blockquote>
<p><code>[root@localhost ~]# systemctl status mysqld.service</code></p>
</blockquote>
<p>此时MySQL已经开始正常运行，不过要想进入MySQL还得先找出此时root用户的密码，通过如下命令可以在日志文件中找出密码：</p>
<blockquote>
<p><code>[root@localhost ~]# grep &quot;password&quot; /var/log/mysqld.log</code><br>A temporary password is generated for miner@localhost: Vaj4edh+G2j6</p>
</blockquote>
<p>如下命令进入数据库：</p>
<blockquote>
<p><code>[root@localhost ~]# mysql -uroot -p</code></p>
</blockquote>
<p>输入初始密码，此时不能做任何事情，因为MySQL默认必须修改密码之后才能操作数据库：</p>
<blockquote>
<p><code>mysql&gt; ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;new password&#39;;</code></p>
</blockquote>
<p>这里有个问题，新密码设置的时候如果设置的过于简单会报错：</p>
<blockquote>
<p>ERROR 1819 (HY000): Your password does not satisfy the current policy requirements</p>
</blockquote>
<p>但此时还有一个问题，就是因为安装了Yum Repository，以后每次yum操作都会自动更新，需要把这个卸载掉：</p>
<blockquote>
<p><code>[root@localhost ~]# yum -y remove mysql57-community-release-el7-10.noarch</code></p>
</blockquote>
<p>此时才算真的完成了。</p>
<h1 id="MySQL赋给用户权限"><a href="#MySQL赋给用户权限" class="headerlink" title="MySQL赋给用户权限"></a>MySQL赋给用户权限</h1><p>命令格式：</p>
<blockquote>
<p><code>mysql&gt; grant 权限1,权限2,…权限n on 数据库名称.表名称 to 用户名@用户地址 identified by &#39;连接口令&#39;;</code></p>
<ul>
<li>权限1,权限2,…权限n代表  <code>select,insert,update,delete,create,drop,index,alter,grant,references,reload,shutdown,process,file</code> 等14个权限。</li>
<li>当权限1,权限2,…权限n被 <code>all privileges</code> 或者 <code>all</code> 代替，表示赋予用户全部权限。</li>
<li>当 <code>数据库名称.表名</code> 称被 <code>*.*</code> 代替，表示赋予用户操作服务器上所有数据库所有表的权限。</li>
<li>用户地址可以是 <code>localhost</code> ，也可以是ip地址、机器名字、域名。也可以用 <code>&#39;%&#39;</code> 表示从任何地址连接。</li>
<li><code>&#39;连接口令&#39;</code> 不能为空，否则创建失败。</li>
</ul>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 给来自10.163.225.87的用户joe分配可对数据库vtdc的employee表进行select,insert,update,delete,create,drop等操作的权限，并设定口令为123。</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash">grant select,insert,update,delete,create,drop on vtdc.employee to joe@10.163.225.87 identified by <span class="string">&#x27;123&#x27;</span>;</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 给来自10.163.225.87的用户joe分配可对数据库vtdc所有表进行所有操作的权限，并设定口令为123。</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash">grant all privileges on vtdc.* to joe@10.163.225.87 identified by <span class="string">&#x27;123&#x27;</span>;</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 给来自10.163.225.87的用户joe分配可对所有数据库的所有表进行所有操作的权限，并设定口令为123。</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash">grant all privileges on *.* to joe@10.163.225.87 identified by <span class="string">&#x27;123&#x27;</span>;</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 给本机用户joe分配可对所有数据库的所有表进行所有操作的权限，并设定口令为123。</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash">grant all privileges on *.* to joe@localhost identified by <span class="string">&#x27;123&#x27;</span>;</span></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/backend/Linux/CentOS7%E5%AE%89%E8%A3%85MySQL5.7/" data-id="ckqg285v3004qrcfp4mwegvra" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-backend/Linux/CentOS7安装MongoDB-3.6" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/backend/Linux/CentOS7%E5%AE%89%E8%A3%85MongoDB-3.6/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:11.076Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<h2 id="配置yum源"><a href="#配置yum源" class="headerlink" title="配置yum源"></a>配置yum源</h2><p><code>vim /etc/yum.repos.d/mongodb-org-3.6.repo</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[mongodb-org-3.6]</span><br><span class="line">name=MongoDB Repository</span><br><span class="line">baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.6/x86_64/</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=1</span><br><span class="line">gpgkey=https://www.mongodb.org/static/pgp/server-3.6.asc</span><br></pre></td></tr></table></figure>

<h2 id="安装与配置"><a href="#安装与配置" class="headerlink" title="安装与配置"></a>安装与配置</h2><ul>
<li>yum安装<br><code>yum -y install mongodb-org</code></li>
<li>查看mongodb的位置<br><code>whereis mongod</code></li>
<li>创建数据目录与日志目录，并授权<br><code>mkdir -p /data/mongodb/data /data/mongodb/logs</code>        # 一般分配到独立的大分区<br><code>chown mongod.mongod /data/mongodb/data /data/mongodb/logs -R</code>     #默认是使用mongod执行的，所以需要修改一下目录权限</li>
<li>修改配置<br><code>vim /etc/mongod.conf</code></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">where</span> to write logging data.</span></span><br><span class="line">systemLog:</span><br><span class="line">  destination: file</span><br><span class="line">  logAppend: true</span><br><span class="line">  path: /data/mongodb/logs/mongod.log # 修改日志文件位置</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Where and how to store data.</span></span><br><span class="line">storage:</span><br><span class="line">  dbPath: /data/mongodb/data    #修改数据文件存放位置</span><br><span class="line">  journal:</span><br><span class="line">    enabled: true</span><br><span class="line">......</span><br><span class="line"><span class="meta">#</span><span class="bash"> network interfaces</span></span><br><span class="line">net:</span><br><span class="line">  port: 27017</span><br><span class="line">  bindIp: 0.0.0.0   #修改监听所有IP的端口</span><br></pre></td></tr></table></figure>

<h2 id="启动MongoDB"><a href="#启动MongoDB" class="headerlink" title="启动MongoDB"></a>启动MongoDB</h2><ul>
<li>启动mongodb ：<br><code>systemctl start mongod.service</code></li>
<li>停止mongodb ：<br><code>systemctl stop mongod.service</code></li>
<li>查到mongodb的状态：<br><code>systemctl status mongod.service</code></li>
<li>设置为自启动<br><code>systemctl enable mongod.service</code></li>
</ul>
<h2 id="防火墙设置"><a href="#防火墙设置" class="headerlink" title="防火墙设置"></a>防火墙设置</h2><ul>
<li>开放端口<br><code>firewall-cmd --zone=public --permanent --add-port=27017/tcp</code></li>
<li>重启防火墙<br><code>firewall-cmd --reload</code></li>
<li>查看端口是否开放<br><code>firewall-cmd --zone=public --list-ports</code></li>
</ul>
<h2 id="用户管理（未试验）"><a href="#用户管理（未试验）" class="headerlink" title="用户管理（未试验）"></a>用户管理（未试验）</h2><ul>
<li>创建验证用户<br><code>db.createUser(&#123;user:&quot;root&quot;,pwd:&quot;rootpassword&quot;,roles:[&#123;role:&quot;root&quot;,db:&quot;admin&quot;&#125;]&#125;)</code></li>
<li>修改配置文件，添加上验证<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">security:</span><br><span class="line">    authorization: enabled</span><br></pre></td></tr></table></figure></li>
<li>重启mongd服务：<code>systemctl restart mongod.service</code></li>
<li>登录验证<br><code>mongo -u root -p rootpassword --authenticationDatabase admin</code></li>
</ul>
<h2 id="可视化工具"><a href="#可视化工具" class="headerlink" title="可视化工具"></a>可视化工具</h2><ul>
<li>NoSQL Manager for MongoDB : <a target="_blank" rel="noopener" href="http://dev.snhb.group:82/soft/dev/NoSQLManagerforMongoDB.zip">http://dev.snhb.group:82/soft/dev/NoSQLManagerforMongoDB.zip</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/backend/Linux/CentOS7%E5%AE%89%E8%A3%85MongoDB-3.6/" data-id="ckqg285v3004prcfp31ks3vqj" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/10/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/page/12/">12</a><a class="page-number" href="/page/13/">13</a><span class="space">&hellip;</span><a class="page-number" href="/page/21/">21</a><a class="extend next" rel="next" href="/page/12/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/06/28/product/%E9%9C%80%E6%B1%82%E8%B0%83%E7%A0%94%E7%9A%84%E5%86%85%E5%AE%B9%E5%92%8C%E5%B7%A5%E4%BD%9C%E6%8C%87%E5%BC%95/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/06/28/product/%E9%93%81%E8%B7%AF6C%E4%B8%9A%E5%8A%A1%E7%BB%93%E6%9E%84/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/06/28/product/%E9%9C%80%E6%B1%82%E8%B0%83%E7%A0%94%E5%8F%8A%E5%88%86%E6%9E%90%E6%96%B9%E6%B3%95/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/06/28/product/%E6%B0%B4%E7%94%B5%E7%AB%99%E7%94%9F%E4%BA%A7%E8%BF%90%E8%A1%8C%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/06/28/product/%E6%B0%B4%E7%94%B5%E5%8E%82%E8%BF%90%E8%A1%8C%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>