<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/19/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-architecture/Netty学习" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/architecture/Netty%E5%AD%A6%E4%B9%A0/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:10.795Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="5种Unix网络I-O模型"><a href="#5种Unix网络I-O模型" class="headerlink" title="5种Unix网络I/O模型"></a>5种Unix网络I/O模型</h2><ul>
<li><p>阻塞I/O模型<br><img src="_v_images/2019-11-29-17-50-42.png"></p>
</li>
<li><p>非阻塞I/O模型<br><img src="_v_images/2019-11-29-17-50-50.png"></p>
</li>
</ul>
<ul>
<li>I/O复用模型<br><img src="_v_images/2019-11-29-17-50-59.png"></li>
</ul>
<p><img src="_v_images/2019-11-29-17-51-08.png"></p>
<ul>
<li>信号驱动I/O模型<br><img src="_v_images/2019-11-29-17-51-17.png"></li>
</ul>
<ul>
<li>异步I/O<br><img src="_v_images/2019-11-29-17-51-35.png"></li>
</ul>
<p><img src="_v_images/2019-11-29-17-51-47.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/architecture/Netty%E5%AD%A6%E4%B9%A0/" data-id="ckqg285tu0023rcfp3mp3f90n" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-architecture/MySQL常用" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/architecture/MySQL%E5%B8%B8%E7%94%A8/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:10.794Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<h2 id="常用操作"><a href="#常用操作" class="headerlink" title="常用操作"></a>常用操作</h2><h3 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h3><ul>
<li><p>创建用户</p>
<blockquote>
<p><code>CREATE USER &#39;username&#39;@&#39;host&#39; IDENTIFIED BY &#39;password&#39;;</code><br>host：指定该用户在哪个主机上可以登陆，如果是本地用户可用localhost，如果想让该用户可以从任意远程主机登陆，可以使用通配符%<br><code>CREATE USER &#39;pig&#39;@&#39;%&#39; IDENTIFIED BY &#39;123456&#39;;</code></p>
</blockquote>
</li>
<li><p>更改用户密码</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 改密码</span><br><span class="line"><span class="keyword">SET</span> PASSWORD <span class="keyword">FOR</span> <span class="string">&#x27;username&#x27;</span>@<span class="string">&#x27;host&#x27;</span> <span class="operator">=</span> PASSWORD(<span class="string">&#x27;newpassword&#x27;</span>);</span><br><span class="line"># 如果是当前登陆用户用:</span><br><span class="line"><span class="keyword">SET</span> PASSWORD <span class="operator">=</span> PASSWORD(&quot;newpassword&quot;);</span><br><span class="line"># 例子:</span><br><span class="line"><span class="keyword">SET</span> PASSWORD <span class="keyword">FOR</span> <span class="string">&#x27;pig&#x27;</span>@<span class="string">&#x27;%&#x27;</span> <span class="operator">=</span> PASSWORD(&quot;123456&quot;);</span><br></pre></td></tr></table></figure>

<ul>
<li>授权</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span>, <span class="keyword">INSERT</span> <span class="keyword">ON</span> test.user <span class="keyword">TO</span> <span class="string">&#x27;pig&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">TO</span> <span class="string">&#x27;pig&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;</span><br><span class="line"># 用以上命令授权的用户不能给其它用户授权，如果想让该用户可以授权，用以下命令:</span><br><span class="line"><span class="keyword">GRANT</span> privileges <span class="keyword">ON</span> databasename.tablename <span class="keyword">TO</span> <span class="string">&#x27;username&#x27;</span>@<span class="string">&#x27;host&#x27;</span> <span class="keyword">WITH</span> <span class="keyword">GRANT</span> OPTION;</span><br></pre></td></tr></table></figure>

<ul>
<li>撤销用户权限</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 说明:privilege, databasename, tablename：同授权部分,不能超越。</span><br><span class="line"><span class="keyword">REVOKE</span> privilege <span class="keyword">ON</span> databasename.tablename <span class="keyword">FROM</span> <span class="string">&#x27;username&#x27;</span>@<span class="string">&#x27;host&#x27;</span>;</span><br><span class="line"># 例子:</span><br><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">SELECT</span> <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">FROM</span> <span class="string">&#x27;pig&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>删除用户<br><code>DROP USER &#39;username&#39;@&#39;host&#39;;</code></li>
</ul>
<h4 id="用户授权"><a href="#用户授权" class="headerlink" title="用户授权"></a>用户授权</h4><p>命令格式：</p>
<blockquote>
<p><code>mysql&gt; grant 权限1,权限2,…权限n on 数据库名称.表名称 to 用户名@用户地址 identified by &#39;连接口令&#39;;</code></p>
<ul>
<li>权限1,权限2,…权限n代表  <code>select,insert,update,delete,create,drop,index,alter,grant,references,reload,shutdown,process,file</code> 等14个权限。</li>
<li>当权限1,权限2,…权限n被 <code>all privileges</code> 或者 <code>all</code> 代替，表示赋予用户全部权限。</li>
<li>当 <code>数据库名称.表名</code> 称被 <code>*.*</code> 代替，表示赋予用户操作服务器上所有数据库所有表的权限。</li>
<li>用户地址可以是 <code>localhost</code> ，也可以是ip地址、机器名字、域名。也可以用 <code>&#39;%&#39;</code> 表示从任何地址连接。</li>
<li><code>&#39;连接口令&#39;</code> 不能为空，否则创建失败。</li>
</ul>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 给来自10.163.225.87的用户joe分配可对数据库vtdc的employee表进行select,insert,update,delete,create,drop等操作的权限，并设定口令为123。</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash">grant select,insert,update,delete,create,drop on vtdc.employee to joe@10.163.225.87 identified by <span class="string">&#x27;123&#x27;</span>;</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 给来自10.163.225.87的用户joe分配可对数据库vtdc所有表进行所有操作的权限，并设定口令为123。</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash">grant all privileges on vtdc.* to joe@10.163.225.87 identified by <span class="string">&#x27;123&#x27;</span>;</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 给来自10.163.225.87的用户joe分配可对所有数据库的所有表进行所有操作的权限，并设定口令为123。</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash">grant all privileges on *.* to joe@10.163.225.87 identified by <span class="string">&#x27;123&#x27;</span>;</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 给本机用户joe分配可对所有数据库的所有表进行所有操作的权限，并设定口令为123。</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash">grant all privileges on *.* to joe@localhost identified by <span class="string">&#x27;123&#x27;</span>;</span></span><br></pre></td></tr></table></figure>

<h3 id="Database-Table操作"><a href="#Database-Table操作" class="headerlink" title="Database/Table操作"></a>Database/Table操作</h3><ul>
<li><p>创建数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE `mydb` CHARACTER SET utf8 COLLATE utf8_general_ci;</span><br><span class="line">show databases;</span><br><span class="line">use wifidb</span><br></pre></td></tr></table></figure></li>
<li><p>MySQL在Linux下的表名如何不区分大小写</p>
<blockquote>
<p>在CentOS7下，在 <code>/etc/my.cnf</code> 文件中 <code>[mysqld]</code> 的后面加 <code>lower_case_table_names=1</code>。  0,区分大小写; 1,不区分。<br>然后重启mysql： <code>systemctl reload mysqld</code></p>
</blockquote>
</li>
<li><p>执行sql文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql -uuser -p  # 输入密码</span><br><span class="line">use testdb</span><br><span class="line">source /home/gjh/t.sql</span><br></pre></td></tr></table></figure></li>
<li><p>查看mysql版本的四种方法</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[shengting@login ~]$ `mysql -V`</span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> status;</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> `select version();`</span></span><br></pre></td></tr></table></figure></li>
<li><p>查看表字段：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">desc</span> tableName;</span><br><span class="line"><span class="keyword">show</span> fields <span class="keyword">from</span> tableName;</span><br><span class="line"><span class="keyword">show</span> columns <span class="keyword">from</span> tableName;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="运维"><a href="#运维" class="headerlink" title="运维"></a>运维</h2><h3 id="导入导出"><a href="#导入导出" class="headerlink" title="导入导出"></a>导入导出</h3><ul>
<li>导出</li>
</ul>
<p>导出数据库：<code>mysqldump -u 用户名 -p 数据库名 &gt; 导出的文件名</code>，如我输入的命令行:<br><code>mysqldump -u root -p news &gt; news.sql</code>  (输入后会让你输入进入MySQL的密码)<br>（如果导出单张表的话在数据库名后面输入表名即可）</p>
<ul>
<li>导入</li>
</ul>
<p>1、进入MySQL：<code>mysql -u 用户名 -p</code> ，如我输入的命令行: <code>mysql -u root -p</code> (输入同样后会让你输入MySQL的密码)<br>2、新建你要建的数据库，这时是空数据库，如新建一个名为news的目标数据库 ： <code>CREATE DATABASE IF NOT EXISTS yourdbname DEFAULT CHARSET utf8 COLLATE utf8_general_ci;</code><br>3、输入：<code>mysql&gt;use 目标数据库名</code>，如我输入的命令行: <code>mysql&gt;use news;</code><br>4、导入文件：<code>mysql&gt;source 导入的文件名;</code> 如我输入的命令行：<code>mysql&gt;source news.sql;</code></p>
<h2 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h2><h3 id="36个字节UUID字符串做主键的性能问题"><a href="#36个字节UUID字符串做主键的性能问题" class="headerlink" title="36个字节UUID字符串做主键的性能问题"></a>36个字节UUID字符串做主键的性能问题</h3><p>可以使用 binary(16) not null来存储uuid(中间的-删除哈)<br><code>unhex(replace(&#39;a3eea910-5cab-11df-bbb5-000c29e30cf0&#39;,&#39;-&#39;,&#39;&#39;);</code><br>检索出来的时候用hex()</p>
<p>这样主键只有原来的一半,效率要高些</p>
<p>MySQL inserting UUID to a binary(16) field<br>It is advantageous to store a UUID (acc to RFC 4122) in a binary(16) field in the database.<br>It is not hard to create such a table and to insert data into it.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> test_table (</span><br><span class="line">    id <span class="type">BINARY</span>(<span class="number">16</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (id));</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test_table (id, name) <span class="keyword">VALUES</span> </span><br><span class="line">    (UNHEX(REPLACE(UUID(),<span class="string">&#x27;-&#x27;</span>,<span class="string">&#x27;&#x27;</span>)), <span class="string">&#x27;test1&#x27;</span>),</span><br><span class="line">    (UNHEX(REPLACE(UUID(),<span class="string">&#x27;-&#x27;</span>,<span class="string">&#x27;&#x27;</span>)), <span class="string">&#x27;test2&#x27;</span>),</span><br><span class="line">    (UNHEX(REPLACE(UUID(),<span class="string">&#x27;-&#x27;</span>,<span class="string">&#x27;&#x27;</span>)), <span class="string">&#x27;test3&#x27;</span>)</span><br><span class="line">  );</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/architecture/MySQL%E5%B8%B8%E7%94%A8/" data-id="ckqg285tu0022rcfp5tms8ltk" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-architecture/Memcached学习" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/architecture/Memcached%E5%AD%A6%E4%B9%A0/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:10.793Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <ul>
<li>特点<ul>
<li>使用简单的基于文本行的协议</li>
<li>基于libevent的事件处理<br>  libevent是个程序库，它将Linux的epoll、BSD类操作系统的kqueue等事件处理功能封装成统一的接口。</li>
<li>内置内存存储方式</li>
<li>memcached不互相通信的分布式</li>
</ul>
</li>
<li>原理<ul>
<li>hash算法生成hash-Key</li>
<li>二级列散维护Data</li>
</ul>
</li>
<li>两个核心组件<ul>
<li>服务端MS</li>
<li>客户端MC</li>
</ul>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="http://blog.csdn.net/hjm4702192/article/details/7894080">JAVA MemCache 史无前例的详细讲解！看完包精通MEMCACHE！</a></p>
<p><a target="_blank" rel="noopener" href="http://blog.sina.com.cn/s/blog_493a845501013ei0.html">分布式缓存-Memcached</a></p>
<p><a target="_blank" rel="noopener" href="http://getpocket.com/a/read/169855716">淘宝开放平台缓存设计</a></p>
<p><img src="_v_images/2019-11-29-17-21-07.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/architecture/Memcached%E5%AD%A6%E4%B9%A0/" data-id="ckqg285tu0021rcfp4it98cld" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-architecture/Kettle学习" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/architecture/Kettle%E5%AD%A6%E4%B9%A0/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:10.791Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>参考：</p>
<p><a target="_blank" rel="noopener" href="http://blog.csdn.net/neweastsun/article/details/38728757">kettle入门HelloWorld 教程</a><br>简单的把csv文件转换成xml文件的HelloWorld程序</p>
<p><a target="_blank" rel="noopener" href="http://blog.csdn.net/neweastsun/article/details/38845795">kettle Hello World教程重构</a><br>还是转换csv为xml，不过加入了文件名动态传入、文件是否存在判断、错误处理；演示了job、transformation怎样协作工作</p>
<p>kettle教程其实就你的kettle文件夹下，docs 文件夹下包含了所有的文档，samples文件夹下包含了一些示例。docs里面最主要的是Spoon-version-User-Guide. zip ，里面记录了kettle 的技术性文档，包括支持的操作系统，数据库平台，文本格式，图形化的界面，其中最重要的是所有的转换对象(Transformation Core Objects) 和Job对象(Job Core Objects) 的解释，包括截图和每一个参数的解释。</p>
<p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/limengqiang/archive/2013/01/16/KettleApply2.html">http://www.cnblogs.com/limengqiang/archive/2013/01/16/KettleApply2.html</a><br><a target="_blank" rel="noopener" href="http://www.cnblogs.com/limengqiang/archive/2013/01/17/KettleApply3.html">http://www.cnblogs.com/limengqiang/archive/2013/01/17/KettleApply3.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/architecture/Kettle%E5%AD%A6%E4%B9%A0/" data-id="ckqg285tt0020rcfp4q60c0d0" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-architecture/JMS学习" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/architecture/JMS%E5%AD%A6%E4%B9%A0/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:10.790Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><img src="_v_images/2019-11-29-17-24-46.png"></p>
<p><img src="_v_images/2019-11-29-17-24-55.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/architecture/JMS%E5%AD%A6%E4%B9%A0/" data-id="ckqg285tq001urcfp4xqzdvdu" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-architecture/Java数据库访问" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/architecture/Java%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BF%E9%97%AE/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:10.787Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Java数据库访问操作大概分为三类：JDBC、ORM、ActiveRecord</p>
<h2 id="1-JDBC"><a href="#1-JDBC" class="headerlink" title="1. JDBC"></a>1. JDBC</h2><ol>
<li>[sql2o]( http:// <a target="_blank" rel="noopener" href="http://www.sql2o.org/">www.sql2o.org</a>),  <a target="_blank" rel="noopener" href="https://github.com/StanAccy/sql2o">sql2o Github</a></li>
<li><a target="_blank" rel="noopener" href="http://docs.spring.io/spring/docs/current/spring-framework-reference/html/jdbc.html">Spring JdbcTemplate</a>, <a href="692088846.iteye.com/blog/1962469">Spring JdbcTemplate用法详解</a></li>
<li><a href="www.jooq.org">jOOQ</a></li>
<li><a target="_blank" rel="noopener" href="http://mybatis.github.io/mybatis-3/">MyBatis</a>， 学习参考 《MyBatis手册中文版》</li>
<li><a target="_blank" rel="noopener" href="http://jdbi.org/">JDBI</a></li>
</ol>
<p>众所周知，MySQL的MyISAM存储引擎是不支持事务的，然而，Mybatis 对MySQL的MyISAM引擎都支持事务回滚； 而Spring Jdbc的事务职能支持InnoDB，对MyISAM是无法回滚。</p>
<h2 id="2-ORM"><a href="#2-ORM" class="headerlink" title="2. ORM"></a>2. ORM</h2><p><a target="_blank" rel="noopener" href="http://hibernate.org/">Hibernate</a><br>[Ebean]( http:// ebean-orm.github.io )</p>
<h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><p>[ORMLite]( http:// ormlite.com )<br><a target="_blank" rel="noopener" href="https://github.com/rufiao/persist">MicroORM</a><br>[sormula]( http:// <a target="_blank" rel="noopener" href="http://www.sormula.org/home/">www.sormula.org/home/</a> )</p>
<h2 id="3-ActiveRecord"><a href="#3-ActiveRecord" class="headerlink" title="3. ActiveRecord"></a>3. ActiveRecord</h2><p>[ActiveJDBC]( http:// javalite.io/activejdbc)<br><a target="_blank" rel="noopener" href="https://github.com/ActiveJpa/activejpa"> ActiveJpa Github </a></p>
<p>参考：<br>[基于 Java 的 Active Record 开源项目]( http:// my.oschina.net/huangyong/blog/267968)</p>
<h4 id="只使用JFinal的ActiveRecord"><a href="#只使用JFinal的ActiveRecord" class="headerlink" title="只使用JFinal的ActiveRecord"></a>只使用JFinal的ActiveRecord</h4><p>定义了一个servlet，然后在里面初始化了，在action里面就可以使用Article了</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">  C3p0Plugin c3p0Plugin = <span class="keyword">new</span> C3p0Plugin(jdbcUrl, username, passwd); </span><br><span class="line">  c3p0Plugin.start();</span><br><span class="line"> </span><br><span class="line">  ActiveRecordPlugin arp = <span class="keyword">new</span> ActiveRecordPlugin(c3p0Plugin); </span><br><span class="line">  arp.addMapping(<span class="string">&quot;jo_user&quot;</span>,  Article.class); </span><br><span class="line">  arp.start();</span><br><span class="line"> </span><br><span class="line">  System.out.println(<span class="string">&quot;系统自定义初始化加载项完成...&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="JFinal-使用Spring的事务管理"><a href="#JFinal-使用Spring的事务管理" class="headerlink" title="JFinal 使用Spring的事务管理"></a>JFinal 使用Spring的事务管理</h4><p>重写 DbKit 类，将 Connection 的获取与释放的地方均采用 spring 的 DataSourceUtils来处理，这样就既可以直接使用spring的声明式事务，又可以使用Jfinal的activeRecord插件快速开发。 </p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>比较喜欢的几种组合：</p>
<ol>
<li>springboot+gorm , 例子见Github</li>
<li>springboot+ebean ， <a target="_blank" rel="noopener" href="https://github.com/shailesh17/spring-boot-ebean-starter">spring-boot-ebean-starter</a></li>
<li>springboot+sql2o/mybatis+自封装</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://github.com/mybatis/mybatis-3/issues/368">https://github.com/mybatis/mybatis-3/issues/368</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/architecture/Java%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BF%E9%97%AE/" data-id="ckqg285tt001zrcfp6yivabhi" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-architecture/Java并发编程" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/architecture/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:10.786Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://www.infoq.cn/article/ftf-java-volatile">聊聊并发（一）——深入分析 Volatile 的实现原理</a><br><a target="_blank" rel="noopener" href="https://www.infoq.cn/article/java-se-16-synchronized">聊聊并发（二）——Java SE1.6 中的 Synchronized</a><br><a target="_blank" rel="noopener" href="https://www.infoq.cn/article/java-threadPool">聊聊并发（三）——JAVA 线程池的分析和使用</a><br><a target="_blank" rel="noopener" href="https://www.infoq.cn/article/ConcurrentHashMap">聊聊并发（四）——深入分析 ConcurrentHashMap</a><br><a target="_blank" rel="noopener" href="https://www.infoq.cn/article/atomic-operation">聊聊并发（五）——原子操作的实现原理</a><br><a target="_blank" rel="noopener" href="https://www.infoq.cn/article/ConcurrentLinkedQueue">聊聊并发（六）——ConcurrentLinkedQueue 的实现原理分析</a><br><a target="_blank" rel="noopener" href="https://www.infoq.cn/article/java-blocking-queue">聊聊并发（七）——Java 中的阻塞队列</a><br><a target="_blank" rel="noopener" href="https://www.infoq.cn/article/fork-join-introduction">聊聊并发（八）——Fork/Join 框架介绍</a><br><a target="_blank" rel="noopener" href="https://www.infoq.cn/article/producers-and-consumers-mode">聊聊并发——生产者消费者模式</a></p>
<p><a target="_blank" rel="noopener" href="https://www.infoq.cn/article/double-checked-locking-with-delay-initialization">双重检查锁定与延迟初始化</a></p>
<h1 id="1-Java线程"><a href="#1-Java线程" class="headerlink" title="1. Java线程"></a>1. Java线程</h1><h3 id="1-1-1-进程状态转换"><a href="#1-1-1-进程状态转换" class="headerlink" title="1.1.1. 进程状态转换"></a>1.1.1. 进程状态转换</h3><p><a target="_blank" rel="noopener" href="http://my.oschina.net/mingdongcheng/blog/139263">http://my.oschina.net/mingdongcheng/blog/139263</a><br><a target="_blank" rel="noopener" href="http://www.cnblogs.com/mengdd/archive/2013/02/20/2917966.html">http://www.cnblogs.com/mengdd/archive/2013/02/20/2917966.html</a><br><a target="_blank" rel="noopener" href="http://blog.javachen.com/2013/06/08/note-about-java-thread.html">http://blog.javachen.com/2013/06/08/note-about-java-thread.html</a><br><a target="_blank" rel="noopener" href="https://m.oschina.net/blog/83586">https://m.oschina.net/blog/83586</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">new =&gt;start: 新建</span><br><span class="line">e=&gt;end: 终止</span><br><span class="line">runnable =&gt; subroutine : 就绪</span><br><span class="line">running=&gt; subroutine : 运行</span><br><span class="line">blocked =&gt;subroutine:  阻塞</span><br><span class="line"></span><br><span class="line">new(right) -&gt;r unnable (right)-&gt; running(right)-&gt;e</span><br><span class="line">r unnable -&gt; blocked-&gt; running</span><br></pre></td></tr></table></figure>

<h3 id="1-1-2-Java线程基础"><a href="#1-1-2-Java线程基础" class="headerlink" title="1.1.2. Java线程基础"></a>1.1.2. Java线程基础</h3><p>一个 Java 应用总是从 main() 方法开始运行，mian() 方法运行在一个线程内，它被称为主线程。<br>线程总体分两类：用户线程 和守候线程。<br>当所有用户线程执行完毕的时候，JVM自动关闭。但是守候线程却不独立于JVM，守候线程一般是由操作系统或者用户自己创建的。</p>
<h3 id="1-1-3-中断线程"><a href="#1-1-3-中断线程" class="headerlink" title="1.1.3. 中断线程"></a>1.1.3. 中断线程</h3><p>一旦创建一个新的线程，就产生一个新的调用栈。<br>每一个线程都有一个<em>中断状态(interrupted status)<em>，当调用interrupt方法时，</em>中断状态</em>将被置位。每个线程都应该不时检查这个标志，以判断线程是否被中断。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (!Thread.currentThread.isInterrupted())&#123;</span><br><span class="line"><span class="comment">// do more work</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当在一个被阻塞的线程（调用sleep或wait）上调用interrupt方法时，将会抛出InterruptedException异常。</p>
<h1 id="2-一、线程基础知识"><a href="#2-一、线程基础知识" class="headerlink" title="2. 一、线程基础知识"></a>2. 一、线程基础知识</h1><h2 id="2-1-什么是线程安全"><a href="#2-1-什么是线程安全" class="headerlink" title="2.1. 什么是线程安全"></a>2.1. 什么是线程安全</h2><p>当多个线程访问某个类时，不管运行时环境采用何种调度方式或者这些线程将如何交替执行，并且在主调代码中不需要任何额外的同步或协同，这个类都能表现出正确的行为，那么就称这个类是线程安全的。</p>
<p>1、类的行为与其规范完全一致<br>2、在共享访问对象可变状态时需要进行正确的管理<br>3、继承Thread与实现Runnable接口<br>4、实现线程安全<br>1、内置锁<br>2、Ad-hoc、栈封闭(ThreadLocal)<br>3、状态私有、不变性<br>4、只读共享<br>5、线程安全共享（对象内部实现线程安全，多线程间通过接口来访问）<br>5、设计原则？</p>
<h2 id="2-2-线程间通信方式"><a href="#2-2-线程间通信方式" class="headerlink" title="2.2. 线程间通信方式"></a>2.2. 线程间通信方式</h2><p>通信是指线程之间以何种机制来交换信息。在Java中线程之间的通信机制有两种：共享内存和消息传递。       在共享内存的并发模型里，线程之间共享程序的公共状态，线程之间通过写-读内存中的公共状态来隐式进行通信。</p>
<p>延伸阅读点Java内存模型     在消息传递的并发模型里，线程之间没有公共状态，线程之间必须通过明确的发送消息来显式进行通信。</p>
<p>1、共享内存<br>2、管道流<br>3、线程A等待（Wait），线程B唤醒（notify）归属于Object<br>4、Thread 类 Join让彼此交替运行的线程顺序执行，线程A 通过调用线程B.join(),线程A需要等线程B执行完再执行<br>5、观察者模式 Observable、Observer</p>
<h2 id="2-3-如何实现线程安全"><a href="#2-3-如何实现线程安全" class="headerlink" title="2.3. 如何实现线程安全"></a>2.3. 如何实现线程安全</h2><p>1、类不可变、无状态<br>2、线程封闭技术：单线程内访问数据，不需要同步。<br>      Ad-hoc：维护线程封闭性职责完全有程序实现来担当JDBC的Connection,Swing事件分发线程.<br>     栈封闭：使用局部变量，保存在线程栈中不对外共享。<br>     延伸阅读点：方法调用和执行是怎样实现的？<br>     ThreadLock：线程局部变量副本。<br>3、只读共享<br>4、synchronized<br>5、ReentrantLock<br>6、同步工具类：</p>
<pre><code> CountDownLatch：闭锁，在完成一组正在其他线程中执行的操作之前，它允许一个或多个线程一直等待。

 CyclicBarrier：栅栏，当一个线程到达屏障时（通过调用 CyclicBarrier.await()），它会被阻塞，直到所有线程都到达屏障，然后在该点允许所有线程继续执行。与CountDownLatch不同的是，CyclicBarrier 所有公共线程都到达后，可以继续执行下一个目标点，而CountDownLatch第一次到达指定点后，也就是记数器减制零，就无法再次执行下一目标工作

 Semaphore：信号量，主要用于限制资源允许访问的许可数。
</code></pre>
<h1 id="3-二、线程同步"><a href="#3-二、线程同步" class="headerlink" title="3. 二、线程同步"></a>3. 二、线程同步</h1><h2 id="3-1-ThreadLocal源码分析理解"><a href="#3-1-ThreadLocal源码分析理解" class="headerlink" title="3.1. ThreadLocal源码分析理解"></a>3.1. ThreadLocal源码分析理解</h2><h2 id="3-2-synchronized"><a href="#3-2-synchronized" class="headerlink" title="3.2. synchronized"></a>3.2. synchronized</h2><h2 id="3-3-ReentrantLock案例"><a href="#3-3-ReentrantLock案例" class="headerlink" title="3.3. ReentrantLock案例"></a>3.3. ReentrantLock案例</h2><h2 id="3-4-ReentrantLock与synchronized区别"><a href="#3-4-ReentrantLock与synchronized区别" class="headerlink" title="3.4. ReentrantLock与synchronized区别"></a>3.4. ReentrantLock与synchronized区别</h2><h2 id="3-5-volatile关键字"><a href="#3-5-volatile关键字" class="headerlink" title="3.5. volatile关键字"></a>3.5. volatile关键字</h2><h2 id="3-6-CAS"><a href="#3-6-CAS" class="headerlink" title="3.6. CAS"></a>3.6. CAS</h2><h1 id="4-三、集合与JUC框架"><a href="#4-三、集合与JUC框架" class="headerlink" title="4. 三、集合与JUC框架"></a>4. 三、集合与JUC框架</h1><p>Java多线程<br>1、线程安全？<br>1、类的行为与其规范完全一致<br>2、在共享访问对象可变状态时需要进行正确的管理<br>3、继承Thread与实现Runnable接口<br>4、实现线程安全<br>1、内置锁<br>2、Ad-hoc、栈封闭(ThreadLocal)<br>3、状态私有、不变性<br>4、只读共享<br>5、线程安全共享（对象内部实现线程安全，多线程间通过接口来访问）<br>5、设计原则？<br>1、<br>2、同步<br>1、ReentrantLock<br>1、CAS<br>2、独占锁<br>3、锁公平性如何实现？AbstractQueuedSynchronizer<br>2、synchronized VS ReentrantLock<br>1、Lock 上锁时提供更多的选择性与可见性<br>2、synchronized会让获取锁的线程无期限等待，tryLock指定等待时间（独占锁）<br>3、Synchronization同步代码简洁易于维护，Lock强制try-finally结构并且要释放锁<br>4、synchronized 不提供不公平锁，永远公平<br>5、conditions结合LOCK<br>3、偏向锁<br>4、ReentrantReadWriteLock<br>5、ReadWriteLock<br>3、CAS原理<br>4、原子类<br>5、AbstractQueuedSynchronizer<br>2、同步<br>1、ReentrantLock<br>1、CAS<br>2、独占锁<br>3、锁公平性如何实现？AbstractQueuedSynchronizer<br>2、synchronized VS ReentrantLock<br>1、Lock 上锁时提供更多的选择性与可见性<br>2、synchronized会让获取锁的线程无期限等待，tryLock指定等待时间（独占锁）<br>3、Synchronization同步代码简洁易于维护，Lock强制try-finally结构并且要释放锁<br>4、synchronized 不提供不公平锁，永远公平<br>5、conditions结合LOCK<br>3、偏向锁<br>4、ReentrantReadWriteLock<br>5、ReadWriteLock<br>3、CAS原理<br>4、原子类<br>5、AbstractQueuedSynchronizer</p>
<h1 id="5-BIO、NIO、AIO"><a href="#5-BIO、NIO、AIO" class="headerlink" title="5. BIO、NIO、AIO"></a>5. BIO、NIO、AIO</h1><h3 id="5-1-1-同步vs异步、阻塞vs非阻塞"><a href="#5-1-1-同步vs异步、阻塞vs非阻塞" class="headerlink" title="5.1.1. 同步vs异步、阻塞vs非阻塞"></a>5.1.1. 同步vs异步、阻塞vs非阻塞</h3><p><u>一个IO操作其实分成了两个步骤：发起IO请求和实际的IO操作。</u></p>
<p>同步IO和异步IO的区别就在于第二个步骤是否阻塞，如果实际的IO读写阻塞请求进程，那么就是同步IO。<br>阻塞IO和非阻塞IO的区别在于第一步，发起IO请求是否会被阻塞，如果阻塞直到完成那么就是传统的阻塞IO，如果不阻塞，那么就是非阻塞IO。</p>
<p>同步和异步是针对应用程序和OS内核的交互而言的，同步指的是用户进程触发IO操作并等待或者轮询的去查看IO操作是否就绪，而异步是指用户进程触发IO操作以后便开始做自己的事情，而当IO操作已经完成的时候会得到IO完成的通知。而阻塞和非阻塞是针对于进程在访问数据的时候，根据IO操作的就绪状态来采取的不同方式，说白了是一种读取或者写入操作函数的实现方式，阻塞方式下读取或者写入函数将一直等待，而非阻塞方式下，读取或者写入函数会立即返回一个状态值。</p>
<p>所以，IO操作可以分为3类：同步阻塞（即早期的IO操作）、同步非阻塞（NIO）、异步（AIO）。</p>
<p><strong>同步阻塞</strong>：<br>在此种方式下，用户进程在发起一个IO操作以后，必须等待IO操作的完成，只有当真正完成了IO操作以后，用户进程才能运行。JAVA传统的IO模型属于此种方式。</p>
<p><strong>同步非阻塞</strong>：<br>在此种方式下，用户进程发起一个IO操作以后边可返回做其它事情，但是用户进程需要时不时的询问IO操作是否就绪，这就要求用户进程不停的去询问，从而引入不必要的CPU资源浪费。其中目前JAVA的NIO就属于同步非阻塞IO。</p>
<p><strong>异步</strong>：<br>此种方式下是指应用发起一个IO操作以后，不等待内核IO操作的完成，等内核完成IO操作以后会通知应用程序。”</p>
<h3 id="5-1-2-Reactor-vs-Proactor"><a href="#5-1-2-Reactor-vs-Proactor" class="headerlink" title="5.1.2. Reactor vs Proactor"></a>5.1.2. Reactor vs Proactor</h3><p>一、 Reactor and Proactor</p>
<p>IO读写时，多路复用机制都会依赖一个事件多路分离器，它负责把源事件的IO事件分离出来，分别到相应的read/write事件分离器。涉及到事件分离器的两种模式分别就是 Reactor和Proactor，Reactor是基于同步IO的，Proactor是基于异步IO的。</p>
<p>在Reactor模式中，事件分离者等待某个事件或者可应用或个操作的状态发生(比如文件描述符可读写，或者是socket可读写),事件分离者就把这个事件传给事先注册的事件处理函数或者回调函数，由后者来做实际的读写操作。</p>
<p>在Proactor模式中，事件处理者(或者代由事件分离者发起)直接发起一个异步读写操作(相当于请求)，而实际的工作是由操作系统来完成的。发起时，需要提供的参数包括用于存放读到数据的缓存区，读的数据大小，或者用于存放外发数据的缓存区，以及这个请求完后的回调函数等信息。事件分离者得知了这个请求，它默默等待这个请求的完成，然后转发完成事件给相应的事件处理者或者回调。举例来说，<br>在Windows上事件处理者投递了一个异步IO操作(称有 overlapped的技术)，事件分离者等IOCompletion事件完成. 这种异步模式的典型实现是基于操作系统底层异步API的，所以我们可称之为“系统级别”的或者“真正意义上”的异步，因为具体的读写是由操作系统代劳的。</p>
<p>举个例子，将有助于理解Reactor与Proactor二者的差异，以读操作为例(类操作类似)。</p>
<p>在Reactor中实现读：</p>
<ul>
<li>注册读就绪事件和相应的事件处理器</li>
<li>事件分离器等待事件</li>
<li>事件到来，激活分离器，分离器调用事件对应的处理器。</li>
<li>事件处理器完成实际的读操作，处理读到的数据，注册新的事件，然后返还控制权。</li>
</ul>
<p>与如下Proactor(真异步)中的读过程比较：</p>
<ul>
<li>处理器发起异步读操作(注意：操作系统必须支持异步IO)。在这种情况下，处理器无视IO就绪事件，它关注的是完成事件。</li>
<li>事件分离器等待操作完成事件</li>
<li>在分离器等待过程中，操作系统利用并行的内核线程执行实际的读操作，并将结果数据存入用户自定义缓冲区，最后通知事件分离器读操作完成。</li>
<li>事件分离器呼唤处理器。</li>
<li>事件处理器处理用户自定义缓冲区中的数据，然后启动一个新的异步操作，并将控制权返回事件分离器。</li>
</ul>
<p>可以看出，两个模式的相同点，都是对某个IO事件的事件通知(即告诉某个模块，这个IO操作可以进行或已经完成)。在结构<br>上，两者也有相同点：demultiplexor负责提交IO操作(异步)、查询设备是否可操作(同步)，然后当条件满足时，就回调handler;</p>
<p>不同点在于，异步情况下(Proactor)，当回调handler时，表示IO操作已经完成;同步情况下(Reactor)，回调handler时，表示 IO设备可以进行某个操作(can read or can write)，handler这个时候开始提交操作。</p>
<p><u>NIO通常采用Reactor模式，AIO通常采用Proactor模式。AIO简化了程序的编写，stream的读取和写入都有OS来完成，不需要像NIO那样子遍历Selector。Windows基于IOCP实现AIO，Linux只有eppoll模拟实现了AIO。</u></p>
<h3 id="5-1-3-BIO、NIO、AIO适用场景分析"><a href="#5-1-3-BIO、NIO、AIO适用场景分析" class="headerlink" title="5.1.3. BIO、NIO、AIO适用场景分析"></a>5.1.3. BIO、NIO、AIO适用场景分析</h3><p>BIO方式适用于连接数目比较小且固定的架构，这种方式对服务器资源要求比较高，并发局限于应用中，JDK1.4以前的唯一选择，但程序直观简单易理解。<br>NIO方式适用于连接数目多且连接比较短（轻操作）的架构，比如聊天服务器，并发局限于应用中，编程比较复杂，JDK1.4开始支持。<br>AIO方式使用于连接数目多且连接比较长（重操作）的架构，比如相册服务器，充分调用OS参与并发操作，编程比较复杂，JDK7开始支持。</p>
<p>GitHub项目：<br><a target="_blank" rel="noopener" href="https://github.com/Hellblazer/Pinkie">https://github.com/Hellblazer/Pinkie</a><br><a target="_blank" rel="noopener" href="https://github.com/rfqu/df4j">https://github.com/rfqu/df4j</a><br><a target="_blank" rel="noopener" href="https://github.com/dublintech/async_nio2_java7_examples">https://github.com/dublintech/async_nio2_java7_examples</a><br><a target="_blank" rel="noopener" href="https://github.com/killme2008/gecko">https://github.com/killme2008/gecko</a><br><a target="_blank" rel="noopener" href="https://github.com/koush/AndroidAsync">https://github.com/koush/AndroidAsync</a><br><a target="_blank" rel="noopener" href="https://github.com/kilim/kilim">https://github.com/kilim/kilim</a></p>
<p>帖子：<br><a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/16580914/java-nio-http-client-requests-with-thread-pools">http://stackoverflow.com/questions/16580914/java-nio-http-client-requests-with-thread-pools</a><br><a target="_blank" rel="noopener" href="http://chenkangxian.iteye.com/blog/1288246">http://chenkangxian.iteye.com/blog/1288246</a><br><a target="_blank" rel="noopener" href="http://weixiaolu.iteye.com/blog/1479656">http://weixiaolu.iteye.com/blog/1479656</a><br><a target="_blank" rel="noopener" href="http://nobywhy1.iteye.com/blog/1508412">http://nobywhy1.iteye.com/blog/1508412</a><br><a target="_blank" rel="noopener" href="http://www.ibm.com/developerworks/cn/java/j-javaio/">http://www.ibm.com/developerworks/cn/java/j-javaio/</a></p>
<p>ByteBuffer</p>
<p>仔细阅读TIJ相关章节：<br>TIJ4 英文版： New I/O P701页； 中文版： 18.10 新I/O P584页<br>网文：<br><a target="_blank" rel="noopener" href="http://blog.csdn.net/wfeng007/article/details/5308614">http://blog.csdn.net/wfeng007/article/details/5308614</a><br><a target="_blank" rel="noopener" href="http://cuisuqiang.iteye.com/blog/1443212">http://cuisuqiang.iteye.com/blog/1443212</a></p>
<p>volatile </p>
<p>用在多线程，同步变量。 线程为了提高效率，将某成员变量(如A)拷贝了一份（如B），线程中对A的访问其实访问的是B。只在某些动作时才进行A和B的同步。因此存在A和B不一致的情况。volatile就是用来避免这种情况的。volatile告诉jvm， 它所修饰的变量不保留拷贝，直接访问主内存中的（也就是上面说的A)<br>参考：<br><a target="_blank" rel="noopener" href="http://sakyone.iteye.com/blog/668091">http://sakyone.iteye.com/blog/668091</a><br><a target="_blank" rel="noopener" href="http://www.infoq.com/cn/articles/ftf-java-volatile">http://www.infoq.com/cn/articles/ftf-java-volatile</a><br><a target="_blank" rel="noopener" href="http://www.ibm.com/developerworks/cn/java/j-jtp06197.html">http://www.ibm.com/developerworks/cn/java/j-jtp06197.html</a></p>
<p>ExecutorService 线程池<br><a target="_blank" rel="noopener" href="http://my.oschina.net/20076678/blog/33392">http://my.oschina.net/20076678/blog/33392</a><br><a target="_blank" rel="noopener" href="http://blog.csdn.net/peachpi/article/details/6771946">http://blog.csdn.net/peachpi/article/details/6771946</a></p>
<p>ReentrantLock 可重入锁<br><a target="_blank" rel="noopener" href="http://tenyears.iteye.com/blog/48750">http://tenyears.iteye.com/blog/48750</a><br><a target="_blank" rel="noopener" href="http://www.blogjava.net/killme2008/archive/2007/09/14/145195.html">http://www.blogjava.net/killme2008/archive/2007/09/14/145195.html</a><br><a target="_blank" rel="noopener" href="http://my.oschina.net/noahxiao/blog/101558">http://my.oschina.net/noahxiao/blog/101558</a></p>
<p>LinkedBlockingDeque<br><a target="_blank" rel="noopener" href="http://blog.csdn.net/guangcigeyun/article/details/8278355">http://blog.csdn.net/guangcigeyun/article/details/8278355</a></p>
<h3 id="5-1-4-常用异步框架"><a href="#5-1-4-常用异步框架" class="headerlink" title="5.1.4. 常用异步框架"></a>5.1.4. 常用异步框架</h3><h4 id="5-1-4-1-Akka"><a href="#5-1-4-1-Akka" class="headerlink" title="5.1.4.1. Akka"></a>5.1.4.1. Akka</h4><p>网络间异步调用。<br>应用场景：服务端要处理大量的客户端的请求，并且处理请求耗费较长的时间。这时就需要使用并发处理。多线程是一种方法，这里使用Akka框架处理并发。</p>
<p>Akka有三个角色：Client、Master、Worker</p>
<ul>
<li>Client傻乎乎地发同步请求给Master，一直等到结果返回客户端才离开。</li>
<li>Master接收客户端发来的请求，然后将请求交给Worker处理，处理完成之后将结果返回给Client。</li>
<li>Worker负责具体的业务处理，它耗费的事件比较长。</li>
</ul>
<p>参考：<a target="_blank" rel="noopener" href="http://blog.csdn.net/jmppok/article/details/17264495">分布式应用框架Akka快速入门</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/architecture/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" data-id="ckqg285ts001yrcfp6etze5zq" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-architecture/Java事务设计策略" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/architecture/Java%E4%BA%8B%E5%8A%A1%E8%AE%BE%E8%AE%A1%E7%AD%96%E7%95%A5/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:10.785Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>阅读《Java事务设计策略》48-53页</p>
<p>对SQL事务隔离级别的简单理解</p>
<p>数据库死锁<br>数据库中死锁那些事儿<br>Spring事务传播性与隔离级别</p>
<p>一、事务的隔离级别<br>使用Spring 声明式事务时，有一个非常重要的概念就是事务属性。事务属性通常由事务的传播行为，事务的隔离级别，事务的超时值和事务只读标志组成。<br>org.springframework.transaction包里面的TransactionDefinition类<br>getTimeout()方法，它返回事务必须在多少秒内完成。<br>isReadOnly(),事务是否只读，事务管理器能够根据这个返回值进行优化，确保事务是只读的。<br>getIsolationLevel()方法返回事务的隔离级别，事务管理器根据它来控制另外一个事务可以看到本事务内的哪些数据。<br>在TransactionDefinition接口中定义了四个不同的事务隔离级别:</p>
<ol>
<li>ISOLATION_DEFAULT 这是一个 PlatfromTransactionManager默认的隔离级别，使用数据库默认的事务隔离级别(读未提交).另外四个与JDBC的隔离级别相对应</li>
<li>ISOLATION_READ_UNCOMMITTED这是事务最低的隔离级别，它充许别外一个事务可以看到这个事务未提交的数据。这种隔离级别会产生脏读，不可重复读和幻像读。</li>
<li>ISOLATION_READ_COMMITTED 保证一个事务修改的数据提交后才能被另外一个事务读取。另外一个事务不能读取该事务未提交的数据。这种事务隔离级别可以避免脏读出现，但是可能会出现不可重复读和幻像读。</li>
<li>ISOLATION_REPEATABLE_READ 这种事务隔离级别可以防止脏读，不可重复读。但是可能出现幻像读。它除了保证一个事务不能读取另一个事务未提交的数据外，还保证了避免下面的情况产生(不可重复读)</li>
</ol>
<p>SQL标准定义了4类隔离级别分别是：可串行化，可重复读，读已提交，读未提交。</p>
<p>l      可串行化 Serializable</p>
<p>是事务最高的 隔离级别 。在此级别上，从一组可并行执行的事务获得的结果与通过连续运行每个事务所获得的结果相同。因为 它采用了类似线程同步的概念，当一个事务开始操作数据时，其他所有的事务都不能进行除查询外的其他操作，只能等待当前事务完成提交。 由于高度隔离会限制可并行执行的事务数，所以一些应用程序降低隔离级别以换取更大的吞吐量。</p>
<p>l      可重复读 Repeatable Read</p>
<p>这是MySQL 的默认事务隔离级别，它确保同一事务的多个实例在并发读取数据时，会看到同样的数据行。 它采用的是数据缓存策略，即当事务开始后，第一次读取数据后会把数据缓存起来， 当再次进行相同操作时，直接返回缓存的数据，这样即使数据库内容发生了改变，当前事务内所读取的结果还是一致的。</p>
<p>l     读已提交 Read Committed</p>
<p>这是大多数数据库系统的默认隔离级别（但不是MySQL默认的）。它满足了隔离的简单定义： 一个事务只能看见已经提交事务所做的改变 。一个事务在结束时会执行一个命令，commit（提交）或者 rollback（回滚），前者即确认事务所做的操作，后者则为撤销整个事务的所有操作。此隔离级别的服务将不会看到其他并行服务在commit之前所进行的操作。</p>
<p>l     读未提交 Read Uncommitted</p>
<p>这是最低的隔离级别， 所有事务都可以看到其他未提交事务的执行结果 。本隔离级别很少用于实际应用，因为它的性能也不比其他级别好多少。读取未提交的数据，也被称之为脏读（Dirty Read），因为别的服务有可能会执行rollback操作，这样提前读取到的数据可能会出现问题。</p>
<p>四种级别的隔离，各有自己的优缺点，级别越高则安全性越高，但并发性越低，低级别的隔离则支持更高的并发处理，并要求较低的系统开销，究竟使用哪种，还有根据具体项目的相关要求而决定。</p>
<p>二、事务的传播性质<br>定义了关于客户端和被调用方法的事务边界。传播规则就是在说明新的事务是否要被启动或是挂起，或者方法是否要在事务环境中运行。<br>在TransactionDefinition接口中定义了七个事务传播行为:</p>
<ol>
<li>PROPAGATION_REQUIRED 如果存在一个事务，则支持当前事务。如果没有事务则开启一个新的事务;</li>
<li>PROPAGATION_SUPPORTS 如果存在一个事务，支持当前事务。如果没有事务，则非事务的执行;</li>
<li>PROPAGATION_MANDATORY 如果已经存在一个事务，支持当前事务。如果没有一个活动的事务，则抛出异;</li>
<li>PROPAGATION_REQUIRES_NEW 总是开启一个新的事务。如果一个事务已经存在，则将这个存在的事务挂起;</li>
<li>PROPAGATION_NOT_SUPPORTED总是非事务地执行，并挂起任何存在的事务;</li>
<li>PROPAGATION_NEVER总是非事务地执行，如果存在一个活动事务，则抛出异常;</li>
<li>PROPAGATION_NESTED如果一个活动的事务存在，则运行在一个嵌套的事务中. 如果没有活动事务, 则按 TransactionDefinition.PROPAGATION_REQUIRED 属性执行;</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/architecture/Java%E4%BA%8B%E5%8A%A1%E8%AE%BE%E8%AE%A1%E7%AD%96%E7%95%A5/" data-id="ckqg285ts001xrcfpcf76h870" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-architecture/Java_roadmap" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/architecture/Java_roadmap/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:10.784Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<h2 id="1-一、JVM-amp-Java"><a href="#1-一、JVM-amp-Java" class="headerlink" title="1. 一、JVM &amp; Java"></a>1. 一、JVM &amp; Java</h2><p>以《分布式JAVA应用基础与实践》的目录为纲，查阅《深入理解Java虚拟机》的细节， 高并发查阅 《 JAVA并发编程实战 》。<br>简称《分J》、《深J》、《并J》</p>
<h3 id="1-1-1-1-JVM内存管理"><a href="#1-1-1-1-JVM内存管理" class="headerlink" title="1.1. 1.1 JVM内存管理"></a>1.1. 1.1 JVM内存管理</h3><p>主要阅读 《分J》3.2节、《深J》的第二部分</p>
<ul>
<li>Java内存模型</li>
</ul>
<ul>
<li> Java内存分配与回收</li>
</ul>
<ul>
<li> JVM性能分析及调优</li>
</ul>
<ul>
<li> JVM调优案例</li>
</ul>
<ul>
<li>FAQ<ul>
<li><a target="_blank" rel="noopener" href="http://ifeve.com/jmm-faq/">Java内存模型FAQ</a></li>
<li>自己编写各种outofmemory，stackoverflow程序<ul>
<li>HeapOutOfMemory</li>
<li>Young OutOfMemory</li>
<li>MethodArea OutOfMemory</li>
<li>ConstantPool OutOfMemory</li>
<li>DirectMemory OutOfMemory</li>
<li>Stack OutOfMemory</li>
<li>Stack OverFlow</li>
</ul>
</li>
<li> 当一个Java程序响应很慢时如何查找问题</li>
<li>当一个Java程序频繁FullGC时如何解决问题，如何查看垃圾回收日志</li>
<li>当一个Java应用发生OutOfMemory时该如何解决，年轻代、年老代、永久代解决办法不同，导致原因也不同</li>
<li>编程验证 软引用 ，弱引用， 虚引用</li>
</ul>
</li>
</ul>
<h3 id="1-2-1-2-Java执行机制"><a href="#1-2-1-2-Java执行机制" class="headerlink" title="1.2. 1.2 Java执行机制"></a>1.2. 1.2 Java执行机制</h3><p>主要阅读 《分J》3.1节、《深J》的第三部分</p>
<ul>
<li><p>类文件结构</p>
</li>
<li><p>类加载机制</p>
</li>
<li><p>类执行机制</p>
</li>
<li><p>案例分析</p>
<ul>
<li><p>tomcat类加载机制</p>
</li>
<li><p>OSGI 类加载机制</p>
</li>
<li><p>字节码与动态代理</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>FAQ<ul>
<li>写一个程序要求实现javap的功能（手工完成，不借助ASM等工具）<br>如Java源代码：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">  int i = 0;</span><br><span class="line">  i += 1;</span><br><span class="line">  i *= 1;</span><br><span class="line">  System.out.println(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<pre><code>编译后读取class文件输出以下代码：
</code></pre>
<p>public static void main(java.lang.String[]);<br>  Code:<br>   Stack=2, Locals=2, Args_size=1<br>   0:   iconst_0<br>   1:   istore_1<br>   2:   iinc    1, 1<br>   5:   iload_1<br>   6:   iconst_1<br>   7:   imul<br>   8:   istore_1<br>   9:   getstatic       #2; //Field java/lang/System.out:Ljava/io/PrintStream;<br>   12:  iload_1<br>   13:  invokevirtual   #3; //Method java/io/PrintStream.println:(I)V<br>   16:  return<br>  LineNumberTable:<br>   line 4: 0<br>   line 5: 2<br>   line 6: 5<br>   line 7: 9<br>   line 8: 16</p>
<h3 id="1-3-1-3-线程与高并发"><a href="#1-3-1-3-线程与高并发" class="headerlink" title="1.3. 1.3 线程与高并发"></a>1.3. 1.3 线程与高并发</h3><p>主要阅读 《分J》第4章、《深J》的第五部分、 《并J》全书。</p>
<ul>
<li> NIO与并发包</li>
<li>Java内存模型与线程</li>
<li>线程安全与锁优化</li>
</ul>
<ul>
<li><p>FAQ</p>
<ul>
<li><p>BIO、NIO、AIO的区别？</p>
</li>
<li><p>Reactor、Preactor区别？</p>
</li>
<li><p>线程池原理</p>
</li>
<li><p> 什么是锁，锁的种类有哪些，每种锁有什么特点，适用场景是什么？</p>
</li>
<li><p>同步机制有哪些？</p>
</li>
<li><p> 写一个死锁的程序</p>
</li>
<li><p>什么 是守护线程，守护线程和非守护线程的区别以及用法？</p>
</li>
<li><p> volatile的作用？</p>
</li>
</ul>
</li>
</ul>
<h2 id="2-二、架构设计"><a href="#2-二、架构设计" class="headerlink" title="2. 二、架构设计"></a>2. 二、架构设计</h2><p>理解运用23中设计模式，深入理解《企业架构模式》。 </p>
<h3 id="2-1-2-1-设计模式"><a href="#2-1-2-1-设计模式" class="headerlink" title="2.1. 2.1 设计模式"></a>2.1. 2.1 设计模式</h3><h3 id="2-2-2-2-企业架构模式"><a href="#2-2-2-2-企业架构模式" class="headerlink" title="2.2. 2.2 企业架构模式"></a>2.2. 2.2 企业架构模式</h3><h3 id="2-3-2-3-常见模式分析"><a href="#2-3-2-3-常见模式分析" class="headerlink" title="2.3. 2.3 常见模式分析"></a>2.3. 2.3 常见模式分析</h3><ul>
<li><p>MVC模式：SpringMVC原理</p>
</li>
<li><p>AOP</p>
<ul>
<li> CGLIB和InvocationHandler的区别： <a target="_blank" rel="noopener" href="http://cglib.sourceforge.net/">http://cglib.sourceforge.net/</a></li>
<li> 动态代理模式</li>
<li> Javassist实现AOP： // <a target="_blank" rel="noopener" href="http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/">www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/</a></li>
<li> ASM实现AOP： <a target="_blank" rel="noopener" href="http://asm.ow2.org/">http://asm.ow2.org/</a></li>
</ul>
</li>
</ul>
<ul>
<li>FAQ<ul>
<li> 使用模板方法模式和策略模式实现IOC</li>
<li> 不用synchronized和lock，实现线程安全的单例模式</li>
</ul>
</li>
</ul>
<h3 id="2-4-2-4-微服务与SOA"><a href="#2-4-2-4-微服务与SOA" class="headerlink" title="2.4. 2.4 微服务与SOA"></a>2.4. 2.4 微服务与SOA</h3><ul>
<li><p>微服务</p>
<ul>
<li><p>API网关</p>
</li>
<li><p>RPC框架</p>
</li>
</ul>
</li>
</ul>
<h2 id="3-三、大数据"><a href="#3-三、大数据" class="headerlink" title="3. 三、大数据"></a>3. 三、大数据</h2><h3 id="3-1-数据存储知识"><a href="#3-1-数据存储知识" class="headerlink" title="3.1. 数据存储知识"></a>3.1. 数据存储知识</h3><h4 id="3-1-1-关系型数据库"><a href="#3-1-1-关系型数据库" class="headerlink" title="3.1.1. 关系型数据库"></a>3.1.1. 关系型数据库</h4><p>MySQL<br>如何看执行计划<br>如何搭建MySQL主备<br>binlog是什么<br>Derby，H2，PostgreSQL<br>SQLite</p>
<h4 id="3-1-2-NoSQL"><a href="#3-1-2-NoSQL" class="headerlink" title="3.1.2. NoSQL"></a>3.1.2. NoSQL</h4><h3 id="3-2-大数据知识"><a href="#3-2-大数据知识" class="headerlink" title="3.2. 大数据知识"></a>3.2. 大数据知识</h3><h4 id="3-2-1-Zookeeper，在linux上部署zk"><a href="#3-2-1-Zookeeper，在linux上部署zk" class="headerlink" title="3.2.1. Zookeeper，在linux上部署zk"></a>3.2.1. Zookeeper，在linux上部署zk</h4><h4 id="3-2-2-Solr，Lucene，ElasticSearch"><a href="#3-2-2-Solr，Lucene，ElasticSearch" class="headerlink" title="3.2.2. Solr，Lucene，ElasticSearch"></a>3.2.2. Solr，Lucene，ElasticSearch</h4><p>在linux上部署solr，solrcloud，，新增、删除、查询索引</p>
<h4 id="3-2-3-Storm，流式计算，了解Spark，S4"><a href="#3-2-3-Storm，流式计算，了解Spark，S4" class="headerlink" title="3.2.3. Storm，流式计算，了解Spark，S4"></a>3.2.3. Storm，流式计算，了解Spark，S4</h4><p>在linux上部署storm，用zookeeper做协调，运行storm hello world，local和remote模式运行调试storm topology。</p>
<h4 id="3-2-4-Hadoop，离线计算"><a href="#3-2-4-Hadoop，离线计算" class="headerlink" title="3.2.4. Hadoop，离线计算"></a>3.2.4. Hadoop，离线计算</h4><p>Hdfs：部署NameNode，SecondaryNameNode，DataNode，上传文件、打开文件、更改文件、删除文件<br>MapReduce：部署JobTracker，TaskTracker，编写mr job<br>Hive：部署hive，书写hive sql，得到结果<br>Presto：类hive，不过比hive快，非常值得学习</p>
<h4 id="3-2-5-分布式日志收集flume，kafka，logstash"><a href="#3-2-5-分布式日志收集flume，kafka，logstash" class="headerlink" title="3.2.5. 分布式日志收集flume，kafka，logstash"></a>3.2.5. 分布式日志收集flume，kafka，logstash</h4><h4 id="3-2-6-数据挖掘，mahout"><a href="#3-2-6-数据挖掘，mahout" class="headerlink" title="3.2.6. 数据挖掘，mahout"></a>3.2.6. 数据挖掘，mahout</h4><h4 id="3-2-7-参考资料"><a href="#3-2-7-参考资料" class="headerlink" title="3.2.7. 参考资料"></a>3.2.7. 参考资料</h4><p><a target="_blank" rel="noopener" href="http://zookeeper.apache.org/">http://zookeeper.apache.org/</a><br><a target="_blank" rel="noopener" href="https://lucene.apache.org/solr/">https://lucene.apache.org/solr/</a><br><a target="_blank" rel="noopener" href="https://github.com/nathanmarz/storm/wiki">https://github.com/nathanmarz/storm/wiki</a><br><a target="_blank" rel="noopener" href="http://hadoop.apache.org/">http://hadoop.apache.org/</a><br><a target="_blank" rel="noopener" href="http://prestodb.io/">http://prestodb.io/</a><br><a target="_blank" rel="noopener" href="http://flume.apache.org/%EF%BC%8Chttp://logstash.net/%EF%BC%8Chttp://kafka.apache.org/">http://flume.apache.org/，http://logstash.net/，http://kafka.apache.org/</a><br><a target="_blank" rel="noopener" href="http://mahout.apache.org/">http://mahout.apache.org/</a></p>
<h2 id="4-四、网络与安全"><a href="#4-四、网络与安全" class="headerlink" title="4. 四、网络与安全"></a>4. 四、网络与安全</h2><h3 id="4-1-网络编程知识"><a href="#4-1-网络编程知识" class="headerlink" title="4.1. 网络编程知识"></a>4.1. 网络编程知识</h3><h4 id="4-1-1-用Java写一个简单的静态文件的HTTP服务器"><a href="#4-1-1-用Java写一个简单的静态文件的HTTP服务器" class="headerlink" title="4.1.1. 用Java写一个简单的静态文件的HTTP服务器"></a>4.1.1. 用Java写一个简单的静态文件的HTTP服务器</h4><p>实现客户端缓存功能，支持返回304<br>实现可并发下载一个文件<br>使用线程池处理客户端请求<br>使用nio处理客户端请求<br>支持简单的rewrite规则<br>上述功能在实现的时候需要满足“开闭原则”</p>
<h4 id="4-1-2-用Java实现FTP、SMTP协议"><a href="#4-1-2-用Java实现FTP、SMTP协议" class="headerlink" title="4.1.2. 用Java实现FTP、SMTP协议"></a>4.1.2. 用Java实现FTP、SMTP协议</h4><h4 id="4-1-3-什么是CDN？如果实现？DNS起到什么作用？"><a href="#4-1-3-什么是CDN？如果实现？DNS起到什么作用？" class="headerlink" title="4.1.3. 什么是CDN？如果实现？DNS起到什么作用？"></a>4.1.3. 什么是CDN？如果实现？DNS起到什么作用？</h4><p>搭建一个DNS服务器<br>搭建一个 Squid 或 Apache Traffic Server 服务器<br><a target="_blank" rel="noopener" href="http://www.squid-cache.org/">http://www.squid-cache.org/</a><br><a target="_blank" rel="noopener" href="http://trafficserver.apache.org/">http://trafficserver.apache.org/</a><br><a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Domain_Name_System">http://en.wikipedia.org/wiki/Domain_Name_System</a></p>
<h3 id="4-2-网络安全知识"><a href="#4-2-网络安全知识" class="headerlink" title="4.2. 网络安全知识"></a>4.2. 网络安全知识</h3><h4 id="4-2-1-什么是DES、AES"><a href="#4-2-1-什么是DES、AES" class="headerlink" title="4.2.1. 什么是DES、AES"></a>4.2.1. 什么是DES、AES</h4><h4 id="4-2-2-什么是RSA、DSA"><a href="#4-2-2-什么是RSA、DSA" class="headerlink" title="4.2.2. 什么是RSA、DSA"></a>4.2.2. 什么是RSA、DSA</h4><h4 id="4-2-3-什么是MD5，SHA1"><a href="#4-2-3-什么是MD5，SHA1" class="headerlink" title="4.2.3. 什么是MD5，SHA1"></a>4.2.3. 什么是MD5，SHA1</h4><h4 id="4-2-4-什么是SSL、TLS，为什么HTTPS相对比较安全"><a href="#4-2-4-什么是SSL、TLS，为什么HTTPS相对比较安全" class="headerlink" title="4.2.4. 什么是SSL、TLS，为什么HTTPS相对比较安全"></a>4.2.4. 什么是SSL、TLS，为什么HTTPS相对比较安全</h4><h4 id="4-2-5-什么是中间人攻击、如果避免中间人攻击"><a href="#4-2-5-什么是中间人攻击、如果避免中间人攻击" class="headerlink" title="4.2.5. 什么是中间人攻击、如果避免中间人攻击"></a>4.2.5. 什么是中间人攻击、如果避免中间人攻击</h4><h4 id="4-2-6-什么是DOS、DDOS、CC攻击"><a href="#4-2-6-什么是DOS、DDOS、CC攻击" class="headerlink" title="4.2.6. 什么是DOS、DDOS、CC攻击"></a>4.2.6. 什么是DOS、DDOS、CC攻击</h4><h4 id="4-2-7-什么是CSRF攻击"><a href="#4-2-7-什么是CSRF攻击" class="headerlink" title="4.2.7. 什么是CSRF攻击"></a>4.2.7. 什么是CSRF攻击</h4><h4 id="4-2-8-什么是CSS攻击"><a href="#4-2-8-什么是CSS攻击" class="headerlink" title="4.2.8. 什么是CSS攻击"></a>4.2.8. 什么是CSS攻击</h4><h4 id="4-2-9-什么是SQL注入攻击"><a href="#4-2-9-什么是SQL注入攻击" class="headerlink" title="4.2.9. 什么是SQL注入攻击"></a>4.2.9. 什么是SQL注入攻击</h4><h4 id="4-2-10-什么是Hash碰撞拒绝服务攻击"><a href="#4-2-10-什么是Hash碰撞拒绝服务攻击" class="headerlink" title="4.2.10. 什么是Hash碰撞拒绝服务攻击"></a>4.2.10. 什么是Hash碰撞拒绝服务攻击</h4><h4 id="4-2-11-了解并学习下面几种增强安全的技术"><a href="#4-2-11-了解并学习下面几种增强安全的技术" class="headerlink" title="4.2.11. 了解并学习下面几种增强安全的技术"></a>4.2.11. 了解并学习下面几种增强安全的技术</h4><p><a target="_blank" rel="noopener" href="http://www.openauthentication.org/">http://www.openauthentication.org/</a><br>HOTP <a target="_blank" rel="noopener" href="http://www.ietf.org/rfc/rfc4226.txt">http://www.ietf.org/rfc/rfc4226.txt</a><br>TOTP <a target="_blank" rel="noopener" href="http://tools.ietf.org/rfc/rfc6238.txt">http://tools.ietf.org/rfc/rfc6238.txt</a><br>OCRA <a target="_blank" rel="noopener" href="http://tools.ietf.org/rfc/rfc6287.txt">http://tools.ietf.org/rfc/rfc6287.txt</a><br><a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Salt_(cryptography)">http://en.wikipedia.org/wiki/Salt_(cryptography)</a></p>
<h4 id="4-2-12-用openssl签一个证书部署到apache或nginx"><a href="#4-2-12-用openssl签一个证书部署到apache或nginx" class="headerlink" title="4.2.12. 用openssl签一个证书部署到apache或nginx"></a>4.2.12. 用openssl签一个证书部署到apache或nginx</h4><h2 id="5-五、-推荐书籍"><a href="#5-五、-推荐书籍" class="headerlink" title="5. 五、 推荐书籍"></a>5. 五、 推荐书籍</h2><p>《深入Java虚拟机》<br>《深入理解Java虚拟机》<br>《Effective Java》<br>《七周七语言》<br>《七周七数据》<br>《Hadoop技术内幕》<br>《Hbase In Action》<br>《Mahout In Action》<br>《这就是搜索引擎》<br>《Solr In Action》<br>《深入分析Java Web技术内幕》<br>《大型网站技术架构》<br>《高性能MySQL》<br>《算法导论》<br>《计算机程序设计艺术》<br>《代码大全》<br>《JavaScript权威指南》</p>
<p>参考： <a target="_blank" rel="noopener" href="http://www.hollischuang.com/archives/489">Java工程师成神之路</a></p>
<h2 id="6-Java开发必备知识"><a href="#6-Java开发必备知识" class="headerlink" title="6. Java开发必备知识"></a>6. Java开发必备知识</h2><h3 id="6-1-编程语言"><a href="#6-1-编程语言" class="headerlink" title="6.1. 编程语言"></a>6.1. 编程语言</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/virtualdogbert/Groovy_Links">Groovy_Links</a></li>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/a0e301f79f9b">Groovy 的SQL模块</a></li>
<li><a target="_blank" rel="noopener" href="https://www.mkyong.com/java8/java-8-streams-map-examples/">Java 8 Streams map() examples</a></li>
<li><a target="_blank" rel="noopener" href="https://www.mkyong.com/java8/java-8-convert-list-to-map/">Java 8 – Convert List to Map</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/wabiaozia/article/details/84262195"> java8的lambda中的map相关操作</a></li>
</ul>
<h3 id="6-2-数据库"><a href="#6-2-数据库" class="headerlink" title="6.2. 数据库"></a>6.2. 数据库</h3><ul>
<li><a target="_blank" rel="noopener" href="http://www.imooc.com/learn/1130">MyBatis-Plus入门 视频课程</a></li>
</ul>
<h3 id="6-3-常用工具库"><a href="#6-3-常用工具库" class="headerlink" title="6.3. 常用工具库"></a>6.3. 常用工具库</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/d97f9ea2d3ca">modelMapper入门及使用解析</a></li>
<li><a target="_blank" rel="noopener" href="https://grefr.iteye.com/blog/2053748">CGLIB BeanCopier和BeanMap等实现</a></li>
</ul>
<h3 id="6-4-开源项目"><a href="#6-4-开源项目" class="headerlink" title="6.4. 开源项目"></a>6.4. 开源项目</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/hs-web/hsweb-framework">hsweb 后台管理基础框架</a></li>
<li><a target="_blank" rel="noopener" href="https://gitee.com/iBase4J/iBase4J">iBase4J项目</a></li>
<li><a target="_blank" rel="noopener" href="http://www.jepf3.com/">JEPF软件快速开发平台</a></li>
</ul>
<h3 id="6-5-工具使用"><a href="#6-5-工具使用" class="headerlink" title="6.5. 工具使用"></a>6.5. 工具使用</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/jianliang-Wu/p/7110681.html">Eclipse远程调试（远程服务器端监听)</a></li>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000005746934">Eclipse开发工具之安装插件Jrebel</a></li>
<li><a target="_blank" rel="noopener" href="https://www.infoq.cn/article/1jV*BDxGwld6CWDVIt48">阿里巴巴程序员常用的 15 款开发者工具</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/p358278505/article/details/74221214">非常全的VsCode快捷键</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/huaieli1/article/details/79494871">eclipse使用jetty:run命令调试</a></li>
<li><a target="_blank" rel="noopener" href="http://wiki.jikexueyuan.com/project/nginx/">Nginx 入门指南</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/architecture/Java_roadmap/" data-id="ckqg285tr001wrcfp8ltwakq5" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-architecture/Jackson json序列化" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/architecture/Jackson%20json%E5%BA%8F%E5%88%97%E5%8C%96/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:10.783Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="Jackson：自定义处理序列化和反序列化"><a href="#Jackson：自定义处理序列化和反序列化" class="headerlink" title="Jackson：自定义处理序列化和反序列化"></a>Jackson：自定义处理序列化和反序列化</h3><p><a target="_blank" rel="noopener" href="http://jackyrong.iteye.com/blog/2005323">jackson中自定义处理序列化和反序列化</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ItemSerializer</span> <span class="keyword">extends</span> <span class="title">JsonSerializer</span>&lt;<span class="title">Item</span>&gt; </span>&#123;  </span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">serialize</span><span class="params">(Item value, JsonGenerator jgen, SerializerProvider provider)</span>   </span></span><br><span class="line"><span class="function">      <span class="keyword">throws</span> IOException, JsonProcessingException </span>&#123;  </span><br><span class="line">        jgen.writeStartObject();  </span><br><span class="line">        jgen.writeNumberField(<span class="string">&quot;id&quot;</span>, value.id);  </span><br><span class="line">        jgen.writeStringField(<span class="string">&quot;itemName&quot;</span>, value.itemName);  </span><br><span class="line">        jgen.writeNumberField(<span class="string">&quot;owner&quot;</span>, value.owner.id);  </span><br><span class="line">        jgen.writeEndObject();  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">......</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Item myItem = <span class="keyword">new</span> Item(<span class="number">1</span>, <span class="string">&quot;theItem&quot;</span>, <span class="keyword">new</span> User(<span class="number">2</span>, <span class="string">&quot;theUser&quot;</span>));  </span><br><span class="line">ObjectMapper mapper = <span class="keyword">new</span> ObjectMapper();  </span><br><span class="line">   </span><br><span class="line">SimpleModule <span class="keyword">module</span> = <span class="keyword">new</span> SimpleModule();  </span><br><span class="line"><span class="keyword">module</span>.addSerializer(Item.class, <span class="keyword">new</span> ItemSerializer());  </span><br><span class="line">mapper.registerModule(<span class="keyword">module</span>);  </span><br><span class="line">   </span><br><span class="line">String serialized = mapper.writeValueAsString(myItem);  </span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>更简单的方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@JsonSerialize(using = ItemSerializer.class)</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Item</span> </span>&#123;  </span><br><span class="line">    ...  </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>


<h3 id="Jackson：自定义忽略规则"><a href="#Jackson：自定义忽略规则" class="headerlink" title="Jackson：自定义忽略规则"></a>Jackson：自定义忽略规则</h3><p><a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/26945580/jackson-serialization-how-to-ignore-superclass-properties">Jackson serialization: how to ignore superclass properties</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">IgnoreInheritedIntrospector</span> <span class="keyword">extends</span> <span class="title">JacksonAnnotationIntrospector</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasIgnoreMarker</span><span class="params">(<span class="keyword">final</span> AnnotatedMember m)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> m.getDeclaringClass() == Base.class || <span class="keyword">super</span>.hasIgnoreMarker(m);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> JsonProcessingException </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> ObjectMapper mapper = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">    mapper.setAnnotationIntrospector(<span class="keyword">new</span> IgnoreInheritedIntrospector());</span><br><span class="line">    <span class="keyword">final</span> Bean bean = <span class="keyword">new</span> Bean(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>);</span><br><span class="line">    System.out.println(mapper</span><br><span class="line">                    .writerWithDefaultPrettyPrinter()</span><br><span class="line">                    .writeValueAsString(bean));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="Jackson：在POJO的json序列化字符串中加入自定义属性"><a href="#Jackson：在POJO的json序列化字符串中加入自定义属性" class="headerlink" title="Jackson：在POJO的json序列化字符串中加入自定义属性"></a>Jackson：在POJO的json序列化字符串中加入自定义属性</h3><p><a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/14714328/jackson-how-to-add-custom-property-to-the-json-without-modifying-the-pojo">Jackson: How to add custom property to the JSON without modifying the POJO</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JacksonSerializeWithExtraField</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAddExtraField</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        ObjectMapper mapper = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line"> </span><br><span class="line">        mapper.registerModule(<span class="keyword">new</span> SimpleModule() &#123;</span><br><span class="line"> </span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setupModule</span><span class="params">(SetupContext context)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">super</span>.setupModule(context);</span><br><span class="line"> </span><br><span class="line">                context.addBeanSerializerModifier(<span class="keyword">new</span> BeanSerializerModifier() &#123;</span><br><span class="line"> </span><br><span class="line">                    <span class="keyword">public</span> JsonSerializer&lt;?&gt; modifySerializer(</span><br><span class="line">                            SerializationConfig config,</span><br><span class="line">                            BeanDescription beanDesc,</span><br><span class="line">                            JsonSerializer&lt;?&gt; serializer) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (serializer <span class="keyword">instanceof</span> BeanSerializerBase) &#123;</span><br><span class="line">                              <span class="keyword">return</span> <span class="keyword">new</span> ExtraFieldSerializer(</span><br><span class="line">                                   (BeanSerializerBase) serializer);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">return</span> serializer;</span><br><span class="line"> </span><br><span class="line">                    &#125;                  </span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;          </span><br><span class="line">        &#125;);</span><br><span class="line"> </span><br><span class="line">        mapper.writeValue(System.out, <span class="keyword">new</span> MyClass());      </span><br><span class="line">        <span class="comment">//prints &#123;&quot;classField&quot;:&quot;classFieldValue&quot;,&quot;extraField&quot;:&quot;extraFieldValue&quot;&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">private</span> String classField = <span class="string">&quot;classFieldValue&quot;</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">getClassField</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> classField;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setClassField</span><span class="params">(String classField)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.classField = classField;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">ExtraFieldSerializer</span> <span class="keyword">extends</span> <span class="title">BeanSerializerBase</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">        ExtraFieldSerializer(BeanSerializerBase source) &#123;</span><br><span class="line">            <span class="keyword">super</span>(source);</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        ExtraFieldSerializer(ExtraFieldSerializer source,</span><br><span class="line">                ObjectIdWriter objectIdWriter) &#123;</span><br><span class="line">            <span class="keyword">super</span>(source, objectIdWriter);</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        ExtraFieldSerializer(ExtraFieldSerializer source,</span><br><span class="line">                String[] toIgnore) &#123;</span><br><span class="line">            <span class="keyword">super</span>(source, toIgnore);</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="function"><span class="keyword">protected</span> BeanSerializerBase <span class="title">withObjectIdWriter</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">                ObjectIdWriter objectIdWriter)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ExtraFieldSerializer(<span class="keyword">this</span>, objectIdWriter);</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="function"><span class="keyword">protected</span> BeanSerializerBase <span class="title">withIgnorals</span><span class="params">(String[] toIgnore)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ExtraFieldSerializer(<span class="keyword">this</span>, toIgnore);</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">serialize</span><span class="params">(Object bean, JsonGenerator jgen,</span></span></span><br><span class="line"><span class="params"><span class="function">                SerializerProvider provider)</span> <span class="keyword">throws</span> IOException,</span></span><br><span class="line"><span class="function">                JsonGenerationException </span>&#123;          </span><br><span class="line">            jgen.writeStartObject();                       </span><br><span class="line">            serializeFields(bean, jgen, provider);</span><br><span class="line">            jgen.writeStringField(<span class="string">&quot;extraField&quot;</span>, <span class="string">&quot;extraFieldValue&quot;</span>);</span><br><span class="line">            jgen.writeEndObject();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/architecture/Jackson%20json%E5%BA%8F%E5%88%97%E5%8C%96/" data-id="ckqg285tr001vrcfp8m436urr" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/18/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="page-number" href="/page/18/">18</a><span class="page-number current">19</span><a class="page-number" href="/page/20/">20</a><a class="page-number" href="/page/21/">21</a><a class="extend next" rel="next" href="/page/20/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/06/28/product/%E9%9C%80%E6%B1%82%E8%B0%83%E7%A0%94%E7%9A%84%E5%86%85%E5%AE%B9%E5%92%8C%E5%B7%A5%E4%BD%9C%E6%8C%87%E5%BC%95/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/06/28/product/%E9%93%81%E8%B7%AF6C%E4%B8%9A%E5%8A%A1%E7%BB%93%E6%9E%84/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/06/28/product/%E9%9C%80%E6%B1%82%E8%B0%83%E7%A0%94%E5%8F%8A%E5%88%86%E6%9E%90%E6%96%B9%E6%B3%95/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/06/28/product/%E6%B0%B4%E7%94%B5%E7%AB%99%E7%94%9F%E4%BA%A7%E8%BF%90%E8%A1%8C%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/06/28/product/%E6%B0%B4%E7%94%B5%E5%8E%82%E8%BF%90%E8%A1%8C%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>