<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="前言第1章　Linux服务器的性能调优11.1 网站架构设计相关11.1.1 评估网站性能涉及的专业名词术语11.1.2 CDN业务的选项21.1.3 IDC机房的选择31.2 如何根据服务器应用来选购服务器 41.3 硬件对Linux性能的影响91.4 CentOS 6.8 x86_64最小化安装后的优化111.4.1 系统的基础优化111.4.2 优化Linux下的内核TCP参数以提高系统性能">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/2021/06/28/architecture/%E3%80%8A%E6%9E%84%E5%BB%BA%E9%AB%98%E5%8F%AF%E7%94%A8Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%88%E7%AC%AC4%E7%89%88%EF%BC%89%E3%80%8B/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="前言第1章　Linux服务器的性能调优11.1 网站架构设计相关11.1.1 评估网站性能涉及的专业名词术语11.1.2 CDN业务的选项21.1.3 IDC机房的选择31.2 如何根据服务器应用来选购服务器 41.3 硬件对Linux性能的影响91.4 CentOS 6.8 x86_64最小化安装后的优化111.4.1 系统的基础优化111.4.2 优化Linux下的内核TCP参数以提高系统性能">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-06-28T03:26:10.830Z">
<meta property="article:modified_time" content="2020-06-10T08:35:53.000Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-architecture/《构建高可用Linux服务器（第4版）》" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/architecture/%E3%80%8A%E6%9E%84%E5%BB%BA%E9%AB%98%E5%8F%AF%E7%94%A8Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%88%E7%AC%AC4%E7%89%88%EF%BC%89%E3%80%8B/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T03:26:10.830Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><h1 id="第1章-Linux服务器的性能调优1"><a href="#第1章-Linux服务器的性能调优1" class="headerlink" title="第1章　Linux服务器的性能调优1"></a>第1章　Linux服务器的性能调优1</h1><h2 id="1-1-网站架构设计相关1"><a href="#1-1-网站架构设计相关1" class="headerlink" title="1.1 网站架构设计相关1"></a>1.1 网站架构设计相关1</h2><h3 id="1-1-1-评估网站性能涉及的专业名词术语1"><a href="#1-1-1-评估网站性能涉及的专业名词术语1" class="headerlink" title="1.1.1 评估网站性能涉及的专业名词术语1"></a>1.1.1 评估网站性能涉及的专业名词术语1</h3><h3 id="1-1-2-CDN业务的选项2"><a href="#1-1-2-CDN业务的选项2" class="headerlink" title="1.1.2 CDN业务的选项2"></a>1.1.2 CDN业务的选项2</h3><h3 id="1-1-3-IDC机房的选择3"><a href="#1-1-3-IDC机房的选择3" class="headerlink" title="1.1.3 IDC机房的选择3"></a>1.1.3 IDC机房的选择3</h3><h2 id="1-2-如何根据服务器应用来选购服务器-4"><a href="#1-2-如何根据服务器应用来选购服务器-4" class="headerlink" title="1.2 如何根据服务器应用来选购服务器 4"></a>1.2 如何根据服务器应用来选购服务器 4</h2><h2 id="1-3-硬件对Linux性能的影响9"><a href="#1-3-硬件对Linux性能的影响9" class="headerlink" title="1.3 硬件对Linux性能的影响9"></a>1.3 硬件对Linux性能的影响9</h2><h2 id="1-4-CentOS-6-8-x86-64最小化安装后的优化11"><a href="#1-4-CentOS-6-8-x86-64最小化安装后的优化11" class="headerlink" title="1.4 CentOS 6.8 x86_64最小化安装后的优化11"></a>1.4 CentOS 6.8 x86_64最小化安装后的优化11</h2><h3 id="1-4-1-系统的基础优化11"><a href="#1-4-1-系统的基础优化11" class="headerlink" title="1.4.1 系统的基础优化11"></a>1.4.1 系统的基础优化11</h3><h3 id="1-4-2-优化Linux下的内核TCP参数以提高系统性能19"><a href="#1-4-2-优化Linux下的内核TCP参数以提高系统性能19" class="headerlink" title="1.4.2 优化Linux下的内核TCP参数以提高系统性能19"></a>1.4.2 优化Linux下的内核TCP参数以提高系统性能19</h3><h3 id="1-4-3-CentOS-6-8-x86-64系统最小化安装优化脚本21"><a href="#1-4-3-CentOS-6-8-x86-64系统最小化安装优化脚本21" class="headerlink" title="1.4.3 CentOS 6.8 x86_64系统最小化安装优化脚本21"></a>1.4.3 CentOS 6.8 x86_64系统最小化安装优化脚本21</h3><h3 id="1-4-4-Linux下CPU使用率与机器负载的关系与区别23"><a href="#1-4-4-Linux下CPU使用率与机器负载的关系与区别23" class="headerlink" title="1.4.4 Linux下CPU使用率与机器负载的关系与区别23"></a>1.4.4 Linux下CPU使用率与机器负载的关系与区别23</h3><h2 id="1-5-服务器调优实际案例25"><a href="#1-5-服务器调优实际案例25" class="headerlink" title="1.5 服务器调优实际案例25"></a>1.5 服务器调优实际案例25</h2><h2 id="1-6-小结28"><a href="#1-6-小结28" class="headerlink" title="1.6 小结28"></a>1.6 小结28</h2><h1 id="第2章-Shell脚本在生产环境下的应用29"><a href="#第2章-Shell脚本在生产环境下的应用29" class="headerlink" title="第2章　Shell脚本在生产环境下的应用29"></a>第2章　Shell脚本在生产环境下的应用29</h1><h2 id="2-1-Shell编程基础29"><a href="#2-1-Shell编程基础29" class="headerlink" title="2.1 Shell编程基础29"></a>2.1 Shell编程基础29</h2><h3 id="2-1-1-Shell脚本基本元素30"><a href="#2-1-1-Shell脚本基本元素30" class="headerlink" title="2.1.1 Shell脚本基本元素30"></a>2.1.1 Shell脚本基本元素30</h3><h3 id="2-1-2-Shell基础正则表达式30"><a href="#2-1-2-Shell基础正则表达式30" class="headerlink" title="2.1.2 Shell基础正则表达式30"></a>2.1.2 Shell基础正则表达式30</h3><h3 id="2-1-3-Shell特殊字符32"><a href="#2-1-3-Shell特殊字符32" class="headerlink" title="2.1.3 Shell特殊字符32"></a>2.1.3 Shell特殊字符32</h3><h3 id="2-1-4-变量和运算符33"><a href="#2-1-4-变量和运算符33" class="headerlink" title="2.1.4 变量和运算符33"></a>2.1.4 变量和运算符33</h3><h2 id="2-2-Shell中控制流结构45"><a href="#2-2-Shell中控制流结构45" class="headerlink" title="2.2 Shell中控制流结构45"></a>2.2 Shell中控制流结构45</h2><h2 id="2-3-Sed的基础用法及实用举例48"><a href="#2-3-Sed的基础用法及实用举例48" class="headerlink" title="2.3 Sed的基础用法及实用举例48"></a>2.3 Sed的基础用法及实用举例48</h2><h3 id="2-3-1-Sed的基础语法格式48"><a href="#2-3-1-Sed的基础语法格式48" class="headerlink" title="2.3.1 Sed的基础语法格式48"></a>2.3.1 Sed的基础语法格式48</h3><h3 id="2-3-2-Sed的用法举例说明53"><a href="#2-3-2-Sed的用法举例说明53" class="headerlink" title="2.3.2 Sed的用法举例说明53"></a>2.3.2 Sed的用法举例说明53</h3><h2 id="2-4-awk的基础用法及实用举例56"><a href="#2-4-awk的基础用法及实用举例56" class="headerlink" title="2.4 awk的基础用法及实用举例56"></a>2.4 awk的基础用法及实用举例56</h2><h2 id="2-5-Shell基础正则表达式举例61"><a href="#2-5-Shell基础正则表达式举例61" class="headerlink" title="2.5 Shell基础正则表达式举例61"></a>2.5 Shell基础正则表达式举例61</h2><h2 id="2-6-Shell开发中应该掌握的系统知识点68"><a href="#2-6-Shell开发中应该掌握的系统知识点68" class="headerlink" title="2.6 Shell开发中应该掌握的系统知识点68"></a>2.6 Shell开发中应该掌握的系统知识点68</h2><h2 id="2-7-生产环境下的Shell脚本74"><a href="#2-7-生产环境下的Shell脚本74" class="headerlink" title="2.7 生产环境下的Shell脚本74"></a>2.7 生产环境下的Shell脚本74</h2><h3 id="2-7-1-Amazon-Linux系统简介74"><a href="#2-7-1-Amazon-Linux系统简介74" class="headerlink" title="2.7.1 Amazon Linux系统简介74"></a>2.7.1 Amazon Linux系统简介74</h3><h3 id="2-7-2-生产环境下的备份类脚本75"><a href="#2-7-2-生产环境下的备份类脚本75" class="headerlink" title="2.7.2 生产环境下的备份类脚本75"></a>2.7.2 生产环境下的备份类脚本75</h3><h3 id="2-7-3-生产环境下的监控类脚本78"><a href="#2-7-3-生产环境下的监控类脚本78" class="headerlink" title="2.7.3 生产环境下的监控类脚本78"></a>2.7.3 生产环境下的监控类脚本78</h3><h3 id="2-7-4-生产环境下的运维开发类脚本84"><a href="#2-7-4-生产环境下的运维开发类脚本84" class="headerlink" title="2.7.4 生产环境下的运维开发类脚本84"></a>2.7.4 生产环境下的运维开发类脚本84</h3><h2 id="2-8-小结88"><a href="#2-8-小结88" class="headerlink" title="2.8 小结88"></a>2.8 小结88</h2><h1 id="第3章-利用Vagrant搭建分布式环境89"><a href="#第3章-利用Vagrant搭建分布式环境89" class="headerlink" title="第3章　利用Vagrant搭建分布式环境89"></a>第3章　利用Vagrant搭建分布式环境89</h1><h2 id="3-1-Vagrant简单介绍89"><a href="#3-1-Vagrant简单介绍89" class="headerlink" title="3.1 Vagrant简单介绍89"></a>3.1 Vagrant简单介绍89</h2><h2 id="3-2-Vagrant安装90"><a href="#3-2-Vagrant安装90" class="headerlink" title="3.2 Vagrant安装90"></a>3.2 Vagrant安装90</h2><h2 id="3-3-使用Vagrant配置本地开发环境91"><a href="#3-3-使用Vagrant配置本地开发环境91" class="headerlink" title="3.3 使用Vagrant配置本地开发环境91"></a>3.3 使用Vagrant配置本地开发环境91</h2><h3 id="3-3-1-Vagrant的具体安装步骤91"><a href="#3-3-1-Vagrant的具体安装步骤91" class="headerlink" title="3.3.1 Vagrant的具体安装步骤91"></a>3.3.1 Vagrant的具体安装步骤91</h3><h3 id="3-3-2-Vagrant配置文件详解93"><a href="#3-3-2-Vagrant配置文件详解93" class="headerlink" title="3.3.2 Vagrant配置文件详解93"></a>3.3.2 Vagrant配置文件详解93</h3><h3 id="3-3-3-Vagrant常用命令详解95"><a href="#3-3-3-Vagrant常用命令详解95" class="headerlink" title="3.3.3 Vagrant常用命令详解95"></a>3.3.3 Vagrant常用命令详解95</h3><h2 id="3-4-使用Vagrant搭建分布式环境96"><a href="#3-4-使用Vagrant搭建分布式环境96" class="headerlink" title="3.4 使用Vagrant搭建分布式环境96"></a>3.4 使用Vagrant搭建分布式环境96</h2><h2 id="3-5-小结99"><a href="#3-5-小结99" class="headerlink" title="3.5 小结99"></a>3.5 小结99</h2><h1 id="第4章-轻量级自动化运维工具介绍100"><a href="#第4章-轻量级自动化运维工具介绍100" class="headerlink" title="第4章　轻量级自动化运维工具介绍100"></a>第4章　轻量级自动化运维工具介绍100</h1><h2 id="4-1-轻量级自动化运维工具pssh介绍101"><a href="#4-1-轻量级自动化运维工具pssh介绍101" class="headerlink" title="4.1 轻量级自动化运维工具pssh介绍101"></a>4.1 轻量级自动化运维工具pssh介绍101</h2><h3 id="4-1-1-pssh的安装103"><a href="#4-1-1-pssh的安装103" class="headerlink" title="4.1.1 pssh的安装103"></a>4.1.1 pssh的安装103</h3><h3 id="4-1-2-pssh的使用103"><a href="#4-1-2-pssh的使用103" class="headerlink" title="4.1.2 pssh的使用103"></a>4.1.2 pssh的使用103</h3><h2 id="4-2-轻量级自动化运维工具Fabric介绍105"><a href="#4-2-轻量级自动化运维工具Fabric介绍105" class="headerlink" title="4.2 轻量级自动化运维工具Fabric介绍105"></a>4.2 轻量级自动化运维工具Fabric介绍105</h2><h3 id="4-2-1-Fabric的安装105"><a href="#4-2-1-Fabric的安装105" class="headerlink" title="4.2.1 Fabric的安装105"></a>4.2.1 Fabric的安装105</h3><h3 id="4-2-2-Fabric的命令行入口fab命令详细介绍107"><a href="#4-2-2-Fabric的命令行入口fab命令详细介绍107" class="headerlink" title="4.2.2 Fabric的命令行入口fab命令详细介绍107"></a>4.2.2 Fabric的命令行入口fab命令详细介绍107</h3><h3 id="4-2-3-Fabric的环境变量设置108"><a href="#4-2-3-Fabric的环境变量设置108" class="headerlink" title="4.2.3 Fabric的环境变量设置108"></a>4.2.3 Fabric的环境变量设置108</h3><h3 id="4-2-4-Fabric的核心API109"><a href="#4-2-4-Fabric的核心API109" class="headerlink" title="4.2.4 Fabric的核心API109"></a>4.2.4 Fabric的核心API109</h3><h3 id="4-2-5-Fabric的执行逻辑112"><a href="#4-2-5-Fabric的执行逻辑112" class="headerlink" title="4.2.5 Fabric的执行逻辑112"></a>4.2.5 Fabric的执行逻辑112</h3><h3 id="4-2-6-如何利用进程池大小来限制Fabric并发进程数114"><a href="#4-2-6-如何利用进程池大小来限制Fabric并发进程数114" class="headerlink" title="4.2.6 如何利用进程池大小来限制Fabric并发进程数114"></a>4.2.6 如何利用进程池大小来限制Fabric并发进程数114</h3><h2 id="4-3-Fabric在工作中应用实例114"><a href="#4-3-Fabric在工作中应用实例114" class="headerlink" title="4.3 Fabric在工作中应用实例114"></a>4.3 Fabric在工作中应用实例114</h2><h3 id="4-3-1-开发环境中Fabric应用实例115"><a href="#4-3-1-开发环境中Fabric应用实例115" class="headerlink" title="4.3.1 开发环境中Fabric应用实例115"></a>4.3.1 开发环境中Fabric应用实例115</h3><h3 id="4-3-2-工作场景中常见的Fabric应用实例116"><a href="#4-3-2-工作场景中常见的Fabric应用实例116" class="headerlink" title="4.3.2 工作场景中常见的Fabric应用实例116"></a>4.3.2 工作场景中常见的Fabric应用实例116</h3><h2 id="4-4-小结120"><a href="#4-4-小结120" class="headerlink" title="4.4 小结120"></a>4.4 小结120</h2><h1 id="第5章-Linux集群及其项目案例分享121"><a href="#第5章-Linux集群及其项目案例分享121" class="headerlink" title="第5章　Linux集群及其项目案例分享121"></a>第5章　Linux集群及其项目案例分享121</h1><h2 id="5-1-负载均衡高可用核心概念及常用软件121"><a href="#5-1-负载均衡高可用核心概念及常用软件121" class="headerlink" title="5.1 负载均衡高可用核心概念及常用软件121"></a>5.1 负载均衡高可用核心概念及常用软件121</h2><h3 id="5-1-1-什么是负载均衡高可用121"><a href="#5-1-1-什么是负载均衡高可用121" class="headerlink" title="5.1.1 什么是负载均衡高可用121"></a>5.1.1 什么是负载均衡高可用121</h3><h3 id="5-1-2-以F5-BIG-IP作为负载均衡器122"><a href="#5-1-2-以F5-BIG-IP作为负载均衡器122" class="headerlink" title="5.1.2 以F5 BIG-IP作为负载均衡器122"></a>5.1.2 以F5 BIG-IP作为负载均衡器122</h3><h3 id="5-1-3-以LVS作为负载均衡器123"><a href="#5-1-3-以LVS作为负载均衡器123" class="headerlink" title="5.1.3 以LVS作为负载均衡器123"></a>5.1.3 以LVS作为负载均衡器123</h3><h3 id="5-1-4-以Nginx作为负载均衡器132"><a href="#5-1-4-以Nginx作为负载均衡器132" class="headerlink" title="5.1.4 以Nginx作为负载均衡器132"></a>5.1.4 以Nginx作为负载均衡器132</h3><h3 id="5-1-5-以HAProxy作为负载均衡器132"><a href="#5-1-5-以HAProxy作为负载均衡器132" class="headerlink" title="5.1.5 以HAProxy作为负载均衡器132"></a>5.1.5 以HAProxy作为负载均衡器132</h3><h3 id="5-1-6-高可用软件Keepalived134"><a href="#5-1-6-高可用软件Keepalived134" class="headerlink" title="5.1.6 高可用软件Keepalived134"></a>5.1.6 高可用软件Keepalived134</h3><h3 id="5-1-7-高可用软件Heartbeat134"><a href="#5-1-7-高可用软件Heartbeat134" class="headerlink" title="5.1.7 高可用软件Heartbeat134"></a>5.1.7 高可用软件Heartbeat134</h3><h3 id="5-1-8-高可用块设备DRBD135"><a href="#5-1-8-高可用块设备DRBD135" class="headerlink" title="5.1.8 高可用块设备DRBD135"></a>5.1.8 高可用块设备DRBD135</h3><h2 id="5-2-负载均衡关键技术136"><a href="#5-2-负载均衡关键技术136" class="headerlink" title="5.2 负载均衡关键技术136"></a>5.2 负载均衡关键技术136</h2><h3 id="5-2-1-什么是Session136"><a href="#5-2-1-什么是Session136" class="headerlink" title="5.2.1 什么是Session136"></a>5.2.1 什么是Session136</h3><h3 id="5-2-2-什么是Session共享136"><a href="#5-2-2-什么是Session共享136" class="headerlink" title="5.2.2 什么是Session共享136"></a>5.2.2 什么是Session共享136</h3><h3 id="5-2-3-什么是会话保持137"><a href="#5-2-3-什么是会话保持137" class="headerlink" title="5.2.3 什么是会话保持137"></a>5.2.3 什么是会话保持137</h3><h2 id="5-3-负载均衡器的会话保持机制138"><a href="#5-3-负载均衡器的会话保持机制138" class="headerlink" title="5.3 负载均衡器的会话保持机制138"></a>5.3 负载均衡器的会话保持机制138</h2><h3 id="5-3-1-LVS的会话保持机制138"><a href="#5-3-1-LVS的会话保持机制138" class="headerlink" title="5.3.1 LVS的会话保持机制138"></a>5.3.1 LVS的会话保持机制138</h3><h3 id="5-3-2-Nginx负载均衡器中的ip-hash算法142"><a href="#5-3-2-Nginx负载均衡器中的ip-hash算法142" class="headerlink" title="5.3.2 Nginx负载均衡器中的ip_hash算法142"></a>5.3.2 Nginx负载均衡器中的ip_hash算法142</h3><h3 id="5-3-3-HAProxy负载均衡器的source算法145"><a href="#5-3-3-HAProxy负载均衡器的source算法145" class="headerlink" title="5.3.3 HAProxy负载均衡器的source算法145"></a>5.3.3 HAProxy负载均衡器的source算法145</h3><h2 id="5-4-服务器健康检测150"><a href="#5-4-服务器健康检测150" class="headerlink" title="5.4 服务器健康检测150"></a>5.4 服务器健康检测150</h2><h2 id="5-5-Linux集群的项目案例分享151"><a href="#5-5-Linux集群的项目案例分享151" class="headerlink" title="5.5 Linux集群的项目案例分享151"></a>5.5 Linux集群的项目案例分享151</h2><h3 id="5-5-1-用LVS-Keepalived建高可用集群151"><a href="#5-5-1-用LVS-Keepalived建高可用集群151" class="headerlink" title="5.5.1 用LVS+Keepalived建高可用集群151"></a>5.5.1 用LVS+Keepalived建高可用集群151</h3><h3 id="5-5-2-用Nginx-Keepalived实现在线票务系统154"><a href="#5-5-2-用Nginx-Keepalived实现在线票务系统154" class="headerlink" title="5.5.2 用Nginx+Keepalived实现在线票务系统154"></a>5.5.2 用Nginx+Keepalived实现在线票务系统154</h3><h3 id="5-5-3-企业级Web负载均衡高可用之Nginx-Keepalived157"><a href="#5-5-3-企业级Web负载均衡高可用之Nginx-Keepalived157" class="headerlink" title="5.5.3 企业级Web负载均衡高可用之Nginx+Keepalived157"></a>5.5.3 企业级Web负载均衡高可用之Nginx+Keepalived157</h3><h3 id="5-5-4-HAProxy双机高可用方案之HAProxy-Keepalived169"><a href="#5-5-4-HAProxy双机高可用方案之HAProxy-Keepalived169" class="headerlink" title="5.5.4 HAProxy双机高可用方案之HAProxy+Keepalived169"></a>5.5.4 HAProxy双机高可用方案之HAProxy+Keepalived169</h3><h3 id="5-5-5-巧用DNS轮询作负载均衡179"><a href="#5-5-5-巧用DNS轮询作负载均衡179" class="headerlink" title="5.5.5 巧用DNS轮询作负载均衡179"></a>5.5.5 巧用DNS轮询作负载均衡179</h3><h3 id="5-5-6-百万级PV高可用网站架构设计184"><a href="#5-5-6-百万级PV高可用网站架构设计184" class="headerlink" title="5.5.6 百万级PV高可用网站架构设计184"></a>5.5.6 百万级PV高可用网站架构设计184</h3><h3 id="5-5-7-千万级PV高性能高并发网站架构设计187"><a href="#5-5-7-千万级PV高性能高并发网站架构设计187" class="headerlink" title="5.5.7 千万级PV高性能高并发网站架构设计187"></a>5.5.7 千万级PV高性能高并发网站架构设计187</h3><h2 id="5-6-软件级负载均衡器的特点介绍与对比193"><a href="#5-6-软件级负载均衡器的特点介绍与对比193" class="headerlink" title="5.6 软件级负载均衡器的特点介绍与对比193"></a>5.6 软件级负载均衡器的特点介绍与对比193</h2><h2 id="5-7-四层负载均衡和七层负载均衡工作流程的对比194"><a href="#5-7-四层负载均衡和七层负载均衡工作流程的对比194" class="headerlink" title="5.7 四层负载均衡和七层负载均衡工作流程的对比194"></a>5.7 四层负载均衡和七层负载均衡工作流程的对比194</h2><h2 id="5-8-Linux集群的总结和思考196"><a href="#5-8-Linux集群的总结和思考196" class="headerlink" title="5.8 Linux集群的总结和思考196"></a>5.8 Linux集群的总结和思考196</h2><h2 id="5-9-小结198"><a href="#5-9-小结198" class="headerlink" title="5.9 小结198"></a>5.9 小结198</h2><h1 id="第6章-MySQL性能调优及高可用案例分享200"><a href="#第6章-MySQL性能调优及高可用案例分享200" class="headerlink" title="第6章　MySQL性能调优及高可用案例分享200"></a>第6章　MySQL性能调优及高可用案例分享200</h1><h2 id="6-1-MySQL数据库的优化200"><a href="#6-1-MySQL数据库的优化200" class="headerlink" title="6.1 MySQL数据库的优化200"></a>6.1 MySQL数据库的优化200</h2><h3 id="6-1-1-服务器物理硬件的优化200"><a href="#6-1-1-服务器物理硬件的优化200" class="headerlink" title="6.1.1 服务器物理硬件的优化200"></a>6.1.1 服务器物理硬件的优化200</h3><h3 id="6-1-2-MySQL配置文件的优化201"><a href="#6-1-2-MySQL配置文件的优化201" class="headerlink" title="6.1.2 MySQL配置文件的优化201"></a>6.1.2 MySQL配置文件的优化201</h3><h3 id="6-1-3-MySQL上线后根据status状态进行适当优化204"><a href="#6-1-3-MySQL上线后根据status状态进行适当优化204" class="headerlink" title="6.1.3 MySQL上线后根据status状态进行适当优化204"></a>6.1.3 MySQL上线后根据status状态进行适当优化204</h3><h3 id="6-1-4-利用tuning-primer脚本进行数据库调优212"><a href="#6-1-4-利用tuning-primer脚本进行数据库调优212" class="headerlink" title="6.1.4 利用tuning-primer脚本进行数据库调优212"></a>6.1.4 利用tuning-primer脚本进行数据库调优212</h3><h3 id="6-1-5-MySQL架构设计调优216"><a href="#6-1-5-MySQL架构设计调优216" class="headerlink" title="6.1.5 MySQL架构设计调优216"></a>6.1.5 MySQL架构设计调优216</h3><h2 id="6-2-MySQL数据库的高可用架构方案216"><a href="#6-2-MySQL数据库的高可用架构方案216" class="headerlink" title="6.2 MySQL数据库的高可用架构方案216"></a>6.2 MySQL数据库的高可用架构方案216</h2><h3 id="6-2-1-生产环境下的DRBD-Heart-beat-MySQL双机高可用217"><a href="#6-2-1-生产环境下的DRBD-Heart-beat-MySQL双机高可用217" class="headerlink" title="6.2.1 生产环境下的DRBD+Heart-beat+MySQL双机高可用217"></a>6.2.1 生产环境下的DRBD+Heart-beat+MySQL双机高可用217</h3><h3 id="6-2-2-生产环境下的MySQL数据库主从Replication同步228"><a href="#6-2-2-生产环境下的MySQL数据库主从Replication同步228" class="headerlink" title="6.2.2 生产环境下的MySQL数据库主从Replication同步228"></a>6.2.2 生产环境下的MySQL数据库主从Replication同步228</h3><h2 id="6-3-小结240"><a href="#6-3-小结240" class="headerlink" title="6.3 小结240"></a>6.3 小结240</h2><h1 id="第7章-Linux防火墙介绍242"><a href="#第7章-Linux防火墙介绍242" class="headerlink" title="第7章　Linux防火墙介绍242"></a>第7章　Linux防火墙介绍242</h1><h2 id="7-1-基础网络知识242"><a href="#7-1-基础网络知识242" class="headerlink" title="7.1 基础网络知识242"></a>7.1 基础网络知识242</h2><h3 id="7-1-1-OSI网络参考模型242"><a href="#7-1-1-OSI网络参考模型242" class="headerlink" title="7.1.1 OSI网络参考模型242"></a>7.1.1 OSI网络参考模型242</h3><h3 id="7-1-2-TCP-IP三次握手的过程详解243"><a href="#7-1-2-TCP-IP三次握手的过程详解243" class="headerlink" title="7.1.2 TCP/IP三次握手的过程详解243"></a>7.1.2 TCP/IP三次握手的过程详解243</h3><h3 id="7-1-3-Socket应用245"><a href="#7-1-3-Socket应用245" class="headerlink" title="7.1.3 Socket应用245"></a>7.1.3 Socket应用245</h3><h3 id="7-1-4-其他基础网络知识247"><a href="#7-1-4-其他基础网络知识247" class="headerlink" title="7.1.4 其他基础网络知识247"></a>7.1.4 其他基础网络知识247</h3><h2 id="7-2-Linux防火墙的状态机制247"><a href="#7-2-Linux防火墙的状态机制247" class="headerlink" title="7.2 Linux防火墙的状态机制247"></a>7.2 Linux防火墙的状态机制247</h2><h2 id="7-3-Linux防火墙在企业中的应用247"><a href="#7-3-Linux防火墙在企业中的应用247" class="headerlink" title="7.3 Linux防火墙在企业中的应用247"></a>7.3 Linux防火墙在企业中的应用247</h2><h2 id="7-4-Linux防火墙的语法248"><a href="#7-4-Linux防火墙的语法248" class="headerlink" title="7.4 Linux防火墙的语法248"></a>7.4 Linux防火墙的语法248</h2><h2 id="7-5-iptables的基础知识252"><a href="#7-5-iptables的基础知识252" class="headerlink" title="7.5 iptables的基础知识252"></a>7.5 iptables的基础知识252</h2><h3 id="7-5-1-iptables的状态state252"><a href="#7-5-1-iptables的状态state252" class="headerlink" title="7.5.1 iptables的状态state252"></a>7.5.1 iptables的状态state252</h3><h3 id="7-5-2-iptables的Conntrack记录254"><a href="#7-5-2-iptables的Conntrack记录254" class="headerlink" title="7.5.2 iptables的Conntrack记录254"></a>7.5.2 iptables的Conntrack记录254</h3><h3 id="7-5-3-关于iptables模块的说明255"><a href="#7-5-3-关于iptables模块的说明255" class="headerlink" title="7.5.3 关于iptables模块的说明255"></a>7.5.3 关于iptables模块的说明255</h3><h3 id="7-5-4-iptables防火墙初始化的注意事项256"><a href="#7-5-4-iptables防火墙初始化的注意事项256" class="headerlink" title="7.5.4 iptables防火墙初始化的注意事项256"></a>7.5.4 iptables防火墙初始化的注意事项256</h3><h3 id="7-5-5-如何保存运行中的iptables规则256"><a href="#7-5-5-如何保存运行中的iptables规则256" class="headerlink" title="7.5.5 如何保存运行中的iptables规则256"></a>7.5.5 如何保存运行中的iptables规则256</h3><h2 id="7-6-如何流程化编写iptables脚本257"><a href="#7-6-如何流程化编写iptables脚本257" class="headerlink" title="7.6 如何流程化编写iptables脚本257"></a>7.6 如何流程化编写iptables脚本257</h2><h2 id="7-7-学习iptables应该掌握的工具260"><a href="#7-7-学习iptables应该掌握的工具260" class="headerlink" title="7.7 学习iptables应该掌握的工具260"></a>7.7 学习iptables应该掌握的工具260</h2><h3 id="7-7-1-命令行的抓包工具TCPDump260"><a href="#7-7-1-命令行的抓包工具TCPDump260" class="headerlink" title="7.7.1 命令行的抓包工具TCPDump260"></a>7.7.1 命令行的抓包工具TCPDump260</h3><h3 id="7-7-2-图形化抓包工具Wireshark261"><a href="#7-7-2-图形化抓包工具Wireshark261" class="headerlink" title="7.7.2 图形化抓包工具Wireshark261"></a>7.7.2 图形化抓包工具Wireshark261</h3><h3 id="7-7-3-强大的命令行扫描工具Nmap264"><a href="#7-7-3-强大的命令行扫描工具Nmap264" class="headerlink" title="7.7.3 强大的命令行扫描工具Nmap264"></a>7.7.3 强大的命令行扫描工具Nmap264</h3><h3 id="7-7-4-使用TCPPing工具检测TCP延迟266"><a href="#7-7-4-使用TCPPing工具检测TCP延迟266" class="headerlink" title="7.7.4 使用TCPPing工具检测TCP延迟266"></a>7.7.4 使用TCPPing工具检测TCP延迟266</h3><h2 id="7-8-iptables的简单脚本学习267"><a href="#7-8-iptables的简单脚本学习267" class="headerlink" title="7.8 iptables的简单脚本学习267"></a>7.8 iptables的简单脚本学习267</h2><h3 id="7-8-1-普通的Web主机防护脚本267"><a href="#7-8-1-普通的Web主机防护脚本267" class="headerlink" title="7.8.1 普通的Web主机防护脚本267"></a>7.8.1 普通的Web主机防护脚本267</h3><h3 id="7-8-2-如何让别人ping不到自己，而自己能ping通别人呢？269"><a href="#7-8-2-如何让别人ping不到自己，而自己能ping通别人呢？269" class="headerlink" title="7.8.2 如何让别人ping不到自己，而自己能ping通别人呢？269"></a>7.8.2 如何让别人ping不到自己，而自己能ping通别人呢？269</h3><h3 id="7-8-3-建立安全的vsftpd服务器271"><a href="#7-8-3-建立安全的vsftpd服务器271" class="headerlink" title="7.8.3 建立安全的vsftpd服务器271"></a>7.8.3 建立安全的vsftpd服务器271</h3><h2 id="7-9-线上生产服务器的iptables脚本275"><a href="#7-9-线上生产服务器的iptables脚本275" class="headerlink" title="7.9 线上生产服务器的iptables脚本275"></a>7.9 线上生产服务器的iptables脚本275</h2><h3 id="7-9-1-安全的主机iptables防火墙脚本275"><a href="#7-9-1-安全的主机iptables防火墙脚本275" class="headerlink" title="7.9.1 安全的主机iptables防火墙脚本275"></a>7.9.1 安全的主机iptables防火墙脚本275</h3><h3 id="7-9-2-自动分析黑名单及白名单的iptables脚本278"><a href="#7-9-2-自动分析黑名单及白名单的iptables脚本278" class="headerlink" title="7.9.2 自动分析黑名单及白名单的iptables脚本278"></a>7.9.2 自动分析黑名单及白名单的iptables脚本278</h3><h3 id="7-9-3-利用recent模块限制同一IP的连接数281"><a href="#7-9-3-利用recent模块限制同一IP的连接数281" class="headerlink" title="7.9.3 利用recent模块限制同一IP的连接数281"></a>7.9.3 利用recent模块限制同一IP的连接数281</h3><h3 id="7-9-4-利用DenyHosts工具和脚本来防止SSH暴力破解285"><a href="#7-9-4-利用DenyHosts工具和脚本来防止SSH暴力破解285" class="headerlink" title="7.9.4 利用DenyHosts工具和脚本来防止SSH暴力破解285"></a>7.9.4 利用DenyHosts工具和脚本来防止SSH暴力破解285</h3><h2 id="7-10-工作中的Linux防火墙总结287"><a href="#7-10-工作中的Linux防火墙总结287" class="headerlink" title="7.10　工作中的Linux防火墙总结287"></a>7.10　工作中的Linux防火墙总结287</h2><h2 id="7-11-小结289"><a href="#7-11-小结289" class="headerlink" title="7.11　小结289"></a>7.11　小结289</h2><h1 id="第8章-Linux系统安全相关篇290"><a href="#第8章-Linux系统安全相关篇290" class="headerlink" title="第8章　Linux系统安全相关篇290"></a>第8章　Linux系统安全相关篇290</h1><h2 id="8-1-TCP-wrappers应用级防火墙的介绍和应用290"><a href="#8-1-TCP-wrappers应用级防火墙的介绍和应用290" class="headerlink" title="8.1 TCP_wrappers应用级防火墙的介绍和应用290"></a>8.1 TCP_wrappers应用级防火墙的介绍和应用290</h2><h2 id="8-2-DDos攻击和运营商劫持292"><a href="#8-2-DDos攻击和运营商劫持292" class="headerlink" title="8.2 DDos攻击和运营商劫持292"></a>8.2 DDos攻击和运营商劫持292</h2><h2 id="8-3-Linux服务器的安全防护294"><a href="#8-3-Linux服务器的安全防护294" class="headerlink" title="8.3 Linux服务器的安全防护294"></a>8.3 Linux服务器的安全防护294</h2><h3 id="8-3-1-Linux服务器基础防护篇294"><a href="#8-3-1-Linux服务器基础防护篇294" class="headerlink" title="8.3.1 Linux服务器基础防护篇294"></a>8.3.1 Linux服务器基础防护篇294</h3><h3 id="8-3-2-Linux服务器高级防护篇295"><a href="#8-3-2-Linux服务器高级防护篇295" class="headerlink" title="8.3.2 Linux服务器高级防护篇295"></a>8.3.2 Linux服务器高级防护篇295</h3><h2 id="8-4-Linux系统如何防止入侵301"><a href="#8-4-Linux系统如何防止入侵301" class="headerlink" title="8.4 Linux系统如何防止入侵301"></a>8.4 Linux系统如何防止入侵301</h2><h2 id="8-5-小结301"><a href="#8-5-小结301" class="headerlink" title="8.5 小结301"></a>8.5 小结301</h2><h1 id="附录A-GibLab在开发工作中的实际应用302"><a href="#附录A-GibLab在开发工作中的实际应用302" class="headerlink" title="附录A　GibLab在开发工作中的实际应用302"></a>附录A　GibLab在开发工作中的实际应用302</h1><h1 id="附录B-Sublime-Text3的快捷键操作308"><a href="#附录B-Sublime-Text3的快捷键操作308" class="headerlink" title="附录B　Sublime Text3的快捷键操作308"></a>附录B　Sublime Text3的快捷键操作308</h1><h1 id="附录C-调试网络接口的利器Postman315"><a href="#附录C-调试网络接口的利器Postman315" class="headerlink" title="附录C　调试网络接口的利器Postman315"></a>附录C　调试网络接口的利器Postman315</h1><h1 id="附录D-RSYNC及INOTIFY在工作中的应用321"><a href="#附录D-RSYNC及INOTIFY在工作中的应用321" class="headerlink" title="附录D　RSYNC及INOTIFY在工作中的应用321"></a>附录D　RSYNC及INOTIFY在工作中的应用321</h1>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/architecture/%E3%80%8A%E6%9E%84%E5%BB%BA%E9%AB%98%E5%8F%AF%E7%94%A8Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%88%E7%AC%AC4%E7%89%88%EF%BC%89%E3%80%8B/" data-id="ckqg285u3002orcfphfg9fkte" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/06/28/architecture/%E4%BA%8C%E5%8F%89%E6%A0%91%E5%BB%BA%E7%AB%8B%E4%B8%8E%E9%81%8D%E5%8E%86/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          (no title)
        
      </div>
    </a>
  
  
    <a href="/2021/06/28/architecture/%E3%80%8A%E5%A4%A7%E5%9E%8B%E7%BD%91%E7%AB%99%E6%8A%80%E6%9C%AF%E6%9E%B6%E6%9E%84%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title"></div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/06/28/product/%E9%9C%80%E6%B1%82%E8%B0%83%E7%A0%94%E7%9A%84%E5%86%85%E5%AE%B9%E5%92%8C%E5%B7%A5%E4%BD%9C%E6%8C%87%E5%BC%95/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/06/28/product/%E9%93%81%E8%B7%AF6C%E4%B8%9A%E5%8A%A1%E7%BB%93%E6%9E%84/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/06/28/product/%E9%9C%80%E6%B1%82%E8%B0%83%E7%A0%94%E5%8F%8A%E5%88%86%E6%9E%90%E6%96%B9%E6%B3%95/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/06/28/product/%E6%B0%B4%E7%94%B5%E7%AB%99%E7%94%9F%E4%BA%A7%E8%BF%90%E8%A1%8C%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/06/28/product/%E6%B0%B4%E7%94%B5%E5%8E%82%E8%BF%90%E8%A1%8C%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>