<p>干货推荐：  http://www.infoq.com/cn/presentations/start-up-companies-build-data-analysis-platform</p>
<p>[TOC]</p>
<h1>常用 数据分析解决方案（WHY）</h1>
<ol>
<li>
<p>第三方统计服务：Google Analytcs、友盟、百度统计</p>
<ul>
<li>
<p>好处</p>
<ul>
<li>使用简单</li>
<li>免费</li>
</ul>
</li>
<li>
<p>不足</p>
<ul>
<li>无法与业务数据交叉分析</li>
<li>分析能力较弱，无法覆盖深度分析</li>
<li>指标无法自定义</li>
<li>数据无法取回</li>
<li>数据安全存在顾虑</li>
</ul>
</li>
</ul>
</li>
<li>
<p>业务数据库写SQL</p>
<ul>
<li>
<p>好处</p>
<ul>
<li>可根据需求灵活定制</li>
<li>数据准确、实时</li>
<li>可分析业务数据</li>
</ul>
</li>
<li>
<p>不足</p>
<ul>
<li>历史状态被覆盖</li>
<li>能力有限，无法水平扩展</li>
<li>开发维护代价大<ul>
<li>需额外开发工作</li>
<li>查询逻辑随着业务的演进复杂化，不好维护（SQL、脚本、结果数据）</li>
<li>和业务数据无法解耦</li>
<li>随分析需求增加字段、数据表</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>基于日志写统计脚本</p>
<ul>
<li>
<p>好处</p>
<ul>
<li>与业务数据库解耦</li>
</ul>
</li>
<li>
<p>不足</p>
<ul>
<li>开发效率低（2天/个，重复开发）</li>
<li>准确性无法保证</li>
<li>计算能力有限</li>
<li>有技术门槛<ul>
<li>打好日志是一件很难的事情</li>
<li>数据流难以管理</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<h1>数据分析平台的推荐方案（HOW）</h1>
<p><img alt="" src="_v_images/2019-11-29-17-41-12.png" /></p>
<h2>1、数据记录（采集）</h2>
<ul>
<li>生成高质量的源数据<ul>
<li>全</li>
<li>准</li>
</ul>
</li>
<li>数据类型<ul>
<li>行为数据</li>
<li>业务数据：用户、订单、库存</li>
</ul>
</li>
<li>数据规范<ul>
<li>行为数据：操作系统、应用版本、是否WIFI、 屏幕尺寸、设备型号、商品ID、商品价格等。</li>
<li>用户属性数据：性别、年龄、婚姻状况、注册 时间、收入级别、是否有小孩等。</li>
</ul>
</li>
</ul>
<p><img alt="" src="_v_images/2019-11-29-17-41-25.png" /></p>
<ul>
<li>数据格式<ul>
<li>非格式化文本 Vs. Json、Thrift、Protocol Buffer、Avro</li>
</ul>
</li>
<li>数据采集点<ul>
<li>尽量在后端打</li>
<li>前端打（压缩、加密、批量）</li>
</ul>
</li>
<li>数据落地<ul>
<li>写网络</li>
<li>写本地文件</li>
</ul>
</li>
</ul>
<h2>2、数据传输</h2>
<ul>
<li>
<p>需关注的问题</p>
<ul>
<li>时效性（实时？批量？）</li>
<li>可靠性（丢？重？）</li>
<li>扩展性</li>
</ul>
</li>
<li>
<p>方案</p>
<ul>
<li>FTP</li>
<li>Kafka</li>
<li>Scribe、Flume</li>
</ul>
</li>
</ul>
<h2>3、数据建模/存储</h2>
<ul>
<li>数据模型抽象<ul>
<li>Event：  Event Type + Properties + UserID</li>
<li>User Profile： UserID + Properties（年龄、所在地、Tag等）</li>
</ul>
</li>
<li>Event：记录所有的历史状态变更</li>
<li>
<p>ETL (Extract, Transform and Load)</p>
<ul>
<li>ID-Mapping</li>
<li>Merge</li>
<li>批量 or 实时</li>
</ul>
</li>
<li>
<p>存储</p>
<ul>
<li>单机文件</li>
<li>关系型数据库（Mysql、Vertica、 Teradata）</li>
<li>Nosql (HBase、MongoDB)</li>
<li>HDFS</li>
</ul>
</li>
</ul>
<h2>4、数据统计/分析/挖掘</h2>
<ul>
<li>批处理</li>
<li>
<p>交互式</p>
</li>
<li>
<p>OLAP (Online Analytical  Processing)</p>
<ul>
<li>维度</li>
<li>指标</li>
<li>数据魔方</li>
</ul>
</li>
</ul>
<p><img alt="" src="_v_images/2019-11-29-17-41-40.png" /></p>
<ul>
<li>
<p>分析模型</p>
<ul>
<li>
<p>基于事件分析</p>
</li>
<li>
<p>漏斗</p>
</li>
<li>留存</li>
</ul>
</li>
</ul>
<h2>5、数据可视化/反馈</h2>
<ul>
<li>展现方式</li>
<li>曲线</li>
<li>柱状图</li>
<li>饼状图</li>
<li>热力图</li>
<li>
<p>地域分布</p>
</li>
<li>
<p>可视化工具</p>
</li>
<li>OpenCharts</li>
<li>HighCharts</li>
<li>ECharts</li>
<li>Tableau Software</li>
<li>
<p>Oracle BIEE</p>
</li>
<li>
<p>数据分析的结果直接反馈到产品系统中，提升产品体验（BI只是数据分析的很小一部分）</p>
</li>
<li>反馈方式</li>
<li>推送</li>
<li>个性化推荐</li>
<li>风控</li>
<li>CRM集成</li>
</ul>
<h1>总体架构</h1>
<p><img alt="" src="_v_images/2019-11-29-17-41-48.png" /></p>