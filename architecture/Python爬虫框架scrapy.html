<h2>安装</h2>
<p>pip install scrapy
编译Twised时需要Visual C++ Build Tools，可以在这来下载安装：<a href="http://www.xdowns.com/soft/38/138/2017/soft_226169.html#download_box">Microsoft Visual C++ Build Tools</a></p>
<h2>Scrapy框架</h2>
<p><img alt="" src="_v_images/2019-11-29-17-57-09.png" /></p>
<p>scrapy爬虫项目开发分成四步：新建项目、明确目标、制作爬虫、存储内容</p>
<h2>新建scrapy项目</h2>
<ul>
<li>新建项目
<code>scrapy startproject douban</code></li>
<li>douban\spiders
进入douban\spiders目录，执行：<code>scrapy genspider douban_spider movie.douban.com</code></li>
</ul>
<h2>明确目标</h2>
<p>分析<code>https://movie.douban.com/top250</code>，需要抓取序号、电影名、导演、演员、星级、评价数、描述等。</p>
<pre><code class="language-python"># 序号
serial_number = scrapy.Field()
# 电影的名称
movie_name = scrapy.Field()
# 电影的介绍
introduce = scrapy.Field()
# 星级
star = scrapy.Field()
# 电影的评论数
evaluate = scrapy.Field()
# 电影的描述
describe = scrapy.Field()
</code></pre>
<h2>爬虫文件编写（制作爬虫）</h2>
<pre><code class="language-python">class DoubanSpiderSpider(scrapy.Spider):
    # 爬虫名称
    name = 'douban_spider'
    # 允许的域名
    allowed_domains = ['movie.douban.com']
    # 入口url，扔到调度器里面去
    start_urls = ['https://movie.douban.com/top250']


    def parse(self, response):
        print(response.text)
</code></pre>
<p>进入douban\spiders目录，执行：<code>scrapy crawl douban_spider</code>
windows下运行会出现错误：</p>
<blockquote>
<p>Could not find a version that satisfies the requirement win32api (from versions: )  No matching distribution found for win32api
解决办法：<code>pip install pypiwin32</code></p>
</blockquote>
<p>远程运行，新建main.py</p>
<pre><code class="language-python">from scrapy import cmdline
cmdline.execute('scrapy crawl douban_spider'.split())
</code></pre>
<h2>保存数据</h2>
<h2>常见问题处理</h2>
<p><a href="https://www.jianshu.com/p/830ca5623211">scrapy模拟登录代码演示及cookie原理说明</a></p>