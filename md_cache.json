{"architecture/01-架构案例.md": "SteelRen物联网专栏blog.csdn.net/steelren/category_7431518.html网站加载速度优化的14个技巧blog.csdn.net/zdyueguanyun/article/details/59481374中小型商城系统中的分类/产品属性/扩展属性的数据库设计菩提树下的杨过www.cnblogs.com/yjmyzz/archive/2010/06/27/1766012.html电子商务ecommerce随笔分类活雷锋博客园www.cnblogs.com/mmmjiang13/category/288925.html非小型电子商务系统设计经验分享活雷锋博客园www.cnblogs.com/mmmjiang13/archive/2012/07/05/2575538.html大数据在电力行业的应用前景有哪些？知乎www.zhihu.com/question/23241126", "architecture/GeoServer使用.md": "TOCGeoServer之发布Geotiff存在的问题首次使用geoserver发布geotiff时，在导入geotiff会遇到这样的问题：```Couldnotlistlayersforthisstore,anerroroccurredretrievingthem:Failedtocreatereaderfromfile://F:\\tif\\11.tifandhintsHints:REPOSITORY=org.geoserver.catalog.CatalogRepository@11d3c487EXECUTOR_SERVICE=java.util.concurrent.ThreadPoolExecutor....```出现这种情况时因为所选的TIFF的头文件有问题或者geoserver无法识别投影坐标系。解决方法：通过gdal_translate（提前安装了gdal）重写TIFF文件CMD命令行输入：`gdal_translateofGTiffscale输入文件路径输出文件路径`或：`gdal\\apps\\gdal_translate.exea_srsEPSG:900913mapguangdong_Level_3.tifgd032.tif`官方链接：gdal.org/1.11/gdal_translate.html瓦片地图的存储", "architecture/IM即时通讯.md": "IM即时通讯即时通讯技术分享zhuanlan.zhihu.com/helloim一套高可用、易伸缩、高并发的IM群聊、单聊架构方案设计实践www.52im.net/thread201511.htmlJackJiang开源IM框架MobileIMSDK、BeautyEye的作者www.zhihu.com/people/nanren2600", "architecture/OAuth2认证.md": "参考：帮你深入理解OAuth2.0协议blog.csdn.net/seccloud/article/details/8192707OAuth2集成――《跟我学Shiro》jinnianshilongnian.iteye.com/blog/2038646一、OAuth基础介绍目前实现开放授权的方法分为两种：一种是使用OAuth协议1；另一种是使用IAM服务2。OAuth协议主要适用于针对个人用户对资源的开放授权，比如Google的用户Alice。OAuth的特点是“现场授权”或“在线授权”：客户端主要通过浏览器去访问资源，授权时需要认证Alice的资源所有者身份，并且需要Alice现场审批。OAuth一般在SNS服务中广泛使用，如微博。IAM服务则不同，它的特点是“预先授权”或“离线授权”：客户端主要通过RESTAPI方式去访问资源，资源所有者可以预先知道第三方应用所需要的资源请求，一次授权之后，很少会变更。IAM服务一般在云计算服务中使用，如AWS服务、阿里云计算服务。OAuth角色**资源拥有者（resourceowner）**：能授权访问受保护资源的一个实体，可以是一个人，那我们称之为最终用户；如新浪微博用户zhangsan；**资源服务器（resourceserver）**：存储受保护资源，客户端通过accesstoken请求资源，资源服务器响应受保护资源给客户端；存储着用户zhangsan的微博等信息。**授权服务器（authorizationserver）**：成功验证资源拥有者并获取授权之后，授权服务器颁发授权令牌（AccessToken）给客户端。**客户端（client）**：如新浪微博客户端weico、微格等第三方应用，也可以是它自己的官方应用；其本身不存储资源，而是资源拥有者授权通过后，使用它的授权（授权令牌）访问受保护资源，然后客户端把相应的数据展示出来/提交到服务器。“客户端”术语不代表任何特定实现（如应用运行在一台服务器、桌面、手机或其他设备）。OAuth协议流程!_v_images/20191129175350.png1.客户端从资源拥有者那请求授权。授权请求可以直接发给资源拥有者，或间接的通过授权服务器这种中介，后者更可取。2.客户端收到一个授权许可，代表资源服务器提供的授权。3.客户端使用它自己的私有证书及授权许可到授权服务器验证。4.如果验证成功，则下发一个访问令牌。5.客户端使用访问令牌向资源服务器请求受保护资源。6.资源服务器会验证访问令牌的有效性，如果成功则下发受保护资源。授权类型授权码AuthorizationCodeGrant、最核心、最难理解、也是最广泛使用的一种授权类型隐式授权ImplicitGrant、RO凭证授权ResourceOwnerPasswordCredentialsGrant、Client凭证授权ClientCredentialsGrant。二、SessionAuthenticationvsTokenAuthentication参考：SessionAuthenticationvsTokenAuthenticationsecurity.stackexchange.com/questions/81756/sessionauthenticationvstokenauthenticationControltheSessionwithSpringSecuritywww.baeldung.com/springsecuritysession1.In**SessionbasedAuthentication**theServerdoesalltheheavyliftingserverside.Broadlyspeakingaclientauthenticateswithitscredentialsandreceivesasession_idwhichcanbestoredinacookieandattachesthistoeverysubsequentoutgoingrequest.Sothiscouldbeconsidereda\"token\"asitistheequivalentofasetofcredentials.Thereishowevernothingfancyaboutthissession_idString.Itisjustanidentifierandtheserverdoeseverythingelse.Itisstateful.Itassociatestheidentifierwithauseraccounte.g.inmemoryorinadatabase.Itcanrestrictorlimitthissessiontocertainoperationsoracertaintimeperiodandcaninvalidateitiftherearesecurityconcernandmoreimportantlyitcandoandchangeallofthisonthefly.Furthermoreitcanlogtheuserseverymoveonthewebsites.Possibledisadvantagesarebadscaleabilityespeciallyovermorethanoneserverfarmandextensivememoryusage.2.In**TokenbasedAuthentication**nosessionispersistedserversidestateless.Theinitialstepsarethesame.CredentialsareexchangedagainstatokenwhichisthenattachedtoeverysubsequentrequestItcanalsobestoredinacookie.Howeverforthepurposeofdecreasingmemoryusage,easyscaleabilityandtotalflexibilitytokenscanbeexchangedwithanotherclientastringwithallthenecessaryinformationisissuedthetokenwhichischeckedaftereachrequestmadebytheclienttotheserver.Thereareanumberofwaystouse/createtokens:ausingahashmechanisme.g.HMACSHA1>token=user_id|expiry_date|HMACuser_id|expiry_date,kidandexpiry_idaresentinplaintextwiththeresultinghashattachedkisonlyknowtotheserverbencryptingthetokensymmetricallye.g.withAES>token=AESuser_id|expiry_date,xxrepresentstheen/decryptionkeycencryptingitasymmetricallye.g.withRSA>token=RSAuser_id|expiry_date,privatekey**Productivesystems**areusuallymorecomplexthanthosetwoarchetypes.Amazonforexampleusesbothmechanismsonitswebsite.Alsohybridscanbeusedtoissuetokensasdescribedin2andalsoassociateausersessionwithitforusertrackingorpossiblerevocationandstillretaintheclientflexibilityofclassictokens.AlsoOAuth2.0usesshortlivedandspecificbearertokensandlongerlivedrefreshtokense.g.togetbearertokens.", "architecture/Sharding-JDBC.md": "TOC一、什么是ShardingJDBCShardingJDBC定位为轻量级Java框架，在Java的JDBC层提供的额外服务。它使用客户端直连数据库，以jar包形式提供服务，无需额外部署和依赖，可理解为增强版的JDBC驱动，完全兼容JDBC和各种ORM框架。二、ShardingJDBC能做什么分库&分表读写分离分布式主键分布式事务三、适用项目框架ShardingJDBC适用于：任何基于Java的ORM框架，如：JPA,Hibernate,Mybatis,SpringJDBCTemplate或直接使用JDBC。基于任何第三方的数据库连接池，如：DBCP,C3P0,BoneCP,Druid,HikariCP等。支持任意实现JDBC规范的数据库，目前支持MySQL，Oracle，SQLServer和PostgreSQL。四、Maven依赖```XML<!shardingjdbc开始><dependency><groupId>io.shardingsphere</groupId><artifactId>shardingcore</artifactId><version>${sharding.version}</version></dependency><dependency><groupId>io.shardingsphere</groupId><artifactId>shardingjdbcspringnamespace</artifactId><version>${sharding.version}</version></dependency><!如果不配置分布式事务的话配置上边两个就够了><!分布式事务引用依赖><dependency><groupId>io.shardingsphere</groupId><artifactId>shardingtransaction2pcxa</artifactId><version>${sharding.version}</version></dependency><dependency><groupId>io.shardingsphere</groupId><artifactId>shardingtransactionspring</artifactId><version>${sharding.version}</version></dependency><!shardingjdbc结束><!AspectJAOP支持><dependency><groupId>org.aspectj</groupId><artifactId>aspectjweaver</artifactId><version>${aspectjweaver.version}</version></dependency>```五、读写分离5.1数据源配置先配置数据源也可以配置读写分离以下配置是ds0和ds1两个数据库的主和从一共四个数据源。parentDs是数据源公共的配置，抽出去以免写重复代码。```XML<!ds0的主><beanid=\"ds0_master\"class=\"com.alibaba.druid.pool.DruidDataSource\"destroymethod=\"close\"parent=\"parentDs\"><propertyname=\"driverClassName\"value=\"\"/><propertyname=\"url\"value=\"\"/></bean><!ds0的从><beanid=\"ds0_slave\"class=\"com.alibaba.druid.pool.DruidDataSource\"destroymethod=\"close\"parent=\"parentDs\"><propertyname=\"driverClassName\"value=\"\"/><propertyname=\"url\"value=\"${sharding.connection.url.0}\"/></bean><!ds1的主><beanid=\"ds1_master\"class=\"com.alibaba.druid.pool.DruidDataSource\"destroymethod=\"close\"parent=\"parentDs\"><propertyname=\"driverClassName\"value=\"\"/><propertyname=\"url\"value=\"${sharding.connection.url.1}\"/></bean><!ds1的从><beanid=\"ds1_slave\"class=\"com.alibaba.druid.pool.DruidDataSource\"destroymethod=\"close\"parent=\"parentDs\"><propertyname=\"driverClassName\"value=\"\"/><propertyname=\"url\"value=\"${sharding.connection.url.1}\"/></bean>```5.2读写分离配置只配置主从不配置分库分表的情况如下，如果要配置分库分表则不需要下面这个配置。masterdatasourcename是主数据源IDslavedatasourcenames是从数据源ID```XML<masterslave:datasourceid=\"masterSlaveDataSource\"masterdatasourcename=\"ds0_master,ds1_master\"slavedatasourcenames=\"ds0_slave,ds1_slave\"><masterslave:props><propkey=\"sql.show\">${sql_show}</prop><propkey=\"executor.size\">10</prop><propkey=\"foo\">bar</prop></masterslave:props></masterslave:datasource>```5.3读写分离和分库分表一起配置如果读写分离和分库分表一起使用的话把主从路由配置到shardingdatasource下就可以了。sharding:masterslaverule的id就是配置出来的逻辑的数据源的名称，如果多个从的话还可以通过配置strategyref来配置负载均衡。masterdatasource配置的是主库数据源ID。slavedatasource配置的是从库数据源ID，多个以逗号分开。```XML<!sharding数据源><sharding:datasourceid=\"shardingDataSource\"><!读写分离的话要把所有的主从数据源都写在这里><sharding:shardingruledatasourcenames=\"ds0_master,ds0_slave,ds1_master,ds1_slave\"><!读写分离的路由一主一从配置strategyref><sharding:masterslaverules><sharding:masterslaveruleid=\"ds0\"masterdatasourcename=\"ds0_master\"slavedatasourcenames=\"ds0_slave\"/><sharding:masterslaveruleid=\"ds1\"masterdatasourcename=\"ds1_master\"slavedatasourcenames=\"ds1_slave\"/></sharding:masterslaverules><!读写分离配置结束><sharding:tablerules><!―这里是分库分表路由的配置></sharding:tablerules><sharding:bindingtablerules><!―绑定表的配置></sharding:bindingtablerules></sharding:shardingrule><sharding:props><!显示SQL><propkey=\"sql.show\">true</prop></sharding:props></sharding:datasource>```六、数据分片6.1分片支持ShardingJDBC提供了5种分片策略。由于分片算法和业务实现紧密相关，因此ShardingJDBC并未提供内置分片算法，而是通过分片策略将各种场景提炼出来，提供更高层级的抽象，并提供接口让应用开发者自行实现分片算法。**StandardShardingStrategy**标准分片策略。提供对SQL语句中的=,IN和BETWEENAND的分片操作支持。StandardShardingStrategy只支持单分片键，提供PreciseShardingAlgorithm和RangeShardingAlgorithm两个分片算法。PreciseShardingAlgorithm是必选的，用于处理=和IN的分片；RangeShardingAlgorithm是可选的，用于处理BETWEENAND分片，如果不配置RangeShardingAlgorithm，SQL中的BETWEENAND将按照全库路由处理。**ComplexShardingStrategy**复合分片策略。提供对SQL语句中的=,IN和BETWEENAND的分片操作支持。ComplexShardingStrategy支持多分片键，由于多分片键之间的关系复杂，因此ShardingJDBC并未做过多的封装，而是直接将分片键值组合以及分片操作符交于算法接口，完全由应用开发者实现，提供最大的灵活度。**InlineShardingStrategy**Inline表达式分片策略。使用Groovy的Inline表达式，提供对SQL语句中的=和IN的分片操作支持。InlineShardingStrategy只支持单分片键，对于简单的分片算法，可以通过简单的配置使用，从而避免繁琐的Java代码开发，如:tuser${user_id%8}表示t_user表按照user_id按8取模分成8个表，表名称为t_user_0到t_user_7。**HintShardingStrategy**通过Hint而非SQL解析的方式分片的策略。**NoneShardingStrategy**不分片的策略。6.2分片配置标准分片配置```XML<!标准分片策略。><beanid=\"demoUserStandardStrategy\"class=\"shard.strategy.DemoUserStandardStrategy\"/><sharding:standardstrategyid=\"shardingDemoUserStandardStrategy\"precisealgorithmref=\"demoUserStandardStrategy\"shardingcolumn=\"id\"rangealgorithmref=\"\"/>```DemoUserStandardStrategy标准分片要实现PreciseShardingAlgorithm接口，doSharding的两个参数一个是所有数据源的cllection.另一个参数是执行SQL时传过来的分片的值。```JAVA/***根据ID取*标准分片策略*用于处理=和IN的分片*@authoryulonggao*@date2019/1/3114:35*/@Slf4jpublicclassDemoUserStandardStrategyimplementsPreciseShardingAlgorithm<Long>{@OverridepublicStringdoShardingCollection<String>collection,PreciseShardingValue<Long>preciseShardingValue{//这个里边有异常会被处理掉，然后导致拿不到分片。但出异常一般是业务代码写错了。//每条指定分片的操作都会调用此方法，如果是in条件查询的话每个值会调用一次此方法，如果是批量插入也是每一条都要调用一次进行分片log.info\"DemoUserStandardStrategy_preciseShardingValue={}\",preciseShardingValue;Longsuffix=preciseShardingValue.getValue%4;log.info\"suffix={}\",suffix;finalStringtargetDb=String.valueOfMath.abssuffix.intValue;StringshardingValue=collection.stream.filterp>p.endsWithtargetDb.findFirst.get;log.info\"preciseShardingValue={},shardingValue={}\",preciseShardingValue,shardingValue;returnshardingValue;}```强制分片```xml<!强制路由分片策略><beanid=\"demoUserHintStrategy\"class=\"shard.strategy.DemoUserHintStrategy\"/><!强制路由例子使用><sharding:hintstrategyid=\"shardingDemoUserHintStrategy\"algorithmref=\"demoUserHintStrategy\"/>```DemoUserHintStrategy的Java如下，强制分片要实现HintShardingAlgorithm接口。```JAVA/***DemoUserHint强制路由分片策略,其实可以共用，只是例子*@authoryulonggao*@date2019/1/3114:35*/@Slf4jpublicclassDemoUserHintStrategyimplementsHintShardingAlgorithm{@OverridepublicCollection<String>doShardingCollection<String>availableTargetNames,ShardingValueshardingValue{//availableTargetNames这个参数是所有的dataSource的集合，shardingValue是HintManager传过来的分片信息log.info\"DemoUserHintStrategy_availableTargetNames={}\",availableTargetNames;log.info\"DemoUserHintStrategy_shardingValue={}\",shardingValue;ListShardingValuelistShardingValue=ListShardingValueshardingValue;CollectionshardingValueList=listShardingValue.getValues;//因为调用的时候分片是直接传的DataSource的名称，所以直接返回就可以了，如果传其它值则要加业务逻辑进行分片筛选//返回结果只能是availableTargetNames里边所包含的returnshardingValueList;}}```生成分部式ID的配置，生成主键的类要实现KeyGenerator接口。```XML<!―主键生成><beanid=\"keyId\"class=\"shard.key.DefaultKeyGenerator\"/>```!ShardingJDBC配置_v_images/20200604065002540_18818.png七、分布式事务把下面这行代码配置在spring里，shardingTransaction.xml是jar包里边带的。文件的源码只有两行配置：```XML<beanid=\"transactionManager\"class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\"><propertyname=\"dataSource\"ref=\"shardingDataSource\"></property></bean><tx:annotationdriventransactionmanager=\"transactionManager\"/><!事务支持><importresource=\"classpath:METAINF/shardingTransaction.xml\"/>```使用注解配置事务要同时使用ShardingTransactionType和Transactional两个注解。```JAVA/***注意：@ShardingTransactionType需要同Spring的@Transactional配套使用，事务才会生效。*@paramparam*@return*/@ShardingTransactionTypeTransactionType.XA@TransactionalrollbackFor=Exception.class@OverridepublicintaddParamDemoParamparam{log.info\"addParamparam={}\",param;returndemoParamDao.addParamparam;}```7.1支持程度完全支持非跨库事务，例如：仅分表或分库但是路由的结果在单库中。完全支持因逻辑异常导致的跨库事务。例如：同一事务中跨两个库更新，更新完毕后，抛出空指针，则两个库的内容都能回滚。支持数据库字段约束造成的回滚。八、其他问题关于orderby排序，如果排序的字段不在查询结果中，生成的SQL也会被带上，但结果不返回给你。不支持因网络、硬件异常导致的跨库事务。例如：同一事务中跨两个库更新，更新完毕后、未提交之前，第一个库死机，则只有第二个库数据提交。!_v_images/20200604065318535_1841.png九、参考文档shardingsphere.apache.org/document/current/cn/manual/shardingjdbc/usage/sharding/www.cnblogs.com/yixinjishu/p/10876071.html", "architecture/SSO与权限管理.md": "TOC登录轻松筹1.6亿注册用户的Passport账户系统架构blog.csdn.net/liangzhiyang/article/details/77895189CASCAS实现单点登录SSO执行原理探究终于明白了blog.csdn.net/javaloveiphone/article/details/52439613", "architecture/Web性能测试.md": "toc性能指标参考：系统吞吐量（TPS）、用户并发量、性能测试概念和公式www.ha97.com/5095.html吞吐率、吞吐量、TPS、性能测试，纸上不谈兵一步一步构建高性能Web站点rubychina.org/topics/26221十个免费的Web压力测试工具coolshell.cn/articles/2589.htmlThroughput（吞吐量）按照常规理解网络吞吐量表示在单位时间内通过网卡数据量之和，其中即包括本机网卡发送出去的数据量也包括本机网卡接收到的数据量。一个100Mb位的双工网卡，最大发送数据的速度是12.5M字节/s，最大接收数据的速度是12.5M字节/s，可以同时收发数据。**并发用户数**：是同时执行操作的用户线程数。**响应时间**：从请求发出到收到响应花费的时间。QPS每秒查询率QueryPerSecond每秒处理的查询数（如果是数据库，就相当于读取）每秒查询率QPS是对一个特定的查询服务器在规定时间内所处理流量多少的衡量标准，在因特网上，作为域名系统服务器的机器的性能经常用每秒查询率来衡量。对应fetches/sec，即每秒的响应请求数，也即是最大吞吐能力。说明：这里说明每秒N个请求，就是QPS。而不是请求一个html页面而附带请求的css,js,图片。因为我关心的是应用程序处理业务的能力。TPSTransactionsPerSecond每秒处理的事务数如果是数据库，就相当于写入、修改例如对某个数据库测试，分开两次测QPS与TPS。QPS（读取）值总是高于TPS写、改，并且有倍率关系，因为：1、数据库对查询可能有缓存。2、机械硬盘或SSD硬盘的读就是比写快。IOPS每秒磁盘进行的I/O操作次数PVQPS计算PV和机器的方式QPS统计方式一般使用http_load进行统计QPS=总请求数/进程总数*请求时间QPS:单个进程每秒请求服务器的成功次数单台服务器每天PV计算公式1：每天总PV=QPS*3600*6公式2：每天总PV=QPS*3600*8服务器计算服务器数量=ceil每天总PV/单台服务器每天总PV【峰值QPS和机器计算公式】原理：每天80%的访问集中在20%的时间里，这20%时间叫做峰值时间公式：总PV数*80%/每天秒数*20%=峰值时间每秒请求数QPS机器：峰值时间每秒QPS/单台机器的QPS=需要的机器问：每天300wPV的在单台机器上，这台机器需要多少QPS？答：3000000*0.8/86400*0.2=139QPS问：如果一台机器的QPS是58，需要几台机器来支持？答：139/58=3测试参考：性能测试vs负载测试vs压力测试developer.51cto.com/art/201106/267717.htm性能测试（PerformanceTest）性能测试主要评价系统或组件的性能是否和具体的性能需求一致，例如：对访问速度的性能需求或对内存使用情况的需求。特定性能测试的关注点在于组件或系统在规定的时间内和特定的条件下响应用户或系统输入的能力。不同的性能的度量方法取决于不同的被测对象。对于一个单独软件组件，其性能可以根据CPU主频来判定。而带客户端的系统，其性能则要根据系统处理特定用户请求的响应时间来判定。对于那些由多种组件（如客户端、服务器、数据库）构成的系统，则要进行各组件之间的性能测试。负载测试（LoadTest）负载测试是一种通过增加负载来评估组件或系统的性能的测试方法。例如：通过增加并发用户数和（或）事务数量来测量组件或系统能够承受的负载。负载测试和性能测试的主要区别在于负载测试时，系统负载是逐渐增加的，而不是一步到位，负载测试需要观察系统在各种不同的负载情况下是否都能够正常工作。压力测试（StressTest）压力测试是评估系统处于或超过预期负载时系统的运行情况。压力测试的关注点在于系统在峰值负载或超出最大载荷情况下的处理能力。在压力级别逐渐增加时，系统性能应该按照预期缓慢下降，但是不应该崩溃。压力测试还可以发现系统崩溃的临界点，从而发现系统中的薄弱环节。例如：系统最大支持的同时在线用户数是1000个，压力测试需要测试在1000个用户甚至2000个用户同时在线时系统的表现。虽然测试时负载已经超过了系统的设计能力，但是在这种情况下被测试系统也不应该发生崩溃。压力测试也可以针对系统资源进行测试，例如：在系统内存耗尽情况下，测试系统的运行情况，这种情况下被测试系统也不应该崩溃。一个完整的压力测试需要关注三个方面：如何正确产生压力、如何定位瓶颈、如何预估系统的承载能力1首先说一下如何产生压力，产生压力的方法有很多，通常可以写脚本产生压力机器人对服务器进行发包和收包操作，也可以使用现有的工具像jmeter、LoadRunner这些），所以说产生压力其实并不难，难点在于产生的压力是不是真实地反映了实际用户的操作场景。举个例子来说，对游戏来说单纯的并发登陆场景在整个线上环境中的占比可能并不大新开服等特殊情况除外，相反“登陆开始战斗结束战斗”、不同用户执行不同动作这种“混合模式”占了更大的比重。所以如何从实际环境中提炼出具体的场景比重，并且把这种比重转化成实际压力是一个重要的关注点。2产生压力之后，通常我们可以拿到TPS、响应时延等性能数据，那么如何定位性能问题呢？TPS、响应时延只能告诉你服务器是否存在问题，但不能帮助你定位问题。这些表面背后是整个后台处理逻辑综合作用的结果，这时候可以先关注系统的CPU、内存、IO、网络，对比在tps、时延达到瓶颈时这些系统数据的情况，确定性能问题是系统哪一部分造成的，然后再回到代码的逻辑中逐个优化这些点。3当服务器的整体性能可以相对稳定下来，这时候就需要对自己服务器的承载能力有一个预估，通过产生真实压力、对比系统数据，大致可以对单套系统的处理能力有个真实的评价，然后结合业务规模配置服务器数量。可以看下腾讯wetest的这个压测工具wetest.qq.com/gaps/总结一下：通过产生真实压力来发现问题、结合系统性能来解决问题", "architecture/WonderWare.md": "历史InTouch>收购SystemPlatform>在SP基础重新构建InTouch，提供丰富的HMI组成结构!_v_images/20191129170347.png!_v_images/20191129170411.pngMESMES制造执行系统manufacturingexecutionsystem，简称MES），包含**生产运营和资产管理**等，在WW中包括四个部分：生产管理Operations,设备绩效Performance,质量管理Quality,EnterpriseIntegration。**制造业信息化的三层模型**<divalign=\"center\">!_v_images/20191129170431.png</div>MES更多内容：MES互动百科www.baike.com/wiki/MES1.生产管理Operations生产流程2.设备绩效Performance设备使用率3.质量管理Quality生产事件自动触发：通过对设备的监控，根据监控的结果发起某一个生产流程SPC分析>报警样本计划4.批次管理Batch配方定义管理5.工作流Workflow事件触发工作流程SOP标准化工作流程整合不同的系统6.移动巡检作业IntelaTrac管理非智能设备现场作业与资产管理对接7.资产管理Avantis自动触发，维护工单8.历史数据库HistorianDB<divalign=\"center\">!_v_images/20191129170506.png</div>9.Data采集广泛的数据连接性设备的数据如何采集上来的？<divalign=\"center\">!_v_images/20191129170526.png</div>10.运营绩效分析Intelligence各种各样的数据集成开发环境11.EnterpriseIntegration预定义映射交换订单、物料、工艺集成ERP、MES支持多种Data交换格式**两化融合**：自动化+信息化InTouchHMI构建与WWSP之上。基于面向对象设计，所以设备都是对象，有对象定义，有对象实例。支持IDE来定义模板（定义对象），实例化对象（设备）。（替代方案：使用脚本？）**SituationalAwareness**：情景感知，扁平、简明、动画元素、高性能。WW新的HMI设计源于这本树《TheHighPerformanceHMIHandBook》的理念。!_v_images/20191129170551.png!_v_images/20191129170602.png!_v_images/20191129170611.png!_v_images/20191129170621.png!_v_images/20191129170627.png案例案例1：蓝鸟市政水业务介绍!_v_images/20191129170641.png组织架构!_v_images/20191129170651.png企业主要智能!_v_images/20191129170658.png系统框架!_v_images/20191129170705.png水务支持系统!_v_images/20191129170712.png案例2：能源管理系统解决方案What？它是什么？自动化+信息化动态监控+数字化管理!_v_images/20191129170721.pngGoal，系统目标!_v_images/20191129170727.pngHow，如何实现1）数据有效捕获2）建立能源管理规程3）PDCA持续改进方法论4）软硬件支持**PDCA方法论**!_v_images/20191129170741.png企业信息化架构!_v_images/20191129170749.png能源管理软件架构!_v_images/20191129170800.png影响能耗成本的因素!_v_images/20191129170806.png系统功能!_v_images/20191129170820.png", "architecture/XSS跨站漏洞.md": "What:XSS（crosssitescript）跨站脚本是由于web应用程序对用户的输入过滤不严而产生的。攻击者利用网站漏洞把恶意的脚本代码注入到网页中，当其他用户浏览这些网页时，就会执行其中的恶意代码，对受害用户可能采用cookie资料窃取，会话劫持，钓鱼欺骗等攻击手段。如：```js//使用xss弹出恶意警告框，代码为：<script>alert\"xss\"</script>//xss输入也可能是html代码段，如果使网页不停的刷新，代码为<metahttpequiv=\"refresh\"content=\"0;\">//嵌入其他网站链接的代码为：<iframesrc=http:/liuwx.cnwidth=0height=0></iframe>```XSS分类反射型XSS：非持久化，只执行一次。如：www.liuwx.cn/xss.php?id=<script>alert1</script>DOM型XSS：存储型XSS：脚本被上传到ServerHow:如何防范？常见的防xss代码：```$x=preg_replace“/script/”,””,$x;$x=preg_replace“/script/i”,””,$x;$x=preg_replace“/alert/i”,””,$x;$x=preg_replace“/script/i”,””,$x;```Java防止XSS使用Filter过滤转换浏览器提交的内容。可以使用Spring的工具类：HtmlUtils.htmlEscape，或者commonslang提供的StringEscapeUtils.escapeHtml。例如：```javapublicclassXSSFilterimplementsFilter{@OverridepublicvoidinitFilterConfigfilterConfigthrowsServletException{}@Overridepublicvoiddestroy{}@OverridepublicvoiddoFilterServletRequestrequest,ServletResponseresponse,FilterChainchainthrowsIOException,ServletException{chain.doFilternewXSSRequestWrapperHttpServletRequestrequest,response;}}publicclassXSSRequestWrapperextendsHttpServletRequestWrapper{publicXSSRequestWrapperHttpServletRequestservletRequest{superservletRequest;}@OverridepublicStringgetParameterValuesStringparameter{Stringvalues=super.getParameterValuesparameter;ifvalues==null{returnnull;}intcount=values.length;StringencodedValues=newStringcount;forinti=0;i<count;i++{encodedValuesi=stripXSSvaluesi;}returnencodedValues;}@OverridepublicStringgetParameterStringparameter{Stringvalue=super.getParameterparameter;returnstripXSSvalue;}@OverridepublicStringgetHeaderStringname{Stringvalue=super.getHeadername;returnstripXSSvalue;}privateStringstripXSSStringvalue{returnHtmlUtils.htmlEscapevalue;}}```参考XSS跨站漏洞详解zhuanlan.zhihu.com/p/26375200java防止XSS攻击的常用方法总结itindex.net/detail/55334javaxss%E6%94%BB%E5%87%BB", "architecture/[SkillsMap]-开源项目.md": "TOC基础开发平台9k+基于SpringBoot2.0的后台权限管理系统界面简洁美观敏捷开发系统架构。gitee.com/JeeHuangBingGui/jeeSpringCloud22k+基于SpringBoot的权限管理系统易读易懂、界面简洁美观。gitee.com/y_project/RuoYi22k+基于Spring+SpringMVC+Mybatis分布式敏捷开发系统架构，提供整套公共微服务服务模块gitee.com/shuzheng/zheng开源项目kkFileView文档在线预览github.com/kekingcn/kkFileView2016年度开源中国新增开源软件排行榜TOP100www.oschina.net/news/80846/2016oscnewopensourcesoftwaretop1002016年度码云热门项目排行榜TOP50www.oschina.net/news/80909/2016oschinagittop50围观!2018开年1k+star及码云GVP项目是如何炼成的www.oschina.net/news/92981/giteejanuarymostpopulargvp?from=20180204SpringBoot扩展开源软件SpringBoot扩展码云Gitee.comgitee.com/explore/springbootexthsweb后台管理基础框架github.com/hsweb/hswebframework电商50Star的mall项目是一套电商系统github.com/macrozheng/mall芋道mall商城，基于微服务的思想，构建在B2C电商场景下的项目实战。github.com/YunaiV/onemall基于Vue+Vant的商城前端前后端同步开源gitee.com/shirnecn/ShirneVueShopOA办公smartweb2是一套相对简单的OA系统；包含了流程设计器，表单设计器，权限管理，简单报表管理等功能gitee.com/bcworld/smartweb2知识库知识库管理系统github.com/yuyufeng1994/KnowledgeLibrary报表1.5k+UReport2是一款高性能的Java报表引擎，提供完善的基于网页的报表设计器，可快速做出各种复杂的中式报表gitee.com/youseries/ureportJxls2+extentionsexcel表达式解析github.com/simter/simterjxlsext表单JXLSjxls.sourceforge.net/getting_started.htmlalibaba/easyexcel:快速、简单避免OOM的java处理Excel工具github.com/alibaba/easyexcelwengwh/plumdowork:工作流，表单，报表结合的多模块系统github.com/wengwh/plumdoworkjbaliuka/x4janalytic:ExcelreportinglibraryforJAVAgithub.com/jbaliuka/x4janalyticasfRevision1784855:/poi/trunk/src/examples/src/org/apache/poi/ss/examples/htmlsvn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/ss/examples/html/BasZhang/FormulaGen:excel公式转java类github.com/BasZhang/FormulaGenexcel模板文件，填充数据，生成新的excel文件git.oschina.net/winsonone/excelsouthwind0922.github.io/formDesign/demo/index.htmlsouthwind0922.github.io/formDesign/demo/index.htmlNoForm一个更好的表单解决方案知乎zhuanlan.zhihu.com/p/44120143GitHubalibaba/nopage:EasytomakeCRUDforeveryonegithub.com/alibaba/nopage表单设计器dev.snhb.group:9988/formmarker//FineReport|beerwww.hexianwei.com/2019/01/06/FineReport10.0/用户界面慧都网www.evget.com/category/20COMP35420144/spreadsheet:SpreadsheetApplicationgithub.com/COMP35420144/spreadsheetlittleorca/ferriswheel:Afantasticspreadsheetframework!github.com/littleorca/ferriswheelkeikai/keikaitutorial:Atutorialofawebspreadsheetcomponent,keikaigithub.com/keikai/keikaitutorialKeikaikeikai.io/asharapov/reports:GeneratesreportsinExcelgithub.com/asharapov/reports史上最全的BIRT报表实例大全birtbird博客园www.cnblogs.com/birtbird/archive/2013/01/10/2855480.htmlExcelReport标签韩兆新博客园www.cnblogs.com/hanzhaoxin/tag/ExcelReport/流程引擎flowablecamundaactiviti功能对比blog.csdn.net/qq_30739519/article/details/86682931fixteam/fixflow:做中国最好的开源业务流程引擎【QQ群:152654373】github.com/fixteam/fixflowagilebpmbasic企业级流程解决方案，前后端分离，模块化，超低耦合。gitee.com/agilebpm/agilebpmbasic咖啡兔activiti流程demogithub.com/raoifeng/kftactivitidemo收费【冀正系列】camunda工作流实战ke.qq.com/course/379585FoxBPM/FoxBPM:FoxBPM开源BPM、流程引擎产品fixflow6.0github.com/FoxBPM/FoxBPMHome&middot;killme2008/aviatorWikigithub.com/killme2008/aviator/wiki基于Groovy的规则脚本引擎实战推酷www.tuicool.com/articles/QJfQbqyFlowable引擎使用统一权限管理SHARE&amp;TOPCSDN博客blog.csdn.net/sharetop/article/details/73920306Guns:Guns基于SpringBoot2，致力于做更简洁的后台管理系统，完美整合springmvc+shiro+mybatisplus+beetl!Guns项目代码简洁，注释丰富，上手容易，同时Guns包含许多基础模块用户管理，角色管理，部门管理，字典管理等10个模块，可以直接作为一个后台管理系统的脚手架!码云Gitee.comgitee.com/stylefeng/guns/tree/master/activitiflowable开源工作流引擎项目整合开发实施实践总结落寞的流月城博客园www.cnblogs.com/aschs/p/9236269.htmldoc.agilebpm.cndoc.agilebpm.cn/工作流activity视频教程+redis视频教程百度网盘分享地址愿我如星君如月...夜夜流光相皎洁...CSDN博客blog.csdn.net/jiangyu1013/article/details/78345683Flowable第二期_腾讯课堂ke.qq.com/course/308748扩展Activiti流程定义文件，实现自定义节点属性hxlzpnyist的个人空间开源中国my.oschina.net/hxlzpnyist/blog/164708Activiti任务节点属性扩展&ndash;分享牛www.shareniu.com/article/54.htm扩展Activiti工作流任务和属性简书www.jianshu.com/p/68c0034f8e56flowablemodler为任务节点增加自定义属性&ndash;分享牛www.shareniu.com/article/196.htmbluejoe2008/openwebflow:基于Activiti的工作流引擎扩展，接管了Activiti对活动权限以及用户表的管理，并提供了催办、代办、加签（包括前加签/后加签）、自由跳转、分裂节点等功能github.com/bluejoe2008/openwebflow分享牛www.shareniu.com/?tdsourcetag=s_pctim_aiomsgJSAAS企业级应用敏捷开发平台&ndash;广州红迅软件有限公司www.redxun.cn/?page_id=981SSO1.7k+springbootSSO单点登录，OAuth2实现，支持App登录，支持分布式github.com/a466350665/smartsso1.6k+XXLSSO分布式单点登录框架轻量级、分布式、跨域、Cookie+Token均支持、Web+APP均支持github.com/xuxueli/xxlsso800+cas单点登录系统（可以作为学习之用）github.com/kawhii/ssoa466350665/smart:Java单点登录权限系统，权限按钮级、修改实时生效、支持分布式github.com/a466350665/smartdynamind/springbootsecurityoauth2minimal:MinimalimplementationofAuthorizationServer,ResourceServerandOAuth2ClientinSpringBootwithSpringSecurityandJWTgithub.com/dynamind/springbootsecurityoauth2minimal供学习yoichiro/oauth2server:ThisprojectisanimplementationofOAuth2.0writteninJava.github.com/yoichiro/oauth2servercoderhuang/ssoshirocas:spring下使用shiro+cas配置单点登录github.com/coderhuang/ssoshirocashellokoding/hellossojwtauth:SingleSignOnSSOExamplewithJSONWebTokenJWT,SpringBootgithub.com/hellokoding/hellossojwtauth基于CAS的单点登录SSO5:基于Springboot实现CAS客户端的前后端分离推酷www.tuicool.com/articles/Yfyy6bq登录对比：cas（单点登录）；oauth2（授权）；单一登录的区别xyz啊哈CSDN博客blog.csdn.net/qaaaaa111/article/details/84912644轻松搭建CAS5.x系列6在CASServer上增加OAuth2.0协议好用的CASCSDN博客blog.csdn.net/weixin_39206782/article/details/81160729CAS5.2x单点登录一&mdash;&mdash;搭建cas服务器java线程池CSDN博客blog.csdn.net/u013825231/article/details/79132399轻松搭建CAS5.x系列文章好用的CASCSDN博客blog.csdn.net/weixin_39206782/article/details/80869410cas5.3.2单点登录CasServer开启Oauth2.0协议二十这个名字想了很久CSDN博客blog.csdn.net/qq_34021712/article/details/82290876sso单点登录系统（解决session共享）Persistentence的博客CSDN博客blog.csdn.net/Persistentence/article/details/77170394Springboot整合Shiro：集成Kaptcha验证码简书www.jianshu.com/p/ad0bc0508abdRedis+Shiro+Springdataredis，共享Session小LUA博客园www.cnblogs.com/LUA123/p/7728319.html讲真，别再使用JWT了！简书www.jianshu.com/p/af8360b83a9f使用JWT的OAuth2的SSO分析沧海一滴博客园www.cnblogs.com/softidea/p/6854227.htmlqq53182347/liughparent:SpringBoot+JWT+Shiro+MybatisPlus实现Restful快速开发后端脚手架github.com/qq53182347/liughparentHeeexy/SpringBootShiroVue:提供一套基于SpringBootShiroVue的权限管理思路.前后端都加以控制,做到按钮/接口级别的权限github.com/Heeexy/SpringBootShiroVueHazelcastSupportinApacheShiroStormpathUserIdentityAPIstormpath.com/blog/hazelcastsupportapacheshiroOAuthscribejava/scribejava:SimpleOAuthlibraryforJavagithub.com/scribejava/scribejavaOAuth2.0之OLTU实现举例简书www.jianshu.com/p/6573a9f066dc第十七章OAuth2集成――《跟我学Shiro》《亿级流量网站架构核心技术》~ITeye博客jinnianshilongnian.iteye.com/blog/2038646OAuth2.0基本原理及应用zhangwenxatu的博客CSDN博客blog.csdn.net/zhangwenxatu/article/details/52506732OAuth2基本概念和运作流程莫林SegmentFault思否segmentfault.com/a/1190000013467122?utm_source=tagnewestApacheOltu实现OAuth2.0服务端【授权码模式AuthorizationCode】花儿笑弯了腰博客园www.cnblogs.com/Irving/p/4134752.htmlmonkeyk/oauth2shiro:IntegrateOAuth2oltuandShirogithub.com/monkeyk/oauth2shiromaking/oauth2ssodemo:SimpleOAuth2SSODemowithSpringBoot+SpringSecurityOAuth2github.com/making/oauth2ssodemodsyer/sparklrboot:DemoOAuth2providerwithSpringBootgithub.com/dsyer/sparklrbootspringcloudsamples/authservergithub.com/springcloudsamples/authserverrajithd/springbootoauth2:SpringBootOauth2withH2databasegithub.com/rajithd/springbootoauth2monkeyk/oauth2shiroat1.0github.com/monkeyk/oauth2shiro/tree/1.0基于Oauth2的api接口开发（一）ifnotmeOSCHINAmy.oschina.net/guoshuyun/blog/743017RFC6749TheOAuth2.0AuthorizationFrameworktools.ietf.org/html/rfc6749section1.3.2权限【权限管理】角色访问控制RBAC模式及其思想heroShane的个人页面my.oschina.net/heroShane/blog/1961457.2.继承型角色树的实现jibu.qiniudn.com/jibudoc/ch07s02.htmlfghierarchyrole产品|权限设计=功能权限+数据权限简书www.jianshu.com/p/0ab125cf8258如何在应用系统中实现数据权限的控制功能伍华聪博客园www.cnblogs.com/wuhuacong/p/3664204.html权限角色和岗位有什么区别？博客频道CSDN.NETblog.csdn.net/superdog007/article/details/19898821【ITOO高校云平台】&mdash;&mdash;浅析权限系统中角色与职位博客频道CSDN.NETblog.csdn.net/u010164936/article/details/47358737基于岗位抽象的角色权限控制模型设计与实现豆丁网www.docin.com/p994504319.html规则引擎QL语言express_wind的专栏博客频道CSDN.NETblog.csdn.net/express_wind/article/category/1081737小明历险记：规则引擎drools教程一zhuanlan.zhihu.com/p/28528925QLExpress/Taocodecode.taobao.org/p/QLExpress/src/indexTaocodecode.taobao.org/p/QLExpress/wiki/index/MQMPush开源实时消息推送系统mpush,push,tcp,netty,消息推送,信息推送,Android推送,AndroidPush,IOSPush,物联网推送,免费,开源,安全,加密,集群mpusher.github.io/rushmore/zbus码云开源中国git.oschina.net/rushmore/zbusProxyadamfisk/LittleProxy:HighperformanceHTTPproxyoriginallywrittenbyyourfriendsatLanternandnowmaintainedbyastellargroupofvolunteeropensourceprogrammers.github.com/adamfisk/LittleProxydddpaul/ratpackproxy:SimpliestHTTPreverseproxyonJava:github.com/dddpaul/ratpackproxyvietj/vertxhttpproxy:AdynamichttpproxyontopofVert.xgithub.com/vietj/vertxhttpproxyGitHubmitre/HTTPProxyServlet:Smiley'sHTTPProxyimplementedasaJavaservletgithub.com/mitre/HTTPProxyServletGitHubahabra/reverseproxy:ReverseProxyserverwhichcanbedeployedasaJavawebappgithub.com/ahabra/reverseproxyGreatGarlic/NettyReverseProxy:不同于Nginx的基于Netty和Spring的反向代理中间件github.com/GreatGarlic/NettyReverseProxyspinn3r/noxy:AHTTPproxybasedonnettyandlittleproxygithub.com/spinn3r/noxyravindraranwala/NettyReverseProxy:NettyReverseProxywhichsendsClientrequeststoaspecifiedBackendservicegithub.com/ravindraranwala/NettyReverseProxy/Web打印GitHubSubLuLu/thermal_printer:Java实现网络小票打印机自定义无驱打印github.com/SubLuLu/thermal_printerGitHubLehmanHe/A4print:一个在线云打印平台（android部分）含订单管理、百度地图、二维码等等github.com/LehmanHe/A4printGitHubnicklv/printvue2iviewadmin:基于vue2，Iview2的web在线打印管理系统github.com/nicklv/printvue2iviewadminLehmanHe/A4print:一个在线云打印平台（android部分）含订单管理、百度地图、二维码等等github.com/LehmanHe/A4print论坛1.3k+更实用的Java开发的社区论坛github.com/tomoya92/pybbsIM即时通讯3.4k+MPush开源实时消息推送系统github.com/mpusher/mpush9.6k+HighPerformanceserverforNATS.io,thecloudandedgenativemessagingsystem.github.com/natsio/natsserver5.9k+Asimpleserverforsendingandreceivingmessagesinrealtimegithub.com/gotify/server6k+野火专注于即时通讯实时音视频技术，提供优质可控的IM+RTC能力github.com/wildfirechat500+基于netty实现的IM服务端,提供客户端jar包,可集成自己的登录系统github.com/yuanrw/IM1.6k+golangimservergithub.com/GoBelieveIO/im_service5.5k+Instantmessagingplatform.BackendinGo.Clients:SwiftiOS,JavaAndroid,JSwebapp,scriptablecommandline;chatbotsgithub.com/tinode/chat5.4k+goimisanimserverwriteningolanggithub.com/TerryMao/goimgolang写的IM服务器服务组件形式github.com/alberliu/gim", "architecture/[SkillsMap]-架构.md": "分析设计用Axure写产品需求文档实例www.axure.com.cn/2966AxureShop原型演示demo.axureshop.com/?url=cloud.axureshop.com/pvpap1&buyurl=www.axureshop.com/a/1176518.html常用的软件需求说明书模板zhuanlan.zhihu.com/p/8503721110.软件需求最佳实践笔记|需求描述zhuanlan.zhihu.com/p/81875474架构实战：架构设计文档模板juejin.cn/post/6844903863619698696【例子】mysql（多级分销）无限极数据库设计方法www.phpbloger.com/article/50.html中台微服务业务系统（BizUI）的中台构建之路mp.weixin.qq.com/s/6dJ9E75q3Tt8rKb86svMgQ什么是中台业务架构？www.zhihu.com/question/308314004阿里架构总监一次讲透中台架构，13页PPT精华详解，建议收藏！developer.aliyun.com/article/717510数据中台总结zhuanlan.zhihu.com/p/88537265认清现状，布局未来丨建设数据中台系列（一）www.infoq.cn/article/f6BU2EUSqDlC3kRLfg87怎么走着走着就变“烟囱”了呢？丨建设数据中台系列（二）www.infoq.cn/article/AAaCQk0igwCgSD5RR859SOA为什么不“香”了？丨建设数据中台系列（三）www.infoq.cn/article/EGflCddghvZImcf1Iphq中台架构详解（上）丨建设数据中台系列（四）www.infoq.cn/article/l2sw9cNcGhpmuYudytmE中台架构详解（下）丨建设数据中台系列（五）www.infoq.cn/article/2zqzgM0aC9FUtHaCKVrv“数据中台”有何不同？丨建设数据中台系列（六）www.infoq.cn/article/8WSJOXkbzGyLP2wMPKHg“数据中台”怎么建？丨建设数据中台系列（七）www.infoq.cn/article/OykcG3IvFgdoitb7Jov81、前后端分离前提需求明确，需求领先开发一个周期有明确的设计，特别是接口设计，接口文档需要管理，可以采用软件，如swagger公共组件MockServer支持持续集成+单元测试（方便debug、回归测试）公共业务接口（如：findById、查询接口可配置），接口遵循REST接口转换层（easyui格式转换）需要解决的问题web层权限控制（Freemarker标签？）接口API权限控制session管理webpage框架（SpringMVCvsRatpackvsNodeJS）图片上传前端校验国际化优点前后端重构更容易；后端引入单元测试后，质量有提升前端更多自主权，页面可做更多个性化的设计要注意的前端人员须到位，后端人员可以减半后端负责业务逻辑，前端负责View+Controller，校验、上传、权限等API遵循Restful风格前后须加强沟通，接口必有文档，可通过MockServer模拟接口开发过程设计接口：前端参与UI设计，决定前后端开发协作模式及职责，前后端一起确定业务接口。开发阶段：前后端并行开发，后端使用JUnit进行单元测试，前端使用MockServer进行测试；开发过程中双方可以协商变动接口。部署：前后端集成测试MockServer根据接口文档自动生成假数据mocogithub.com/dreamhead/mocowiremockwiremock.org/index.html接口管理加入jsonschema规则，实现了对http请求的参数校验。RAPrap.taobao.org/org/index.doswaggerswagger.io/.模板用着一样的模版语言XTemplate，一样的渲染引擎JavaScript在不同的渲染环境（Serverside、PCBrowser、MobileBrowser、WebView、etc.）渲染出一样的结果。参考架构该解决方案，session，登录态什么的仍然是后端管理;前端仍然只管理模板，只不过起了后台来管理模板；对后端来说，除了nginx配置改变几乎没有任何新的东西。!_v_images/20191129175312.png技术储备BigPipe基于Thrift前后端分离Demo一个难点在于web与services的数据交互。好在facebook开源的一个项目Thriftthrift.apache.org/为我们解决了这个问题。Demo中使用了Nodejs的Express搭建web服务，使用Thrift生成Node的client和server的接口文件。**Client**:```javascriptvarclient=thrift.createClientCalculator,connection;router.get'/',functionreq,res,next{client.add10,100.thenfunctionresponse{res.render'index',{title:'Express+Thrift',desc:'：1+1='+response};};};/*jade*/blockcontenth1=titlepWelcometo{title}```**Server**```javascript/*Nodejsserver*/...varserver=thrift.createServerCalculator,{add:functionn1,n2{varresult=n1+n2;returnresult;}};console.log\"localhost:9090\";server.listen9090;```参考：前后端分离想法的一些实践github.com/weivea/FEseparate2、Node.js+后端REST架构node.js不适合做全栈其实，没有哪个语言或框架适合做全栈，即使如Spring也不行（web层不轻量）。node.js有一下缺陷：臭名昭著的异步回调。上8层的异步调用嵌套实在难读和难以维护。javascript的不严谨和灵活性导致了程序在运行过程中很容易出现难以调试的Bug，而Bug的日志会让人摸不着头脑。完全异步化带来的另一个问题就是调试困难。没法直接发挥多核、多CPU的服务器的优势。没有像Java一样的工程化体系、中间件、开源库。要真正以node来支撑开发一个电商平台对JS工程师的要求非常高，我觉得业内这样的人才依然相当难觅，上手容易不等于高级功能也容易。只作为web层：如果你要做的是小型项目，或者逻辑非常简单的项目，可以选择Node.js，因为开发、调试都很很快。如果你要做的是逻辑简单，而并发大的项目，可以选择Node.js，它还是很适合左右游戏的聊天服务器，长连接消息推送服务器之类的项目的。在真正的重要的、大型的项目上请不要盲目，追求一些比如“语言层面的前后端统一”这样的议题，这是没有意义的。paypal只是把web端开发从JSP切换成了node.js，系统平台里的该是什么还是什么。还有类似的例子就是Groupon，他们也用node重构了网页部分内容，沃尔玛亦然。结论：1、如果能用Java做，就用Java做，参考淘宝网。2、如果做大了需要升级用户体验，后端服务器接口化，前端服务器用Node.js替换，参考淘宝网前后端分离实践。3、考虑到电商项目的失败率，项目有很大的可能走不到第二步，请先考虑第一步。4、不是所有公司都像淘宝一样有大量的技术储备力量，去完成前后端分离，创业公司或不大的公司还是选择一种技术栈比较合适。PS:Web服务器端一直都存在两个阵营，以Java/C为代表的工业设计语言和以PHP/RoR为代表的快速开发语言。前者一直牢牢地占据着企业应用开发市场，而后者则普遍认为更适合灵活多变的互联网，Node.JS显然是属于后者的。用Java/JSP来开发网站太过于重量过于繁琐了，不如RoR/PHP等动态脚本语言灵活快速。Node.jsWeb选型**Sinatralike**Expressexpressjs.com/koa.jskoajs.cn/hapihapijs.com/koa.js比Express先进最重要的一点：koa.js在coroute上所做工作，引入yield，不再需要多层的异步调用嵌套。**Railslike**sailssailsjs.org/sails在windows下安装需要python2.7，VC++2010的支持，太麻烦，我没有安装试用。**Node.js渲染模板**ICanHaz.js/mustache/hogan.js/Jade/Haml//Slim/CoffeeKup/Markaby/ejs/eco等使用node做web前端的好处前后端分离是的业务层独立，更容易结合多种前端，如web和app。如果可以用JavaScript来渲染页面，前端工程师就可以有更大的空间。前端想要对页面进行重构优化的时候也不再需要打扰后端工程师，大家都可以更专注于自己的事情。REST后端接口Java做后端优势：熟悉Java的工程师很多，我们很容易找到需要的人。Java平台的性能已经的到多年的验证。Java平台上众多的第三方产品、类库无所不有。基于JVM的动态/函数式语言也给了Java平台良好的扩展性。3、基于dubbo的前后端分离基于dubbo的前后端分离分为两大类，一类是dubbo+阻塞前端WebServer，如dubbo+tomcat，dubbo+ApachePHP；另一类是duboo+异步非阻塞WebService，如：dubbo+nodejs，dubbo+ratpack。涉及到的前端WebServer有基于Java和非Java的，列举流行的几种说明：1.dubbo+nodejsnodejs与dubbo服务通信有两种方式：Hessian,jsonrpc。Hessian协议dubbo原本就支持，而jsonrpc协议需要另外实现，不过万幸Github上已经有人做了。jsonrpcQianmiOpen/dubborpcjsonrpcgithub.com/QianmiOpen/dubborpcjsonrpcQianmiOpen/dubbonodeclientgithub.com/QianmiOpen/dubbonodeclient**另一个nodedubbo客户端：**nodejsonrpcdubbogithub.com/hufeng/nodejsonrpcdubbo使用jsonrpc协议，使node可以调用dubbo的服务```javascriptvarclient=require'./dubboclient';varprovider='com.ofpay.demo.api.UserProvider';//简单的调用一个接口client.getProviderprovider,functionerr,userProvider{err?console.logerr:userProvider.queryAllfunctionerr,data{console.logerr,data;};};//groupversionsupportclient.getProviderprovider,'test1','2.1',functionerr,userProvider{err?console.logerr:userProvider.queryAllfunctionerr,data{console.logerr,data;};};```Hessian基于Dubbo的Hessian协议实现远程调用shiyanjun.cn/archives/349.htmlnodejszookeper客户端通过hessian与dubbo交互github.com/xuyan2680/nodejava2.dubbo+vert.xwebVert.xWebvertx.io/docs/vertxweb/java/3.dubbo+servlet4.dubbo+ratpackRatpackisasetofJavalibrariesthatfacilitatefast,efficient,evolvableandwelltestedHTTPapplications.ItisbuiltonthehighlyperformantandefficientNettyeventdrivennetworkingengine.RatpackfocusesonallowingHTTPapplicationstobeefficient,modular,adaptivetonewrequirementsandtechnologies,andwelltestedovertime.Ratpack可以使用Groovy和Java，运行与JVM上，调用dubbo服务很方便。Ratpack的问题是服务器集群方案、负载均衡等没有现成案例。5.dubbo+python/php可以通过Hessian协议来调用。前后端分离实践有感边城客栈学海无涯51CTO博客blog.51cto.com/jamesfancy/2058830当Java遇到Jade&mdash;票牛PC版前后端分离的实践演道网|演道网www.go2live.cn/dev/%E5%BD%93java%E9%81%87%E5%88%B0jade%E7%A5%A8%E7%89%9Bpc%E7%89%88%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E7%9A%84%E5%AE%9E%E8%B7%B5%E6%BC%94%E9%81%93%E7%BD%91.html", "architecture/《分布式Java应用：基础与实践》.md": "第一章：分布式Java应用网络通信协议TCP/IPUDP/IPMulticastIOBIO同步，阻塞NIO同步，事件驱动，非阻塞ReactorAIO异步，事件驱动Proactor同步与异步有何不同？reactor原理epoll与nionio的事件驱动原理aio与nio区别JAVA的aioproactor原理消息方式的系统间通信基于Java包TCP/IPBIO:Socket、ServerSocketNIO:SocketChannel、ServerSocketChannelUDP/IPBIO:DatagramSocket、DatagramPacketNIO:DatagramChannel、ByteBufferMulticastMulticastSocket、DatagramPackatSRM基于开源框架MinaNetty性能角度连接管理连接池连接复用短连接、长连接远程调用方式的系统间通信基于Java包RMIUnicastRemoteObjectLocateRegistryWebService基于开源框架SpringRMIApacheCXF性能反射序列化、反序列化第二章：大型分布式Java应用与SOA为什么需要SOA系统多元化系统拆分SOA是什么系统之间统一以Service的方式进行交互eBay的SOA平台服务多级调用带来的延时调试/跟踪困难更高的安全/检测的要求现有应用移植QoS的支持高可用和高度可伸缩多版本和依赖管理可实现SOA的方法SCA标准发布服务调用服务支持的通信以及交互方式SCA框架Tuscany发布服务调用服务支持的通信以及交互方式ESB发布服务调用服务支持的通信以及交互方式ESB框架Mule发布服务调用服务支持的通信以及交互方式第4章：分布式与JDK类库集合包ArrayList如何插入、删除？LinkedListVectorStackHashSetTreeSetHashMapTreeMap并发包ConcurrentHashMapCopyOnWriteArrayListCopyOnWriteArraySetArrayBlockingQueueAtomicIntegerThreadPoolExecutorExecutorsFutureTaskSemaphoreCountDownLatchCyclicBarrierReentrantLockReentrantReadWriteLock反序列化序列化反序列化", "architecture/《大型网站技术架构》读书笔记.md": "《大型网站技术架构》读书笔记：当我们架设一个系统的时候通常需要考虑到如何与其他系统交互，所以我们首先需要知道各种系统之间是如何交互的，使用何种技术实现。1.不同系统不同语言之间的交互现在我们常见的不同系统不同语言之间的交互使用WebService，Http请求。WebService，即“Web服务”，简写为WS。从字面上理解，它其实就是“基于Web的服务”。而服务却是双方的，有服务需求方，就有服务提供方。服务提供方对外发布服务，服务需求方调用服务提供方所发布的服务。如果说得再专业一点，WS其实就是建立在HTTP协议上实现异构系统通讯的工具。没错！WS说白了还是基于HTTP协议的，也就是说，数据是通过HTTP进行传输的。最早我们是用CXF开发SOAP服务实现WS，后面我们是用REST服务实现WS这个目前使用比较多，也最我用得最多的这一种。基于CXF也可以开发REST服务，不过我们一般直接使用springMVC或者其他MVC框架实现REST服务。但是在很多人的印象中Webservice的话一般指十来年前IBM主导的基于XML的各种交互技术，现在除了一些公司在用之外用得人也很少了。广义的话Webservice就是Web服务了，一切皆服务。2.不同系统相同语言之间的交互常见的不同系统相同语言之间的交互用RPC远程过程调用，或者RMI远程方法调用实现，不用对外部提供服务，当然上面说的也可以使用在相同语言之间的交互,只是我常用的是RPC。1.1大型网站软件系统的特点与传统企业应用系统相比，大型互联网应用系统有以下特点。高并发，大流量高可用海量数据用户分布广泛，网络情况复杂安全环境恶劣需求快速变更，发布频繁渐进式发展1.2大型网站架构演化发展历程大型网站的技术挑战主要来自于庞大的用户，高并发的访问和海量的数据，任何简单的业务一旦需要处理数以P计的数据和面对数以亿计的用户，问题就会变得很棘手。大型网站架构主要就是解决这类问题1.2.1初始阶段的网站架构!_v_images/20191121205813.png初始阶段的小型系统应用程序、数据库、文件等所有的资源都在一台服务器上通俗称为LAMP特征：应用程序、数据库、文件等所有的资源都在一台服务器上。描述：通常服务器操作系统使用linux，应用程序使用PHP开发，然后部署在Apache上，数据库使用Mysql，汇集各种免费开源软件以及一台廉价服务器就可以开始系统的发展之路了。1.2.2应用服务和数据服务分离!_v_images/20191121205833.png好景不长，发现随着系统访问量的再度增加，webserver机器的压力在高峰期会上升到比较高，这个时候开始考虑增加一台webserver特征：应用程序、数据库、文件分别部署在独立的资源上。描述：数据量增加，单台服务器性能及存储空间不足，需要将应用和数据分离，并发处理能力和数据存储空间得到了很大改善。1.2.3使用缓存改善网站性能!_v_images/20191121210027.png特征：数据库中访问较集中的一小部分数据存储在缓存服务器中，减少数据库的访问次数，降低数据库的访问压力。描述：系统访问特点遵循二八定律，即80%的业务访问集中在20%的数据上。缓存分为本地缓存和远程分布式缓存，本地缓存访问速度更快但缓存数据量有限，同时存在与应用程序争用内存的情况。1.2.4使用应用服务器集群改善网站的并发处理能力!_v_images/20191121210041.png在做完分库分表这些工作后，数据库上的压力已经降到比较低了，又开始过着每天看着访问量暴增的幸福生活了，突然有一天，发现系统的访问又开始有变慢的趋势了，这个时候首先查看数据库，压力一切正常，之后查看webserver，发现apache阻塞了很多的请求，而应用服务器对每个请求也是比较快的，看来是请求数太高导致需要排队等待，响应速度变慢特征：多台服务器通过负载均衡同时向外部提供服务，解决单台服务器处理能力和存储空间上限的问题。描述：使用集群是系统解决高并发、海量数据问题的常用手段。通过向集群中追加资源，提升系统的并发处理能力，使得服务器的负载压力不再成为整个系统的瓶颈。1.2.5数据库读写分离!_v_images/20191121210054.png享受了一段时间的系统访问量高速增长的幸福后，发现系统又开始变慢了，这次又是什么状况呢，经过查找，发现数据库写入、更新的这些操作的部分数据库连接的资源竞争非常激烈，导致了系统变慢特征：多台服务器通过负载均衡同时向外部提供服务，解决单台服务器处理能力和存储空间上限的问题。描述：使用集群是系统解决高并发、海量数据问题的常用手段。通过向集群中追加资源，使得服务器的负载压力不在成为整个系统的瓶颈。1.2.6使用反向代理和CDN加速网站响应!_v_images/20191121210109.png特征：采用CDN和反向代理加快系统的访问速度。描述：为了应付复杂的网络环境和不同地区用户的访问，通过CDN和反向代理加快用户访问的速度，同时减轻后端服务器的负载压力。CDN与反向代理的基本原理都是缓存。1.2.7使用分布式文件系统和分布式数据库系统!_v_images/20191121210120.png随着系统的不断运行，数据量开始大幅度增长，这个时候发现分库后查询仍然会有些慢，于是按照分库的思想开始做分表的工作特征：数据库采用分布式数据库，文件系统采用分布式文件系统。描述：任何强大的单一服务器都满足不了大型系统持续增长的业务需求，数据库读写分离随着业务的发展最终也将无法满足需求，需要使用分布式数据库及分布式文件系统来支撑。分布式数据库是系统数据库拆分的最后方法，只有在单表数据规模非常庞大的时候才使用，更常用的数据库拆分手段是业务分库，将不同的业务数据库部署在不同的物理服务器上。1.2.8使用NoSQL和搜索引擎!_v_images/20191121210138.png特征：系统引入NoSQL数据库及搜索引擎。描述：随着业务越来越复杂，对数据存储和检索的需求也越来越复杂，系统需要采用一些非关系型数据库如NoSQL和分数据库查询技术如搜索引擎。应用服务器通过统一数据访问模块访问各种数据，减轻应用程序管理诸多数据源的麻烦。1.2.9业务拆分!_v_images/20191121210149.png特征：系统上按照业务进行拆分改造，应用服务器按照业务区分进行分别部署。描述：为了应对日益复杂的业务场景，通常使用分而治之的手段将整个系统业务分成不同的产品线，应用之间通过超链接建立关系，也可以通过消息队列进行数据分发，当然更多的还是通过访问同一个数据存储系统来构成一个关联的完整系统。纵向拆分：将一个大应用拆分为多个小应用，如果新业务较为独立，那么就直接将其设计部署为一个独立的Web应用系统纵向拆分相对较为简单，通过梳理业务，将较少相关的业务剥离即可。横向拆分：将复用的业务拆分出来，独立部署为分布式服务，新增业务只需要调用这些分布式服务横向拆分需要识别可复用的业务，设计服务接口，规范服务依赖关系。1.2.10分布式服务!_v_images/20191121210202.png参考知识库大型网站架构知识库", "architecture/关于技术选型.md": "1.选择流行的技术**社区提供各种扩展和插件解决方案**。流行的技术社区必大。一种技术用的人多了，就会碰到各种各样的问题，他们会把自己的解决方案提交到社区，这解决了很多人类似需求，不需要从头投入时间去研究。比如：Bootstrap的各种插件组件很丰富，特别是各种独特显示需求，大多数我们能在社区找到解决方案。再比如，绝大多数的Java技术都会支持Spring，为Spring提供各种扩展解决方案；选择Spring就是选择了一系列的解决方案，而不仅仅是Spring本身。**架构考虑全面**。流行的框架需要应对各种需求，必须全面设计好其架构，以保证其扩展性和稳定性等。比如：Spring架构是基于接口实现的，方便扩展定制其功能；而JFinal是基于类设计的，必须改动其源码才能扩展；为了使Freemaker支持多template的basePath（classpath和webappDir），JFinal需要重写FreemakerRender类，而Spring则不用修改其源码。**流行的框架Bug少**。想当年选择JSF、JBossSeam、jBPM4时，那个Bug可真多，最终只能放弃。**发展延续性**。流行技术的发展和维护延续的时间会更长，不会搞个几年就没人维护了。2.同时选择两个相似的解决方案，那是浪费时间**节约精力**。选择一种技术或框架，是一种时间和精力的投入。如果对解决相同问题、功能相似的多个技术或框架同时学习，那是两法时间；比如：对于Web开发，可以选择Spring和JFinal，而它们的多数据源问题的处理方式是不一样的，我们需要对这两个框架同时研究，这种没有技术含量的东西，真心没必要同时研究两个。**加强深度**。可以选择一种技术或框架，从各种技术需求和业务需求出发，研究其解决方法。比如数据库访问可以选择基于JDBC方案和基于ORM框架（Hibernate），选择其中的一种，深入的研究其分库分表、缓存、读写分离怎么实现的。**积累**。选择一种技术长期投入时间和精力，遇到问题多，积累的知识多；长期使用一种技术，那么对其就更熟练。3.选择自己要用功能，避免纯净洁癖症一种技术和框架往往包括内容挺多，而我们需要使用的功能很少。不要看到多余的内容就觉得碍眼，非要去找一个更纯粹纯净的解决方案，使用我们需要的功能即可。JVM对没有使用的类是不会实例化成对象放入内存中的，就是占点磁盘空间，体积大程序未必耗资源，体积小的程序未必不占资源，比如病毒木马等。", "architecture/图片播放技术总结.md": "1概述由于工作的项目上的需求，需要在浏览器上不间断的播放图片，即像播放视频一样播放图片。后端支持采用Java实现，需要用Java编写一个Http服务器，并提供WebSocket服务。前后端通过Http链接或WebSocket提供图片浏览服务，前端采用JS轮询或WebSocket推送的方式获取图片，浏览器显示图片有两种方式：一种是采用<img>连续切换图片源，实现播放效果；另一种采用将图片画在canvas上面，实现播放。要完成这个功能涉及到以下技术：Http服务器的实现高速的读文件WebSocket原理及实现基于浏览器pull方式的http资源获取基于服务器端push方式的http资源获取JS播放图片帧的性能2技术分析2.1Http服务器的实现实现HTTP服务器比较容易，实现方式也有如下多种：基于jdk中com.sun包下面的HttpServer来实现。（不推荐，com.sun不在java规范内，jdk升级可能会不兼容）基于jetty或tomcat的嵌入式包来实现。此方式基于Servlet规范来实现的，较简单且易于理解。基于netty的方式实现。性能好，需要对NIO有了解，编程难度相对大一些。基于vert.x的实现。这种方式底层还是采用netty实现，较简单，但是也需要熟悉vert.x的编程模型。我们采用jetty的方式实现，基于servlet3.0规范，可以支持异步请求方式。代码如下：<pre>publicstaticvoidmainStringargs{Serverserver=newServer;ServerConnectorconnector=newServerConnectorserver;connector.setPort8080;server.addConnectorconnector;ServletContextHandlercontext=newServletContextHandlerServletContextHandler.SESSIONS;context.setContextPath\"/\";context.addServletnewServletHoldernewHelloServlet,\"/hello\";server.setHandlercontext;try{//Initializejavax.websocketlayerServerContainerwscontainer=WebSocketServerContainerInitializer.configureContextcontext;//AddWebSocketendpointtojavax.websocketlayerwscontainer.addEndpointEventSocket.class;server.start;server.dumpSystem.err;server.join;}catchThrowablet{t.printStackTraceSystem.err;}}</pre>2.2高速的读文件关于Java高速读取文件可参考这篇文章：Howtoreadfilesquicklynadeausoftware.com/articles/2008/02/java_tip_how_read_files_quickly这篇文章得出四个结论：为了减少I/O操作，每次应该读一个byte数组，而不是一个byte字节，8K的byte数组就是一个好的选择。为了减少方法调用的开销，每次应该获取一个byte数组的数据，而不是一个byte字节。为了减少线程同步锁的开销，要么减少线程同步方法的调用，要么采用非线程安全的类，如：FileChannel和MappedByteBuffer。为了减少在JVM/OS、internalbuffers和应用程序数组之间的数据拷贝，要么使用带有内存映射的FileChannel类，要么使用adirectorwrappedarrayByteBuffer.下面提高两种高速读取文件方法：<pre>forStringfilePath:fileList{tryFileChannelch=newRandomAccessFilefilePath,\"r\".getChannel{intsize=intch.size;MappedByteBufferbuf=ch.mapMapMode.READ_ONLY,0,size;//处理buf....}catchIOExceptione{e.printStackTrace;}}</pre><pre>forStringfilePath:fileList{trySeekableByteChannelsbc=Files.newByteChannelPaths.getfilePath,StandardOpenOption.READ{ByteBufferbuf=ByteBuffer.allocate10;//Readthebyteswiththeproperencodingforthisplatform.If//youskipthisstep,youmightseesomethingthatlookslike//ChinesecharacterswhenyouexpectLatinstylecharacters.//Stringencoding=System.getProperty\"file.encoding\";whilesbc.readbuf>0{buf.rewind;//处理buf...//System.out.printCharset.forNameencoding.decodebuf;buf.flip;}}catchIOExceptionx{System.out.println\"caughtexception:\"+x;}}</pre>2.3WebSocket原理及实现WebSocket的原理以及与Http区别可以参考：WebSocket与http的区别，以及它的原理blog.sina.com.cn/s/blog_bf397e780102w25k.html，总体来说，原理及区别如下：WebSocket和Http协议没有太大的关系，WS只是借助Http实现了第一次握手，之后从http协议upgrade为ws://协议。WS是持久性连接（类似socket），而HTTP的短连接、长连接都不是持久的。WS协议是支持全双工的，可以pull，亦可以push。用Java实现WebSocket服务端：<pre>@ClientEndpoint@ServerEndpointvalue=\"/events/\"publicclassEventSocket{privatestaticintDEFAULT_BUFFER_SIZE=128*1024;//8192privatebytebytes;@OnOpenpublicvoidonWebSocketConnectSessionsession,EndpointConfigconfig{session.setMaxBinaryMessageBufferSizeDEFAULT_BUFFER_SIZE;}@OnMessagepublicvoidonWebSocketTextSessionsession,StringmessagethrowsException{System.out.println\"ReceivedTEXTmessage:\"+message;bytes=...//读取图片文件字节//发送图片文件session.getAsyncRemote.sendBinaryByteBuffer.wrapthis.bytes;}@OnClosepublicvoidonWebSocketCloseSessionsession,CloseReasonreason{System.out.println\"SocketClosed:\"+reason;}@OnErrorpublicvoidonWebSocketErrorSessionsession,Throwablecause{cause.printStackTraceSystem.err;}}</pre>2.4浏览器并发请求与长连接浏览器请求一般都是拉取服务器的资源，而请求方式分为短连接和长连接两种，这篇文章介绍很清楚：HTTP的长连接和短连接www.cnblogs.com/cswuyg/p/3653263.html浏览器对后端资源的请求都是并发的执行的，不同的浏览器并发连接数不同。现在大多数浏览器都支持http1.1协议，默认都会开启keepalive，支持长连接。在浏览器对后端的资源发出请求，在开启keepalive情况下，都会复用连接通道。如果是不间断的下载图片，应该使用的是长连接通道复用功能。2.5Web服务器Push技术实现服务器端Push有以下几种方式：Ajax轮询。采用setInterval方法不停的调用Ajax长轮询。俗称Comet方式，不需要重复建立连接，没有响应就一直等，等到才关闭连接。WebSocketserversenteventsAjax轮询原理还是pull的方式，不算真正的push，但是对一些老版本的浏览器是适用的。WebSocket优点是支持全双工、可跨域。serversentserver实现简单，但只支持server到client单向传输，且IE系列都不支持。详细内容参考：web服务器端推送技术简介w3ctech.com/topic/1754除了上面一些方法外，还有一些其他方式，如：FlashXMLSocket，JavaApplet等非主流。而在本案例中，如果采用WebSocket传送图片，可实现真正的服务器端不间断的推送图片数据，但是如果要实现并发传送，必须自己在浏览器端来实现，否则，仅仅单连接的情况下不一定比浏览器的并发连接快。2.6JS播放图片帧的性能JS播放图片有多种方式，如：采用<img>标签，不停改变img的src属性，实现播放。采用Html5的Canvas，将Image对象画在Canvas上，实现播放。将图片设置为Div的背景，不停的更换背景，实现播放。采用<img>标签方式实现如下：<pre>function{vari=0;varpics=\"andy_white.jpg\",\"andy_black.jpg\";varel=document.getElementById'img_to_flip';//eldoesn'tchangefunctiontoggle{el.src=picsi;//settheimagei=i+1%pics.length;//updatethecounter}setIntervaltoggle,2000;};</pre>这种方式下浏览器CPU占用率非常高，在IE11和Chrome下，i3的CPU（T440P）占用都在60%左右，内存占用较少，大约在100M左右。CPU的消耗主要在浏览器对图片的渲染上。用Canvas替代<img>标签，CPU占用方面，IE11仍然占用那么高，Chrome能降一半。更换背景的方式没有实验。基于以上，采用Canvas的方式是一种比较好的选择。", "architecture/基于HMAC的REST安全认证.md": "REST中如何安全地处理用户登录问题？segmentfault.com/q/1010000000610275首先，服务器端的身份验证基本上有两类方式：一是基于Cookie的验证，一是基于Token的验证。选择哪一种要看你的实际情况。基于Cookie的验证历史悠久了，原理和做法无需赘言；近几年涌现了大量的公共API服务，它们基本上都使用了基于Token的验证，这主要是因为：1.处理跨域资源分享（CORS）――虽然Cookie＋CORS也不是完全不可能，但是比较难搞2.无状态性――有利于服务端扩展（伸缩性强）3.C/S解藕――服务器端和客户端可以完全分离，进而静态资源可以用CDN来处理，服务器端完全变成APIService4.CSRFFree――不依赖Cookie，完全不担心跨域伪造请求攻击（这点尚有疑虑，有待考证）……呃，忽然觉得有点跑题了，我的意思是你首先得选择一个验证方式，很明显基于Token的认证是趋势。接下来，假定选择了基于Token认证这条路，你首先得搞明白Token是怎么玩的。简单地说：**客户端先发送正确的认证信息（比如电子邮件＋密码），服务器端检查OK之后生成一个token返回给客户端，之后客户端所有的请求都要包含这个token，服务器端只需要验证该token是否有效即可**。这里有一张图，对比了Cookie－basedAuthtication和Token－basedAuthentication，挺不错的：!_v_images/20191129171255.png好，按照REST的设计原则，我们需要一个Endpoint供用户来请求认证并获取Token，比如像这样：*POST/authentication*在这里，“资源”就是认证（按照REST的要求，用名词来表示资源），使用POST方法去请求，附带数据为认证用的信息，返回结果看你的业务逻辑，但至少要有一个token。客户端拿到token之后，先把它存起来（比如存到SessionStorage里），设置请求时的HEADER里Authorization的值为Bearer<token>，完事了。综上所述，这事和REST的关系也就是设计一个获取Token的Endpoint而已，没啥了不起的，剩下的事情都属于业务逻辑，该怎么写就看你的需求了。怎样创建安全的RestWebServiceAPI请求dengyin2000.iteye.com/blog/548859**APIKey+SecretKey签名**比上一种跟复杂的一种方式就是用一个secretkey去签名每一刻APIURL请求，AmazonWebServices就是使用这种方式。当用户注册完后，你会给用户2个keys：APIKey（比如：username）和secretkey（比如password），APIkey会附在每个请求url上面，但是secretkey不会。secretkey是用来签名每个请求的。通常会加上另外一个参数比如（Signature）。Amazon会把所有的请求信息作为请求的参数，然后按照参数名排序，再按照secretkey进行hash。这个hash的值会作为一个新的参数（Signature）附加到请求的url上。在server端做相同的事情，获得所有的参数（除了Signature），排序，用sercetkeyhash，如果这个值跟传过来的Signature参数的值相等的话，则认为这个请求是合法的。融云Server开发指南www.rongcloud.cn/docs/server.html完全可以照这个文档来开发。注意以下几点：1.访问所有的API都需要签名Signature2.Signature由用户Key+SecretKey+随机数+时间数进行hash计算而来。3.Secretkey分别保存在客户端和服务端，随机数、时间数、Signature通过header传到server，结合SecretKey进行hash，然后进行校验。4.用户登录成功后，获得访问Token。Token作为客户端访问的凭证，可以设置一定的过期时间。5.授权信息可以通过Token作为key，缓存在shiro的缓存中。这篇文章的几张图很能说明原理，需要保存下来。hmacauthgithub.com/gjhuai/hmacauth第二十章无状态Web应用集成――《跟我学Shiro》jinnianshilongnian.iteye.com/blog/2041909", "architecture/基于数据同步的云服务架构实践.md": "www.infoq.com/cn/presentations/cloudservicesarchitecturepracticebsedondatasynchronizationTOC野狗的数据同步理念Wilddog是什么？一个云端树形数据库一个App的所有的数据存到一个大JSON中事件驱动客户端Schemafree数据存储树形数据库像一颗Json树面向聚合数据之间的关系更直观完美的与Url结合每条数据都能通过url来唯一定位Path为key，keyvalue基于野狗的应用架构是这样的!_v_images/20191129173720.png数据副本的同步!_v_images/20191129173729.png数据同步的基本模型初始化慢同步fullsyncconditionsync增量同步本地besteffortpushoplog基于长连接保证有序性重连需要初始化慢同步!_v_images/20191129173811.png数据同步的架构演进架构特点写多读少写同步越实时越好读容忍一定延迟最终一致性并行写冲突实时操作幂等v0.1架构框图面向早期用户物化路径存储!_v_images/20191129173828.pngv0.2架构框图动态建库，app数据隔离Mongo提升读写性能副本集多活机枪换导弹（批量Batch数据操作）!_v_images/20191129173839.pngv0.3架构框图appIdtopic大大提升写性能（写缓冲队列kafka）类似Nagle减低写压力读性能下降!_v_images/20191129173848.png解决读的不一致问题幂等的覆盖模式操作!_v_images/20191129173858.pngv0.3.1架构框图keysxxx*引发的血案需要PerformanceMonitoring!_v_images/20191129173907.pngPerformanceMonitoring流量统计调用延迟异常报警!_v_images/20191129173916.png数据同步的细节问题问题一并发写静态一致性写隔离解决方案中心化锁机制进程间协商机制!_v_images/20191129173927.png分布式树形锁注意问题tryLock/release需要2次交互注册Lock的有效期等待Lock超时动态hash连接异常时退化!_v_images/20191129173936.png性能问题吞吐量下降每个app一个树形锁，单进程，终究有吞吐上限任何操作，包括没有冲突操作，都需要先获得锁主要性能的点单次pushsync量大，可以导致阻塞异步pushsync令人恶心的架构诞生了缩减了write操作的过程保证云端与客户端一致性太过复杂，不确定因素累加过多!_v_images/20191129174007.png", "architecture/大型网站架构技术一览.md": "大型网站架构技术一览大型网站的挑战主要来自庞大的用户，高并发的访问和海量数据，任何简单的业务一旦需要处理数以P计的数据和面对数以亿计的用户，问题就会变得棘手。大型网站架构主要就是解决这类问题。更多内容也可以阅读各大互联网公司架构演进之路汇总、大型网站架构演化历程两篇文章。本文内容大部分来自《大型网站技术架构》,这本书很值得一看，强烈推荐。网站系统架构层次如下图所示：!_v_images/20191129175744.png1.前端架构前端指用户请求到达网站应用服务器之前经历的环节，通常不包含网站业务逻辑，不处理动态内容。浏览器优化技术并不是优化浏览器，而是通过优化响应页面，加快浏览器页面的加载和显示，常用的有页面缓存、合并HTTP减少请求次数、使用页面压缩等。CDN内容分发网络，部署在网络运营商机房，通过将静态页面内容分发到离用户最近最近的CDN服务器，使用户可以通过最短路径获取内容。动静分离，静态资源独立部署静态资源，如JS、CSS等文件部署在专门的服务器集群上，和Web应用动态内容服务分离，并使用专门的（二级）域名。图片服务图片不是指网站Logo、按钮图标等，这些文件属于上面提到的静态资源，应该和JS、CSS部署在一起。这里的图片指用户上传的图片，如产品图片、用户头像等，图片服务同样适用独立部署的图片服务器集群，并使用独立（二级）域名。反向代理部署在网站机房，在应用服务器、静态资源服务器、图片服务器之前，提供页面缓存服务。DNS域名服务，将域名解析成IP地址，利用DNS可以实现DNS负载均衡，配置CDN也需要修改DNS，使域名解析后指向CDN服务器。2.应用层架构应用层是处理网站主要业务逻辑的地方。开发框架网站业务是多变的，网站的大部分软件工程师都是在加班加点开发网站业务，一个好的开发框架至关重要。一个号的开发框架应该能够分离关注面，使美工、开发工程师可以各司其事，易于协作。同时还应该内置一些安全策略，防护Web用攻击。页面渲染将分别开发维护的动态内容和静态页面模板集成起来，组合成最终显示给用户的完整页面。负载均衡将多台应用服务器组成一个集群，通过负载均衡技术将用户请求分发到不同的服务器上，以应对大量用户同时访问时产生的高并发负载压力。Session管理为了实现高可用的应用服务器集群，应用服务器通常设计为无状态，不保存用户请求上下文信息，但是网站业务通常需要保持用户会话信息，需要专门的机制管理Session，使集群内甚至跨集群的应用服务器可以共享Session。动态页面静态化对于访问量特别大而更新又不很频繁的动态页面，可以将其静态化，即生成一个静态页面，利用静态页面的优化手段加速用户访问，如反向代理、CDN、浏览器缓存等。业务拆分将复杂而庞大的业务拆分开来，形成多个规模较小的产品，独立开发、部署、维护，除了降低系统耦合度，也便于数据库业务分库。按业务对关系数据库进行拆分，技术难度相对较小，而效果又相对较好。虚拟化服务器将一台物理服务器虚拟化成多态虚拟服务器，对于并发访问较低的业务，更容易用较少的资源构架高可用的应用服务器集群。3.服务层架构提供基础服务，供应用层调用，完成网站业务。分布式消息利用消息队列机制，实现业务和业务、业务和服务之间的异步消息发送及低耦合的业务关系。分布式服务提供高性能、低耦合、易复用、易管理的分布式服务，在网站实现面向服务架构（SOA）。分布式缓存通过可伸缩的服务器集群提供大规模热点数据的缓存服务，是网站性能优化的重要手段。分布式配置系统运行需要配置许多参数，如果这些参数需要修改，比如分布式缓存集群加入新的缓存服务器，需要修改应用程序客户端的缓存服务器列表配置，并重启应用程序服务器。分布式配置在系统运行期提供配置动态推送服务，将配置修改实时推送到应用系统，无需重启服务器。4.存储层架构提供数据、文件的持久化存储访问与管理服务。分布式文件网站在线业务需要存储的文件大部分都是图片、网页、视频等比较小的文件，但是这些文件的数量非常庞大，而且通常都在持续增加，需要伸缩性设计比较好的分布式文件系统。关系数据库大部分万丈的主要业务是基于关系数据库开发的，但是关系数据库对集群伸缩性的支持表较差。通过在应用程序的数据访问层增加数据库访问的路由功能，根据业务配置将数据库访问路由到不同的物理数据库上，可实现关系数据库的分布式访问。NoSQL数据库目前各种NoSQL数据库层出不穷，在内存管理、数据模型、集群分布式管理等方面各有优势，不过从社区活动性角度看，HBase无疑是目前最好的。数据同步在支持全球范围内数据共享的分布式数据库技术成熟之前，拥有多个数据中心的网站必须在多个数据中心之间进行数据同步，以保证每个数据中心都拥有完整的数据。在实践中，为了减轻数据库压力，将数据库的事物日志（或者NoSQL的写操作Log）同步到其他数据中心，根据Log进行数据重演，实现数据同步。5.后台架构网站应用中，除了要处理用户的实时访问请求外，还有一些后台非实时数据分析要处理。搜索引擎即使是网站内部的搜索引擎，也需要进行数据增量更新及全量更新、构建索引等。这些操作通过后台系统定时执行。数据仓库根据离线数据，提供数据分析与数据挖掘服务。推荐系统社交网站及购物网站通过挖掘人与人之间的关系，人和商品之间的关系，发展潜在的人际关系和购物兴趣，为用户提供个性化推荐服务。6.数据采集与监控监控网站访问情况与系统运行情况，为网站运营决策和运维管理提供支持保障。浏览器数据采集通过在网站页面中嵌入JS脚本采集用户浏览器环境与操作记录，分析用户行为。服务器业务数据采集服务器业务数据包括两种，一种是采集在服务器端记录的用户请求操作日志；一种是采集应用程序运行期业务数据，比如待处理消息数目等。服务器性能数据采集采集服务器性能数据，如系统负载、内存使用率、网卡流量等。系统监控将前述采集的数据以图表的方式展示，以便运营和运维人员监控网站运行状况，做到这一步仅仅是系统监视。更先进的做法是根据采集的数据进行自动化运维，自动处理系统异常状况，是吸纳自动化控制。系统报警如果采集来的数据超过预设的正常情况的阀值，比如系统负载过高，就通过邮件、短信、语音电话等方式发出警报信号，等待工程师干预。7.安全架构保护网站免遭攻击及敏感信息泄露。Web攻击以HTTP请求的方式发起的攻击，危害最大的就是XSS和SQL注入攻击。但是只要措施得当，这两种攻击都是比较容易防范的。数据保护敏感信息加密传输与存储，保护网站和用户资产。8.数据中心机房架构大型网站需要的服务器规模数以十万计，机房物理架构也需要关注。机房架构对于一个拥有十万台服务器的大型网站，每台服务器耗电（包括服务器本身耗电及空调耗电）每年大约需要人民币2000元，那么网站每年机房电费就需要两亿人民币。数据中心能耗问题日趋严重，Google、Facebook选择数据中心地理位置的时候趋向选择散热良好，供电充裕的地方。机柜架构包括机柜大小，网线布局、指示灯规格、不间断电源、电压规格（是48V直流电还是220V民用交流电）等一系列问题。服务器架构大型网站由于服务器采购规模庞大，大都采用定制服务器的方式代替购买服务器整机。根据网站应用需求，定制硬盘、内存、甚至CPU，同时去除不必要的外设接口（显示器输出接口，鼠标、键盘输入接口），并使空间结构利于散热。", "architecture/插件容器文档.md": "1.插件容器原理1.1插件容器提供的功能容器主要提供统一的权限管理（认证、授权、鉴权）和插件管理功能。权限管理采用Shiro、redis在应用层来实现，抛弃了tomcat等web服务器提供的session管理功能。结构如下图：!_v_images/20191129170204.png统一认证认证功能是由容器提供，插件不提供认证功能。用户在容器中认证后，容器将已认证的jSessionId传送给插件，插件通过jSessionId从redis中获取用户的认证信息，即完成统一的认证过程。用户可以通过Shiro的提供的API来获取用户的认证信息，可以参考SecurityUtils.getSubject的用法。统一授权统一授权是指统一管理插件的资源，统一授予给用户。插件注册时，将自身的资源注册到容器中，容器统一管理所有插件的资源；管理员可以通过容器提供的权限管理功能，将这些资源分配给用户。统一鉴权判断用户是否具有资源的访问权限，即鉴权。统一鉴权是指在容器和插件中，采用统一的权限校验方式来判断用户是否可以访问某资源，插件无需为鉴权开发任何功能。用户通过认证后，将获取所拥有的插件资源访问权限，并将此权限信息缓存入redis数据库，而插件通过jSessionId从redis中获取用户的权限信息，完成权限校验。页面的鉴权是通过tag完成的，目前提供freemaker和jsp两套标签。鉴权标签是通过资源url来判断的，所以插件必须保证自身提供的资源url在所有插件资源中是唯一的。插件管理与监控插件管理提供插件注册、启用/停用、修改、删除等功能，而插件监控主要是监控插件的运行状况，当插件异常停止时，发出告警信息。1.2统一认证和授权的过程用户访问业务系统的认证及鉴权过程如下：!_v_images/20191129170238.png插件获取认证授权信息过程如下：!_v_images/20191129170246.png2.插件开发文档2.1插件注册插件注册到应用插件容器有两种方式：插件启动时注册容器容器提供的插件注册接口：url：xxx.xxx.xxx.xxx:port/{contextPath}/uaa/reg,参数：插件自解释JSON，参见下面的插件自解释接口返回值：{status:,message:}，status为0表示调用成功，1表示失败；message为返回信息插件启动后，在容器段手动添加插件提供自解释接口（接口返回内容参见下面插件自解释接口），在插件容器输入该自解释地址，手动添加插件**插件自解释接口**标准如下：```javascript{\"id\":\"pluginId\",\"name\":\"插件Demo\",\"uaaUrl\":\"192.168.0.209:8080/uaa/ck\",\"menuJson\":\"{'id':'pluginId','name':'插件2','pid':null,'description':null,'pageurl':null,'type':1,'state':'是','sort':null,'icon':null},{'id':'pluginId_list','name':'列表','pid':'pluginId','description':null,'pageurl':'/system/plugin/list','type':1,'state':'是','sort':null,'icon':null},{'id':'pluginId_update','name':'修改','pid':'pluginId','description':null,'pageurl':'/system/plugin/update','type':0,'state':'是','sort':null,'icon':null},{'id':'pluginId_delete','name':'删除','pid':'pluginId','description':null,'pageurl':'/system/plugin/delete','type':0,'state':'是','sort':null,'icon':null}\"}```插件自解释接口中的menuJson字段的值是一个JSON字符串，用来传递插件资源，是资源的列表。除menuJson之外的信息是插件自身的信息。2.2插件接收授权的URL地址插件必须实现一个接收认证授权信息的URL，该URL接收成功认证后的jSessionId。在用户登录时，这个URL链接将被客户端浏览器访问，插件将该jSessionId存入浏览器的Cookie中，这个cookie作为用户通过认证的唯一标识。浏览器拥有这个Cookie后，表明插件的权限管理被容器接管，插件资源已被容器授权控制。PS:这个URL需要填入到插件自解释接口的uaaUrl中。这个地址实现的功能是将jSessionId写入浏览器Cookie，此jSessionId是采用DES对称加密过的，实现参考：idbpuaashiro工程中UaaConsumer类writeCookie方法，如下：```javaStringCryptodes=newStringCrypto;jid=des.decryptjid;//针对IE，必须加P3P到header中，否则无法写入cookieresponse.addHeader\"P3P\",\"CP=\\\"CURaADMaDEVaPSAoPSDoOURBUSUNIPURINTDEMSTAPRECOMNAVOTCNOIDSPCOR\\\"\";Cookiecookie=newCookie\"SHAREJSESSIONID\",jid;cookie.setMaxAge1;//浏览器关闭此Cookie时效cookie.setPath\"/\";response.addCookiecookie;//加入Cookies```2.3ShiroRedis缓存配置ShiroRedis缓存配置有两种方式：基于Spring配置、基于INI配置。Spring配置参考：idbpplugin1的applicationContextshiroprod.xml文件INI配置参考：idbpplugin2jfinal的shiro.ini文件", "architecture/日志审计系统.md": "tocblog.csdn.net/cheng_fangang/article/details/42418017blog.csdn.net/qq_38265137/article/details/106790419www.youxia.org/2015/01/13547.html日志审计系统简介什么是日志审计？综合日志审计平台，通过集中采集信息系统中的系统安全事件、用户访问记录、系统运行日志、系统运行状态等各类信息，经过规范化、过滤、归并和告警分析等处理后，以统一格式的日志形式进行集中存储和管理，结合丰富的日志统计汇总及关联分析功能，实现对信息系统日志的全面审计。通过日志审计系统，企业管理员随时了解整个IT系统的运行情况，及时发现系统异常事件；另一方面，通过事后分析和丰富的报表系统，管理员可以方便高效地对信息系统进行有针对性的安全审计。遇到特殊安全事件和系统故障，日志审计系统可以帮助管理员进行故障快速定位，并提供客观依据进行追查和恢复。为什么需要日志审计平台？1.日志审计的合规要求，由于网络安全法的颁布实施，由原先的不合规转变成了不合法。如果不对要求的相关日志不做留存6个月以上，一旦追查，将面临法律责任。2.安全运营的挑战。随着网络设备的增多，以及服务器数量的增多，如果没有统一的综合日志审计平台，那么需要登录到每台设备上查看日志，不利于运维人员管理。而且众多设备会产生海量的日志，无法有效管理。多种设备形成信息孤岛，日志无法关联分析。通过统一的日志审计平台，将所有设备日志都收集到日志平台进行统一管理，统一分析。日志审计的核心目标：多源数据归一化日志存储集中化关联分析自动化安全态势立体化需求背景但是随着信息安全系统的部署和发展，该银行的信息安全工作面临如下的需求：需要建设全面的日志采集需求：需要将接入网络、网站范围内的安全日志及主机系统日志，统一采取日志，集中管理分析。日志规范化需求：由于全网设备种类繁多，各设备日志信息存储格式、字段含义、通信协议差异较大。需要对采集到的各种设备日志进行归一化处理，提取审计记录完整信息，为后续审计分析提供依据。基于策略的日志过滤、归并：面对海量原始日志，需要按照相关策略进行过滤和归并，减轻日志数据传输压力和存储压力。关联分析及审计需求：对于来自各个资源的日志信息，提供多维的关联分析功能。面向系统用户，将一个用户在多个设备上的操作进行横向关联分析，形成以用户为主题的操作行为审计；面向特定安全事件，对于发生在多个设备上的事件痕迹进行关联分析，形成一个完整的事件相关操作过程的审计；从设备角度，形成本设备全部访问情况的安全审计报告。日志存储需求：原始日志信息是来自网络的第一手数据，需要长期存储，并确保它们的完整性、保密性，不得随意访问、修改和删除。同时，由于日志量较大，应提供压缩存储机制。通过实施告警标准化系统，可以达到对告警分级分类展现，提高工作效率的目的。因此，该银行用户希望通过建设一个日志审计平台，实现对各类安全日志进行集中管理并解决以上安全工作难题。日志审计的主要功能统一日志采集：对不同日志源主机系统、网络设备、安全设备、应用中间件、数据库等所产生的日志进行收集，实现日志的集中管理和存储。支持解析任意格式、任意来源的日志，通过解析规则标准化。使用无代理的方式收集日志。支持代理方式的日志收集。关联分析：预置多种事件关联规则。定位外部威胁、黑客攻击、内部违规操作，设备异常。简单灵活定义关联规则。实时告警：通过邮件、短信、声音对发生的告警进行及时通知，并可通过接口调用自动运行程序或脚本。通过告警策略定义，对各类风险和事件进行及时告警或预警，提升运维效率。日志取证分析：深入分析原始日志事件，快速定位问题的根本原因。生成取证报表，例如攻击威胁报表、Windows/Linux系统审计报表以及合规性审计报表等。监管合规：提供Windows审计、Linux审计、PCI、SOX、ISO27001等合规性报表。支持创建自定义合规性报表功能结构!图：日志审计系统产品功能结构_v_images/20200731161608676_3747.png日志的转发方式：日志转发一般可以通过：Syslog转发，Kafka转发，http转发。日志收集一般支持：Syslog、SNMP等日志协议。日志审计系统常见模块：日志事件获取模块：安全事件监控系统是实时掌握全网的安全威胁状况的重要手段之一。通过事件监控模块监控各个网络设备、主机系统等日志信息，以及安全产品的安全事件报警信息等，及时发现正在和已经发生的安全事件，通过响应模块采取措施，保证网络和业务系统的安全、可靠运行。资产管理模块：资产管理实现对网络安全管理平台所管辖的设备和系统对象的管理。它将其所辖IP设备资产信息按其重要程度分类登记入库，并为其他安全管理模块提供信息接口。规则库模块：规则库已支持主流网络设备、主机系统、数据库系统等，而且还应涵盖已经部署的安全系统，包括防火墙系统、防病毒系统等。并提供新日志格式适配功能，支持从安全运营中心平台接收新日志解析映射规则配置。用户可以根据该适配功能，对新日志格式进行自行适配。统计报表功能：具备强大的统计功能，可快速生成多种专业化的报表并支持自定义图表的设定集展示。权限管理模块：超级管理员可根据用户角色分配平台查看、操作各模块的权限，用户可以访问而且只能访问自己被授权的资源", "architecture/权限管理模型.md": "1概述各行各业中企业的管理方式千差万别、且纷繁复杂，权限管理设计往往迷失在这种复杂的关系中。而由于企业所在行业和管理方式差别，导致不可能拥有一个统一的模型能满足所有企业的权限管理需求。处理企业特殊的复杂的行政管理关系、建立理想权限模型方式是以RBAC模型为基础，在其上面作一些扩展来实现。这种方式的难点是理清行政管理关系不容易，理不清则建立权限模型也会不合理。2基于RBAC权限模型这篇文章对RBAC权限模型描述的比较清楚：RBAC权限管理模型：基本模型及角色模型解析及举例www.woshipm.com/pd/440765.html。RBAC权限管理模型有四种，分别是RBAC0，RBAC1，RBAC2，RBAC3。它们的区别是RBAC1有继承关系，RBAC2对用户、角色和权限三者之间增加了一些限制，RBAC3=RBAC1+RBAC2。最常用的是RBAC0，其次是RBAC1。现实业务中除了有特殊的要求，否则最好前两种基础上进行扩展，例如：增加Group支持。2.1RBAC+Group!_v_images/20191129180141.png3RBAC与组织机构的结合RBAC是一个理想的模型，而企业的组织机构和管理方式各不相同，必须把RBAC模型和企业组织模型抽象融合在一起，才能适应企业业务需求。这篇文章对非矩阵型结构的企业的权限模型做了详细描述：统一权限管理与组织机构的结合（缩水版）blog.sina.com.cn/s/blog_6df370b70100u8zj.html>岗位的层次表明了不仅在某个组织下的岗位有层次，实际所有岗位组成一颗完整的岗位树，都是树状层次结构中的节点。这是由于每个岗位都有直接上级，也就是他汇报工作的对象。>给部门分配权限和给岗位分配权限是有区别的。由于用户必须隶属于岗位，而岗位隶属于部门，部门的权限用户是不能继承的，部门的权限用来影响岗位权限。部门内的岗位权限不可超出部门权限，并且部门权限可分为通用权限（部门内岗位可自动继承）和特定权限（必须分配到具体岗位）。这样也可以实现分级的权限管理，由总管理员给部门分配权限，然后各部门管理员给本部门岗位分配权限。类似的我们也可以给职务分配权限，职务的权限将自动被关联此职务的岗位获得。>在基于角色的权限模型中，我们给角色分配权限，给用户分配角色，而在组织模型中，我们也需要给组织和岗位分配权限，给用户分配岗位，对比可发现两个模型结合的关键就在岗位和角色的关系上。处理岗位和角色的关系有合并和映射两种方法。>由于大部分的角色就是基于实际的岗位或者职务生成的，因此可以将岗位和角色合而为一，用组织模型的岗位同时表示权限模型的角色概念，直接给岗位、组织、职务分配权限。!_v_images/20191129180202.png3.1Role映射到岗位还是职务？**问题：**如下图所示的组织结构，在流程引擎中配置一个同时适用于研发1、2部请假审批流程，流程需要研发部门经理审批，如果该审批人设置成某一个部门经理的Role（表示岗位），那么流程只能用于其中这个部门。而另一个部门必须再配置一个同样的流程。流程一样而不能复用，这是不合理的。!_v_images/20191129180213.png**解决办法**方法一、将参与者设置成职务，列出该职务对应的岗位负责人，让用户选择审批人。方法二、将参与者设置成职务，通过计算请假人所在部门，通过部门在程序中自动确定审批人。所以，是否可以采用如下设计（不一定合理）：一种更灵活方式是，将Role映射到职务，在控制资源、菜单分配权限时，完全满足需求。当涉及到数据权限时（如：研发1部只能看1部的数据），可以将职务结合人员、数据的所属部门来控制权限。3.2简单数据权限如何融入其中？**问题**：用户如何只查看本部门的数据？用户如何查看跨部门的数据？**方案**：所谓简单数据权限管理是满足各个部门人员只能操作本部门的数据，只有在授权的情况下才能操作其他部门的数据。资源权限的控制方式是给资源加上标识，将此标识分配给Role，然后将Role分配给User，实现权限控制。（resource>roleuser）简单的数据权限控制亦可以借鉴这种方式，为每一条数据加上标识（部门Id），将此标识分配给Role，从而实现数据资源控制；同时，由于此标识是部门Id，直接可以通过User的部门Id来判断是否有操作数据的权限。**待解决的问题**：除了数据权限外，如何控制有效期限、可用额度、适用品种等等。4需求分析4.1RBAC要解决的问题如何对一个部门的人员**批量授权**？如何管理多个系统的角色、如何授权、如何鉴权？如何解决同一Role的用户，具有相同的功能权限，但是他们的数据操作权限不同的问题？“经理”可以查看、审批“普通员工”的工作报告，而“普通员工”只能查看、编辑自己的工作报告。如何控制？人员部门调动、职称发生变化，其权限如何自动变化？如何分级授权？如何适应信息系统和用户数量增加、信息系统功能升级、公司组织变动及岗位调整、业务权限审核人员变动等情况？如何信息留痕：所有权限申请审批、设置、变更记录需要留痕，要做到可检查、可追踪？用户申请权限如何审批？如何实现角色权限配置、用户角色配置分离管理？可参考附件《基于RBAC的用户权限管理的设计与实现》4.2GM权限管理要解决的问题角色是按组织、职务方式来管理，还是按照系统来管理？系统间的角色有共用的吗？org+role=岗位？岗位能确定到人，Role是职务，不能确定到人。为用户分配角色的权限、业务功能权限是否需要分离？开发人员以plugin方式开发、以system方式发布。5多系统的统一权限管理多系统统一权限管理需要解决的问题：建立统一的组织机构、人员、用户的管理提供统一的多系统、多终端的单点登录入口提供统一的授权管理，即各系统不提供授权管理，有统一授权平台来授权提供统一的权限校验方式支持分级授权可参考附件：《医院信息系统分级授权管理机制的研究和设计》根据自己项目的经验，有两点建议吧：1、实时跨系统校验不是一个好的方案，最好在各业务子系统做授权信息的缓存，由统一权限中心往各业务系统推送权限信息，子系统通过统一权限中心服务提供的jar包来管理缓存以及进行访问认证。这样权限系统服务响应慢或者不可用，或者升级等不会影响下游子系统的稳定运行。6待解决的问题Saas架构的权限管理如何设计？针对金融等对安全要求很高行业的权限模型如何设计？参考RBAC权限管理模型：基本模型及角色模型解析及举例www.woshipm.com/pd/440765.html统一权限管理与组织机构的结合（缩水版）blog.sina.com.cn/s/blog_6df370b70100u8zj.html多站点整合―单点登录简单方案blog.csdn.net/u011529563/article/details/12648345", "architecture/流程引擎选型.md": "国产原创snakerflowgithub.com/snakerflow/snakerflowstar451,fork329Snaker是一个基于Java的轻量级工作流引擎，适用于企业应用中常见的业务流程。本着轻量、简单、灵巧理念设计，定位于简单集成，多环境支持。轻量:snakercore.jar大小208K，代码行数约7000行，强大的扩展支持，不依赖于具体的ORM框架简单:表设计简单，流程组件简单start/end/task/custom/subprocess/decision/fork/join灵巧:暴露大量可扩展接口，支持流程设计器、流程引擎的组件模型自定义fixflowgithub.com/fixteam/fixflowstar442,fork262Fixflow是一款开源的基于BPMN2.0标准的工作流引擎,引擎底层直接支持BPMN2.0国际标准,吸纳了jBPM3、Activiti5、BonitaBPM等国际开源流程引擎的精髓,同时提供了强大的中国式流程流转处理,引擎采用微内核+插件形式设计,提供灵活的扩展模式,建模采用基于BPMN2.0标准的Eclipse设计器和基于Web的流程设计器,不仅仅为审批流程提供了解决方案,同时还为复杂业务流程编排提供了强大的支持。FixFLow本身并不具备完整的开发平台功能,它的定位是专门用于集成到现有系统的引擎。UFLOgitee.com/youseries/uflostar244,fork99UFLO2是一款纯Java流程引擎，它架构于Spring、Hibernate之上，提供诸如并行、动态并行、串行、会签等各种常见及不常见的业务流程流转功能，支持单机或集群部署；UFLO2采用全新的基于网页的流程模版设计器，打开网页即可完成流程模版的设计与制作。不是特别完善，不是标准BMPN，功能不全。JFlowgitee.com/opencc/JFlow驰骋工作流引擎研发与2003年，具有.net与java两个版本，这两个版本代码结构，数据库结构，设计思想，功能组成，操作手册，完全相同。导入导出的流程模版，表单模版两个版本完全通用。功能比较全，代码不清晰，难以嵌入到已有项目中。基于Activiti定制openwebflowgithub.com/bluejoe2008/openwebflowstar460基于Activiti的工作流引擎扩展，接管了Activiti对活动权限以及用户表的管理，并提供了催办、代办、加签（包括前加签/后加签）、自由跳转、分裂节点等功能jundworkflowgithub.com/zhijund/jundworkflowstar43基于Activiti5定制化中国式工作流系统，定制化的流程设计器，添加自定义属性。", "architecture/渐进式图片流式传输.md": "渐进式图片流式传输一、渐进式图片JPG图片支持两种编码方式：基线式（Baseline）和渐进式（Progressive）。渐进式在编码的时候，要多次扫描图片，计算开销大约是基线式的3到5倍。但是比起Google的WebP图片格式编码810倍开销还是小得很多。基线式与渐进式两者编码出来的文件大小基本相同基线式的编码方式是图片从上到下，从左到右地进行处理和编码。渐进式编码方式是先全局后局部，先轮廓再细节的编码方法。渐进式图片编码特性，可以被用来有选择性地控制传输的数据量，提高传输的成功率。除了JPEG支持渐进式编码格式，其它比如WebP、HEVC在设计上也都支持渐进式的。二、流式传输数据像流水一样在网络中传输，通信双方在数据传输进行的过程中就即时处理，而不是等全部数据接收完毕再处理。VS整体的文件传输，图片分片传输。三、图片最小传输长度对渐进式图片传输的数据有一个最低长度要求，保证收到的图片基本可用，称这个长度为图片最小传输长度（MinimalTransportSize）。发送方只要发送图片的最小传输长度，即可向用户展示发送成功，然后转到后台尽量把完整数据发送完毕。参考：微信图片优化之秘：C2C渐进式图片流式传输系统mp.weixin.qq.com/s?src=3&timestamp=1490954714&ver=1&signature=cOaIC8LeZ7x1h8*nR35Gib7vU*ibCzA8SSURam4gu0VgpoLXO6O3Y7TtzuBJp0A7tf5ZlUYC*gwf*zFeVstHRf2mNPRAdQHK*Ptg4DPadFzxSFd6*EoxKwqR9aGgL8ck9rh3Waocq3vnewF3srZmYFZ1dsUFNI11TE6uBzc0=", "architecture/缓存技术.md": "toc1.ORM缓存1.1.基本理念减少DB磁盘IO尽量设计细颗粒度的表尽量避免多表关联查询1.2.技巧利用表关联实现透明的对象缓存按照column拆表实现细粒度对象缓存写一致性缓存片段缓存和过期处理对象写入缓存1.3.其他缓存技巧用数据库来实现的缓存HTTP客户端缓存用缓存实现计数器功能2.缓存架构分类2.1.单机缓存OSCache可缓存任何对象可缓存部分jsp页面或HTTP请求Ehcache源于Hibernate进程中的缓存优缺点性能最高，代价最小适合数据量不大、并发要求不高无法扩展、缓存的数据量受限集群环境无法共享2.2.简单分布式缓存单实例的memcachedOSCache和Enhence的分布式缓存用JGroups广播，同步缓存数据2.3.使用复制方式的缓存集群必要条件缓存的数据量不大，没有超过单机的限制需要极高的读取缓存的性能缓存中的数据变更的频率不是特别大方式使用虚拟IP的方式将多个缓存实例作为一个集群2.4.使用散列方式的缓存集群必要条件需要缓存的数据量特别巨大需要极高的读取缓存的性能允许单点故障2.5.高性能高、可靠的缓存集群3.REST缓存3.1.实现方式通用缓存：Memcache，Redis反向代理非常适合作为URL的缓存服务器Varnish/Squid3.2.HTTP请求缓存方式缓存控制HTTP头中“Cachecontrol”字段来控制也可以通过“Expires”字段来设定过期时间条件请求与电子标签LastModifiedETagIfModifiedSince/IfNoneMatch4.Redis/NoSQL缓存4.1.内存模式Memcached缓存的总数据大小受限于内存的大小Redis强大的内存存储功能Redis功能、性能超越MemcachedTokyoTyrant4.2.持久化模式热点数据存入内存，非热点数据存储到磁盘NoSQL缓存的过期策略最好不使用时间过期，而是数据是否被更新过5.其他5.1.分类一级缓存单独的服务器，多机共享二级缓存对单WebServer进行数据共享5.2.MyBatis缓存一级缓存（localcache），即本地缓存，作用域默认为session二级缓存（secondlevelcache），作用域默认为MapperNamespace5.3.缓存侵入性", "architecture/表单及其技术研究.md": "TOCExcel转Htmlblog.csdn.net/qq_22206899/article/details/80874635首先实现office系列文件在线预览主要查到有如下解决方案:1.flash的flexpaper将文档转换为swf格式，然后使用flash在网页中浏览2.使用开源的软件openoffice+pdf2htmlEx，利用openoffice的接口先将文档转换为pdf格式，然后在使用pdf2htmlEx将文档转换为html直接在网页中显示，3.利用OpenOffice+JodConverter将word2003转换成html或者pdf文件4.自己搭建一个文档预览服务器，基于officewebapp,也就是微软的officeonline，开源的内容管理系统KodExplorer就是这么干的。5.Javapoi将html转化6.docx4j7.用第三方收费组件：PageOffice8.虚拟打印机Excel相关框架Aspose.Cells官网地址：products.aspose.com/cells，例子：github.com/asposecells/Aspose.CellsforJava这是个收费的excel处理库，看过官方文档，功能相当强大，基本可以包括了Excel的常见的功能。如果基于它写一个UI，完全可以替换excel。它还提供了一个gridweb.jar包，可以实现基于web的excel。JETTjett.sourceforge.net/index.htmlJETTJavaExcelTemplateTranslatorisaJava5.0APIthatallowsspeedycreationofExcelspreadsheetreportsusingExcelspreadsheettemplates.JETTallowsthedevelopertofollowtheMVCpatterneasily.JETTistheController,thedevelopercreatestheModel,andeitherthedeveloperoranotherpartycontrolstheExcelspreadsheettemplate,whichactsastheView.TosummarizeJETT,thedevelopersuppliesanExcelspreadsheettemplate,whichprovidesthestructure,layout,andstylingoftheresultantspreadsheet.Then,thedevelopercreatesbeansthatcontaintheactualdatatobepopulatedinthespreadsheet.Finally,thedeveloperusesanExcelTransformer,theJETTAPIentrypoint,totransformthetemplatespreadsheetintotheresultantspreadsheet,completewiththedesireddata,whichcanthenbepublished.x4janalyticgithub.com/jbaliuka/x4janalyticx4janalyticisanopensourceXLSXformattemplateengineAPIforJavaprogramminglanguage.X4JisusedastheembeddedlibraryinJavaapplicationstoimplementfullblownreportingsolutions.JXLSjxls.sourceforge.net/JxlsisasmallJavalibrarytomakegenerationofExcelreportseasy.JxlsusesaspecialmarkupinExceltemplatestodefineoutputformattinganddatalayout.报表应用将报表制作开发成一个独立的应用，用户（程序员）只需填入SQL、调整页面布局即可生成报表。使用简单，零开发成本，缺点是数据源接入受限于配置，与现有程序集成困难；报表布局设置较死板，制作灵活报表困难。适合简单的报表制作。EasyReportgithub.com/xianrendzw/EasyReportAsimpleandeasytouseWebReportSystemforjavaEasyReport是一个简单易用的Web报表工具,它的主要功能是把SQL语句查询出的行列结构转换成HTML表格Table，并支持表格的跨行RowSpan与跨列ColSpan。同时它还支持报表Excel导出、图表显示及固定表头与左边列的功能。专业的报表集成开发工具此类工具功能强大，但都需要一定的学习成本。BIRTwww.eclipse.org/birt/BusinessIntelligenceandReportingToolsBIRTAnopensourcetechnologyplatformusedtocreatedatavisualizationsandreportsthatcanbeembeddedintorichclientandwebapplications.帆软报表（收费）", "architecture/表达式及规则引擎.md": "TOCExpressionLanguageExpressionLanguage/ExpressionEngine/RuleEnginegithub.com/oldratlee/javamoderntechpractice/issues/11Java各种规则引擎www.jianshu.com/p/41ea7a43093cTop17ExpressionEvaluatorawesomeopensource.com/projects/expressionevaluatorSpringExpressionLanguageSpEL一种强大的表达式语言，支持在运行时查询和操作对象图。该语言语法类似于UnifiedEL，但提供了一些附加功能，最值得注意的是方法调用和基本字符串模板功能。SpringExpressionLanguageSpEL官方文档docs.spring.io/spring/docs/current/springframeworkreference/core.htmlexpressions说说Spring表达式语言（SpEL）中的各种表达式类型www.jianshu.com/p/5537b2c86acdAviator一个轻量级的、高性能的java表达式计算器。Aviator将表达式编译为字节码，并对其进行动态求值。github.com/killme2008/aviator/wikigithub.com/killme2008/aviatorQLExpressapowerful,lightweight,dynamiclanguagefortheJavaplatformaimedatimprovingdevelopers’productivityindifferentbusinessscenes.github.com/alibaba/QLExpressMVELMVFLEXExpressionLanguageMVELhaslargelybeeninspiredbyJavasyntax,buthassomefundamentaldifferencesaimedatmakingitmoreefficientasanexpressionlanguage,suchasoperatorsthatdirectlysupportcollection,arrayandstringmatching,aswellasregularexpressions.MVELisusedtoevaluateexpressionswrittenusingJavasyntax.mvel.documentnode.com/github.com/mvel/mvelJEXLJavaExpressionLanguagealibraryintendedtofacilitatetheimplementationofdynamicandscriptingfeaturesinapplicationsandframeworks.commons.apache.org/proper/commonsjexl/github.com/apache/commonsjexl3/5=0,默认不自动转为浮点型JUELJavaUnifiedExpressionLanguageanimplementationoftheUnifiedExpressionLanguageEL,specifiedaspartoftheJSP2.1standardJSR245,whichhasbeenintroducedinJEE5.Additionally,JUEL2.2implementstheJSP2.2maintenancereleasespecificationforfullJEE6compliance.juel.sf.net/github.com/beckchr/juelEvalExEvalExisahandyexpressionevaluatorforJava,thatallowstoevaluatesimplemathematicalandbooleanexpressions.github.com/uklimaschewski/EvalEx其它Groovy/JS/kotlinGroovy作为表达式语言，解析的性能太差。不过一旦编译生成Script对象（缓存），性能还是不错。JS作为表达式语言，解析的性能太差，且不支持在表达式中嵌入自定义Function。kotlin作为脚本语言还不成熟，问题多多。RuleEngineDroolsDroolsExpertistheruleengineandDroolsFusiondoescomplexeventprocessingCEP.www.drools.org/github.com/kiegroup/droolseasyrulesprovidestheRuleabstractiontocreateruleswithconditionsandactions,andtheRulesEngineAPIthatrunsthroughasetofrulestoevaluateconditionsandexecuteactions.github.com/jeasy/easyrules/wikigithub.com/jeasy/easyrules", "architecture/访问日志设计.md": "访问日志的用途记录用户的访问痕迹统计用户常访问的页面统计系统的高峰访问时段统计系统最常被用到的功能（可以针对这些功能做优化）实现方案基于RMDB实现每一条点击日志都记入RMDB，价值不大；日志写入频繁，RMDB写入性能不高，容易拖累业务系统；计算点击总次数，影响业务系统性能；点击次数统计准确，实时性好。基于NoSQL（redis）实现NoSQL支持的数据结构简单，做复杂的统计困难。比如：针对某人做点击统计；写入性能较好，不拖累业务系统。采用logback等记录点击日志，用异步程序分析日志文件，将分析结果写入RMDB在Linux下日志文件写入性能很高；若分析要求不高，可以用shell或简单程序实现；可以对接ELK（Elasticsearch,Logstash,Kibana），实现专业的日志分析。其它专业日志系统比如scribe,具备处理海量并发，海量数据的能力，但运维成本高。参考电影url点击次数统计功能设计greenmoon.iteye.com/blog/1633411", "architecture\\分析设计/【架构】需求分析.md": "需求三个层次：业务需求、用户需求、软件需求，对应：业务架构、业务流程、工作细节基于SERU的面向对象需求分析：1、确定业务边界确定业务范围《前景》文档：项目背景调查、业务前景分析、业务和技术的可行性2、大卸八块（识别业务的主题域Subject）系统切分为子系统、分层划分采用组件图、包图来表示，形成系统的Highlevel的设计确定子系统间的接口（即信息交换）3、块中找流（找出主题域中的业务事件Event，即流程，和报表Report）每一个主题域相当于一个子系统按照Role确定主题域中主要的业务流程，即Event，采用活动图来描述这些业务流程活动图中节点即是关键用例找出需要输出的报表4、流中找点（对业务事件流程进行分析，找出其中的主要业务活动点，DFD）找出业务流程上的主要业务活动点，即关键用例，输出关键用例图此点是业务用例用鲁棒图（分析类图）、DFD、时序图等来分析关键用例用于确定系统的概要设计5、点的分解（精化关键业务用例，找实体）精化用例：对关键用例进行分析，分解成系统用例，输出系统用例图找实体（找出主题域、业务事件中业务实体，以及实体之间的关系）在精化用例过程中，找出系统的领域模型（ER），为数据建模作准备6、用例分析（可以采用事件流、时序图等）即用例场景分析采用事件流（文字+时序图）、用例规约来描述用例场景7、非功能需求的识别约束性需求质量需求BA的产出物：软件需求规格说明书界面原型DemoER实体关系图", "architecture\\分析设计/钱安川-敏捷需求分析和管理-用户故事方法.md": "TOC1.需求从哪里来？需求的获取产品研发－市场部门谁是产品的用户产品的目标是什么产品的竞争对手分析投资回报分析产品用户角色建模和交互设计产品界面原型6868项目开发－客户谁是项目的用户项目的业务目标项目的投资回报分析客户当前的过程客户未来的过程6868需求文档驱动的过程不堪重负敏捷需求分析和管理过程!_v_images/20191129174335.png敏捷需求管理贯串项目始终：初始阶段C识别需求，仅供估算项目规模使用，“快速启动”；发布计划阶段C高风险的需求进行可行性分析6868迭代计划阶段需求细化6868迭代实施阶段反复验证需求并确认需求被实现6868每个迭代纳入新需求，重新审视需求列表及优先级，调整计划6868项目启动阶段目标和交付物项目愿景和动机62快速产出可以开始开发的需求列表粒度粗的MasterStory62确立可视化项目原型62了解技术风险62估算项目成本62制定发布和迭代计划（发布计划是动态的）62轻量的，可视的文档项目启动阶段交付物业务流程图架构原型（技术架构、平台）界面原型（PPT等）功能分解图（故事墙）!_v_images/20191129174346.png2.需求如何表述？用户故事卡片!_v_images/20191129174356.png用户故事的3C原则Card用户故事卡片本身代表了需求的存在Conversation用户故事所代表的一段对话和交流Confirmation用户故事的确定性用户故事XYZ表述X:用户角色作为。。。Y:目标系统提供的行为或功能我希望。。。Z:实现的业务价值或目标以便于。。。角色流程RoleProcess方法!_v_images/20191129174404.png1.作为用户，我希望能够通过书名和作者名查找书籍，以便我能快速的购买我想要的书2.作为用户，我希望能够把我感兴趣的书籍加入购物车，以便我能够批量购买3.作为用户，我希望能够查看我目前购物车内的书，以便我做出购买决定INVEST原则Independent可以独立开发Negotiable可以协商Valuable有价值Estimable大小可评估Sizedappropriately合适粒度Testable可测试验证3.需求的分解!_v_images/20191129174412.pngUserStory的逐步细化!_v_images/20191129174421.png非功能性需求Accessibility可用性Archiving归档Auditability可审计性Authentication安全认证Authorization授权Localization本地化6868验收条件AcceptanceCriteria如何验收用户故事？如何确定Story已经被开发完成？如何进行估算？验收条件具体属性功能性验收条件HappyPath/SadPath方法非功能性验收条件4.需求如何管理？用户故事生命周期!_v_images/20191129174433.png迭代过程中，分析师怎么做？!_v_images/20191129174441.png可视化需求管理来自于精益生产的看板管理KanbanManagementsystem目的是为了增强管理的透明性，鼓励每个人都去发现问题和解决问题，而不是等待别人来做!_v_images/20191129174448.pngMingle中的StoryWall!_v_images/20191129174457.png5.敏捷需求分析师必读《UserStoriesApplied:ForAgileSoftwareDevelopment》byMikeCohn《金字塔原理：思考、表达和解决问题的逻辑》（麦肯锡40年经典培训教材）", "architecture\\分析设计/需求调研的内容和工作指引.md": "当你去做一个项目的软件需求时，一般需要考虑的内容包括：1系统的主要内容和界限是什么，查阅相关软件和资料书籍，了解客户的业务和专业知识（前往用户现场前准备）1.1制定总体计划和需求调研计划1.2将行程和计划通知客户，协调安排2与用户会面，提交本次调研活动的计划，达到的目标，时间安排，请用户配合（解释每个步骤的目的和用户参与的人员），并根据用户安排，适当调整计划3最好召开项目启动会议，相关业务部门和领导参与，确定双方项目组成员，确定客户方的配合人（唯一联系人）、领导（唯一协调人），介绍项目组的人员安排、总计划、需求调研计划4用户单位的组织机构是什么，哪些部门和人员岗位参与本系统的使用5使用人员对系统的目标是怎样理解的，包括一般操作人员、中层领导、决策者6画出系统需要完成的业务流程图，并认真检查和核对每条路径中是否完备，异常情况怎样处理（系统的动态特性）7依据流程图收集每个步骤需要的使用和操作的数据，确定数据的类型和范围（系统的静态特性）8画出业务实体及其关系，并估计业务实体的产生频率和数据量9评估业务流程和实体中需求变化的可能性10收集用户需要产生的单据和报表，与27步产生的结果进行检查，纠正错误、避免遗漏11收集用户对系统界面风格、版式、颜色的偏好和需求12对系统将来使用的硬件、操作系统、网络情况进行了解12.1收集系统初始化数据，或者要求客户进行收集和整理，明确期限时间13编制简单界面原型（该步骤也可放在需求分析之后完成，再次和用户进行沟通）14将业务需求与用户进行确认（采用会议讲解的方式），用户领导签字!_v_images/20191120203442.png", "architecture\\架构师大型项目实战/001-集群基础概念.md": "TOC001集群基础概念网络请求!_v_images/20200604160036617_29204.png问题：什么是Prefork请求？Apache工作的三种模式：Prefork、Worker、Eventblog.mimvp.com/article/27778.html网络请求，内核进程空间，用户进程空间，网卡，磁盘IO？Linux内核空间与用户空间www.cnblogs.com/sparkdev/p/8410350.htmlLinux网络IO和磁盘IO详解www.cnblogs.com/sunsky303/p/8962628.htmlDNS负载均衡!_v_images/20200604155954082_1565.pnglinux运维学习笔记：集群系列之01：linux集群基础概念www.jianshu.com/p/a9b2d5b32a3a如何分配调度多台主机?>DNS负载均衡技术的实现原理是在DNS服务器中为同一个主机名配置多个IP地址，在应答DNS查询时，DNS服务器对每个查询将以DNS文件中主机记录的IP地址按顺序返回不同的解析结果，将客户端的访问引导到不同的机器上去，使得不同的客户端访问不同的服务器，从而达到负载均衡的目的。>大多数域名注册商都支持对统一主机添加多条A记录，这就是DNS轮询，DNS服务器将解析请求按照A记录的顺序，随机分配到不同的IP上，这样就完成了简单的负载均衡。什么是域名的A记录？域名的A记录、mx记录、ns记录怎么查看wenku.baidu.com/view/671df0c55fbfc77da269b1f0.htmlDNS负载均衡有什么缺点？1.每台主机都必须有独立外网IP2.由于使用了DNS缓存，新的DNS记录生效需要几个小时。一旦发生宕机，不能及时生效。3.本地DNS服务器会缓存已解析的域名到IP地址的映射，这会导致使用该DNS服务器的用户在一段时间内访问的是同一台Web服务器，导致Web服务器间的负载不均匀。负载均衡手段之DNS轮询www.cnblogs.com/data2value/p/6107380.html如何解决DNS负载均衡的缺点（服务器性能差异，负载不均匀，DNS缓存）？>RoundRobin:轮调：同一个客户端请求，并发的资源可能来自多台服务器。WRR:weightRoundRobin加权轮调：解决服务器的硬件、性能有所差异。考虑公平以及效率，权重weight。能者多劳。LB集群!_v_images/20200604161328677_28397.pngLinux负载均衡LVS原理技术详细讲解blog.csdn.net/chen_fly2011/article/details/54912326LVS负载均衡（LVS简介、三种工作模式、十种调度算法）blog.csdn.net/weixin_40470303/article/details/80541639MySQL数据过载怎么办？附件：从多台主机上传附件，怎么存储？NFSnfs文件共享服务器应用实战（一）blog.csdn.net/Lu_tixia/article/details/99571376nfs文件共享服务器应用实战（二）自动挂载技术blog.csdn.net/Lu_tixia/article/details/99628052nfs文件共享服务器企业实战（三）nfs高可用blog.csdn.net/Lu_tixia/article/details/99675199NFS共享存储实战www.cnblogs.com/gongjingyun123/p/11323968.html静态文件如何同步更新？rsync+inotifyinotify+rsync实现实时同步cloud.tencent.com/developer/article/1008061ftp的被动与主动模式是什么？FTP的主动模式和被动模式工作原理及抓包分析blog.csdn.net/jingzi123456789/article/details/83409572调度器过载怎么办？功能切分，比如：新浪子域名调度器宕机怎么办？Master,Slave。备用调度器如何知道主调度器宕机？心跳>standy:具备和primary配置一样，IP地址进行切换，自己服务启动。primary和standby时刻通信，发送heartbeat（心跳数）,一旦宕机，立即启动，进行切换。调度器如何知道主机是否宕机？健康检查>负载均衡可以定期向后端服务器发送Ping、尝试连接或发送请求来探测后端服务器运行的状况，这些探测称为健康检查。负载均衡通过健康检查来判断后端服务的可用性，避免后端服务异常影响前端业务，从而提高业务整体可用性。负载均衡原理与实践详解第六篇健康检查机制详解（上）blog.csdn.net/yiyuwu7069/article/details/78217985LBvsHA：处理能力vs可用性!_v_images/20200604165107019_13072.pngLB集群与HA集群的区别？>负载均衡集群着重在于提供服务并发处理能力的集群，高可用集群以提升服务在线的能力的集群。高性能集群着重用于处理一个海量任务。>LB集群具有高可用的能力，但不是高可用集群。HA集群的主机之间要进行通信，发送heartbeat，以及宕机后，快速切换服务。而LB集群的高可用能力是通过上面的调度服务器调度来实现。LBLoadBalancing集群、HAHighAvailability集群、HPHighPerformance集群blog.csdn.net/shuaishenkkk/article/details/22744979HA99%是99.9%的几倍？10倍>可用性=正常在线时间/正常在线时间+故障处理时间HA集群!_v_images/20200604164420210_17720.png在HA集群中要考虑哪些资源？>web服务器：primary：IP，webapp,页面standby：IP,webapp,页面在高可用集群中，如何充分利用standby主机资源？>web主机与mail主机互为standby。某一时刻某个资源只能被某个节点所占用。主机宕机，采用哪个standby？>定义优先级，由协调员DC来决定选择谁。主机如何通知standby自己还活着？>及时发送heartbeat，多播/组播，不能采用广播。存储!_v_images/20200604165927268_23242.pngNFS与硬盘读写文件的区别？>硬盘是块级别读取，NFS是文件级别读写。对于NFS与硬盘，两个程序同时写一个文件区别？>硬盘：无锁，错乱。NFS：有锁linux高可用集群HA原理详解www.cnblogs.com/insaneMrLi/p/10841166.htmlLB/HA高可用系列文章www.cnblogs.com/kevingrace/category/899066.html脑裂!_v_images/20200604171648321_1417.pngHA高可用集群中\"脑裂\"问题解决www.cnblogs.com/kevingrace/p/7205846.htmlDASSCSI、RAIDUltraSCSI320MbpsSAS6GbpsDASvs1000mbps/8>NAS的传输远比不上DASRAID与NFS>NFS对前端服务器而言，就是文件共享服务器。数据请求是在文件级别上完成的。RAID,是磁盘阵列，是通过主板上的总线连接到RAID上，相当于本地存储设备，数据是在块级别上交换的。当standby发现主机宕机，如何无错抢占DAS设备？DAS如何解决splitbrain脑裂问题？>由于没有及时传递heartbear信息，切换到备用的调度服务器，而主调度服务器还在写数据到DAS中，而standby也同时写同一个文件。左右就不协调了，称为splitbrain:脑裂。>解决办法：（1）电源交换机（切断主机的电源），爆头STONITHShootTheOtherNodeInTheHead（2）fencing（隔离）：拒绝某一节点访问某一资源的机制，使服务器和存储设备断开。隔离级别：1.节点级别：STONTIN。2.资源级别。当standby误以为主机宕机，抢占DAS，主机如何再抢回来？!_v_images/20200604172019789_32378.png>注意：为了防止脑裂,集群分裂，高可用集群至少有3个节点，奇数个节点，仲裁机制，少数服从多数。>补充：脑裂：本来一个大脑的两半球互相配合，变成了分裂成两个独立的大脑，都认为对方已死。在集群环境中，有这么几种可能造成\"SplitBrain\"现象：1、在集群环境中的节点间的心跳线同时断掉后，集群系统所处于的一种特殊状态。例如节点1和2组成一个集群，突然1和2间的心跳同时都断了，如果此前节点1正在运行应用，心跳都断掉后2开始去接管应用，强行加载数据，此时就是splitbrain。2、集群中节点因为处理器忙或者其他原因暂时停止响应时，其他节点可能误认为该节点“已死”。后果：节点间争夺共享磁盘（即资源）的访问权，都对共享文件系统产生读写操作，从而导致共享磁盘文件系统损坏。解决办法：使用硬盘心跳，scsireservation，以及最极端的powerfence。HP:高性能集群（HBC）!_v_images/20200604173501479_19275.png并行计算集群两个基础是什么？分布式文件系统将大大任务切割为是小任务，分别进行处理的机制。并行计算集群原理？>化整为零>合并整合。MapReduce>每台计算机只处理所有数据的一部分，且每台计算机上只存储一部分数据。每个节点既是计算节点，也是存储节点。!_v_images/20200604173728015_5214.png并行计算集群的主机兼具存储和计算，调度计算。", "architecture\\架构师大型项目实战/目录.md": "架构师大型项目实战第七套：Mysql主从复制+高可用集群+Linux+Nginx+Java+Memcached+Lvs+Redis实战PB级大型分布式大数据高并发架构实战案例网站性能调优001集群基础概念.md第七套/001集群基础概念.md", "distributed/02-分布式事务.md": "springcloud微服务微服务架构的分布式事务解决方案www.roncoo.com/article/detail/124243分布式事务的典型处理方式:2PC、TCC、异步确保和最大努力型kaimingwan.com/post/fenbushi/fenbushishiwudedianxingchulifangshi2pctccyibuquebaohezuidanulixingACIDzh.wikipedia.org/wiki/ACIDAtomicity（原子性）：一个事务（transaction）中的所有操作，或者全部完成，或者全部不完成，不会结束在中间某个环节。即，事务不可分割、不可约简。Consistency（一致性）：在事务开始之前和事务结束以后，数据库的完整性没有被破坏。这表示写入的资料必须完全符合所有的预设约束、触发器、级联回滚等。Isolation（隔离性）：数据库允许多个并发事务同时对其数据进行读写和修改的能力，隔离性可以防止多个事务并发执行时由于交叉执行而导致数据的不一致。事务隔离分为不同级别，包括未提交读（Readuncommitted）、提交读（readcommitted）、可重复读（repeatableread）和串行化（Serializable）。Durability（持久性）：事务处理结束后，对数据的修改就是永久的，即便系统故障也不会丢失。RDBMS事务隔离级别并发问题几个场景脏读：一个事务读取了另一个事务操作但未提交的数据。比如A、B两个事务，都操作同一张表，A刚刚对数据进行了操作（插入、修改等）但还没有提交，这时B读取到了A刚刚操作的数据，因为A有可能回滚，所以这部分数据有可能只是临时的、无效的，即脏数据。不可重复读：一个事务中的多个相同的查询返回了不同数据。比如A、B两个事务，A中先后有两次查询相同数据的操作，第一次查询完之后，B对相关数据进行了修改，造成A事务第二次查询出的数据与第一次不一致。幻读：事务并发执行时，其中一个事务对另一个事务中操作的结果集的影响。比如A、B两个事务，事务A操作表中符合条件的若干行。事务B插入符合A操作条件的数据行，然后再提交。后来发现事务A并没有如愿对“所有”符合条件的数据行做了修改。四个事务隔离级别Readuncommitted读未提交：如果设置了该隔离级别，则当前事务可以读取到其他事务已经修改但还没有提交的数据。这种隔离级别是最低的，会导致上面所说的脏读Readcommitted读已提交：如果设置了该隔离级别，当前事务只可以读取到其他事务已经提交后的数据，这种隔离级别可以防止脏读，但是会导致不可重复读和幻读。这种隔离级别最效率较高，并且不可重复读和幻读在一般情况下是可以接受的，所以这种隔离级别最为常用。Repeatableread可重复读：如果设置了该隔离级别，可以保证当前事务中多次读取特定记录的结果相同。可以防止脏读、不可重复读，但是会导致幻读。Serializable串行化：如果设置了该隔离级别，所有的事务会放在一个队列中执行，当前事务开启后，其他事务将不能执行，即同一个时间点只能有一个事务操作数据库对象。这种隔离级别对于保证数据完整性的能力是最高的，但因为同一时刻只允许一个事务操作数据库，所以大大降低了系统的并发能力。CAP定理一致性（Consistency）（等同于所有节点访问同一份最新的数据副本）可用性（Availability）（每次请求都能获取到非错的响应――但是不保证获取的数据为最新数据）分区容错性（Partitiontolerance）（以实际效果而言，分区相当于对通信的时限要求。系统如果不能在时限内达成数据一致性，就意味着发生了分区的情况，必须就当前操作在C和A之间做出选择3。）根据定理，分布式系统只能满足三项中的两项而不可能满足全部三项4。理解CAP理论的最简单方式是想象两个节点分处分区两侧。允许至少一个节点更新状态会导致数据不一致，即丧失了C性质。如果为了保证数据一致性，将分区一侧的节点设置为不可用，那么又丧失了A性质。除非两个节点可以互相通信，才能既保证C又保证A，这又会导致丧失P性质。BASE理论（在微服务下的事务管理必然要遵循新的法则）BASE理论是对CAP理论的延伸，核心思想是即使无法做到强一致性，应用应该可以采用合适的方式达到最终一致性。BASE是指基本可用（BasicallyAvailable）、软状态（SoftState）、最终一致性（EventualConsistency）。基本可用：指分布式系统在出现故障的时候，允许损失部分可用性，即保证核心可用。软状态：允许系统存在中间状态，而该中间状态不会影响系统整体可用性。分布式存储中一般一份数据至少会有三个副本，允许不同节点间副本同步的延时就是软状态的体现。最终一致性：最终一致性是指系统中的所有数据副本经过一定时间后，最终能够达到一致的状态。弱一致性和强一致性相反，最终一致性是弱一致性的一种特殊情况。参考：对比5种分布式事务方案，还是宠幸了阿里的Seata（原理+实战）mp.weixin.qq.com/s?__biz=MzU0OTE4MzYzMw==&mid=2247497767&idx=3&sn=727bff63c4598e93f6f6e4a67e780e37&chksm=fbb171d9ccc6f8cff428ec385babf069fc4d3bce9a5258446cd0e1763d4e80f886c1ea14fbec&&xtrack=1&scene=90&subscene=93&sessionid=1606710118&clicktime=1606710436&enterid=1606710436rd分布式事务，这一篇就够了xiaomiinfo.github.io/2020/01/02/distributedtransaction/分布式事务的典型处理方式：2PC、TCC、异步确保和最大努力型kaimingwan.com/post/fenbushi/fenbushishiwudedianxingchulifangshi2pctccyibuquebaohezuidanulixing分布式事务有哪5中方案常见的比如基于XA协议的2PC、3PC，基于业务层的TCC，还有应用消息队列+消息表实现的最终一致性方案，还有今天要说的Seata中间件开发中幂等性是极为重要的。简单来说，对于同一个系统，在同样条件下，一次请求和重复多次请求对资源的影响是一致的，就称该操作为幂等的。2PCXA协议中分为两部分：事务管理器和本地资源管理器。其中本地资源管理器往往由数据库实现，比如Oracle、MYSQL这些数据库都实现了XA接口，而事务管理器则作为一个全局的调度者。优点：严格保障事务ACID特性；想使用本地事务一样透明；对业务侵92很小。缺点：强一致性的同步阻塞协议，锁定全部资源。3PC是2PC的一种改进版本。CanCommit、PreCommit、DoCommit三个阶段。在第一阶段，只是询问所有参与者是否可可以执行事务操作，并不在本阶段执行事务操作。当协调者收到所有的参与者都返回YES时，在第二阶段才执行事务操作，然后在第三阶段在执行commit或者rollback。2PC中只有协调者有超时机制，3PC在协调者和参与者中都引入了超时机制，协调者出现故障后，参与者就不会一直阻塞。多了一次网络通信，性能上反而变得更差TCCTCC为在业务层编写代码实现的两阶段提交。TCC分别指Try、Confirm、Cancel，一个业务操作要对应的写这三个方法。以下单扣库存为例，Try阶段去占库存，Confirm阶段则实际扣库存，如果库存扣减失败Cancel阶段进行回滚，释放库存。TCC不存在资源阻塞的问题，因为每个方法都直接进行事务的提交，一旦出现异常通过则Cancel来进行回滚补偿，这也就是常说的补偿性事务。TCC对业务的侵入性很强。消息事务（最终一致性）消息事务其实就是基于消息中间件的两阶段提交，将本地事务和发消息放在同一个事务里，保证本地操作和发送消息同时成功。!消息事务（最终一致性）_v_images/20210625094850448_27262.pngSeataSeata也是从两段提交演变而来的一种分布式事务解决方案，提供了AT、TCC、SAGA和XA等事务模式，这里重点介绍AT模式。几种角色TransactionCoordinatorTC:全局事务协调者，用来协调全局事务和各个分支事务（不同服务）的状态，驱动全局事务和各个分支事务的回滚或提交。TransactionManager64:事务管理者，业务层中用来开启/提交/回滚一个整体事务（在调用服务的方法中用注解开启事务）。ResourceManagerRM:资源管理者，一般指业务数据库代表了一个分支事务（BranchTransaction），管理分支事务与TC进行协调注册分支事务并且汇报分支事务的状态，驱动分支事务的提交或回滚。!Seata角色_v_images/20210625094929103_13071.pngSeata实现分布式事务，设计了一个关键角色UNDO_LOG（回滚日志记录表），我们在每个应用分布式事务的业务库中创建这张表，这个表的核心作用就是，将业务数据在更新前后的数据镜像组织成回滚日志，备份在UNDO_LOG表中，以便业务异常能随时回滚。Seata执行的两个阶段第一个阶段：本地事务提交，业务数据的更新和前面生成的UNDOLOG数据一并提交，并将本地事务提交的结果上报给全局事务协调者TC。第二阶段：根据各分支的决议做提交或回滚。Seata实践file.conf文件用于配置持久化事务日志的模式，目前提供file、db、redis三种方式。registry.conf文件设置注册中心和配置中心：目前注册中心支持nacos、eureka、redis、zk、consul、etcd3、sofa七种。SeataClient注册服务：新建三个服务orderserver（下单服务）、storageserver（扣减库存服务）、accountserver（账户金额服务），分别服务注册到注册中心。用@GlobalTransactional注解开启一个全局事务即可。", "distributed/25 移动网关设计.md": "Featureapp登录认证（可以供手机app或桌面程序登录使用）基于URL的权限校验控制（授权有平台的portal完成）服务转发（将dubbo服务转换为httpjson服务）待完成的功能服务反向路由，网关要负责将外部请求反向路由到内部具体的微服务，这样虽然企业内部是复杂的分布式微服务结构，但是外部系统从网关上看到的就像是一个统一的完整服务，网关屏蔽了后台服务的复杂性，同时也屏蔽了后台服务的升级和变化。安全认证和防爬虫，所有外部请求必须经过网关，网关可以集中对访问进行安全控制，比如用户认证和授权，同时还可以分析访问模式实现防爬虫功能，网关是连接企业内外系统的安全之门。限流和容错，在流量高峰期，网关可以限制流量，保护后台系统不被大流量冲垮，在内部系统出现故障时，网关可以集中做容错，保持外部良好的用户体验。监控，网关可以集中监控访问量，调用延迟，错误计数和访问模式，为后端的性能优化或者扩容提供数据支持。日志，网关可以收集所有的访问日志，进入后台系统做进一步分析。除以上基本能力外，网关还可以实现线上引流，线上压测，线上调试Surgicaldebugging，金丝雀测试CanaryTesting，数据中心双活ActiveActiveHA等高级功能。网关通常工作在7层，有一定的计算逻辑，一般以集群方式部署，前置LB进行负载均衡。开源的网关组件有Netflix的Zuul，特点是动态可热部署的过滤器filter机制，其它如HAproxy，Nginx等都可以扩展作为网关使用。设计原理请求认证过程!_v_images/20191129171128.pnglogin获取AccessKey和SecretKey。AccessKey是有一定的时效性，过期后需要重新登录获取。请求httpjson服务。所有的服务都需要进行header的签名校验。对应的程序调用过程如下：!_v_images/20191129171137.png签名算法签名算法的原理如下图所示，用户登录后，获取AccessKey和SecretKey（这两个key都有一定的时效性），客户端和服务端各自保存同一个SecretKey，SecretKey不在请求中传递的；stringToSign是有客户端生成的，并要传递到服务端，客户端和服务端用SecretKey和stringToSign生成签名Signature；客户端的Signature需要传递到服务端，服务端收到客户端的Signature后，和服务端自己生成的Signature进行比较，如果相等则认为是合法请求，否则不合法；这个签名Signature每次请求是不一样的。!_v_images/20191129171202.png移动网关中除了login之外，所有请求服务端API接口的请求均使用此签名算法进行校验。!_v_images/20191129171207.png算法如上图所示，对于客户端来说，AccessKey和SecretKey是用户登录后获得到的；HttpMethod、ContentType、requestURI是HTTP的请求属性，可以统一设置；ContentMD5是用户请求内容的MD5后的字符串，date是当前时间的长整形值（毫秒）。权限校验控制权限校验是采用基于URL的校验，即将用户可访问的URL放入用户权限缓存中，用户发出每次请求时，校验用户是否具有该URL的访问权限，如果有权限，则http的返回码是200，否则返回码为401。服务转发系统所使用的所有服务接口是以dubbo服务的形式发布，移动网关将dubbo服务转换为httpjson的API，网关只是做一个请求的转发，并将结果返回给客户端app。代码如下：```javaStringinterfaceName=getPara\"interface\";StringmethodName=getPara\"method\";StringparaValues=getParaValues\"params\";log.debug\"AccessAPI:{}{}\",interfaceName,methodName;Class<?>clazz=null;try{clazz=Class.forNameinterfaceName;}catchClassNotFoundExceptione{thrownewIllegalArgumentException\"Couldnotfindinterface\"+interfaceName+\"\";}DubboReferenceFactory.initPropertyHolder.get\"dubbo.register.center\",\"APIGATEWAY\";Objectobj=DubboReferenceFactory.createReferenceclazz,\"dubbo\";Objectresult=ReflectionUtil.invokeMethodByNameobj,methodName,paraValues;ifresult!=null{renderJsonresult;}```客户端调用```javaURLurl=newURLbaseUrl+\"admin\";HttpPostmethod=newHttpPosturl.toURI;StringcontentType=\"application/json;charset=utf8\";Stringentity=\"ladygaga\";Headerheaders=buildHeaderApiKey.ADMIN2,method,contentType,entity;method.setHeadersheaders;method.setEntitynewStringEntityentity,ContentType.createcontentType;HttpResponseexecute=client.executemethod;StatusLinestatusLine=execute.getStatusLine;```完整的调用过程参见测试用例HmacTest", "distributed/Consul学习.md": "Consul原理和使用简介Consul原理和使用简介blog.coding.net/blog/introconsulConsul是什么Consul是一个支持多数据中心分布式高可用的服务发现和配置共享的服务软件，由HashiCorp公司用Go语言开发，基于MozillaPublicLicense2.0的协议进行开源。Consul支持健康检查,并允许HTTP和DNS协议调用API存储键值对。命令行超级好用的虚拟机管理软件vgrant也是HashiCorp公司开发的产品。一致性协议采用Raft算法，用来保证服务的高可用。使用GOSSIP协议管理成员和广播消息，并且支持ACL访问控制。功能特点服务发现：Consul的客户端可以提供的服务，如api或mysql,其他的客户端可以使用Consul发现一个特定服务的提供者。使用DNS或HTTP，应用程序可以很容易地找到他们所依赖的服务。健康检查：Consul客户端可以提供任何数量的健康检查,无论是与给定的服务“Web服务器返回200OK”,还是和本地节点相关联\"内存利用率低于90%\"。这些信息可以由操作员监控集群健康,它用于由服务发现组件将通信路由远离不健康的主机。键/值存储：应用程序可以使用Consul的分层键/值存储任意数量的目标,包括动态配置,特征衰弱,leader选举,等等。简单的HTTPAPI使得它易于使用。多数据中心：Consul支持多个数据中心,这意味着Consul的用户不用担心构建额外的抽象层增加到多个区域。Consul的优势使用Raft算法来保证一致性，比复杂的Paxos算法更直接。相比较而言,zookeeper采用的是Paxos，而etcd使用的则是Raft。支持多数据中心，内外网的服务采用不同的端口进行监听。多数据中心集群可以避免单数据中心的单点故障，而其部署则需要考虑网络延迟、分片等情况等。zookeeper和etcd均不提供多数据中心功能的支持。支持健康检查。etcd不提供此功能。支持http和dns协议接口。zookeeper的集成较为复杂，etcd只支持http协议。官方提供web管理界面，etcd无此功能。Consul的角色client:客户端，无状态，将HTTP和DNS接口请求转发给局域网内的服务端集群。server:服务端，保存配置信息，高可用集群，在局域网内与本地客户端通讯，通过广域网与其他数据中心通讯。每个数据中心的server数量推荐为3个或是5个。Consul架构Consul架构devopsh.com/726.htmlAgent代理是长时间运行的守护进程在每个Consul集群的成员。它是由Consul代理运行。代理能够在客户机或服务器上运行模式。由于所有节点都必须运行一个代理,它是简单的参考节点作为一个客户端或服务器,但还有其他代理的实例。所有代理可以运行DNS或HTTP接口,并负责运行检查和保持服务同步。Client客户端是转发所有的RPC到服务器的代理。客户端是相对无状态的。客户端执行的唯一背景活动是正在LAN八卦池gossippool的一部分。这具有最小资源开销，仅消耗少量的网络带宽。Server服务器是一套扩展的职责包括参与Raft仲裁，维护集群状态，响应RPC查询，WAN八卦gossip到其他数据中心，并转发查询的主导者或远程数据中心的代理人。Datacenter数据中心似乎是显而易见的，但也有微妙的细节，如EC2多个可用区。我们定义了一个数据中心是一个联网环境是私有的，低延迟和高带宽。这不包括通信，将穿越公共互联网。Consensus当我们的文档中使用，我们使用的共识，意味着在交易的订货经选举产生的领导人达成协议以及协议。由于这些事务应用到FSM，我们隐含地包括一个复制的状态机的一致性。共识进行了更详细的描述维基百科，和我们的实施进行说明此处。GossipConsul是建立在之上Sref，它提供了一个完整的gossipprotocol是用于多种用途。Sref实行会员制，故障检测和事件广播机制。我们使用这些描述更多的gossipdocumentation。这足以知道，gossip涉及随机节点到节点通信，主要是通过UDP。LANGossip指LAN八卦池ReferstotheLANgossippool,它包含了所有位于同一局域网络或数据中心上的节点。WANGossip指WAN八卦池ReferstotheWANgossippool，其中只包含服务器。这些服务器主要位于不同的数据中心，并且通常通信通过互联网或广域网。RPC远程过程调用。这是一个请求/响应机制，允许一个客户端，使一服务器的请求。!_v_images/20191129172555.png如何用Consul打造弹性可扩展的PaaS平台如何用Consul打造弹性可扩展的PaaS平台os.51cto.com/art/201601/504856.htmConsul和ZooKeeper的区别Consul和ZooKeeper的区别dockone.io/article/300服务发现：ZookeepervsetcdvsConsulit.dataguru.cn/article81311.html", "distributed/zookeeper学习.md": "Zookeeper初体验之――伪分布式安装www.cnblogs.com/haippy/archive/2012/07/19/2599989.htmlZookeeper初体验之――JAVAAPI初探www.cnblogs.com/haippy/archive/2012/07/19/2600032.htmlHelloWorldZookeeper初体验之――JAVA实例www.cnblogs.com/haippy/archive/2012/07/20/2600077.htmlApacheZookeeper官网的例子，有点晦涩Zookeeper进阶之――典型应用场景（一）www.cnblogs.com/haippy/archive/2012/07/23/2603583.htmlZookeeper进阶之――典型应用场景（二）www.cnblogs.com/haippy/archive/2012/07/23/2604556.htmlZookeeper进阶之――Zookeeper编程示例（如何使用Zookeeper实现屏障Barriers和队列Queues）www.cnblogs.com/haippy/archive/2012/07/26/2609769.html英文的Zookeeper开发常见问题分析tech.uc.cn/?p=1189分布式服务框架Zookeeper管理分布式环境中的数据www.ibm.com/developerworks/cn/opensource/oscnzookeeper/系列OSChinaZookeeper系列_Indexmy.oschina.net/xianggao/blog/538867【Zookeeper系列二】ZooKeeper典型应用场景实践my.oschina.net/xianggao/blog/531613使用RMI+ZooKeeper实现远程调用框架my.oschina.net/huangyong/blog/345164?fromerr=5OjN02heZOOKEEPER解惑www.cnblogs.com/gpcuster/archive/2010/12/29/1921213.html", "distributed/Zuul学习.md": "Netflix学习笔记：Zuullxlong.iteye.com/blog/2267985从ZuulSimpleWebapp入手github.com/Netflix/zuul/wiki/zuulsimplewebapp例子github.com/flindby/springoauth2zuulSpringBoot+Oauth2+Zuul", "distributed/[SkillsMap]-SpringCloud微服务.md": "TOC微服务架构【专题】微服务架构专题blog.didispace.com/microserivcesarch/【专题】SpringCloud从入门到精通blog.didispace.com/springcloudlearning/现成框架github.com/gjhuai/FEBSCloudSpringCloud学习教程juejin.cn/column/6962024277382004773对应源码：github.com/macrozheng/springcloudlearning.gitwww.cnblogs.com/fanshuyao/category/1941706.htmldocs.springcloud.cn/daijieexample:基于springcloud系列整合的分布式项目的例子，监控管理、配置中心、注册中心、分布式锁、分布式事务、多数据源、工作流、单点登录、oauth2授权、接口文档、路由跳转、第三方集成等等github.com/daijiejay/daijieexampleRibbon主要功能：提供客户端进程内负载均衡。【官方】Ribbon官方源码github.com/Netflix/ribbon【例子】Ribbon例子gitee.com/gjhuai/springcloudstudy/tree/master/ribbonexamplesOpenFeign【例子】Feign简单的Client访问http请求例子gitee.com/gjhuai/springcloudstudy/tree/master/feignclientsample【例子】详细讲解OpenFeign的使用姿势！developer.aliyun.com/article/775626代码地址：OpenFeign例子github.com/yehongzhi/example需要启动`nacos`注册中心。程序分为`provider`和`consumer`【官方】Feign官方源码github.com/OpenFeign/feign里面两个使用例子：`examplegithub`和`examplewikipedia`Hystrix【入门】Hystrix入门系列文章Hystrix介绍www.cnblogs.com/cjsblog/p/9391819.htmlHystrix是如何工作的www.cnblogs.com/cjsblog/p/9395584.htmlSpringCloud学习笔记3――Hystrixwww.cnblogs.com/cjsblog/p/7988979.htmlSpringBoot集成Hystrixwww.cnblogs.com/cjsblog/p/9398156.html【入门】IntroductiontoHystrixbybaeldungwww.baeldung.com/introductiontohystrix源码：github.com/eugenp/tutorials/tree/master/hystrix【例子】Hystrix官方例子gitee.com/gjhuai/springcloudstudy/tree/master/hystrixexamples【官方】Hystrix官方文档github.com/Netflix/Hystrix/wiki【官方】Hystrix官方源码github.com/Netflix/HystrixEurekaSentinel:分布式系统的流量防卫兵nacos【例子】nacos官方例子github.com/alibaba/nacos/tree/develop/example/src/main/java/com/alibaba/nacos/example【例子】nacos使用例子github.com/nacosgroup/nacosexamples【入门】Nacos视频教程（无废话版）www.bilibili.com/video/BV1WZ4y1w7ww【官方】Nacos官方文档nacos.io/zhcn/docs/whatisnacos.html【原理】Nacos原理blog.csdn.net/qq_45122010/article/details/104079392【原理】Nacos注册中心的设计原理详解www.infoq.cn/article/B*6vyMIKao9vAKIsJYpE【原理】微服务：注册中心ZooKeeper、Eureka、Consul、Nacos对比blog.csdn.net/fly910905/article/details/100023415【教程】nacos实战（史上最全）www.cnblogs.com/crazymakercircle/p/14231815.htmlDubbodubbo阿狸\\_桃子博客频道CSDN.NETblog.csdn.net/liwf_/article/category/2425075【dubbo学习】5.dubboadmin管理控制台启动ITeye技术网站orangesdk.iteye.com/blog/2207614UserGuidezhDubboalibaba.github.io/dubbodocstatic/User+Guidezh.htm", "distributed/[SkillsMap]-分布式事务.md": "分布式事务【课程】从0到1实现分布式事务认识分布式事务blog.csdn.net/woaixinxin123/article/details/103709926视频：www.bilibili.com/video/av80626430/【课程】【黑马】分布式事务解决方案专题www.bilibili.com/video/BV1FJ411A7mV/【入门】分布式事务，这一篇就够了xiaomiinfo.github.io/2020/01/02/distributedtransaction/【详解】1.4w字，25张图让你彻底掌握分布式事务原理blog.csdn.net/weixin_41385912/article/details/109396670【详解】对比5种分布式事务方案，还是宠幸了阿里的Seata（原理+实战）blog.csdn.net/hollis_chuang/article/details/112386366txlcn从0到1实现分布式事务认识分布式事务blog.csdn.net/woaixinxin123/article/details/103709926视频：www.bilibili.com/video/av80626430/分布式事务从0到1了解TXLCN原理blog.csdn.net/woaixinxin123/article/details/103710053视频一：www.bilibili.com/video/av80676649视频二：www.bilibili.com/video/av80676836", "distributed/诸葛SpringCloudAlibaba入门.md": "TOC微服务架构github.com/alibaba/springcloudalibaba/blob/master/READMEzh.md!亿级流量电商网络微服务架构_v_images/20200917161031675_7588.png=1024xNacos注册中心!基于Nginx的负载均衡_v_images/20200917161526033_6220.png增加减少机器需要频繁修改配置!Nacos服务注册中心_v_images/20200917162815662_2365.png基于Ribbon算法的负载均衡!完整的微服务架构_v_images/20200917164823949_25307.png=1200xFeign：通过动态代理，实现对远程服务的调用。P6Sentinel限流熔断降级Sentinel切入点，从流量控制、熔断降级、系统负载保护等多个维度保护服务的稳定性。Sentinel教程Sentinel介绍QuickStartgithub.com/alibaba/Sentinel/wiki/介绍【Sentinel（一）】Sentinel介绍与使用blog.csdn.net/noaman_wgs/article/details/103328793%0Ablog.csdn.net/noaman_wgs/article/details/103328793Sentinel实战控制台篇www.jianshu.com/p/c47dfd25eeee%0Awww.jianshu.com/p/c47dfd25eeeeSentinel教程gitee.com/all_4_you/sentineltutorial%0Agitee.com/all_4_you/sentineltutorialgithub.com/alibaba/Sentinel/tree/master/sentineldemo!Sentinel主要特性imgblog.csdnimg.cn/20191130203727708.png?xossprocess=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L25vYW1hbl93Z3M=,size_16,color_FFFFFF,t_70=800xSentinel与Hystrix的区别关于Sentinel与Hystrix的区别见：技术选型：SentinelvsHystrixyq.aliyun.com/articles/633786/总体来说：Hystrix常用的线程池隔离会造成线程上下切换的overhead比较大；Hystrix使用的信号量隔离对某个资源调用的并发数进行控制，效果不错，但是无法对慢调用进行自动降级；Sentinel通过并发线程数的流量控制提供信号量隔离的功能；此外，Sentinel支持的熔断降级维度更多，可对多种指标进行流控、熔断，且提供了实时监控和控制面板，功能更为强大。SpringCloudAlibaba：Sentinel实现熔断与限流SpringCloudAlibaba：Sentinel实现熔断与限流juejin.im/post/6844903999876022279%0Ajuejin.im/post/6844903999876022279与Feign结合使用引入依赖`springcloudstarteralibabasentinel`在application.yml中打开Sentinel对Feign的支持：`feign.sentinel.enabled:true`在应用启动类上添加@EnableFeignClients启动Feign的功能；定义对nacosuserservice服务的调用```java@FeignClientvalue=\"nacosuserservice\",fallback=UserFallbackService.classpublicinterfaceUserService{@PostMapping\"/user/create\"CommonResultcreate@RequestBodyUseruser;}```创建UserFallbackService类实现UserService接口，用于处理服务降级逻辑：```java@ComponentpublicclassUserFallbackServiceimplementsUserService{@OverridepublicCommonResultcreateUseruser{UserdefaultUser=newUser1L,\"defaultUser\",\"123456\";returnnewCommonResult<>defaultUser,\"服务降级返回\",200;}}```通过Feign调用nacosuserservice服务中的接口：```java@RestController@RequestMapping\"/user\"publicclassUserFeignController{@AutowiredprivateUserServiceuserService;@PostMapping\"/create\"publicCommonResultcreate@RequestBodyUseruser{returnuserService.createuser;}```调用如下接口会发生服务降级，返回服务降级处理信息：localhost:8401/user/4```json{\"data\":{\"id\":1,\"username\":\"defaultUser\",\"password\":\"123456\"},\"message\":\"服务降级返回\",\"code\":200}``````java@TransactionalpublicStringcreateOrderLongproductId，LonguserId，IntegerstockCount，IntegercreditCount{System.out.println\"创建订单成功\";//T0D0stockService.deductStockproductId，stockCount;creditService.addCredituserId，creditCount;//DEBUG:停掉积分系统，不能报错wmsService.deliveryuserId，productId;return\"success\";}```Seata分布式事务seata.io/zhcn/@GlobalTransactionalSeataAT模式整体机制：两阶段提交协议的演变：一阶段：业务数据和回滚日志记录在同一个本地事务中提交，释放本地锁和连接资源。二阶段：提交异步化，非常快速地完成。回滚通过一阶段的回滚日志进行反向补偿。对数据一致性的及时性要求不高的业务场景，尽量不适用分布式事务，因为Seata底层是加锁，降低了系统性能。电商业务中台整体微服务架构www.processon.com/view/link/5e69e768e4b07fc7a6841488!电商业务中台整体微服务架构_v_images/20200917182324982_14617.png=1200xGateway的作用SpringCloudGateway：路由（服务转发）限流安全认证（对请求统一校验权限）!Gateway配置_v_images/20200917174512999_3323.png分布式调用链路追踪Pinpoint微服务自动化监控Prometheus&Grafana", "distributed\\FEBS/开发教程.md": "toc项目目录结构www.kancloud.cn/mrbird/springcloud/1265031后端项目结构如下所示：├─febsapm微服务APM模块│├─febsadmin微服务监控中心│├─prometheusgrafanaprometheusgrafanaapm相关配置，docker文件│└─skywalkingelkskywalkingelk相关配置，docker文件├─febsauth微服务认证服务器├─febscloud整个项目的父模块│├─sqlSQL脚本│├─postmanpostman脚本│└─dockercompose项目相关dockercompose文件├─febscommon通用模块│├─febscommoncore系统核心依赖包│├─febscommondatasourcestarter系统数据库自动装配starter│├─febscommondoc文档模块的核心依赖包│├─febscommondocgatewaystarter网关聚合微服务子系统api文档自动装配starter│├─febscommondocstarter微服务子系统api文档自动装配starter│├─febscommonredisstarter系统Redis自动装配starter│└─febscommonsecuritystarter微服务子系统安全配置自动装配starter├─febsgateway微服务网关├─febsserver微服务子系统│├─ebsserversystem微服务子系统系统核心模块│├─febsservertest微服务子系统demo模块│├─febsservergenerator微服务子系统代码生成模块│└─febsserverjob微服务子系统任务调度模块└─febstxmanager微服务分布式事务控制器如何添加自己的子系统www.kancloud.cn/mrbird/springcloud/1647291为了规范，建议将微服务子系统添加到febsserver层级下。```xml<parent><groupId>cc.mrbird</groupId><artifactId>febsserver</artifactId><version>2.1RELEASE</version><relativePath>../pom.xml</relativePath></parent><dependencies><dependency><groupId>cc.mrbird</groupId><artifactId>febscommoncore</artifactId><version>${febscloud.version}</version></dependency></dependencies>``````yamlfebs:cloud:security:enable:truesecurity:oauth2:resource:id:${spring.application.name}userinfouri:${febsgateway}:8301/auth/user```如何控制权限www.kancloud.cn/mrbird/springcloud/1265033后端控制后端资源权限控制使用SpringCloudSecurity权限注解控制，比如下面这个资源只有拥有\"user:add\"权限的用户可以访问：```JAVA@PostMapping@PreAuthorize\"hasAnyAuthority'user:add'\"publicvoidaddUserUseruserthrowsFebsException{this.userService.createUseruser;}```前端控制```XML<buttonvhaspermission=\"'user:add'\">新增用户</button>```项目打包www.kancloud.cn/mrbird/springcloud/1268277mvnclean和mvnpackagePostMan测试第三方登录使用指南以GitHub登录为例数据权限数据权限通常是通过部门或者组织架构来绑定的，目前系统没有组织架构，只有部门数据，所以在FEBSCloud中，数据权限通过部门ID绑定。`@DataPermissionmethods={\"selectPage\"}`注解用于控制数据权限，含义是：DataPermissionTestMapper的selectPage方法开启数据权限。开启后，数据查询前系统会在原始查询SQL中拼接xx.dept_idinxxx语句：Feign的使用Feign用于一个微服务子系统调用另一个微服务子系统的接口，本质就是http请求。但是我们的微服务都是受保护的，没有合法的令牌是无法获取到数据的，并且Fein默认并不会帮我们传递令牌。获取当前用户信息febscommoncore包下的FebsUtil工具类中。`getCurrentUser`、`getCurrentUsername`、`getCurrentUserAuthority`、`getCurrentTokenValue`全局异常控制所谓的全局异常捕获指的是系统的最外层Controller层的异常捕获。febscommoncore包中的BaseExceptionHandler类中定义了系统中几种常见的异常处理开启系统API文档目前较为流行的自动api生成框架为swagger，不过UI界面并不怎么适合国人的使用习惯，FEBSCloud集成的是Knife4J，下面演示下如何开启微服务API文档生成。starter使用介绍`febscommonsecuritystarter``febscommondocstarter``febscommonredisstarter``febscommondatasourcestarter`分布式事务演示演示前，请确保已经启动了febstxmanager、febsauth、febsgateway、febsserversystem和febsservertest。演示5种获取令牌方式OAuth2协议规范了4种获取令牌的方式：授权码模式、密码模式、客户端模式和简化模式，具体可以参考tools.ietf.org/html/rfc6749section4.1。SpringCloudOAuth2在此基础上添加了刷新令牌方式。", "distributed\\FEBS/搭建教程.md": "1.第一章基础框架搭建www.kancloud.cn/mrbird/springcloud/1263687JDK1.8SpringBoot2.1.6.RELEASESpringCloudGreenwich.SR1SpringCloudOAuth2SpringCloudSecurity1.1.架构预览!系统架构图s2.ax1x.com/2019/08/31/mxMgW8.png=1024xFEBSRegister：微服务注册中心，用于统一控制各个微服务实例的注册与发现；FEBSGateway：微服务网关，统一处理外部请求，是客户端和众多微服务连接的桥梁；FEBSAuth：微服务认证服务器，用于令牌（Token）生成和令牌校验，是整个权限系统的核心所在；FEBSServerSystem：微服务提供者（资源服务器）A，对外提供系统模块的CRUD服务；FEBSServerTest：微服务提供者（资源服务器）B。1.2.搭建微服务注册中心www.kancloud.cn/mrbird/springcloud/1263688在这一节中，我们先使用Eureka构建微服务注册中心（Eureka服务端），因为Eureka较为简单，无须启动第三方服务，只需要引入相关依赖即可。1.3.搭建认证服务器www.kancloud.cn/mrbird/springcloud/1263689借助SpringCloudOAuth和SpringCloudSecurity搭建一个统一给微服务发放访问令牌的认证服务器febsauth。1.4.搭建微服务网关www.kancloud.cn/mrbird/springcloud/1263690在微服务的架构中，服务网关就是一个介于客户端与服务端之间的中间层。在这种情况下，客户端只需要跟服务网关交互，无需调用具体的微服务接口。这样的好处在于，客户端可以降低复杂性，无需关注具体是哪个微服务在提供服务。这一节我们将使用SpringCloudZuul搭建微服务网关febsgateway。1.5.搭建资源服务器www.kancloud.cn/mrbird/springcloud/14207202.架构完善这一章主要对上一节搭建的基础框架进行完善，解决微服务权限系统常见的问题。2.1.参数配置化www.kancloud.cn/mrbird/springcloud/1263694`springbootconfigurationprocessor````java@Data@SpringBootConfiguration@PropertySourcevalue={\"classpath:febsauth.properties\"}@ConfigurationPropertiesprefix=\"febs.auth\"publicclassFebsAuthProperties{privateFebsClientsPropertiesclients={};privateintaccessTokenValiditySeconds=60*60*24;privateintrefreshTokenValiditySeconds=60*60*24*7;}``````inifebs.auth.accessTokenValiditySeconds=86400febs.auth.refreshTokenValiditySeconds=604800febs.auth.clients0.client=febsfebs.auth.clients0.secret=123456febs.auth.clients0.grantType=password,authorization_code,refresh_tokenfebs.auth.clients0.scope=all```2.2.异常处理www.kancloud.cn/mrbird/springcloud/12636952.3.Feign的使用www.kancloud.cn/mrbird/springcloud/1263696微服务之间服务的调用可以借助SpringCloudFeign来完成，SpringCloudFeign内部整合了SpringCloudRibbon和SpringCloudHystrix，所以它具有客户端负载均衡和服务容错的功能。`springcloudstarteropenfeign````java@EnableFeignClients@SpringBootApplicationpublicclassFebsServerTestApplication{......``````java@FeignClientvalue=\"FEBSServerSystem\",contextId=\"helloServiceClient\",fallbackFactory=HelloServiceFallback.classpublicinterfaceIHelloService{@GetMapping\"hello\"Stringhello@RequestParam\"name\"Stringname;}```2.4.微服务防护www.kancloud.cn/mrbird/springcloud/1263697自定义Zuul过滤器解决这个问题的大致思路是：在网关转发请求前，请求头部加入网关信息，然后在处理请求的微服务模块里定义全局拦截器，校验请求头部的网关信息，这样就能避免客户端直接访问微服务了。在自定义Zuul过滤器前，我们先来简单了解下Zuul的核心过滤器。Zuul中默认定义了4种不同生命周期的过滤器类型。PRE：PRE过滤器用于将请求路径与配置的路由规则进行匹配，以找到需要转发的目标地址，并做一些前置加工，比如请求的校验等；ROUTING：ROUTING过滤器用于将外部请求转发到具体服务实例上去；POST：POST过滤器用于将微服务的响应信息返回到客户端，这个过程种可以对返回数据进行加工处理；ERROR：上述的过程发生异常后将调用ERROR过滤器。ERROR过滤器捕获到异常后需要将异常信息返回给客户端，所以最终还是会调用POST过滤器。2.5.跨域处理www.kancloud.cn/mrbird/springcloud/1263698```java@ConfigurationpublicclassFebsGateWayCorsConfigure{@BeanpublicCorsFiltercorsFilter{finalUrlBasedCorsConfigurationSourcesource=newUrlBasedCorsConfigurationSource;finalCorsConfigurationcorsConfiguration=newCorsConfiguration;//允许cookie跨域corsConfiguration.setAllowCredentialstrue;//请求头部允许携带任何内容corsConfiguration.addAllowedHeaderCorsConfiguration.ALL;//允许任何来源corsConfiguration.addAllowedOriginCorsConfiguration.ALL;//允许任何HTTP方法corsConfiguration.addAllowedMethodCorsConfiguration.ALL;source.registerCorsConfiguration\"/**\",corsConfiguration;returnnewCorsFiltersource;}}```3.完善登录流程3.1.表结构设计www.kancloud.cn/mrbird/springcloud/1263701!用户角色权限s2.ax1x.com/2019/08/13/mpOPpR.png3.2.完善登录www.kancloud.cn/mrbird/springcloud/1263702`mybatisplusbootstarter``dynamicdatasourcespringbootstarter`MyBatisPlus多数据源依赖`mysqlconnectorjava`3.3.整合图形验证码www.kancloud.cn/mrbird/springcloud/1263703SpringSecurity本质是一长串的过滤器链，处理用户名密码登录的过滤器为`UsernamePasswordAuthenticationFilter`，要集成图形验证码校验很简单，只需要在`UsernamePasswordAuthenticationFilter`过滤器前添加图形验证码校验过滤器即可。我们通常会把验证码存储在Redis中，并设置失效时间。SpringBoot2.0后推荐使用Lettuce来代替Jedis，Lettuce基于Netty异步，拥有更好的性能。生成图形验证码可以借助GitHub的一个开源项目`github.com/whvcse/EasyCaptcha`，其提供了较为丰富的验证码配置可供选择。在febsauth的pom里引入该依赖：<dependency><groupId>com.github.whvcse</groupId><artifactId>easycaptcha</artifactId><version>1.6.2</version></dependency>在前后端不分离的架构下，我们通过浏览器传输的jsessionid来和验证码图片一一对应，但前后的分离的模式下，客户端发送的请求并没有携带jsessionid（因为不再基于Session），所以我们需要客户端在发送获取验证码请求的时候，携带一个key（比如按一定算法生成的随机字符串，模拟jsessionid）来和验证码一一对应。于是我们在create里一开始就从请求中获取key值，然后根据验证码配置文件生成验证码，并将验证码字符保存到了Redis中（RedisKey为febs.captcha.+客户端上送的key值，有效时间为配置文件定义的120秒），并将验证码图片以流的形式返回给客户端。```java@ComponentpublicclassValidateCodeFilterextendsOncePerRequestFilter{@AutowiredprivateValidateCodeServicevalidateCodeService;@OverrideprotectedvoiddoFilterInternalHttpServletRequesthttpServletRequest,HttpServletResponsehttpServletResponse,FilterChainfilterChainthrowsServletException,IOException{//校验验证码```3.4.Sentinel验证码限流www.kancloud.cn/mrbird/springcloud/1263704因为我们的验证码服务是免认证的，所以只要知道了地址就可以频繁的去获取验证码，这无形之中给服务器增加了很大的压力，甚至可能导致服务器宕机。为了解决这个问题，我们可以在网关处整合阿里巴巴开源的Sentinel流量哨兵来限制验证码的获取频率。`com.alibaba.csp:sentinelzuuladapter:1.6.3````java@ConfigurationpublicclassFebsGatewaySentinelFilter{....@PostConstructpublicvoiddoInit{initGatewayRules;}/***定义验证码请求限流，限流规则：*60秒内同一个IP，同一个key最多访问10次*/privatevoidinitGatewayRules{Set<ApiDefinition>definitions=newHashSet<>;Set<ApiPredicateItem>predicateItems=newHashSet<>;predicateItems.addnewApiPathPredicateItem.setPattern\"/auth/captcha\";ApiDefinitiondefinition=newApiDefinition\"captcha\".setPredicateItemspredicateItems;definitions.adddefinition;GatewayApiDefinitionManager.loadApiDefinitionsdefinitions;Set<GatewayFlowRule>rules=newHashSet<>;rules.addnewGatewayFlowRule\"captcha\".setResourceModeSentinelGatewayConstants.RESOURCE_MODE_CUSTOM_API_NAME.setParamItemnewGatewayParamFlowItem.setParseStrategySentinelGatewayConstants.PARAM_PARSE_STRATEGY_URL_PARAM.setFieldName\"key\".setMatchStrategySentinelGatewayConstants.PARAM_MATCH_STRATEGY_EXACT.setParseStrategySentinelGatewayConstants.PARAM_PARSE_STRATEGY_CLIENT_IP.setCount10.setIntervalSec60;GatewayRuleManager.loadRulesrules;}}```4.整合Swagger4.1.完善febsserversystemwww.kancloud.cn/mrbird/springcloud/1263707因为febsserversystem模块负责用户管理、角色管理、菜单管理、部门管理等模块的增删改查，所以这章将演示如何在febsserversystem模块里集成swagger，其他微服务系统要集成swagger照猫画虎就行了。集成MyBatisPlus配置p6spyp6spy用于在控制台中打印MyBatis执行的SQL。用户管理模块增删改查暴露服务数据校验PostMan测试4.2.接入Swaggerwww.kancloud.cn/mrbird/springcloud/1263708`io.springfox:springfoxswagger2:2.9.2``io.springfox:springfoxswaggerui:2.9.2`4.3.SwaggerOAuth2认证www.kancloud.cn/mrbird/springcloud/1263709我们在febsauth模块里配置一个新的Client，专门用于Swagger令牌发放。在febsauth模块的febsauth.properties配置文件里添加如下配置:```inifebs.auth.clients1.client=swaggerfebs.auth.clients1.secret=123456febs.auth.clients1.grantType=passwordfebs.auth.clients1.scope=test```5.整合第三方服务5.1.整合SpringBootAdminwww.kancloud.cn/mrbird/springcloud/1263712SpringBootAdmin通过`springbootstarteractuator`提供的REST接口实现了图形化的监控界面，包括应用的配置信息、Beans信息、环境属性、线程信息、JVM状况等。SpringBootAdmin分为服务端和客户端。客户端通过HTTP向服务端提供自身信息，服务端收集这些信息并以图形化界面的方式呈现。下面，SpringBootAdmin客户端简称为SBA客户端，SpringBootAdmin服务端简称为SBA服务端。整合SpringBootAdmin后，我们的系统架构如下所示:!系统架构图s2.ax1x.com/2019/08/31/mxQHHA.png=1024x`de.codecentric:springbootadminserver:2.1.6``de.codecentric:springbootadminserverui:2.1.6`5.2.SleuthZipkin链路追踪www.kancloud.cn/mrbird/springcloud/1263713一个复杂的业务流程通常会被拆分多个微服务系统来完成，微服务间通过Feign来通信。当业务流程足够复杂时，一个完整的HTTP请求调用链一般会经过多个微服务系统，要通过日志来跟踪一整个调用链变得不再那么简单。我们可以通过SpringCloudSleuth来解决这个问题。整合SpringCloudSleuth`org.springframework.cloud:springcloudstartersleuth`从日志里捞取traceId并追踪请求链路。借助zipkin实现使用图形化界面的方式追踪请求链路。整合Zipkin在整合Zipkin之前，我们需要先搭建RabbitMQ。RabbitMQ用于收集Sleuth提供的追踪信息，然后ZipkinServer从RabbitMQ里获取，这样可以提升性能。5.3.logback日志打印www.kancloud.cn/mrbird/springcloud/12637145.4.ELK日志收集www.kancloud.cn/mrbird/springcloud/1263715搭建ELK环境修改微服务日志配置我们分别在febsauth、febsgateway和febsserver模块的pom里引入`Logstash`依赖`net.logstash.logback:logstashlogbackencoder:6.1`，并增加logbackspring.xml配置：```xml<!输出到logstash的appender><appendername=\"logstash\"class=\"net.logstash.logback.appender.LogstashTcpSocketAppender\"><destination>192.168.33.10:4560</destination><encodercharset=\"UTF8\"class=\"net.logstash.logback.encoder.LogstashEncoder\"/></appender><rootlevel=\"info\"><appenderrefref=\"logstash\"/></root>```6.前端系统介绍FEBSCloud的前端FEBSCloudWeb采用vueelementadmin，它是一款基于vue和elementui实现的后台管理系统模板。6.1.封装Axioswww.kancloud.cn/mrbird/springcloud/12637186.2.Vue导航守卫www.kancloud.cn/mrbird/springcloud/12637196.3.动态路由构建www.kancloud.cn/mrbird/springcloud/12637206.4.处理用户登录www.kancloud.cn/mrbird/springcloud/1263721!登录流程s2.ax1x.com/2019/08/28/mHF6WF.png6.5.处理令牌刷新www.kancloud.cn/mrbird/springcloud/1263722我们在febsauth定义的令牌有效时间为86400秒（即24小时），过了24小时候令牌就失效了。假如令牌即将要失效时，用户还在使用系统，那么用户的某个操作可能进行了一半时，系统突然弹出登录过期提示，非常影响用户体验。要解决上面的问题，我们可以在令牌将要失效时，判断用户是否还在使用系统，如果是的话，我们可以偷偷地通过刷新令牌来获取一个新的访问令牌，存储到浏览器内存中。这样就可以在用户无感知的情况下，“延长”访问令牌的有效时间。因为我们系统的请求都是通过6.1节封装的Axios对象来完成的，并且我们在request.js里配置了请求拦截，所以我们刷新令牌的动作也可以在请求拦截器里完成，大致步骤如下图所示：!处理令牌刷新s2.ax1x.com/2019/08/28/mH8sDP.png6.6.自定义Vue权限指令www.kancloud.cn/mrbird/springcloud/1263723`<buttonvhaspermission=\"'user:add'\">新增用户</button>`7.微服务部署7.1.微服务Docker化www.kancloud.cn/mrbird/springcloud/12637267.2.使用DockerCompose部署www.kancloud.cn/mrbird/springcloud/12637278.微服务进阶8.1.令牌存储策略www.kancloud.cn/mrbird/springcloud/1277531RedisTokenStore在第一章搭建认证服务器的时候，我们使用的是RedisTokenStore令牌存储策略。使用这种策略时，用户的access_token将存储到Redis中，退出登录后，Redis中存储的令牌也会被清除。除了这种令牌存储策略外，Spring还提供了InMemoryTokenStore、JdbcTokenStore和JwtTokenStore三种存储策略：InMemoryTokenStore该策略将令牌存储到内存中，优点就是无需依赖第三方存储，对于开发小型服务是不错的选择；缺点是认证服务器故障重启后，之前存储的令牌就丢失。JdbcTokenStore顾名思义，该策略使用数据库来存储令牌。在使用这种策略之前，我们需要先准备好库表。SpringSecurityOAuth仓库可以找到相应的脚本，只需要使用到oauth_access_token和oauth_refresh_token数据表。JwtTokenStore前面三种存储策略生成的令牌都是使用UUID生成的无意义字符串，我们也可以使用JwtTokenStore生成JWT格式令牌。在febsauth模块下认证服务器配置类FebsAuthorizationServerConfigure中配置JwtTokenStore。8.2.使用CloudGateway搭建网关www.kancloud.cn/mrbird/springcloud/1263731这一节，我们将使用SpringCloudGateway构建一个全新的微服务网关，代替之前通过SpringCloudZuul构建的微服务网关。和Zuul相比，SpringCloudGateway具有如下优势：基于Reactor模型的WebFlux构建，运行在Netty上，具有更好的性能；可拓展性高，内置了非常丰富的转发规则，除此之外，我们也可以定义自己的转发规则。对于WebFlux不熟悉的同学可以在学完本节后阅读我的博文：mrbird.cc/tags/WebFlux/。`org.springframework.cloud:springcloudstartergateway`转发规则SpringCloudGateway两大核心概念为：谓词工厂和过滤器工厂，谓词工厂用于定义转发规则，过滤器工厂用于修改请求和响应。SpringCloudGateway内置的谓词工厂和过滤器工厂可以参考：cloud.spring.io/springcloudgateway/reference/html/gatewayrequestpredicatesfactories和cloud.spring.io/springcloudgateway/reference/html/gatewayfilterfactories。```ymlspring:cloud:gateway:routes:id:FEBSAuthuri:lb://FEBSAuthpredicates:Path=/auth/**filters:StripPrefix=1id:FEBSServerSystemuri:lb://FEBSServerSystempredicates:Path=/system/**filters:StripPrefix=1id:FEBSServertesturi:lb://FEBSServerTestpredicates:Path=/test/**filters:StripPrefix=1```定义全局过滤器8.3.使用AlibabaNacos注册中心www.kancloud.cn/mrbird/springcloud/12711338.4.使用AlibabaNacos存储配置www.kancloud.cn/mrbird/springcloud/1289434SpringCloudAlibabaNacos不但可以用于搭建微服务注册中心，还可以统一管理微服务配置，类似于SpringCloudConfig。Nacos数据持久化Nacos支持使用MySQL进行数据持久化。使用Nacos管理配置增加依赖`org.springframework.cloud:springcloudstarteralibabanacosconfig````ymlspring:application:name:FEBSAuthcloud:nacos:discovery:serveraddr:${nacos.url}:8001config:serveraddr:${nacos.url}:8001group:DEFAULT_GROUPprefix:febsauthfileextension:yaml```8.5.接入Prometheus+Grafana这节的目的是搭建一个多维度监控微服务的可视化平台，包括Docker容器监控、MySQL监控、Redis监控和微服务JVM监控等，并且在必要的情况下可以发送预警邮件。这节主要用到的组件有Prometheus、Grafana、alertmanager、node_exporter、mysql_exporter、redis_exporter、cadvisor。各自作用如下所示：1.Prometheus：获取、存储监控数据，供第三方查询；2.Grafana：提供Web页面，从Prometheus获取监控数据可视化展示；3.alertmanager：定义预警规则，发送预警信息；4.node_exporter：收集微服务端点监控数据；5.mysql_exporter：收集MySQL数据库监控数据；6.redis_exporter：收集Redis监控数据；7.cadvisor：收集Docker容器监控数据。8.6.整合skywalking分布式追踪www.kancloud.cn/mrbird/springcloud/1337996Skywalking是由国人吴晟开发的一款分布式追踪软件，后面成功孵化为Apache的顶级项目。Skywalking主要包括了分布式追踪、性能指标分析、应用和服务依赖分析等功能，使用体验后个人感觉比zipkin更为直观，是替代zipkin的一个不错的选择。Skywalking的主要结构图如下所示:!s2.ax1x.com/2019/10/20/Kutat0.png=1024x从上图可以看出Skywalking主要分为四个模块：agent、collector、webappui和storage。我们可以使用Skywalkingagent探针无侵入地接入SpringCloud应用，然后通过HTTP或者GRPC将应用数据采集到collector收集器。collector中的数据存储与storage，支持MySQL、H2、Elasticsearch等存储，最终这些数据集中在webappui以图形化的方式呈现。8.7.升级到Hoxton.RELEASEwww.kancloud.cn/mrbird/springcloud/14117359.K8S集群部署9.1.集群环境准备www.kancloud.cn/mrbird/springcloud/1426915这一章节，我们的目标是通过Kubernetes（下面简称k8s，因为k和s之间有8个字符，所以俗称k8s）部署一个高可用的FEBSCloud微服务权限系统，所以在此之前你需要掌握Kubernetes的基本知识。如果您还未曾接触过Kubernetes，可以通过我的博客mrbird.cc/tags/Kubernetes/或者购买《Kubernetes权威指南第4版》书籍学习。9.2.安装第三方服务www.kancloud.cn/mrbird/springcloud/1426916这一节我们需要安装的内容较多，包括Docker、DockerCompose、MySQL、Redis、ELK等软件。9.3.Kubeadm搭建K8S1.16.2集群www.kancloud.cn/mrbird/springcloud/1426917Kubernetes从1.4版本开始后就引入了kubeadm用于简化集群搭建的过程，在Kubernetes1.13版本中，kubeadm工具进入GA阶段，可用于生产环境Kubernetes集群搭建。本节将使用Kubeadm搭建Kubernetes1.16.2集群，宿主机使用9.1里搭建的master、node1、node2、node3四台虚拟机，即一主三从的K8S集群结构。9.4.NFS服务器搭建www.kancloud.cn/mrbird/springcloud/1426918在K8S中，我们虽然可以使用volume将容器内目录挂载到宿主机目录上，但由于Pod调度的不确定性，这种数据存储方式是不牢靠的。对于有状态的应用，我们希望无论Pod被调度到哪个节点上，它们的数据总能够完整地恢复，这时候我们就不能用volume挂载了，而应该使用“网络共享存储”。9.5.搭建Docker镜像仓库Harborwww.kancloud.cn/mrbird/springcloud/1426919在本地环境下（或者公司局域网），将Docker镜像推送到DockerHub速度比较慢，推荐的做法是安装一个第三方的Docker镜像仓库，这里推荐使用Harbor。Harbor是一款开源的Docker镜像存储仓库，其扩展了DockerDistribution，在此基础上添加了我们常用的功能，比如安全认证，RBAC用户权限管理，可视化页面操作等功能。9.6.K8S构建高可用Nacoswww.kancloud.cn/mrbird/springcloud/14269209.7.K8S构建FEBSCloud服务集群www.kancloud.cn/mrbird/springcloud/14269219.8.部署前端测试www.kancloud.cn/mrbird/springcloud/142692210.分布式事务研究10.1.分布式架构事务挑战www.kancloud.cn/mrbird/springcloud/145614310.2.分布式事务解决方案www.kancloud.cn/mrbird/springcloud/145614410.3.基于消息中间件RocketMQ方案（一）www.kancloud.cn/mrbird/springcloud/145614510.4.基于消息中间件RocketMQ方案（二）www.kancloud.cn/mrbird/springcloud/145614610.5.基于TXLCN方案www.kancloud.cn/mrbird/springcloud/145614710.6.基于阿里Seata方案10.6.www.kancloud.cn/mrbird/springcloud/1456148搭建SeataServerSeata是一款开源的分布式事务解决方案，致力于提供高性能和简单易用的分布式事务服务。Seata将为用户提供了AT、TCC、SAGA（适合业务流程长、业务流程多的情况，所以本节不演示）和XA（截至2020年1月1日，该功能Seata还在开发中，所以也不演示）事务模式，为用户打造一站式的分布式解决方案。", "operation/CentOS7惯用法.md": "TOC概述【教程】鸟哥的Linux私房菜cn.linux.vbird.org/linux_basic/linux_basic.phpLinux鸟哥（精选）www.cnblogs.com/crazylqy/category/1008178.htmlCentOS7安装Centos7安装Mysql5.7最全教程blog.csdn.net/weixin_43451430/article/details/115553108LinuxCentos7安装MongoDB（简单！详细！）juejin.cn/post/6844903828811153421CentOS7安装Oracle11g―静默安装blog.csdn.net/oschina_41140683/article/details/81510709CentOS7升级Python2.x到3.xwww.cnblogs.com/lwfblog/p/8182975.htmlCentos7上安装dockerblog.csdn.net/xaccpJ2EE/article/details/117769259Linux的文件权限与目录配置**使用者与群组**!_v_images/20191118210432.png帐号>/etc/passwd密码>/etc/shadowgroup>/etc/group**文件属性**!_v_images/20191118210454.png系统默认语系>/etc/sysconfig/i18n`改变文件属怅不权限`chgrp：改变所属群组>chgrpgroupnamefilenamechown：改变拥有者>chownR账号名称filename/dir;chownR账号名称:组名filename/dirchmod：改变权限,SUID,SGID,SBIT等r:4w:2x:1```shellchmod777.bashrcchmodu/g/o/a+//=rwxfilename/dirchmodu=rwx,go=rx.bashrc```将权限去掉而保留已存在的权限？如：要拿掉全部人的可执行权限`chmodax.bashrc`!_v_images/20191118210639.png**Linux更改文件拥有者|chown命令用法**www.isstudy.com/linux/4123.htmlchownR账户名称：用户组名称、文件或目录参数：R：进行递归的持续更改，即将同子目录下的所有文件、目录都更新问这个用户组。通常用在更改某一目录的情况。范例：```shellroot@linux~chownbininstall.logroot@linux~lsClrwrr1binusers24343Jun2308:33install.logroot@linux~chownroot:rootinstall.logroot@linux~lslrwrr1rootroot24343Jun2308:33install.log```文件与目录管理Linux文件查找www.cnblogs.com/bluestorm/p/10283869.html鸟哥私房菜第七章、Linux文件与目录管理www.cnblogs.com/crazylqy/p/6901362.htmlfind```shellfind.name.gradleexecrmrf{}\\;find.typefexeclsl{}\\;```linux解压缩命令Linux操作系统中，*.zip、*.tar、*.tar.gz、*.tar.bz2、*.tar.xz、*.jar、*.7z等格式的压缩与解压www.cnblogs.com/yejianfei/p/3351626.htmlLINUX常用的压缩与解压缩命令www.cnblogs.com/xiaochina/p/5801959.html\"TAR命令详解\"|扩展名|解压命令|||||*.tar,*.tar.xz|tarCxvf||*.tar.gz,*.tgz|tarCxzf||*.tar.bz2|tarCxjf|Linux统计文件夹下文件个数及目录个数1.统计文件夹下文件的个数`lsl|grep\"^\"|wcl`2.统计文件夹下目录的个数`lsl|grep\"^d\"|wcl`3.统计文件夹下文件个数，包括子文件`lslR|grep\"^\"|wcl`4.统计文件夹下目录个数，包括子目录`lslR|grep\"^d\"|wcl`wc命令：WordCount功能为统计指定文件中的字节数、字数、行数，并将统计结果显示输出。wclcwc统计字节数l统计行数m统计字符数，此标志不能与c标志一起使用w统计字数。一个字定义为由空白、跳格或换行字符分隔的字符串CentOS常用命令使用ps/awk杀死进程```shell!/bin/bashGrabsandkillaprocessfromthepidlistthathasthewordmyapp67pid=`psaux|grepmyapp|awk'{print$2}'`kill9$pid```查看程序端口占用情况netstatanp|grepportno即：netstatCapn|grep8080其中最后一栏是_PID/Programname_CentOS7查看硬盘情况`lsblk`查看分区和磁盘`dfh`查看分区使用情况`fdiskl`分区工具查看分区信息`cfdisk/dev/sda`查看分区`blkid`查看硬盘label（别名）`dush*|sorth`查看目录的磁盘占用情况ssh证书登录1.在windows下，创建`~\\.ssh`目录；2.在`~\\.ssh`下，执行`sshkeygentrsa`，生成私钥`id_rsa`,公钥`id_rsa.pub`;3.将公钥`id_rsa.pub`拷贝到linux的`~/.ssh`目录下，改名为`authorized_keys`；4.修改ssh配置是否开启证书登录:`vi/etc/ssh/sshd_config````shellRSAAuthenticationyes是否允许用户自行使用成对的密钥系统进行登入行为version2PubkeyAuthenticationyes是否允许用户自行使用成对的密钥系统进行登入行为AuthorizedKeysFile公钥数据路径用户目录下.ssh/authorized_keys```修改完成后，`sudosystemctlrestartsshd`重启ssh服务；5.登录服务器:`sshi~\\.ssh\\id_rsagjh@10.19.12.12`linux下ssh客户端以及sftp文件传送的一般用法linux下ssh客户端以及sftp文件传送的一般用法以前在windows上，我要用ssh连接服务器，我一般都用putty。这段时间一直在linux上工作，由于linux上一般都自带ssh客户端，也就是ssh命令了，此外还有一个命令sftp，用来安全的传送文件，今天为了管理linux服务器，用到了linux下的这两个命令行工具，现就其最常用的用法描述如下：假定服务器ip为61.145.34.33，ssh服务的端口号为9186，服务器上有个用户为sshuser；用ssh登录服务器的命令为：>sshlsshuser61.145.34.33p9186回车后，如果是第一次登录，会提示你一条认证信息，你键入yes即可，接着输入服务器sshuser的密码登录即可；用sftp登录服务器的命令为：>sftpoPort=9186sshuser@61.145.34.33回车后，输入服务器sshuser的密码登录，然后会显示一个sftp>的环境，这个时候，键入help你会看到所有命令的帮助，跟ftp命令行工具非常类似，比如get,put等等。至于这两个命令行的其他用法，可参看其联机手册...修改home下的中文目录为英文目录在终端下输入命令：exportLANG=en_USxdguserdirsgtkupdate这个时候会弹出一个配置界面，提示是否将中文目录切换为英文目录。选中不再提示，确定。系统会删除没有内容的中文目录，而有内容的目录会保持。并创建8个相应的英文目录如下：“Desktop”、“Download”、“Templates”、“Public”、“Documents”、“Music”、“Pictures”、“Videos”。此时，您在“位置”里看到的常用中文目录已经变成英文目录。只需要将原中文目录的内容拷贝到相应英文目录，并删除中文目录即可。接下来再执行exportLANG=zh_CN.UTF8以显示中文。OK，行了，三个命令就行。可就为一次改变要记三个命令，也麻烦。能不能不记啦。当然可以，那您注销，然后在登录界面选择语言种类为“Englishunitedstates”，进入系统后你就发现整个系统都变成English了，同时还会弹出一个对话框提示是否切换用户目录，选择“Updatenames”，确认并再注销，在登录界面选择“汉语”，进入系统后事个系统又变成了Chinese了，同样会弹出同一个对话框，选择\"Keepoldnames\"。OK，大功告成，一个命令都不需要记，就可完成您想要的结果。分区方案/boot200MLinux的内核及引导系统程序所需要的文件，比如vmlinuzinitrd.img文件都位于这个目录中。在一般情况下，GRUB或LILO系统引导管理器也位于这个目录；启动撞在文件存放位置，如kernels，initrd，grub。/100G用于存储系统文件/home200G用户工作目录；个人配置文件，如个人环境变量等；所有账号分配一个工作目录。swap是内存的两倍nohup命令该命令的一般形式为：`nohupcommand&`如果使用nohup命令提交作业，那么在缺省情况下该作业的所有输出都被重定向到一个名为nohup.out的文件中，除非另外指定了输出文件：`nohupcommand>myout.file2>&1&`在上面的例子中，输出被重定向到myout.file文件中。使用jobs查看任务。使用fg%n关闭。添加sudoer1）进入超级用户模式。也就是输入\"su\",系统会让你输入超级用户密码，输入密码后就进入了超级用户模式。（当然，你也可以直接用root用）2）添加文件的写权限。也就是输入命令\"chmodu+w/etc/sudoers\"。3）编辑/etc/sudoers文件。也就是输入命令\"vim/etc/sudoers\",输入\"i\"进入编辑模式，找到这一行：\"rootALL=ALLALL\"在起下面添加\"xxxALL=ALLALL\"这里的xxx是你的用户名，然后保存（就是先按一下Esc键，然后输入\":wq\"）退出。4）撤销文件的写权限。也就是输入命令\"chmoduw/etc/sudoers\"。CentOS7自启动设置参考：CentOS7.x设置自定义开机启动,添加自定义系统服务blog.csdn.net/looksun/article/details/50668492CentOS7自启服务分为两种：系统（system）和用户（user），目录分别为：/usr/lib/systemd/system和/usr/lib/systemd/user。服务文件以.service结尾，常用命令如下：```shell启动nginx服务systemctlstartnginx.service设置开机自启动（service文件在/etc/systemd/system/下创建，enbale后，在/etc/systemd/system/建立链接文件）systemctlenablenginx.serviceroot@zhifei~systemctlenablejiraCreatedsymlinkfrom/etc/systemd/system/multiuser.target.wants/jira.serviceto/etc/systemd/system/jira.service.停止开机自启动systemctldisablenginx.service查看服务当前状态systemctlstatusnginx.service重新启动服务systemctlrestartnginx.service查看所有已启动的服务systemctllistunitstype=service```CentOS7防火墙及端口设置防火墙服务默认使用的是firewalld，而不是iptables。启动/停止iptables或firewalld使用：systemctlenable/start/stopiptables/firewalld参考：禁用firewalld&开启iptables&systemctl使用简介blog.csdn.net/qq_34409701/article/details/52777197CentOS7使用firewalld打开关闭防火墙与端口www.cnblogs.com/moxiaoan/p/5683743.html使用firewalld时，开放端口设置如下：```shell启动：systemctlstartfirewalld查看状态：systemctlstatusfirewalld停止：systemctlstopfirewalld禁用：systemctldisablefirewalldfirewallcmdzone=publicpermanentaddport=80/tcp命令含义：zone作用域permanent永久生效，没有此参数重启后失效addport=80/tcp添加端口，格式为：端口/通讯协议查看所有打开的端口：firewallcmdzone=publiclistports查看firewallcmdzone=publicqueryport=80/tcp删除firewallcmdzone=publicremoveport=80/tcppermanent重启防火墙firewallcmdreload```Centos7网络配置centos7取消了ifconfig命令，使用ipaddr命令查看IP地址修改文件：/etc/sysconfig/networkscripts/ifcfgenp2s0```shellTYPE=\"Ethernet\"BOOTPROTO=\"static\"DEFROUTE=\"yes\"IPV4_FAILURE_FATAL=\"no\"IPV6INIT=\"yes\"IPV6_AUTOCONF=\"yes\"IPV6_DEFROUTE=\"yes\"IPV6_FAILURE_FATAL=\"no\"IPV6_ADDR_GEN_MODE=\"stableprivacy\"NAME=\"enp2s0\"UUID=\"1b2b9785959a4c35a2a804ab32ef2855\"DEVICE=\"enp2s0\"ONBOOT=\"yes\"PEERDNS=\"yes\"PEERROUTES=\"yes\"IPV6_PEERDNS=\"yes\"IPV6_PEERROUTES=\"yes\"IPV6_PRIVACY=\"no\"IPADDR=192.168.31.200GATEWAY=192.168.31.1NETMASK=255.255.255.0NM_CONTROLLED=noDNS1=192.168.31.1ZONE=public```CentOS的SSH安装www.cnblogs.com/kaid/p/7985568.html1.检查是否安装SSH服务端软件包：rpmqa|grepopenssh若显示结果中包括opensshserver\\*.则已安装，直接启动2.安装缺失的软件sudoyuminstallopenssh\\*3.注册、启动sshd服务systemctlenablesshdsystemctlstartsshd或者servicesshdstart4.开启防火墙的22端口：具体防火墙使用可以参见：www.cnblogs.com/moxiaoan/p/5683743.htmlfirewallcmdzone=publicaddport=22/tcppermanentservicefirewalldrestart5.测试：本机测试：sshusername@localhost测试，（但必须要先安装linux的ssh客户端软件包）yum&rpmyum的详细使用方法blog.csdn.net/yqj234/article/details/82990271RPM简介与基本使用www.cnblogs.com/harrymore/p/8665154.htmlCentOS6&7忘记root密码的修改方法www.linuxidc.com/Linux/201801/150211.htm升级内核查看内核版本unamer通过yum升级内核yuminstallykernel删除多余的kernel```shell查看系统中全部的内核RPM包:rpmqa|grepkernelerlangkernel18.3.31.el7.x86_64kerneldevel3.10.0123.el7.x86_64abrtaddonkerneloops2.1.1136.el7.centos.x86_64kernel3.10.0327.28.3.el7.x86_64kernel3.10.0123.el7.x86_64删除旧内核的RPM包yumremovexxxx重启系统，一定不要忘记，否则不生效。reboot```", "operation/Docker使用指南.md": "Docker容器进入的4种方式www.cnblogs.com/xhyan/p/6593075.html1.查看docker信息（version、info）```shell查看docker版本$dockerversion显示docker系统的信息$dockerinfo```2.对image的操作（search、pull、images、rmi、history）```shell检索image$dockersearchimage_name下载image$dockerpullimage_name列出镜像列表;a,all=falseShowallimages;notrunc=falseDon'ttruncateoutput;q,quiet=falseOnlyshownumericIDs$dockerimages删除一个或者多个镜像;f,force=falseForce;noprune=falseDonotdeleteuntaggedparents$dockerrmiimage_name显示一个镜像的历史;notrunc=falseDon'ttruncateoutput;q,quiet=falseOnlyshownumericIDs$dockerhistoryimage_name```3.启动容器（run）docker容器可以理解为在沙盒中运行的进程。这个沙盒包含了该进程运行所必须的资源，包括文件系统、系统类库、shell环境等等。但这个沙盒默认是不会运行任何程序的。你需要在沙盒中运行一个进程来启动某一个容器。这个进程是该容器的唯一进程，所以当该进程结束的时候，容器也会完全的停止。```shell在容器中运行\"echo\"命令，输出\"helloword\"$dockerrunimage_nameecho\"helloword\"交互式进入容器中$dockerrunitv/root/software/:/mnt/software/image_name/bin/bashi：表示以“交互模式”运行容器；t：表示容器启动后会进入其命令行；v：表示需要将本地哪个目录挂载到容器中，格式：v<宿主机目录>:<容器目录>；在容器中安装新的程序$dockerrunimage_nameaptgetinstallyapp_nameNote：在执行aptget命令的时候，要带上y参数。如果不指定y参数的话，aptget命令会进入交互模式，需要用户输入命令来进行确认，但在docker环境中是无法响应这种交互的。aptget命令执行完毕之后，容器就会停止，但对容器的改动不会丢失。$dockerrundp22p58080:8080learn/tutorial/usr/sbin/sshdDd：表示以“守护模式”执行命令或脚本，此时Tomcat控制台不会出现在输出终端上。p：将容器的8080端口映射到宿主机的58080端口。name：表示容器名称，用一个有意义的名称命名即可。```4.查看容器（ps）```shell列出当前所有正在运行的container$dockerps列出所有的container$dockerpsa列出最近一次启动的container$dockerpsl在docker容器内查看ip$ipaddrshoweth0$iproute```5.保存对容器的修改（commit）当你对某一个容器做了修改之后（通过在容器中运行某一个命令），可以把对容器的修改保存下来，这样下次可以从保存后的最新状态运行该容器。```shell保存对容器的修改;a,author=\"\"Author;m,message=\"\"Commitmessage$dockercommitIDnew_image_nameNote：image相当于类，container相当于实例，不过可以动态给实例安装新软件，然后把这个container用commit命令固化成一个image。```6.对容器的操作（rm、stop、start、kill、logs、diff、top、cp、restart、attach）```shell删除所有容器$dockerrm`dockerpsaq`删除单个容器;f,force=false;l,link=falseRemovethespecifiedlinkandnottheunderlyingcontainer;v,volumes=falseRemovethevolumesassociatedtothecontainer$dockerrmName/ID停止、启动、杀死一个容器$dockerstopName/ID$dockerstartName/ID$dockerkillName/ID从一个容器中取日志;f,follow=falseFollowlogoutput;t,timestamps=falseShowtimestamps$dockerlogsName/ID列出一个容器里面被改变的文件或者目录，list列表会显示出三种事件，A增加的，D删除的，C被改变的$dockerdiffName/ID显示一个运行的容器里面的进程信息$dockertopName/ID从容器里面拷贝文件/目录到本地一个路径$dockercpName:/container_pathto_path$dockercpID:/container_pathto_path重启一个正在运行的容器;t,time=10Numberofsecondstotrytostopforbeforekillingthecontainer,Default=10$dockerrestartName/ID进入一个已经在运行的容器$dockerexecit775c7c9ee1e1/bin/bashattachAttachlocalstandardinput,output,anderrorstreamstoarunningcontainer.这是一个过时的命令，不建议使用$dockerattachID```7.保存和加载镜像（save、load）当需要把一台机器上的镜像迁移到另一台机器的时候，需要保存镜像与加载镜像。```shell保存镜像到一个tar包;o,output=\"\"Writetoanfile$dockersaveimage_nameofile_path加载一个tar包格式的镜像;i,input=\"\"Readfromatararchivefile$dockerloadifile_path机器a$dockersaveimage_name>/home/save.tar使用scp将save.tar拷到机器b上，然后：$dockerload</home/save.tar```8、登录registryserver（login）```shell登陆registryserver;e,email=\"\"Email;p,password=\"\"Password;u,username=\"\"Username$dockerlogin```9.发布image（push）```shell发布docker镜像$dockerpushnew_image_name```10.根据Dockerfile构建出一个容器```shellbuildnocache=falseDonotusecachewhenbuildingtheimageq,quiet=falseSuppresstheverboseoutputgeneratedbythecontainersrm=trueRemoveintermediatecontainersafterasuccessfulbuildt,tag=\"\"Repositorynameandoptionallyatagtobeappliedtotheresultingimageincaseofsuccess$dockerbuildtimage_nameDockerfile_path```使容器自启动`dockerupdaterestart=always81bcb97c4f5e`参数详解docker命令参数详解dockeruseageofdockerD默认false允许调试模式debugmodeH默认是unix:///var/run/docker.socktcp://host:port来绑定或者unix:///path/to/socket来使用二进制文件的时候，当主机iphost=0.0.0.0,端口port=4243或者path=/var/run/docker.sock是缺省值，做为默认值来使用apienablecors默认flase允许CORSheader远程apib默认是空，附加在已存在的网桥上，如果是用'none'参数，就禁用了容器的网络bip默认是空，使用提供的CIDR（ClasslessInterDomainRouting无类型域间选路）标记地址动态创建网桥dcoker0,和b参数冲突d默认false允许进程模式daemonmodedns默认是空，使docker使用指定的DNS服务器g默认是\"/var/lib/docker\":作为docker使用的根路径icc默认true，允许intercontainer来通信ip默认\"0.0.0.0\"：绑定容器端口的默认Ip地址iptables默认true禁用docker添加iptables规则mtu默认1500:设置容器网络传输的最大单元mtup默认是/var/run/docker.pid进程pid使用的文件路径r默认是true重启之前运行的容器s默认是空，这个是docker运行是使用一个指定的存储驱动器v默认false打印版本信息和退出dockerrun命令详解Usage:dockerrunOPTIONSIMAGE:TAGCOMMANDARG...Runacommandinanewcontainera=map:附加标准输入、输出或者错误输出c=0:共享CPU格式（相对重要）cidfile=\"\":将容器的ID标识写入文件d=false:分离模式，在后台运行容器，并且打印出容器IDe=:设置环境变量h=\"\":容器的主机名称i=false:保持输入流开放即使没有附加输入流privileged=false:给容器扩展的权限m=\"\":内存限制格式:<number><optionalunit>,unit单位=b,k,morgn=true:允许镜像使用网络p=:匹配镜像内的网络端口号rm=false:当容器退出时自动删除容器不能跟d一起使用t=false:分配一个伪造的终端输入u=\"\":用户名或者IDdns=:自定义容器的DNS服务器v=:创建一个挂载绑定：hostdir:containerdir:rw|ro.如果容器目录丢失，docker会创建一个新的卷volumesfrom=\"\":挂载容器所有的卷entrypoint=\"\":覆盖镜像设置默认的入口点w=\"\":工作目录内的容器lxcconf=:添加自定义lxcconf=\"lxc.cgroup.cpuset.cpus=0,1\"sigproxy=true:代理接收所有进程信号eveninnonttymodeexpose=:让你主机没有开放的端口link=\"\":连接到另一个容器name:aliasname=\"\":分配容器的名称，如果没有指定就会随机生成一个P=false:Publishallexposedportstothehostinterfaces公布所有显示的端口主机接口参考docker详细的基础用法www.linuxeye.com/Linux/2019.html", "operation/Fedora使用记录.md": "Add国内yum源```shellcd/etc/yum.repos.dwgetmirrors.163.com/.help/fedora163.repowgetmirrors.163.com/.help/fedoraupdates163.repoyummakecache```增加FZUG源一、安装FZUG源FZUG源安装指南github.com/FZUG/repo/wiki/%E6%B7%BB%E5%8A%A0FZUG%E6%BA%90`dnfinstallmirrors.tuna.tsinghua.edu.cn/fzug/free/30/x86_64/fzugrelease300.1.noarch.rpm`Fedora31用户，暂时可用以上链接。虽然版本叫30,但是在31的系统上是能够正确选择Fedora31的仓库的。二、Fedora安装rpmfusion源方法1、下载两个文件：　　1）download1.rpmfusion.org/free/fedora/rpmfusionfreereleasestable.noarch.rpm　　2）download1.rpmfusion.org/nonfree/fedora/rpmfusionnonfreereleasestable.noarch.rpm2、安装这两个文件```shellyuminstallrpmfusionfreereleasestable.noarch.rpmyuminstallrpmfusionnonfreereleasestable.noarch.rpm```3、生成缓存:yummakecache安装JDK打开dnfdragora，搜索JDK，安装java1.8.0openjdkdevel即可安装AmazonCorrettoJDKdocs.aws.amazon.com/corretto/latest/corretto8ug/downloadslist.htmlsudoyuminstallyjava1.8.0amazoncorretto*.rpmFedora27安装输入法安装fcitx```shellsudodnfinstallfcitxfcitxlibpinyinfcitxqt4kcmfcitxdnfinstallfcitxconfigtool```安装好以后，运行fcitx，再运行fcitxconfigtool。在配置选项里加入输入法。如果系统语言为英文，记得勾选掉下面的“OnlyShowCurrentLanguage”选项。然后点击应用。运行一下命令来切换系统默认输入法至fcitx：`imsettingsswitchfcitx`此处会有报错，请忽略，然后重启电脑。安装完成。修改home下的中文目录为英文目录安装`xdguserdirsgtk``yuminstallyxdguserdirsgtk`切换英文Lang打开终端，在终端下输入命令：```shellexportLANG=en_USxdguserdirsgtkupdate```这个时候会弹出一个配置界面，提示是否将中文目录切换为英文目录。选中不再提示，确定。系统会删除没有内容的中文目录，而有内容的目录会保持。并创建8个相应的英文目录。此时，您在“位置”里看到的常用中文目录已经变成英文目录。只需要将原中文目录的内容拷贝到相应英文目录，并删除中文目录即可。恢复中文Lang`exportLANG=zh_CN.UTF8`删除多余内核删除旧内核```shell$rpmqa|grepkernel$yumremovekernelcore4.18.0kerneldevel4.18.0kerneltoolslibs4.18.0kernelheaders4.18.0```安装wechat使用FZUG源，打开dnfdragora，搜索wechat，安装即可安装wps下载wps：linux.wps.cn/安装：`yuminstallwpsoffice11.1.0.96621.x86_64.rpm`安装qq下载：im.qq.com/linuxqq/download.html```shellsudoyuminstallgtk2.x86_64centossudorpmivhlinuxqq_1.0.1b1100_mips64el.rpm```FTP客户端FileZilla在dnfdragora中安装SSH客户端EasySSH方法11、下载easyssh*.rpm版本download.copr.fedorainfracloud.org/results/deadmozay/easyssh/fedora32x86_64/00865362easyssh/2、安装：`yuminstallyeasyssh*.rpm`方法2```shellcd/etc/yum.repo.d/wgetcopr.fedorainfracloud.org/coprs/deadmozay/easyssh/repo/fedora32/deadmozayeasysshfedora32.repoyuminstallyeasyssh```openbox分屏lxqt默认使用openbox窗口管理器。openbox可以通过配置keybind实现分屏。askubuntu.com/questions/1182097/lubuntu19102004howtotilewindowsthewindowtilingsectionismissingwww.allartsoftworks.com/it/articles/howtoresizesplitwindowslxdelubuntuopenboxhowtoresizewindowswithhotkeysunderlubuntulxde/编辑`~/.config/openbox/lxqtrc.xml`，加入以下内容。```xml<!Lubuntuspecific.Keybindingsforwindowtiling><!HalfLeftScreen><keybindkey=\"CWLeft\"><actionname=\"UnmaximizeFull\"/><actionname=\"MoveResizeTo\"><x>0</x><y>0</y><height>100%</height><width>50%</width></action></keybind><!HalfRightScreen><keybindkey=\"CWRight\"><actionname=\"UnmaximizeFull\"/><actionname=\"MoveResizeTo\"><x>0</x><y>0</y><height>100%</height><width>50%</width></action></keybind><!HalfUpperScreen><keybindkey=\"CWUp\"><actionname=\"UnmaximizeFull\"/><actionname=\"MoveResizeTo\"><x>0</x><y>0</y><width>100%</width><height>50%</height></action></keybind><!HalfLowerScreen><keybindkey=\"CWDown\"><actionname=\"UnmaximizeFull\"/><actionname=\"MoveResizeTo\"><x>0</x><y>0</y><width>100%</width><height>50%</height></action></keybind>```配置完后，在终端执行`openboxreconfigure`是配置生效。IDEA显示RunDashboard窗口在Settings>Plugins中增加SpringBoot支持在.idea下的workspace.xml中，找到`<componentname=\"RunDashboard\">`，加入：```shell<optionname=\"configurationTypes\"><set><optionvalue=\"SpringBootApplicationConfigurationType\"/></set></option>```重新打开项目，在View>ToolsWindows下，可以看到`RunDashboard`，运行SpringBoot程序就可以看到这个窗口了。yuminstallredis安装`yuminstallredis`启动`serviceredisstart`或`systemctlstartredis`查看redis安装时创建的文件`rpmqa|grepredis``rpmqlredis`查看redis版本：`rediscliversion`设置为开机自动启动`chkconfigredison`或`systemctlenableredis.service`开启Redis远程登录连接redis默认只能localhost访问，所以需要开启远程登录。解决方法如下：在redis的配置文件/etc/redis.conf中将bind127.0.0.1改成了bind0.0.0.0然后要配置防火墙开放端口6379连接redis```shellgjh@localhostnacos$rediscli127.0.0.1:6379>setkey1\"helloworld\"OK127.0.0.1:6379>getkey1\"helloworld\"127.0.0.1:6379>delkey1integer1127.0.0.1:6379>getkey1nil```yum用法查询使用yumsearch<term>more_terms命令，能够在已启用的软件包仓库中，对所有软件包的名称、描述和概述中进行搜索，最后，yum会以显示符合合条件的搜索结果列表。yumlist以及相关的一些命令则能够为你提供有关软件包、软件包集和软件仓库的信息。所有的yumlist命令都能够使用glob表达式作为参数，对输出结果进行过滤。在glob表达式中，你可以使用*代表任何数量个字符，使用?代表任何一个字符。通过后面的示例，你可以对glob表达式有些简单的认识。yumlist<glob_expr>more_glob_exprs──列出所有符合glob表达式的软件包yumlistall──列出所有已安装的和可用的软件包yumlistinstalled──列出所有已经安装在系统中的软件包。输出结果的最右边一列是取得该软件包的软件仓库。标识为installed的软件包则说明它是做为系统基本组件而预安装的。yumlistavailable──列出所有启用的软件仓库中可用的软件包yumgrouplist──列出所有软件包组yumrepolist──列出所有启用的软件仓库的ID，名称及其包含的软件包的数量yuminfo<package_name>more_names命令可查看一个或多个软件包的信息此处同样可以应用glob表达式。install&uninstallyuminstallsoftwarename安装yumremovesoftwarename卸载软件yumreinstallsoftwarename重新安装yumcleanall清空yum缓存升级yumcheckupdate:可以了解系统中哪些已安装的包当前有更新yumupdate：升级所有包同时也升级软件和系统内核yumupgrade：只升级所有包，不升级软件和系统内核yumhistory查看系统软件改变历史yum使用upgrade选项，等价于打开obsoletes配置的yumupdate。而默认中/etc/yum.conf配置文件obsoletes是打开的，因此这两个指令选项是等价的。这是一个yum缓存配置文件的示例，obsoletes定义了更新时处理软件包的取代关系，简单来讲，1表示更新旧的rpm包的同时会删除旧包，0表示更新的时候不会删除旧包，因此，yumupdate和yumupgrade的功能都是一样的，都是将需要更新的package更新到源中的最新版。唯一不同的是，yumupgrade会删除旧版本的package，而yumupdate则会保留obsoletes=0。生产环境中建议使用yumupdate，防止因为替换，导致旧的软件包依赖出现问题。npm错误`使用npmstart影响项目出现Error:ENOSPC:Systemlimitfornumberoffilewatchersreached,watch`原来在fedorac，entos，ubuntu等系统中，由于gulpserve跟踪项目的文件数有限制，必须要设置一下，解除设置才可以继续跟踪。还有可能是因为gulp的watch需要监听很多文件的改动，但是fedora，ubuntu系统的文件句柄其实是有限制的，因此可以使用下面的命令解除`echofs.inotify.max_user_watches=524288|sudoteea/etc/sysctl.conf&&sudosysctlp`挂载VMWare的共享目录www.cnblogs.com/skyheaving/p/12286513.html打开`/etc/fuse.conf`的`user_allow_other`注释在`/etc/fstab`文件中，添加`.host:/D/home/gjh/ddfuse.vmhgfsfuseallow_other,max_write=61440,defaults00`PS:`max_write=61440`的作用是防止不能写入稍大文件。立即生效：`mounta`卸载`umount/mnt/hgfs`安装sublime按照官网的指导安装。www.sublimetext.com/docs/3/linux_repositories.htmldnf```shellInstalltheGPGkey:sudorpmvimportdownload.sublimetext.com/sublimehqrpmpub.gpgSelecttheStablechanneltouse:sudodnfconfigmanageraddrepodownload.sublimetext.com/rpm/stable/x86_64/sublimetext.repoUpdatednfandinstallSublimeTextsudodnfinstallsublimetext```破解sublimetextBuild3211最详细的安装方法www.codenong.com/js65a10209118f/保存git账号密码1.在~/下，touch创建文件.gitcredentials,用vim编辑此文件，输入内容格式：touch.gitcredentialsvim.gitcredentials在里面按“i”然后输入：{username}:{password}@github.com比如account:password@github.com2.在终端下执行gitconfigglobalcredential.helperstore3.可以看到~/.gitconfig文件，会多了一项：credentialhelper=storeFedora使用PCManFM无法启动xterm：`sudolns/usr/bin/lxterminal/usr/bin/xterm`maven私服不能下载snapshots依赖```xml<profiles><profile><!根据仓库id激活下面的配置><id>xxnexus</id><activation><activeByDefault>true</activeByDefault></activation><repositories><repository><id>xxnexus</id><!私服地址><url>xx.xx.xx.xx:8081/repository/xx_group/</url><releases><enabled>true</enabled></releases><snapshots><enabled>true</enabled></snapshots></repository></repositories></profile></profiles>```开始菜单修改注意几个目录和文件。`/usr/share/applications/`下的`.desktop`文件和`mimeinfo.cache`文件`~/.local/share/applications/`下的`.desktop`文件和`mimeinfo.cache`文・件`/etc/gnome/defaults.list`和`~/.local/share/applications/default.list`文件保存的是文件的打开方式。find的用法实例将目前目录及其子目录下所有延伸档名是c的文件列出来。`find.name\"*.c\"`将目前目录其其下子目录中所有一般文件列出`find.typef`将目前目录及其子目录下所有最近20天内更新过的文件列出・`find.ctime20`查找/var/log目录中更改时间在7日以前的普通文件，并在删除之前询问它们：`find/var/logtypefmtime+7okrm{}\\;`查找前目录中文件属主具有读、写权限，并且文件所属组的用户和其他用户具有读权限的文件：`find.typefperm644execlsl{}\\;`为了查找系统中所有文件长度为0的普通文件，并列出它们的完整路径：`find/typefsize0execlsl{}\\;`", "operation/Hadoop学习.md": "Hadoop管理员的十个最佳实践1.选择ClouderaCDH部署你的Cluster动机2.Hadoop集群配置与管理3.开启SecondaryNameNode4.使用Ganglia和Nagios监控你的集群5.设置好内存至关重要6.管理员玩转MapReduce7.NameNodeHA8.使用firewall阻止坏人进入9.开启垃圾箱trash功能10.去社区寻找帮助!_v_images/20191129172125.png", "operation/Memcached学习.md": "特点使用简单的基于文本行的协议基于libevent的事件处理libevent是个程序库，它将Linux的epoll、BSD类操作系统的kqueue等事件处理功能封装成统一的接口。内置内存存储方式memcached不互相通信的分布式原理hash算法生成hashKey二级列散维护Data两个核心组件服务端MS客户端MCJAVAMemCache史无前例的详细讲解！看完包精通MEMCACHE！blog.csdn.net/hjm4702192/article/details/7894080分布式缓存Memcachedblog.sina.com.cn/s/blog_493a845501013ei0.html淘宝开放平台缓存设计getpocket.com/a/read/169855716!_v_images/20191129172107.png", "operation/Nginx反向代理.md": "Location指令URI匹配规则Nginx的location规则：优先级和路径替换blog.csdn.net/tzy233/article/details/79780444规则proxy_pass的目标地址，默认不带/，表示只代理域名，url和querystring部分不会变（把请求的path拼接到proxy_pass目标域名之后作为代理的URL）如果在目标地址后增加/，则表示把path中location匹配成功的部分剪切掉之后再拼接到proxy_pass目标地址比如请求/a/b.html```htmllocation/a{proxy_passserver;}location/a{proxy_passserver/;}```如上两个匹配成功后，实际代理的目标url分别是server/a/b.html把/a/b.html拼接到server之后server/b.html把/a/b.html的/a去掉之后，拼接到server/之后反向代理VS正向代理!_v_images/20191129175620.png!_v_images/20191129175628.png正向代理中，proxy和client同属一个LAN；它是代理客户端，为客户端收发请求，使真实客户端对服务器不可见。其是**从内到外**。反向代理中，proxy和server同属一个LAN；它是代理v服务器，为服务器收发请求，使真实服务器对客户端不可见。\"反向\"这个词在这儿的意思其实是指方向相反，即代理把来自外网client的请求forward到内网server，**从外到内**。因为服务对象和自身角色不同，所以刚好是相反的。反向代理两种用途1、作内容服务器的替身!_v_images/20191129175636.png2、作为内容服务器的负载均衡器可以在一个组织内使用多个代理服务器来平衡各Web服务器间的网络负载。在此模型中，可以利用代理服务器的高速缓存特性，创建一个用于负载平衡的服务器池。此时，代理服务器可以位于防火墙的任意一侧。如果Web服务器每天都会接收大量的请求，则可以使用代理服务器分担Web服务器的负载并提高网络访问效率。对于客户机发往真正服务器的请求，代理服务器起着中间调停者的作用。代理服务器会将所请求的文档存入高速缓存。如果有不止一个代理服务器，DNS可以采用“循环复用法”选择其IP地址，随机地为请求选择路由。客户机每次都使用同一个URL，但请求所采取的路由每次都可能经过不同的代理服务器。!_v_images/20191129175645.png", "operation/WSL2.md": "TOCadamtheautomator.com/windowssubsystemforlinux/安装influxdb2dockerrundp8085:8086name=\"dyinfluxdb2\"\\v$PWD/data:/var/lib/influxdb2\\v$PWD/config:/etc/influxdb2\\eDOCKER_INFLUXDB_INIT_MODE=setup\\eDOCKER_INFLUXDB_INIT_USERNAME=sis\\eDOCKER_INFLUXDB_INIT_PASSWORD=cddyys\\eDOCKER_INFLUXDB_INIT_ORG=myorg\\eDOCKER_INFLUXDB_INIT_BUCKET=mybucket\\influxdb:2.0.7安装CentOSWSL下载安装下载地址：github.com/wsldlpg/CentWSL/releases安装XFCE1.先安装epelrelease（centos的软件包yum源）`yumyinstallepelrelease`2.如果你的CENTOS是最小化安装的那默认都是不带XWINDOWS的，所以在安装这些桌面之前得先安装一下XWINDOWS，这个控制功能。```yumupgradeyumygroupinstall\"XWindowSystem\"```3.安装Xfce桌面环境`yumygroupinstallinstall\"Xfce\"`4.增加中文字体先安装字体管理工具：`yumyinstallxorgx11fontutils`将字体复制到`/usr/share/fonts/chinese/`目录下5.安装输入法选择fcitx输入法架构，不选择ibus安装fcitx:`yumyinstallfcitxfcitxpinyinfcitxconfigtool`修改locale：修改`/etc/locale.conf`内容`LANG=zh_CN.utf8`参考：blog.csdn.net/lemontree1945/article/details/80088986增加环境变量参考：blog.csdn.net/qq_27785239/article/details/105874669```exportXIM=\"fcitx\"exportXIM_PROGRAM=\"fcitx\"exportXMODIFIERS=\"@im=fcitx\"exportGTK_IM_MODULE=\"fcitx\"exportQT_IM_MODULE=\"fcitx\"```重启，在菜单Settings>FcitxConfiguration里面配置（或者右上角键盘图标上配置）Addthesevariablesin`~/.bashrc`file:```iniexportDISPLAY=$cat/etc/resolv.conf|grepnameserver|awk'{print$2;exit;}':0.0exportLIBGL_ALWAYS_INDIRECT=1```Steps:Updateandupgrade:`dnfupgrade`InstallXFCEgrouppacakge:`dnfgroupinstall\"XfceDesktop\"`StartXFCE:startxfce4orxfce4session增加菜单项进入目录`/usr/share/applications`，复制一个菜单项修改idea中fcitx无法输入中文1.修改`/etc/locale.conf`内容`LANG=zh_CN.utf8`参考：blog.csdn.net/lemontree1945/article/details/800889862.增加环境变量```exportXIM=\"fcitx\"exportXIM_PROGRAM=\"fcitx\"exportXMODIFIERS=\"@im=fcitx\"exportGTK_IM_MODULE=\"fcitx\"exportQT_IM_MODULE=\"fcitx\"```参考：blog.csdn.net/qq_27785239/article/details/105874669idea打不开markdown文件错误信息如下：```JCEFBrowsercomponentfailedtostartMissingnativelibraries:libXss.so.1```修复：`yuminstalllibXScrnSaver`安装sublime1.下载Linux安装包:download.sublimetext.com/sublime_text_3_build_3211_x64.tar.bz22.解压:`tarxvfsublime_text_3_build_3211_x64.tar.bz2`3.创建链接:`lns/opt/sublime_text_3/sublime_text/usr/bin/sublime_text`4.创建菜单项:`cp/opt/sublime_text_3/sublime_text.desktop/usr/share/applications/`5.修改文件路径：`sudovi/usr/share/applications/sublime_text.desktop`6.禁止更新提示：Preferences=>Settings>settingsuser=>添加`\"update_check\":false`7.破解及使用指南：www.codenong.com/js65a10209118f/安装FedoraWSL下载安装下载地址：github.com/WhitewaterFoundry/FedoraRemixforWSL/releases安装XFCE参考：github.com/Biswa96/WSLInstall/blob/master/docs/Install_Desktop_Environments.mdAddthesevariablesin`~/.bashrc`file:```iniexportDISPLAY=$cat/etc/resolv.conf|grepnameserver|awk'{print$2;exit;}':0.0exportLIBGL_ALWAYS_INDIRECT=1```Steps:Updateandupgrade:`dnfupgrade`InstallXFCEgrouppacakge:`dnfgroupinstall\"XfceDesktop\"`StartXFCE:startxfce4orxfce4sessionyumvsdnfblog.csdn.net/sfakh/article/details/109273318安装Ubuntuwsl参考：medium.com/@japheth.yates/thecompletewsl2guisetup2582828f4577CentOS7下安装Golangwww.cnblogs.com/zhzhlong/p/12695301.html安装文档：golang.google.cn/doc/install1.下载：golang.google.cn/dl/2.解压：解压压缩包到/usr/local目录`tarC/usr/localxzfgo1.13.linuxamd64.tar.gz`3.配置环境变量`vi/etc/profile````最后一行添加exportGOROOT=/usr/lib/golangexportPATH=$PATH:$GOROOT/bin````source/etc/profile`查看版本`goversion`4.设置代理命令行执行：```goenvwGO111MODULE=autogoenvwGOPROXY=goproxy.io,direct```原理参考：cloud.tencent.com/developer/article/15937345.设置GOPATHGOPATH的默认值blog.csdn.net/weixin_33938733/article/details/88009373`source/etc/profile````exportGOPATH=/opt/gopathexportPATH=$PATH:$GOPATH/bin```", "operation/[SkillsMap]-运维.md": "LinuxZookeeper【入门】Zookeeper入门看这篇就够了blog.csdn.net/java_66666/article/details/81015302【详解】说得太好了！阿里巴巴为什么不用ZooKeeper做服务发现？blog.csdn.net/zl1zl2zl3/article/details/105207165MinIO【入门】开源分布式对象存储MinIOzhuanlan.zhihu.com/p/103803549", "operation/《构建高可用Linux服务器（第4版）》.md": "前言第1章　Linux服务器的性能调优11.1网站架构设计相关11.1.1评估网站性能涉及的专业名词术语11.1.2CDN业务的选项21.1.3IDC机房的选择31.2如何根据服务器应用来选购服务器41.3硬件对Linux性能的影响91.4CentOS6.8x86_64最小化安装后的优化111.4.1系统的基础优化111.4.2优化Linux下的内核TCP参数以提高系统性能191.4.3CentOS6.8x86_64系统最小化安装优化脚本211.4.4Linux下CPU使用率与机器负载的关系与区别231.5服务器调优实际案例251.6小结28第2章　Shell脚本在生产环境下的应用292.1Shell编程基础292.1.1Shell脚本基本元素302.1.2Shell基础正则表达式302.1.3Shell特殊字符322.1.4变量和运算符332.2Shell中控制流结构452.3Sed的基础用法及实用举例482.3.1Sed的基础语法格式482.3.2Sed的用法举例说明532.4awk的基础用法及实用举例562.5Shell基础正则表达式举例612.6Shell开发中应该掌握的系统知识点682.7生产环境下的Shell脚本742.7.1AmazonLinux系统简介742.7.2生产环境下的备份类脚本752.7.3生产环境下的监控类脚本782.7.4生产环境下的运维开发类脚本842.8小结88第3章　利用Vagrant搭建分布式环境893.1Vagrant简单介绍893.2Vagrant安装903.3使用Vagrant配置本地开发环境913.3.1Vagrant的具体安装步骤913.3.2Vagrant配置文件详解933.3.3Vagrant常用命令详解953.4使用Vagrant搭建分布式环境963.5小结99第4章　轻量级自动化运维工具介绍1004.1轻量级自动化运维工具pssh介绍1014.1.1pssh的安装1034.1.2pssh的使用1034.2轻量级自动化运维工具Fabric介绍1054.2.1Fabric的安装1054.2.2Fabric的命令行入口fab命令详细介绍1074.2.3Fabric的环境变量设置1084.2.4Fabric的核心API1094.2.5Fabric的执行逻辑1124.2.6如何利用进程池大小来限制Fabric并发进程数1144.3Fabric在工作中应用实例1144.3.1开发环境中Fabric应用实例1154.3.2工作场景中常见的Fabric应用实例1164.4小结120第5章　Linux集群及其项目案例分享1215.1负载均衡高可用核心概念及常用软件1215.1.1什么是负载均衡高可用1215.1.2以F5BIGIP作为负载均衡器1225.1.3以LVS作为负载均衡器1235.1.4以Nginx作为负载均衡器1325.1.5以HAProxy作为负载均衡器1325.1.6高可用软件Keepalived1345.1.7高可用软件Heartbeat1345.1.8高可用块设备DRBD1355.2负载均衡关键技术1365.2.1什么是Session1365.2.2什么是Session共享1365.2.3什么是会话保持1375.3负载均衡器的会话保持机制1385.3.1LVS的会话保持机制1385.3.2Nginx负载均衡器中的ip_hash算法1425.3.3HAProxy负载均衡器的source算法1455.4服务器健康检测1505.5Linux集群的项目案例分享1515.5.1用LVS+Keepalived建高可用集群1515.5.2用Nginx+Keepalived实现在线票务系统1545.5.3企业级Web负载均衡高可用之Nginx+Keepalived1575.5.4HAProxy双机高可用方案之HAProxy+Keepalived1695.5.5巧用DNS轮询作负载均衡1795.5.6百万级PV高可用网站架构设计1845.5.7千万级PV高性能高并发网站架构设计1875.6软件级负载均衡器的特点介绍与对比1935.7四层负载均衡和七层负载均衡工作流程的对比1945.8Linux集群的总结和思考1965.9小结198第6章　MySQL性能调优及高可用案例分享2006.1MySQL数据库的优化2006.1.1服务器物理硬件的优化2006.1.2MySQL配置文件的优化2016.1.3MySQL上线后根据status状态进行适当优化2046.1.4利用tuningprimer脚本进行数据库调优2126.1.5MySQL架构设计调优2166.2MySQL数据库的高可用架构方案2166.2.1生产环境下的DRBD+Heartbeat+MySQL双机高可用2176.2.2生产环境下的MySQL数据库主从Replication同步2286.3小结240第7章　Linux防火墙介绍2427.1基础网络知识2427.1.1OSI网络参考模型2427.1.2TCP/IP三次握手的过程详解2437.1.3Socket应用2457.1.4其他基础网络知识2477.2Linux防火墙的状态机制2477.3Linux防火墙在企业中的应用2477.4Linux防火墙的语法2487.5iptables的基础知识2527.5.1iptables的状态state2527.5.2iptables的Conntrack记录2547.5.3关于iptables模块的说明2557.5.4iptables防火墙初始化的注意事项2567.5.5如何保存运行中的iptables规则2567.6如何流程化编写iptables脚本2577.7学习iptables应该掌握的工具2607.7.1命令行的抓包工具TCPDump2607.7.2图形化抓包工具Wireshark2617.7.3强大的命令行扫描工具Nmap2647.7.4使用TCPPing工具检测TCP延迟2667.8iptables的简单脚本学习2677.8.1普通的Web主机防护脚本2677.8.2如何让别人ping不到自己，而自己能ping通别人呢？2697.8.3建立安全的vsftpd服务器2717.9线上生产服务器的iptables脚本2757.9.1安全的主机iptables防火墙脚本2757.9.2自动分析黑名单及白名单的iptables脚本2787.9.3利用recent模块限制同一IP的连接数2817.9.4利用DenyHosts工具和脚本来防止SSH暴力破解2857.10　工作中的Linux防火墙总结2877.11　小结289第8章　Linux系统安全相关篇2908.1TCP_wrappers应用级防火墙的介绍和应用2908.2DDos攻击和运营商劫持2928.3Linux服务器的安全防护2948.3.1Linux服务器基础防护篇2948.3.2Linux服务器高级防护篇2958.4Linux系统如何防止入侵3018.5小结301附录A　GibLab在开发工作中的实际应用302附录B　SublimeText3的快捷键操作308附录C　调试网络接口的利器Postman315附录D　RSYNC及INOTIFY在工作中的应用321", "database/05_MySQL高可用.md": "TOC参考资料必须了解的MySQL三大日志：binlog、redolog和undologmp.weixin.qq.com/s/JPgROEQIQRuRNwAT_19cVA日志是mysql数据库的重要组成部分，记录着数据库运行期间各种状态信息。mysql日志主要包括错误日志、查询日志、慢查询日志、事务日志、二进制日志几大类。作为开发，我们重点需要关注的是二进制日志binlog和事务日志包括redolog和undolog，本文接下来会详细介绍这三种日志。美团数据库高可用架构的演进与设想tech.meituan.com/2017/06/29/databaseavailabilityarchitecture.htmlMMM、MHA、MHA+Zebra架构等多图文，详细介绍mysql各个集群方案www.cnblogs.com/lgx211/p/12456859.html介绍优劣：一，mysql原厂出品（1，MySQLReplication、2，MySQLFabirc、3，MySQLCluster）；二，mysql第三方优化（4，MMM、5，MHA、6，GaleraCluster）三，依托硬件配合（7，heartbeat+SAN、8，heartbeat+DRDB）四，其它（9，Zookeeper+proxy、10，Paxos）高性能、高可用、可扩展的MySQL集群如何组建？www.zhihu.com/question/21307639组建MySQL集群的几种方案LVS+Keepalived+MySQL（有脑裂问题？但似乎很多人推荐这个）DRBD+Heartbeat+MySQL（有一台机器空余？Heartbeat切换时间较长？有脑裂问题？）MySQLProxy（不够成熟与稳定？使用了Lua？是不是用了他做分表则可以不用更改客户端逻辑？）MySQLCluster（社区版不支持INNODB引擎？商用案例不足？）MySQL+MHA（如果配上异步复制，似乎是不错的选择，又和问题？）MySQL+MMM（似乎反映有很多问题，未实践过，谁能给个说法）回答：不管哪种方案都是有其场景限制或说规模限制，以及优缺点的。1.首先反对大家做读写分离，关于这方面的原因解释太多次数（增加技术复杂度、可能导致读到落后的数据等），只说一点：99.8%的业务场景没有必要做读写分离，只要做好数据库设计优化和配置合适正确的主机即可。2.Keepalived+MySQL确实有脑裂的问题，还无法做到准确判断mysqld是否HANG的情况；3.DRBD+Heartbeat+MySQL同样有脑裂的问题，还无法做到准确判断mysqld是否HANG的情况，且DRDB是不需要的，增加反而会出问题；3.MySQLProxy不错的项目，可惜官方半途夭折了，不建议用，无法高可用，是一个写分离；4.MySQLCluster社区版本不支持NDB是错误的言论，商用案例确实不多，主要是跟其业务场景要求有关系、这几年发展有点乱不过现在已经上正规了、对网络要求高；5.MySQL+MHA可以解决脑裂的问题，需要的IP多，小集群是可以的，但是管理大的就麻烦，其次MySQL+MMM的话且坑很多，有MHA就没必要采用MMM建议：1.若是双主复制的模式，不用做数据拆分，那么就可以选择MHA或Keepalive或heartbeat2.若是双主复制，还做了数据的拆分，则可以考虑采用Cobar；3.若是双主复制+Slave，还做了数据的拆分，需要读写分类，可以考虑Amoeba；MySQL数据库集群方案汇总www.yuque.com/zerodai/yqzdgs/mnkzn3悄悄告诉你MySQLMGR到底牛在哪database.51cto.com/art/202004/615706.htmMySQL+MGR单主模式和多主模式的集群环境部署手册Centos7.5www.cnblogs.com/kevingrace/p/10470226.htmlMySQL高可用架构对比，MMM与MHA以及MGRblog.csdn.net/William0318/article/details/106855431MyCatmycat的三大功能：分表、读写分离、主从切换分表mycat分表的实现：首先在mycat的scheme.xml中配置逻辑表，并且在配置中说明此表在哪几个物理库上。此逻辑表的名字与真实数据库中的名字一致！然后需要配置分片规则，即按照什么逻辑分库！读写分离MyCat基本元素1.`逻辑库`：对后端多个物理数据库的映射，逻辑库中不保存数据。2.`逻辑表`：逻辑库中的表，映射后端多个物理数据库中的表，也不保存数据逻辑表分类1.`分片表`：进行了水平切分的表，表结构相同，可存储在不同库中，所有分片表的集合才是一张完整的表。2.`非分片表`：垂直切分的表，一个数据库中就保存了一张完整的表3.`全局表`：所有分片数据库中都存在的表4.`ER关系表`：mycat独有，子表依赖父表，保证在同一个数据库中配置文件1.`/usr/local/mycat/conf/server.xml`定义用户以及系统相关变量，如端口等。其中用户信息是前端应用程序连接mycat的用户信息。2.`/usr/local/mycat/conf/schema.xml`定义逻辑库，表、分片节点等内容。3.`/usr/local/mycat/conf/rule.xml`中定义分片规则。", "database/MongoDB.md": "官方文档：docs.mongodb.com/manual/特性文档数据库，使用BSON结构。没有schema限制，更灵活，存储速度更加快。即时查询能力保留了关系型数据库即时查询的能力，保留了索引（底层是基于Btree）的能力。易伸缩易伸缩是指对数据集进行分片，将存储压力分摊给多台服务器。自动故障转移自动故障转移是副本集的概念，MongoDB能检测主节点是否存活，当失活时能自动提升从节点为主节点，达到故障转移。速度fireandforget驱动，即通过驱动调用写入时，可以立即得到返回得到成功的结果（即使是报错），这样让写入的速度更加快，当然会有一定的不安全性，完全依赖网络。Journaling日志，持久性：像mysql的binlog日志，当需要插入的时候会先往日志里面写入记录，再完成实际的数据操作，这样如果出现停电，进程突然中断的情况，可以保障数据不会错误，可以通过修复功能读取Journaling日志进行修复。vsRedisRedis八大数据结构string,list,set,hash,zset,geospatial,hyperloglog,bitmaps数据淘汰算法10wQPS无法统计Mongo提供聚合函数Mongodb也可设置数据过期时间用途分布式日志收集ELK复杂，耗内存ES最多支持32G电子产品传感器40亿个地理地图数据爬虫Schema经常变动大数据3V海量Volume多样Variety实时VelocityC/S服务模型mongod服务端缺少内存配置，由OS管理内存mongos路由实现分片功能mongo客户端jsshell类似sql命令行工具mongodump和mongorestore，备份和恢复mongoexport和mongoimport，用来导入导出JSON、CSV和TSV数据mongosniff，网络嗅探工具，用来观察发送到数据库的操作。基本就是把网络上传输的BSON转换为易于人们阅读的shell语句。操作入门＿id读作“ObjectId”，它是由时间、机器码、进程pid和自增计数器构成的，始终递增，但绝不重复。聚合查询聚合功能可以把数据像放入传送带一样，先把原始数据按照一定的规则进行筛选处理，然后通过多个不同的数据处理阶段来处理数据，最终输出个汇总的结果。aggregate优化和安全建议MongoDB会自动监控，如果发现一个游标在10分钟内没有进行任何的数据库操作，就会把它关掉。Java开发官方驱动文档：mongodb.github.io/mongojavadriver/4.2GettingStartedwww.mongodb.com/blog/post/gettingstartedwithmongodbandjavapartiwww.mongodb.com/blog/post/gettingstartedwithmongodbandjavapartiimongojavadrivermongodbdrivercore是核心库mongodbdriversync是非异步的同步版本，包含了一般MongoCollection的接口mongodbdriverlegacy兼容旧版本APImongodbdriver=mongodbdriversync+mongodbdriverlegacymongojavadriver=mongodbdriver+mongodbdrivercore+bsonMorphiaMorphiaisareallylightweightODMObjectDocumentMapper,soit’ssimilartoORMslikeHibernate.SpringDataMongoDBAnotherfrequentlyusedODMMongoJack直接将JSON映射成Mongo对象。不再需要将JSON转换成Java对象，再转为Mongo对象。JongoanotherJacksonbasedODM,butprovidesaninterestingextraintheformofsupportingqueriesthewayyou’dwritethemintheshell.Golang开发GettingStarted：www.mongodb.com/blog/post/quickstartgolangmongodbstartingandsetupMongoDB集群1、MasterSlaver是一种主从副本的模式，目前已经不推荐使用。一个主节点（Primary）和一个或多个从节点（Secondary）可用于备份、故障恢复、读扩展等只能有一个主节点，主节点提供所有的增、删、查、改服务，从节点不提供任何服务，但是可以通过设置使从节点提供查询服务。每个从节点要知道主节点的地址，主节点记录在其上的所有操作，从节点定期轮询主节点获取这些操作，然后对自己的数据副本执行这些操作，从而保证从节点的数据与主节点一致。当主节点出现故障时，只能人工介入，指定新的主节点，从节点不会自动升级为主节点。同时，在这段时间内，该集群架构只能处于只读状态。2、ReplicaSet模式是一种互为主从的关系。ReplicaSet将数据复制多份保存，不同服务器保存同一份数据，在出现故障时自动切换，实现故障转移，在实际生产中非常实用。也是一主多从，区别是：当集群中主节点发生故障时，副本集可以自动投票，选举出新的主节点，并引导其余的从节点连接新的主节点。自带故障转移功能的主从复制。只能有一个主节点。主节点负责数据的写入和更新，并在更新数据的同时，将操作信息写入名为oplog的日志文件当中。从节点会定时轮询读取oplog日志，根据日志内容同步更新自身的数据，保持与主节点一致。在副本集中还有一个额外的仲裁节点（不需要使用专用的硬件设备），负责在主节点发生故障时，参与选举新节点作为主节点。副本集中的各节点会通过心跳信息来检测各自的健康状况，当主节点出现故障时，并选举其中一个作为新的主节点。为了保证选举票数不同，副本集的节点数保持为奇数。3、Sharding模式适合处理大量数据，它将数据分开存储，不同服务器保存不同的数据，所有服务器数据的总和即为整个数据集。分片是指将数据拆分并分散存放在不同机器上的过程。MongoDB支持自动分片，可以使数据库架构对应用程序不可见。需要三个重要的组件，分别是分片服务器（ShardServer）、配置服务器（ConfigServer）和路由服务器（RouteServer）。需要三个重要的组件，分别是分片服务器（ShardServer）、配置服务器（ConfigServer）和路由服务器（RouteServer）。ShardServer是一个mongod数据库实例，在实际生产中，一个ShardServer可由几台机器组成一个副本集来承担，防止因主节点单点故障导致整个系统崩溃。ConfigServer是独立的一个mongod进程，保存集群和分片的元数据。RouteServer是独立的一个mongos进程，在集群中可作为路由使用，客户端由此接入，让整个集群看起来像是一个单一的数据库，提供客户端应用程序和分片集群之间的接口。它将客户端的请求路由给每个ShardServer，在各ShardServer返回结果后进行聚合并返回客户端。Sharding模式追求的是高性能，而且是三种集群中最复杂的。在实际生产环境中，通常将ReplicaSet和Sharding两种技术结合使用。", "database/MongoDB例子解读.md": "ReadPreference读偏好**MongoDB有5种ReadPreference模式：**primary主节点，默认模式，读操作只在主节点，如果主节点不可用，报错或者抛出异常。primaryPreferred首选主节点，大多情况下读操作在主节点，如果主节点不可用，如故障转移，读操作在从节点。secondary从节点，读操作只在从节点，如果从节点不可用，报错或者抛出异常。secondaryPreferred首选从节点，大多情况下读操作在从节点，特殊情况（如单主节点架构）读操作在主节点。nearest最邻近节点，读操作在最邻近的成员，可能是主节点或者从节点。MongoDB应答机制w:该选项要求确认操作已经传播到指定数量的mongod实例或指定标签的mongod实例w:1应答式写入w:0非应答式写入w:>1用于副本集环境写入节点数j:该选项要求确认写操作已经写入journal日志之后应答客户端需要开启journal功能wtimeout:该选项指定一个时间限制,以防止写操作无限制被阻塞导致无法应答给客户端readConcern原理解析readConcern决定到某个读取数据时，能读到什么样的数据。local能读取任意数据，这个是默认设置majority只能读取到『成功写入到大多数节点的数据』readConcern的初衷在于解决『脏读』的问题gocontext之WithTimeout的使用1.context包的WithTimeout函数接受一个Context和超时时间作为参数，返回其子Context和取消函数cancel2.新创建协程中传入子Context做参数，且需监控子Context的Done通道，若收到消息，则退出3.需要新协程结束时，在外面调用cancel函数，即会往子Context的Done通道发送消息4.若不调用cancel函数，到了原先创建Context时的超时时间，它也会自动调用cancel函数，即会往子Context的Done通道发送消息Golang的Tag语法通过Tag来增强结构体的定义，Tag会带上一些meta信息。Tag在运行时可以通过reflection包来读取。Tags可以由键值对来组成，通过空格符来分割键值66，可以通过反射的Lookup或者Get来获取键值对的值。Tag最常用的大概就是在marshaling。", "database/MySQL惯用法.md": "TOC常用操作用户管理创建用户>`CREATEUSER'username'@'host'IDENTIFIEDBY'password';`>host：指定该用户在哪个主机上可以登陆，如果是本地用户可用localhost，如果想让该用户可以从任意远程主机登陆，可以使用通配符%>`CREATEUSER'pig'@'%'IDENTIFIEDBY'123456';`更改用户密码```sql改密码SETPASSWORDFOR'username'@'host'=PASSWORD'newpassword';如果是当前登陆用户用:SETPASSWORD=PASSWORD\"newpassword\";例子:SETPASSWORDFOR'pig'@'%'=PASSWORD\"123456\";```授权```sqlGRANTSELECT,INSERTONtest.userTO'pig'@'%';GRANTALLON*.*TO'pig'@'%';用以上命令授权的用户不能给其它用户授权，如果想让该用户可以授权，用以下命令:GRANTprivilegesONdatabasename.tablenameTO'username'@'host'WITHGRANTOPTION;```撤销用户权限```sql说明:privilege,databasename,tablename：同授权部分,不能超越。REVOKEprivilegeONdatabasename.tablenameFROM'username'@'host';例子:REVOKESELECTON*.*FROM'pig'@'%';```删除用户`DROPUSER'username'@'host';`用户授权命令格式：>`mysql>grant权限1,权限2,…权限non数据库名称.表名称to用户名@用户地址identifiedby'连接口令';`>权限1,权限2,…权限n代表`select,insert,update,delete,create,drop,index,alter,grant,references,reload,shutdown,process,file`等14个权限。>当权限1,权限2,…权限n被`allprivileges`或者`all`代替，表示赋予用户全部权限。>当`数据库名称.表名`称被`*.*`代替，表示赋予用户操作服务器上所有数据库所有表的权限。>用户地址可以是`localhost`，也可以是ip地址、机器名字、域名。也可以用`'%'`表示从任何地址连接。>`'连接口令'`不能为空，否则创建失败。```shell给来自10.163.225.87的用户joe分配可对数据库vtdc的employee表进行select,insert,update,delete,create,drop等操作的权限，并设定口令为123。mysql>grantselect,insert,update,delete,create,droponvtdc.employeetojoe@10.163.225.87identifiedby'123';给来自10.163.225.87的用户joe分配可对数据库vtdc所有表进行所有操作的权限，并设定口令为123。mysql>grantallprivilegesonvtdc.*tojoe@10.163.225.87identifiedby'123';给来自10.163.225.87的用户joe分配可对所有数据库的所有表进行所有操作的权限，并设定口令为123。mysql>grantallprivilegeson*.*tojoe@10.163.225.87identifiedby'123';给本机用户joe分配可对所有数据库的所有表进行所有操作的权限，并设定口令为123。mysql>grantallprivilegeson*.*tojoe@localhostidentifiedby'123';```Database/Table操作创建数据库```mysqlCREATEDATABASE`mydb`CHARACTERSETutf8COLLATEutf8_general_ci;showdatabases;usewifidb```MySQL在Linux下的表名如何不区分大小写>在CentOS7下，在`/etc/my.cnf`文件中`mysqld`的后面加`lower_case_table_names=1`。0,区分大小写;1,不区分。>然后重启mysql：`systemctlreloadmysqld`执行sql文件：```shellmysqluuserp输入密码usetestdbsource/home/gjh/t.sql```查看mysql版本的四种方法```shellshengting@login~$`mysqlV`mysql>status;mysql>`selectversion;````查看表字段：```sqldesctableName;showfieldsfromtableName;showcolumnsfromtableName;```运维导入导出导出导出数据库：`mysqldumpu用户名p数据库名>导出的文件名`，如我输入的命令行:`mysqldumpurootpnews>news.sql`输入后会让你输入进入MySQL的密码（如果导出单张表的话在数据库名后面输入表名即可）导入1、进入MySQL：`mysqlu用户名p`，如我输入的命令行:`mysqlurootp`输入同样后会让你输入MySQL的密码2、新建你要建的数据库，这时是空数据库，如新建一个名为news的目标数据库：`CREATEDATABASEIFNOTEXISTSyourdbnameDEFAULTCHARSETutf8COLLATEutf8_general_ci;`3、输入：`mysql>use目标数据库名`，如我输入的命令行:`mysql>usenews;`4、导入文件：`mysql>source导入的文件名;`如我输入的命令行：`mysql>sourcenews.sql;`性能优化36个字节UUID字符串做主键的性能问题可以使用binary16notnull来存储uuid中间的删除哈`unhexreplace'a3eea9105cab11dfbbb5000c29e30cf0','','';`检索出来的时候用hex这样主键只有原来的一半,效率要高些MySQLinsertingUUIDtoabinary16fieldItisadvantageoustostoreaUUIDacctoRFC4122inabinary16fieldinthedatabase.Itisnothardtocreatesuchatableandtoinsertdataintoit.```sqlCREATETABLEIFNOTEXISTStest_tableidBINARY16NOTNULL,namevarchar128NOTNULL,PRIMARYKEYid;INSERTINTOtest_tableid,nameVALUESUNHEXREPLACEUUID,'','','test1',UNHEXREPLACEUUID,'','','test2',UNHEXREPLACEUUID,'','','test3';```", "database/Oracle惯用法.md": "instantclient连接PL/SQLDevelopwin8可以使用instantclient_10_2，instantclient_11_2没有试过。win10只能使用instantclient_11_2，且需要安装MicrosoftVisualStudio2005Redistributablewww.microsoft.com/enus/download/details.aspx?id=18471步骤TNS_ADMIN=D:\\dev\\instantclient_11_2加D:\\dev\\instantclient_11_2到Path中配置NLS_LANG=SIMPLIFIEDCHINESE_CHINA.ZHS16GBK编写tnsnames.ora```ORCL=DESCRIPTION=ADDRESS_LIST=ADDRESS=PROTOCOL=TCPHOST=192.168.1.106PORT=1521CONNECT_DATA=SERVICE_NAME=orcl```在PLSQLDeveloper中设置Oracle_Home和OCILibrary：Tools>Preferences>Oracle>Connection：Oracle_Home：D:\\dev\\instantclient_11_2OCILibrary：D:\\dev\\instantclient_11_2\\oci.dll创建表空间和用户createtemporarytablespacets_snhb_tmptempfile'/opt/oracle/oradata/oracle10g/snhb_tmp.dbf'size50mautoextendonnext50mmaxsize20480mextentmanagementlocal;createtablespacets_snhbloggingdatafile'/opt/oracle/oradata/oracle10g/snhb.dbf'size50mautoextendonnext50mmaxsize20480mextentmanagementlocal;createusersnhbidentifiedbysnhbdefaulttablespacets_snhbtemporarytablespacets_snhb_tmp;grantconnect,resource,dbatosnhb;grantallprivilegestosnhb;resourceisaroleinoracle,whichgivesyoutherighttocreateobjectstables,procedures,somemorebutnoviews!.ALLPRIVILEGESgrantsalotmoreofsystemprivileges.查看oracle数据库database的版本命令在sqlplus下输入以下任意一个语句```SQL>select*fromv$version;SQL>selectversionfromv$instance;SQL>SelectversionFROMProduct_component_versionWhereSUBSTRPRODUCT,1,6='Oracle';```Oracle锁表```sqlselects.SID,s.serial,s.USERNAME,s.machine,s.OSUSER,s.PROGRAM,l.locked_mode,o.OBJECT_NAME,a.sql_textfromv$sessions,v$locked_objectl,v$sqlareaa,dba_objectsowherel.session_id=s.sidands.prev_sql_addr=a.addressando.object_id=l.object_idorderbysid,s.serial;```www.cnblogs.com/shenckicc/p/5458574.htmlwww.cnblogs.com/dgqblog/p/9243196.htmlwww.cnblogs.com/su1643/p/6598571.html", "database/Redis笔记.md": "1.八大数据类型【入门】redis八种基本数据类型及其应用blog.csdn.net/xiewenfeng520/article/details/1040630622.Redis应用案例Redis比较适合的一些应用场景：2.1.取最新N个数据的操作比如典型的取你网站的最新文章，通过下面方式，我们可以将最新的5000条评论的ID放在Redis的List集合中，并将超出集合部分从数据库获取使用LPUSHlatest.comments<ID>命令，向list集合中插入数据插入完成后再用LTRIMlatest.comments05000命令使其永远只保存最近5000个ID然后我们在客户端获取某一页评论时可以用下面的逻辑（伪代码）```javascriptFUNCTIONget_latest_commentsstart,num_items:id_list=redis.lrange\"latest.comments\",start,start+num_items1IFid_list.length<num_itemsid_list=SQL_DB\"SELECT...ORDERBYtimeLIMIT...\"ENDRETURNid_listEND```如果你还有不同的筛选维度，比如某个分类的最新N条，那么你可以再建一个按此分类的List，只存ID的话，Redis是非常高效的。2.2.排行榜应用，取TOPN操作这个需求与上面需求的不同之处在于，前面操作以时间为权重，这个是以某个条件为权重，比如按顶的次数排序，这时候就需要我们的sortedset出马了，将你要排序的值设置成sortedset的score，将具体的数据设置成相应的value，每次只需要执行一条ZADD命令即可。2.3.需要精准设定过期时间的应用比如你可以把上面说到的sortedset的score值设置成过期时间的时间戳，那么就可以简单地通过过期时间排序，定时清除过期数据了，不仅是清除Redis中的过期数据，你完全可以把Redis里这个过期时间当成是对数据库中数据的索引，用Redis来找出哪些数据需要过期删除，然后再精准地从数据库中删除相应的记录。2.4.计数器应用Redis的命令都是原子性的，你可以轻松地利用INCR，DECR命令来构建计数器系统。2.5.Uniq操作，获取某段时间所有数据排重值这个使用Redis的set数据结构最合适了，只需要不断地将数据往set中扔就行了，set意为集合，所以会自动排重。2.6.实时系统，反垃圾系统通过上面说到的set功能，你可以知道一个终端用户是否进行了某个操作，可以找到其操作的集合并进行分析统计对比等。没有做不到，只有想不到。2.7.Pub/Sub构建实时消息系统Redis的Pub/Sub系统可以构建实时的消息系统，比如很多用Pub/Sub构建的实时聊天系统的例子。2.8.构建队列系统使用list可以构建队列系统，使用sortedset甚至可以构建有优先级的队列系统。2.9.缓存这个不必说了，性能优于Memcached，数据结构更多样化。转自:blog.nosqlfan.com/html/2235.html?ref=rediszt2.10.缓存Redis字符串、哈希表两种数据结构适合用来储存大量的键值对信息当用jdk默认的序列化方案时，对类的版本要求严格一直，否则抛出ClassNotFoundException。比如：几个共用redis缓存的应用，它们共用的jar包版本有差异（serialNo），就会导致整个系统失败。github.com/alexxiyang/shiroredis/issues/78class一旦上线，就不能改变包名或位置，否则无法序列号。www.cnblogs.com/technologykai/p/10097167.html2.11.队列使用“列表”数据结构，可以实现普通级和优先级队列的功能。使用有序集合”数据结构，可以实现优先级队列：使用“哈希表”数据结构，可以实现延时队列。2.12.去重利用“集合”数据结构，可以实现小批量数据的去重利用“字符串数据结构的位操作，可以实现布隆过滤器，从而实现超大规模的数据去重利用Redis自带的HyperLogLog数据结构，可以实现超大规模数据的去重和计数。2.13.积分板Redis的“有序集合”功能可实现积分板功能，还实现自动排序、排名功能。2.14.“发布／订阅”Redis带的“发布／订阅”模式可以实现多对多的发布／订阅”功能其他问题缓存雪崩1、什么是缓存雪崩？你有什么解决方案来防止缓存雪崩？大量缓存集中在一段时间内失效，所有的查询都落在数据库上，造成了对数据库CPU和内存造成巨大压力，严重的会造成数据库宕机。2、你有什么解决方案来防止缓存雪崩？1、加锁排队key：whiltListvalue：1000w个uid指定setNxwhiltListvaluenullValuemutex互斥锁解决，Redis的SETNX去set一个mutexkey，当操作返回成功时，再进行loaddb的操作并回设缓存；否则，就重试整个get缓存的方法2、数据预热缓存预热就是系统上线后，将相关的缓存数据直接加载到缓存系统。3、双层缓存策略C1为原始缓存，C2为拷贝缓存，C1失效时，可以访问C2，C1缓存失效时间设置为短期，C2设置为长期。4、定时更新缓存策略失效性要求不高的缓存，容器启动初始化加载，采用定时任务更新或移除缓存5、设置不同的过期时间，让缓存失效的时间点尽量均匀缓存穿透1、什么是缓存穿透？缓存穿透是指用户查询数据，在缓存中没有，在数据库也没有，却持续不停发起查询的请求。2、你有什么解决方案来防止缓存穿透？1、缓存空值如果一个查询返回的数据为空不管是数据不存在，还是系统故障我们仍然把这个空结果进行缓存，但它的过期时间会很短，最长不超过五分钟。通过这个直接设置的默认值存放到缓存，这样第二次到缓冲中获取就有值了，而不会继续访问数据库2、采用布隆过滤器BloomFilter优势占用内存空间很小，bit存储。性能特别高。将所有可能存在的数据哈希到一个足够大的bitmap中，一个一定不存在的数据会被这个bitmap拦截掉，从而避免了对底层存储系统的查询压力", "database/[SkillsMap]-数据库.md": "TOC数据库stuxuhai/HData:一个支持多数据源的ETL数据导入/导出工具github.com/forkarchivehub/hdataMySQL阅读《高性能MySQL第3版》【练习】经典的SQL练习题github.com/bladeXue/sql50【入门】PL_SQL教程www.cnblogs.com/marveler/p/5793833.html【详解】常见索引介绍my.oschina.net/u/4407645/blog/3469303【详解】常见索引介绍www.cnblogs.com/yunnick/p/11165838.html【官方】MyCat官方文档github.com/MyCATApache/MycatServer/wiki【官方】Mycat2权威指南www.yuque.com/books/share/6606b3b63365418794c4e51116894695【教程】MySQL数据库集群方案汇总www.yuque.com/zerodai/yqzdgs/mnkzn3包括后端各种技术：数据库中间件，MySQL，Oracle，MongoDB，Redis，SQLServer，RabbitMQ，【入门】多图文，详细介绍mysql各个集群方案www.cnblogs.com/lgx211/p/12456859.html【项目】阿里巴巴MySQLbinlog增量订阅&消费组件Canalgithub.com/alibaba/canal【项目】DistributedDatabaseEcospheregithub.com/apache/shardingsphere【入门】ShardingJDBC使用入门和基本配置www.cnblogs.com/yixinjishu/p/10876071.html【例子】shardingjdbc分库分表示例github.com/yinjihuan/shardingjdbc【详解】MySQL高可用架构对比，MMM与MHA以及MGRblog.csdn.net/William0318/article/details/106855431【详解】MySQL+MGR单主模式和多主模式的集群环境部署手册Centos7.5www.cnblogs.com/kevingrace/p/10470226.html【详解】悄悄告诉你MySQLMGR到底牛在哪?blog.csdn.net/weixin_27146053/article/details/113592833【详解】MySQL5.7基于组复制MySQLGroupReplication运维小结www.cnblogs.com/kevingrace/p/10260685.html【详解】MySQLReplication主从复制全方位解决方案www.cnblogs.com/clsn/p/8150036.html【详解】方案虽好，成本先行：数据库Sharding+Proxy实践解析dbaplus.cn/news1118541.html【详解】懵了！女朋友突然问我MVCC实现原理www.cnblogs.com/fkaka/p/14620957.html【入门】必须了解的MySQL三大日志：binlog、redolog和undologmp.weixin.qq.com/s/JPgROEQIQRuRNwAT_19cVAMongoDB【入门】MongoDB是什么?能干嘛？zhuanlan.zhihu.com/p/59753955【入门】MongoDB教程：1天玩转MongoDB数据库c.biancheng.net/mongodb/【书籍】阅读《Mongodb权威指南（中文第二版）》Redis【书籍】阅读《Redis开发与运维付磊》【笔记】Redis笔记Redis笔记.md【教程】Redis教程Redis知识体系详解www.pdai.tech/md/db/nosqlredis/dbredisoverview.html【详解】Redis专题：了解Redis集群，这篇就够了mp.weixin.qq.com/s/ovkWr58oRP_zumdis4TxeQ【详解】Redis9――史上最强【集群】入门实践教程www.cnblogs.com/wmyskxz/p/12511834.html【详解】Redis8――发布/订阅与Streamzhuanlan.zhihu.com/p/113370863【详解】Redis7――持久化【一文了解】www.cnblogs.com/wmyskxz/p/12487505.html【详解】Redis6――GeoHash查找附近的人www.cnblogs.com/wmyskxz/p/12466945.html【详解】Redis5――亿级数据过滤和布隆过滤器blog.csdn.net/WantFlyDaCheng/article/details/104832358【详解】Reids4――神奇的HyperLoglog解决统计问题blog.csdn.net/qq939419061/article/details/104917607【详解】Redis3――分布式锁深入探究blog.csdn.net/weixin_43893935/article/details/104652792【详解】Redis2――跳跃表www.wmyskxz.com/2020/02/29/redis2tiaoyuebiao/【详解】Redis1――5种基本数据结构www.wmyskxz.com/2020/02/28/redis15chongjibenshujujiegou/OracleOracle用户，权限，角色以及登录管理【不错小结】haiross的专栏blog.csdn.net/haiross/article/details/25777335Oracle建立表空间和用户冷雨夜的专栏blog.csdn.net/starnight_cbj/article/details/6792364Centos6/7下静默安装oracle10g一路追寻的博客blog.csdn.net/u013938484/article/details/51175501Oracle起步创建临时表空间/表空间/创建用户/授权www.cnblogs.com/xmaomao/p/3273102.htmlCentos7学习之添加用户王吉军全栈工程师blog.csdn.net/johnnycode/article/details/40655857Linux下挂载新硬盘方法知秋一叶blog.csdn.net/zqixiao_09/article/details/51417432centos7配置静态ip薛定谔的猫！博客园www.cnblogs.com/zhangXingSheng/p/6580718.htmlOracle11g删除生命不止，战斗不息！51CTO技术博客soulful.blog.51cto.com/468033/378995监视oracle执行的SQL语句blog.csdn.net/zaneabc/article/details/51924309Linux下完全删除Oracle麦地坞51CTO技术博客yunlongzheng.blog.51cto.com/788996/768269Oracle占用cpu过高的处理办法FenggFocusOracleblog.csdn.net/fffygapl/article/details/7718266Oracle之物化视图Ronger博客园www.cnblogs.com/Ronger/archive/2012/03/28/2420962.htmlOracle10gforlinuxX86的SILENT安装oracle,data,root,enterprice64,HOMEwww.bijishequ.com/detail/291324?p=55oracle10g在linux上的静默安装为程序员服务ju.outofmemory.cn/entry/251840Oracle怎么获取某个表变化的数据CSDN论坛bbs.csdn.net/topics/392312617Oracle表变化趋势追踪记录原创czmmiao.iteye.com/blog/1327665zhoubihui/redo_log_calculate_analysis:oracle_redo_calculate_analysis,Oracle数据库复制github.com/zhoubihui/redo_log_calculate_analysis", "database/《Redis开发与运维》.md": "第5章持久化Redis支持RDB和AOF两种持久化机制5.1RDB方式RDB持久化是把当前进程数据生成**快照**保存到硬盘的过程。5.1.1触发机制（触发情形）1、根据配置规则进行自动快照。`savemn`2、手动触发：用户执行SAVE或BGSAVE命令3、执行FLUSHALL命令4、从节点执行全量复制操作（replication）时。5、执行debugreload命令重新加载Redis时6、未开启AOF持久化时，执行shutdown命令5.1.2流程说明（bgsave执行过程）!bgsave命令的运作过程_v_images/20210712174803220_27164.png5.1.4RDB优缺点优点：全量复制，方便备份、恢复。恢复速度远快于AOF。缺点：无法实时持久化。新老版本RDB文件格式不兼容。5.2AOF方式AOF以独立日志的方式记录每次写命令。主流方式。5.2.1使用AOF（AOF工作流程）!AOF工作流程_v_images/20210712183316362_8848.pngappend命令写入：命令是文本协议。sync文件同步：利用Linux的页缓冲区，先write到缓冲区，然后fsync强制阻塞写入磁盘。rewrite重写：（1）去掉无效的命令、超时的数据、合并命令来压缩AOF文件。（2）手动触发+自动触发。load重启加载：优先加载AOF文件，不存在AOF文件时加载RDB文件第6章复制Redis提供了复制replication功能，自动将更新的数据从主库同步到其他从库。一主多从原理：从库启动后，向主库发送SYNC命令后，主库立即执行RDB快照，并缓存此期间接收到的命令；快照完成后，主库向从库发送快照文件和缓存命令；从库载入快照文件并执行缓存命令。完成复制初始化后，主库不断将写命令同步到从库。主库之从库可以为下一级从库的主库。即可以构建多级复制的结构。从库持久化另一个相对耗时的操作是持久化，为了提高性能，可以通过复制功能建立一个或若干个从数据库，并在从数据库中启用持久化，同时在主数据库禁用持久化。当从数据库崩溃重启后主数据库会自动将数据同步过来，所以无需担心数据丢失。当开启复制且主数据库关闭持久化功能时，一定不要使用Supervisor以及类似的进程管理工具令主数据库崩溃后自动重启。哨兵能解决手工维护从库或主库的重启以及数据恢复的麻烦。无硬盘复制开启无硬盘复制选项后，Redis在与从库进行复制初始化时将不会将快照内容存储到硬盘上，而是直接通过网络发送给从库，避免了硬盘的性能瓶颈。增量复制第9章哨兵哨兵包括两个功能：1、监控主库和从库运行状态。2、出现故障时，自动将从库转换为主库。哨兵典型架构多哨兵架构第10章集群集群的特点在于拥有和单机实例同样的性能，同时在网络分区后能够提供一定的可访问性以及对主数据库故障恢复的支持。另外集群支持几乎所有的单机实例支持的命令，对于涉及多键的命令如MGET，如果每个键都位于同一个节点中，则可以正常支持，否则会提示错误。除此之外集群还有一个限制是只能使用默认的0号数据库，如果执行SELECT切换数据库则会提示错误。哨兵与集群是两个独立的功能，但从特性来看哨兵可以视为集群的子集，当不需要数据分片或者已经在客户端进行分片的场景下哨兵就足够使用了，但如果需要进行水平扩容，则集群是一个非常好的选择。", "database/《高性能MySQL》.md": "第一章MySQL架构与历史1.1MySQL的逻辑架构!MySQL逻辑架构_v_images/20210625103345187_236.png1.3事务ACID原子性（atomicity）：一个事务必须被视为一个不可分割的最小工作单元，整个事务中的所有操作要么全部提交成功，要么全部失败回滚。一致性（consistency）：数据库总是从一个一致性的状态转换到另外一个一致性的状态。隔离性（isolation）：通常来说，一个事务所做的修改在最终提交以前，对其他事务是不可见的。持久性（durability）：一旦事务提交，则其所做的修改就会永久保存到数据库中。1.3.1隔离级别READUNCOMMITTED（未提交读）：事务可以读取未提交的数据，这也被称为脏读（DirtyRead）。在实际应用中一般很少使用。READCOMMITTED（提交读）：一个事务从开始直到提交之前，所做的任何修改对其他事务都是不可见的。这个级别有时候也叫做不可重复读（nonrepeatableread）REPEATABLEREAD（可重复读）：该级别保证了在同一个事务中多次读取同样记录的结果是一致的。它解决了脏读的问题，无法解决另外一个幻读（PhantomRead）的问题。幻读：指的是当某个事务在读取某个范围内的记录时，另外一个事务又在该范围内插入了新的记录，当之前的事务再次读取该范围的记录时，会产生幻行（PhantomRow）。SERIALIZABLE（可串行化）：它通过强制事务串行执行，避免了前面说的幻读的问题。SERIALIZABLE会在读取的每一行数据上都加锁，所以可能导致大量的超时和锁争用的问题。1.3.2死锁当多个事务试图以不同的顺序锁定资源时，就可能会产生死锁。多个事务同时锁定同一个资源时，也会产生死锁。为了解决这种问题，数据库系统实现了各种死锁检测和死锁超时机制。InnoDB目前处理死锁的方法是，将持有最少行级排他锁的事务进行回滚。死锁发生以后，只有部分或者完全回滚其中一个事务，才能打破死锁。1.3.3事务日志使用事务日志，存储引擎在修改表的数据时只需要修改其内存拷贝，再把该修改行为记录到持久在硬盘上的事务日志中，而不用每次都将修改的数据本身持久到磁盘。事务日志采用的是追加的方式，顺序I/O，而不是随机I/O，快得多。预写式日志（WriteAheadLogging）：事务日志持久以后，内存中被修改的数据在后台可以慢慢地刷回到磁盘。事务日志恢复数据。1.4多版本并发控制InnoDB的MVCC，是通过在每行记录后面保存两个隐藏的列来实现的。这两个列，一个保存了行的创建时间，一个保存行的过期时间（或删除时间）。当然存储的并不是实际的时间值，而是系统（事务）版本号。1.5MySQL的存储引擎MySQL会在数据库子目录下创建一个和表同名的.frm文件保存表的定义。1.5.1InnoDB存储引擎", "database/实时时序数据库.md": "1实时数据库vs关系型DB写入速度：实时数据库要求写入速度快，没有事务处理要求。读取方式和速度：SQL的读取方式不适应实时数据，RDB读取的速度也难满足要求。压缩性：由于实时数据具有连续性、重复性、关联性等特征，实时数据常常要求常驻内存，不压缩难以保存大量数据。数据备份存储：RDB只能整体备份存储，存储部分是无意义的，而实时DB要求可以部分存储和恢复。2现有的方案美国OSIsoft公司，PI；在国内应用最多，主要用于大型行业用户，如电力、石油、化工和冶金等。美国Wonderware公司，IndustrialSQLServer，简称INSQL；美国AspenTech公司，InfoPlus；北京庚顿：www.goldendata.com.cn**报价**：PI10万美元，每个接口6000美元，OPC接口收费；InfoPlus.2111万美元，每个接口1万美元，OPC接口不收费；IndustrialSQLServer6.5万美元，每个IDAS1200美元，OPCLink免费。优势：入门快。能借用这些企业快速的进入我们不熟悉的行业。方案成熟，坑少。劣势：成本高。技术基础受限制。参考：实时数据库简介和比较www.cnblogs.com/guohu/p/5165163.html实时数据库简介blog.csdn.net/liqfyiyi/article/details/6862886实时数据库www.voidcn.com/article/pftegnynisc.html3开源或替代方案**开源方案：**BekeleyDb只支持单机的，不支持网络访问，基本不适用。**替代方案：**采用Redis替代。读写速度能满足要求，但没有压缩存储能力，备份机制可能支持。采用HBase替代。参考：基于分布式存储的开源系统在实时数据库海量历史数据存储项目上的预研blog.csdn.net/rjj510/article/details/7987074劣势：Redis、HBase替代方案都只满足部分要求，不满足的部分必然影响功能或性能，可用于小规模应用，如果要支持大规模、稳定性要求高的应用，需要投入开发成本。4结论开源方案基本没有；如果是要求高的大型应用，建议选择购买，国外厂商太贵，国内厂商可以咨询一下北京庚顿价格；如果做一个要求不高的应用，从成本考虑，可以选择替代方案。", "database/数据交换.md": "KettleKettleGithubgithub.com/pentaho/pentahokettle数据对接―kettle使用www.niubua.com/?tag=etl&paged=2Kettle中有两种脚本文件，transformation和job，transformation完成针对数据的基础转换，job则完成整个工作流的控制。Kettle家族目前包括4个产品：Spoon、Pan、CHEF、Kitchen。**SPOON**允许你通过图形界面来设计ETL转换过程（Transformation）。**PAN**允许你批量运行由Spoon设计的ETL转换例如使用一个时间调度器。Pan是一个后台执行的程序，没有图形界面。**CHEF**允许你创建任务（Job）。任务通过允许每个转换，任务，脚本等等，更有利于自动化更新数据仓库的复杂工作。任务通过允许每个转换，任务，脚本等等。任务将会被检查，看看是否正确地运行了。**KITCHEN**允许你批量使用由Chef设计的任务例如使用一个时间调度器。KITCHEN也是一个后台运行的程序。scriptella使用简单，使用xml配置、javaapi调用，没有提供Job管理的功能，没有配置界面。scriptellaGithubgithub.com/scriptella/scriptellaetlTwoMinuteTutorialscriptella.javaforge.com/tutorial.htmlScriptellaETLReferencescriptella.javaforge.com/reference/index.htmlCommonsJEXLSyntaxcommons.apache.org/proper/commonsjexl/reference/syntax.htmlDataXDataX是淘宝开源的数据导入导出的工具，解决异构环境的数据交换问题，支持HDFS集群与各种关系型数据库之间的数据交换，对于不同数据库的支持都是插件式的，对于新增的数据源类型，只要新开发一个插件就好了。!_v_images/20191129171418.png其特点在于：1）官方版本支持的Hadoop版本较低（0.19），暂不支持高版本（如CDH4）。2）支持从一个HDFS集群到另一个HDFS集群之间的数据导入导出。3）支持数据不落地的并行导入导出。在异构的数据库/文件系统之间高速交换数据采用Framework+plugin架构构建，Framework处理了缓冲，流控，并发，上下文加载等高速数据交换的大部分技术问题，提供了简单的接口与插件交互，插件仅需实现对数据处理系统的访问运行模式：standalone数据传输过程在单进程内完成，全内存操作，不读写磁盘，也没有IPC开放式的框架，开发者可以在极短的时间开发一个新插件以快速支持新的数据库/文件系统。（具体参见《DataX插件开发指南》）DataX结构模式（框架+插件）!_v_images/20191129171549.pngJob:一道数据同步作业Splitter:作业切分模块，将一个大任务与分解成多个可以并发的小任务.Subjob：数据同步作业切分后的小任务ReaderLoader:数据读入模块，负责运行切分后的小任务，将数据从源头装载入DataXStorage:Reader和Writer通过Storage交换数据WriterDumper:数据写出模块，负责将数据从DataX导入至目的数据地DataX框架内部通过双缓冲队列、线程池封装等技术，集中处理了高速数据交换遇到的问题，提供简单的接口与插件交互，插件分为Reader和Writer两类，基于框架提供的插件接口，可以十分便捷的开发出需要的插件。比如想要从oracle导出数据到mysql，那么需要做的就是开发出OracleReader和MysqlWriter插件，装配到框架上即可。并且这样的插件一般情况下在其他数据交换场合是可以通用的。更大的惊喜是我们已经开发了如下插件：Reader插件hdfsreader:支持从hdfs文件系统获取数据。mysqlreader:支持从mysql数据库获取数据。sqlserverreader:支持从sqlserver数据库获取数据。oraclereader:支持从oracle数据库获取数据。streamreader:支持从stream流获取数据（常用于测试）httpreader:支持从httpURL获取数据。Writer插件hdfswriter：支持向hdbf写入数据。mysqlwriter：支持向mysql写入数据。oraclewriter：支持向oracle写入数据。streamwriter：支持向stream流写入数据。（常用于测试）您可以按需选择使用或者独立开发您自己的插件具体参见《DataX插件开发指南》SqoopSqoop是Apache下的顶级项目，用来将Hadoop和关系型数据库中的数据相互转移，可以将一个关系型数据库（例如：MySQL，Oracle，PostgreSQL等）中的数据导入到Hadoop的HDFS中，也可以将HDFS的数据导入到关系型数据库中。目前在各个公司应用广泛，且发展前景比较乐观。其特点在于：1）专门为Hadoop而生，随Hadoop版本更新支持程度好，且原本即是从CDH版本孵化出来的开源项目，支持CDH4应该没问题。2）支持并行导入，宣称速度很快（由于时间紧，未来得及进行真实环境的测试），可以指定按某个字段进行拆分并行化导入过程。3）支持按字段进行导入与导出。4）自带的辅助工具比较丰富，如sqoopimport、sqooplistdatabases、sqooplisttables等。!_v_images/20191129171637.pngDataXvsSqoopDataX直接在运行DataX的机器上进行数据的抽取及加载。而Sqoop充分里面了mapreduce的计算框架。Sqoop根据输入条件，生成一个mapreduce的作业，在Hadoop的框架中运行。从理论上讲，用mapreduce框架同时在多个节点上进行import应该会比从单节点上运行多个并行导入效率高。而实际的测试中也是如此，测试一个Oracletohdfs的作业，DataX上只能看到运行DataX上的机器的数据库连接，而Sqoop运行时，4台tasktracker全部产生一个数据库连接。调起的Sqoop作业的机器也会产生一个数据库连接，应为需要读取数据表的一些元数据信息，数据量等，做分区。Sqoop现在作为Apache的顶级项目，如果要我从DataX和Sqoop中间选择的话，我想我还是会选择Sqoop。而且Sqoop还有很多第三方的插件。早上使用了Quest开发的OraOop插件，确实像quest说的一样，速度有着大幅的提升，Quest在数据库方面的经验，确实比旁人深厚。在我的测试环境上，一台只有700m内存的，IO低下的oracle数据库，百兆的网络，使用Quest的Sqoop插件在4个并行度的情况下，导出到HDFS速度有5MB/s，这已经让我很满意了。相比使用原生Sqoop的2.8MB/s快了将近一倍，sqoop又比DataX的760KB/s快了两倍。另外一点Sqoop采用命令行的方式调用，比如容易与我们的现有的调度监控方案相结合，DataX采用xml配置文件的方式，在开发运维上还是有点不方便。参考DataX官方Wiki、代码code.taobao.org/p/datax/wiki/index/大数据异构环境数据同步工具DataX与Sqoop之比较www.xiaohui.org/archives/545.html淘宝异构数据源数据交换工具DataXwww.openopen.com/lib/view/1325771223625中软数据交换平台解决方案www.sinosoft.com.cn/khyal/K_ccbx_news/ccbx_news_0009.htmlRiDolDE数据交换平台www.ritoinfo.com/html/software/WhiteBook/20120914913.html", "database/明略大数据项目实践分享.md": "问题1.关系数据库到Hadoop的增量同步开源的方案Sqoop基于自增主键的增量同步要求主键自增，且主键丌会被更新基于最新更新时间戳的增量同步要求表中含有最后更新时间戳字段不足之处数据源丌一定都满足使用场景性能损失，每次重做数据数据丌一致，主键更新时导致数据丌一致我们的增强方案基于数据库操作日志的实时增量数据同步方案!_v_images/20191129172746.png优势数据秒级同步性能消耗低，目标数据无需重做数据一致性好，支持主键更新试用场景多，骋求源表有主键戒唯一索引问题2.数据权限需求简单粗暴83为每个权限需求新做数据89数据冗余89笨重丌灵活Hive权限管理+View83可能会有非常多的view需要行管理83可能成千上万的企业用户映射到Hive用户83丌能支撑复杂查询83缺乏统一的跨引擎的权限控制89诚拗Hive查询，限制丌了Impala和SparkSQL明略方案ACRE基于ApacheHadoop精确到cell级别的跨引擎的统一权限管理工具**业务能力**支持基于ACL和RBAC的混合授权模型可以限制开发人员支持Hive、Impala、Spark的统一授权管理支持行列（Cell）基本访问控制基于访问过滤的实现无需修改原数据库/表结构!_v_images/20191129172757.pngCell级别的跨引擎的统一权限管理ACRE原理权限模型行权限Where语句控制库、表、列权限语法树分析!_v_images/20191129172805.png问题3.百亿数据、百万用户的OLAP方案1：传统方案数据库分库把丌同商户分布到丌同的mysql数据库上前端做Proxy行路由问题大数据平台和Mysql之间的数据同步MysqlHA单个用户的数据量过大不易扩展运维成本方案2：基于Impala/SparkSQL等的方案问题商户数据存入一张表戒者多张表时没办法满足高并发按商户分表的话可能会建立非常多的表定制化的处理提高流程的复杂度方案3：明略方案基于Hbase支撑OLAP需求原始数据同步到Hbase构建数据表根据用户查询的各个维度，通过MapReduce行预构建查询索引索引的key为纬度的丌同组合索引的value中存入用户常用的各种metric计算结果**优势**百亿级的数据在秒级甚至亚秒级返回结果基于Hbase的实现轻松支撑高并发请求可视化配置、灵活定义的索引源自于Hadoop系统的超强扩展能力简单总结Hadoop平台面对的是异构多源的数据源，需要能够支持增量同步这些异构数据源的数据安全不权限是企业级客户永丌缺席的需求海量数据高并发的实时BI需求越来越多数据是基础，好的数据应用需要更丰富的数据关键字：数据中心方案、大数据、数据挖掘、Mining、Hadoop、Hive、Hbase、Sqoop、数据权限", "database/索引.md": "索引my.oschina.net/u/4407645/blog/3469303位图索引（BitMap）适用于值可枚举的字段哈希索引适用于等值检索，通过一次哈希计算即可定位数据的位置。与JAVA中HashMap的实现类似，是用冲突表的方式解决哈希冲突的。BTREE索引BTREE索引是RDBMS最常用的索引BTREE:有序平衡N叉树,每个节点有N个键值和N+1个指针,指向N+1个子节点倒排索引正向索引：给定文档标识，可以获取当前文档的（关键词、词频以及该词在文档中出现的位置信息）反向索引：给定了关键词标识，可以获取关键词（所在的所有文档列表，同时包含词频、位置等信息）", "misc/IPFS.md": "TOCFilecoin的终极指南：深挖Filecoin白皮书zhuanlan.zhihu.com/p/87632601Filecoin网络如何运作？在Filecoin中有3组用户：客户、存储矿工以及检索矿工。什么是客户、存储矿工以及检索矿工？什么是碎片？What's扇区？What's分配表？什么是订单什么是订单簿？什么是保证？存储市场的买盘、卖盘如何运作的？Manage.PledgeSectorPut.AddOrdersPut.MatchOrdersPut.ReceivePieceManage.AssignOrdersManage.SealSectorManage.ProveSectorManage.RepairOrders检索市场的买盘、卖盘如何运作的？Get.AddOrdersGet.MatchOrdersPut.SendPiece下图显示发生在网络上的所有活动!发生在网络上的所有活动_v_images/20200709161327521_9951.png对Filecoin协议的深入研究什么是DSN?DSN安全操作协调协议有哪些？DSN对两种错误进行容错：管理容错、存储容错。什么是管理容错？什么是存储容错？以往的共识算法有哪些弊端？Filecoin的共识算法是什么？什么是PoST（ProofofSpacetime）？其他一些问题Filecoin协议改进的可能性Filecoin:矿工是怎么赚取FIL的Filecoin系统的参与者有哪些？!Filecoin体系里面价值和代币是如何转移的_v_images/20200709165423472_14025.pngFilecoin的挖矿与BTC有什么不同？存储矿工收益来自哪3个方面？检索矿工收益来自哪个方面？!供需曲线_v_images/20200709170111900_23514.png", "misc/Vue学习记录.md": "toc开发环境CentOS7安装node参考：www.jianshu.com/p/d4a78b27fe83下载`wgetnodejs.org/dist/latestv13.x/nodev13.14.0linuxx64.tar.xz`解压```shellxzdnodev13.14.0linuxx64.tar.xz得到一个包nodev13.14.0linuxx64.tartarxvfnodev13.14.0linuxx64.tar得到一个目录nodev13.14.0linuxx64```做软链lns/opt/devel/node/bin/node/usr/bin/nodelns/opt/devel/node/bin/npm/usr/bin/npmlns/opt/devel/node/bin/npx/usr/bin/npxnpm使用加速npm```shellnpmconfigsetregistryregistry.npm.taobao.orgglobalnpmconfigsetdisturlnpm.taobao.org/distglobal```下载nodev10.23安装升级npm：`npminstallnpmg`安装cnpm：`npminstallgcnpmregistry=registry.npm.taobao.org`安装VS编译工具：`npmigwindowsbuildtools`i表示installg表示global全局安装nodegyp：`npminstallgnodegyp`安装nodegypwww.cnblogs.com/wangyuxue/p/11218113.htmlVSCode开发环境集成Cmder终端```\"terminal.integrated.shell.windows\":\"cmd.exe\",\"terminal.integrated.shellArgs.windows\":\"/kD:\\\\Dev\\\\cmder\\\\vendor\\\\init.bat\"```此模式下不支持TS自动编译，不建议使用。TypeScript安装`npminstallgtypescript`全局安装`tscv`查看安装版本TS自动编译`tscinit`生成`tsconfig.json`文件修改`tsconfig.json`文件中的`outDir`和`rootDir`设置编译监控：按`Ctrl+Shift+B`，选择`tscwatch`是自动监听，下次保存文件就自动编译。`tscbuild`是编译一次。pm2PM2是node进程管理工具，可以利用它来简化很多node应用管理的繁琐任务，如性能监控、自动重启、负载均衡等，而且使用非常简单。安装：`npminstallgpm2`express应用来举例。通过`npmstart`启动应用，其实就是调用`node./bin/www``pm2start./bin/wwwwatch`这里用了watch参数，意味着当你的express应用代码发生变化时，pm2会帮你重启服务，多贴心。PM2实用入门指南www.cnblogs.com/chyingp/p/pm2documentation.htmlVue知识ref、reactive、toRef、toRefs的区别vue3reactive函数www.jianshu.com/p/ba1169fa2c97reactive的用法与ref的用法相似，也是将数据变成响应式数据，当数据发生变化时UI也会自动更新。不同的是ref用于基本数据类型，而reactive是用于复杂数据类型，比如对象和数组。vue3toRef函数和toRefs函数www.jianshu.com/p/0c6ad50a9055ref本质是拷贝，修改响应式数据不会影响原始数据；toRef的本质是引用关系，修改响应式数据会影响原始数据。ref数据发生改变，界面会自动更新；toRef当数据发生改变是，界面不会自动更新。toRef传参与ref不同；toRef接收两个参数，第一个参数是哪个对象，第二个参数是对象的哪个属性。toRefs接收一个对象作为参数，它会遍历对象身上的所有属性，然后挨个调用toRef执行。nobinlinkscloud.tencent.com/developer/article/1440562zhuanlan.zhihu.com/p/36223413`npminstallnobinlinks````npmERR!nospcENOTSUP:operationnotsupportedonsocket,symlink'../acorn/bin/acorn'>'/home/baoguoxiao/windows/food/node_modules/.bin/acorn'npmERR!nospcThisismostlikelynotaproblemwithnpmitselfnpmERR!nospcandisrelatedtoinsufficientspaceonyoursystem.```webpackcommandnotfound的解决方法webpackcommandnotfound的解决方法blog.csdn.net/qq_38111015/article/details/79013475```shellnpminstallwebpackgnpminstallDwebpackclinobinlinks```通过ps、grep和kill批量杀死进程`psaux|grepqemu|awk'{print$2}'|xargskill9`npmrundev错误```jsscript{\"dev\":\"exportNODE_ENV=development;webpackwatchconfigwebpack.config.jsmodedevelopment&./bin/www\",}```要成功运行`npmrundev`，需要安装webpack,webpackcli,nodegyp,nodegypbuild；并链接到/usr/local/bin/目录下。```shellnpminstallgwebpacknpminstallgwebpackcli用来编译多语言支持npminstallgnodegypnpminstallgnodegypbuildsudolns/opt/node10/bin/webpack*/usr/local/bin/sudolns/opt/node10/bin/nodegyp*/usr/local/bin/```express`morgan`是express默认的日志中间件，也可以脱离express，作为node.js的日志组件单独使用。www.cnblogs.com/chyingp/p/nodelearningguideexpressmorgan.html```javascript//使用app.uselogger'dev'可以将请求信息打印在控制台app.uselogger\"dev\";//morgan支持stream配置项，可以通过它来实现将日志落地的效果//日志写入文件varaccessLogStream=fs.createWriteStreampath.join__dirname,\"access.log\",{flags:\"a\",};app.usemorgan\"short\",{stream:accessLogStream};````bodyparser`作用是对post请求的请求体进行解析。www.cnblogs.com/chyingp/p/nodejslearningexpressbodyparser.html```jsapp.usebodyParser.json;app.usebodyParser.urlencoded{extended:false};````bodyparser`实现的要点如下：处理不同类型的请求体：比如text、json、urlencoded等，对应的报文主体的格式\b不同。处理不同的编码：比如utf8、gbk等。处理不同的压缩类型：比如gzip、deflare等。其他边界、异常的处理。`cookieparser`是Express的中间件，用来实现cookie的解析www.cnblogs.com/chyingp/p/expresscookieparserdeepin.html```jsvarexpress=require\"express\";varcookieParser=require\"cookieparser\";varapp=express;app.usecookieParser;app.usefunctionreq,res,next{console.logreq.cookies.nick;//第二次访问，输出chyingpnext;};app.usefunctionreq,res,next{res.cookie\"nick\",\"chyingp\";res.end\"ok\";};app.listen3000;```webpack版本>v4，需要安装`webpackcli`。一般和自定义的`webpack.config.js`文件一起使用。例如，将`src/index.js`及其引用文件打包到`dist/bundle.js`文件中。```jsconstpath=require\"path\";module.exports={entry:\"./src/index.js\",output:{path:path.resolve__dirname,\"dist\",filename:\"bundle.js\",},};```nodemonnodemon用来监视node.js应用程序中的任何更改并自动重启服务,非常适合用在开发环境中。nodemon不需要对代码或开发方式进行任何更改。nodemon只是简单的包装你的node应用程序，并监控任何已经改变的文件。nodemon只是node的替换包，只是在运行脚本时将其替换命令行上的node。npmERR!codeELIFECYCLE```jsnpmcachecleanforcedeletenode_modulesfolderdeletepackagelock.jsonfilenpminstall```安装vue支持```shnpminstallvuecligcrossenv是用来接近linux、windows环境变量设置不一致的问题。crossenvNODE_ENV=productionwebpackconfigwebpack.config.jsmodeproductioncrossenvNODE_ENV=production在linux、windows都能认识npminstallgcrossenv```解决npm安装速度慢的方法```shonfigsetregistryregistry.npm.taobao.orgnpmconfigsetsass_binary_sitenpm.taobao.org/mirrors/nodesassnpmconfigsetphantomjs_cdnurlnpm.taobao.org/mirrors/phantomjsnpmconfigsetelectron_mirrornpm.taobao.org/mirrors/electronnpmconfigsetsqlite3_binary_host_mirrornpm.taobao.org/mirrors/sqlite3npmconfigsetprofiler_binary_host_mirrornpm.taobao.org/mirrors/nodeinspectornpmconfigsetchromedriver_cdnurlnpm.taobao.org/mirrors/chromedriver```make提示：g++命令未找到：`yuminstallgccc++`styleloader与vuestyleloader区别`vuestyleloader`跟`styleloader`基本用法跟功能是一样的，都是往dom里面插入一个style标签去让样式生效的，但是`vuestyleloader`支持vue中的ssr（服务端渲染），所以如果需要支持服务端渲染的vue项目，就需要用到`vuestyleloader`了，如果一般的vue项目的话，推荐使用`styleloader`，毕竟`styleloader`支持的功能还是丰富些，比如可以懒注入、可以指定位置插入标签等等。vueresourcevueresource是Vue.js的一款插件，它可以通过XMLHttpRequest或JSONP发起请求并处理响应。也就是说，$.ajax能做的事情，vueresource插件一样也能做到，而且vueresource的API更为简洁。另外，vueresource还提供了非常有用的inteceptor功能，使用inteceptor可以在请求前和请求后附加一些行为，比如使用inteceptor在ajax请求时显示loading界面。get请求```jsvarparams={params:{id:id}};this.$http.geturl,params.thenfunctionres{//响应成功回调vardata=res.body;//数据在res.body里面},functionres{//响应错误回调};```post请求```js//启用{emulateJSON:true}选项后，请求会以application/xwwwformurlencoded作为contenttype,像HTML表单一样。varparams={params:{id:id}};this.$http.posturl,params,{emulateJSON:true}.thenfunctionres{//响应成功回调vardata=res.body;//数据在res.body里面},functionres{//响应错误回调};```JSONP请求```jsvarJSONparams={params:{id:id}jsonp:'callback'//设置回调函数的参数的一个名字，默认是话是callback,}this.$http.jsonpurl,JSONparams.thenres=>{console.logres;},err=>{console.logerr;}```", "misc/wankoko.md": "tocspringboot连接mysql异常SSLHandshakeException:Noappropriateprotocolprotocolisdisabledorciphersuitesareinappropriatestackoverflow.com/questions/38205947/sslhandshakeexceptionnoappropriateprotocol解决办法修改文件`C:\\ProgramFiles\\Java\\jdk1.8.0_291\\jre\\lib\\security\\java.security`，找到```jdk.tls.disabledAlgorithms=SSLv3,TLSv1,TLSv1.1,RC4,DES,MD5withRSA,\\DHkeySize<1024,ECkeySize<224,3DES_EDE_CBC,anon,NULL,\\includejdk.disabled.namedCurves```去掉`TLSv1,TLSv1.1`这两项即可。WARN:EstablishingSSLconnectionwithoutserver'sidentityverificationisnotrecommended.AccordingtoMySQL5.5.45+修改`jdbc:mysql://127.0.0.1:3306/test?useUnicode=true&characterEncoding=utf8&useSSL=false`，加上`useSSL=false`即可。MavenMaven的聚合（多模块）和Parent继承cloud.tencent.com/developer/article/1452768虽然聚合通常伴随着父POM的继承关系，但是这两者不是必须同时存在的，从上面两者的介绍可以看出来，这两者的都有不同的作用，他们的作用不依赖于另一个的配置。父POM是为了抽取统一的配置信息和依赖版本控制，方便子POM直接引用，简化子POM的配置。聚合（多模块）则是为了方便一组项目进行统一的操作而作为一个大的整体，所以要真正根据这两者不同的作用来使用，不必为了聚合而继承同一个父POM，也不比为了继承父POM而设计成多模块。Maven全局排除excludeglobally方式一：Icreatedanemptyjarandcreatedthisdependency:```xml<dependency><groupId>commonslogging</groupId><artifactId>commonslogging</artifactId><scope>system</scope><systemPath>${basedir}/src/lib/empty.jar</systemPath><version>0</version></dependency>```方式二：使用`mavenenforcerplugin`插件commonslang3中常用方法blog.csdn.net/qq_35418518/article/details/89519979blog.csdn.net/qq_37334135/article/details/95480230", "misc/[SkillsMap]-前端.md": "TOC准备使用云笔记或Markdown记录在查询资料中遇到各种问题和答案。熟练使用VSCode，安装必需的各种插件。VSCode配置Vue开发环境Vetur+ESLint+Prettierblog.zuiyu1818.cn/posts/VScode_Vue.html看视频做练习时，所有的练习必须是自己手敲、调试过的，不能偷懒。看视频练习，建议使用Win键+Left/Rigth键将屏幕分成两个部分，左边看视频，右边敲代码。通用【资料】2019年Web前端入门的自学路线www.cnblogs.com/qianguyihao/p/8776837.html【资料】16.5k+千古前端图文教程，超详细的前端入门到进阶学习笔记。从零开始学前端，做一名精致优雅的前端工程师。github.com/qianguyihao/Web【资料】GitHub最全的前端资源汇总仓库（包括前端学习、开发资源、求职面试等）github.com/helloqingfeng/AwsomeFrontEndlearningresourceHTML/CSS实战1.观看视频Web前端最通俗易懂html+css合集9天速成www.bilibili.com/video/BV1bK4y1P7R9听懂此教程，需要对html/css有简单了解。此教程重在实操。2.完成上面视频中的例子作品。3.html&css初学者教程200+小项目www.bilibili.com/video/BV1XV411n7Qx参考视频完成例子，例子很多，完成越多越好。源码地址：`github.com/SCUTBrothers/HtmlCSSTutorialForBeginnersLearningMaterialsofYoutubeVideo`尽管有源码，还是自己一点一点敲出来、调试通过更有意义，别人源码可以作为参考。4.可选：github.com/zxuqian/htmlcssexamplesJavaScript1.观看视频JavaScript最新教程通俗易懂www.bilibili.com/video/BV1JJ41177di。内容包括JavaScript语法、JSON、DOM、jQuery。2.完成上面视频的所有的例子。3.阅读完《JavaScript语言精粹:修订版192.168.31.200/books/%E5%89%8D%E7%AB%AF/JavaScript%E8%AF%AD%E8%A8%80%E7%B2%BE%E7%B2%B9.pdf》不习惯电子版，可以自己购买纸质版。4.进阶练习。参考视频教程36个js网页特效教程www.bilibili.com/video/BV11E411K7TV，完成视频中的例子。5.【练习】JavaScript的学习代码总结github.com/csxiaoyaojianxian/JavaScriptStudy6.【练习】30DayVanillaJSChallengegithub.com/wesbos/JavaScript30英文视频：www.bilibili.com/video/av74601251另一个：github.com/soyaine/JavaScript30EasyUI/LayUI学习1.从EasyUI官网jeasyui.com/download/index.php下载jQuery版本的easyui，完成demo中以下列表中所有例子：ComboBoxDataGridLayoutPanel2.完成LayUI官方文档www.layui.com/doc/中练习，可参考Layui在线示例www.layui.com/demo/，练习内容如下：布局www.layui.com/doc/element/layout.html导航www.layui.com/doc/element/nav.html选项卡www.layui.com/doc/element/tab.html面板www.layui.com/doc/element/panel.html弹出层www.layui.com/doc/modules/layer.html数据表格www.layui.com/doc/modules/table.htmlTypeScript学习【入门】观看视频B站讲的最好的Vue3+TS从入门到精通www.bilibili.com/video/BV1CK411u75G的P1~P36，后面的是Vue3内容。【练习】参考源码：github.com/qinting513/Vue3TS_TodoList.git可选：阅读《TypeScript编程》Vue学习【入门】Vue3+TS快速上手24kcs.github.io/vue3_study/【入门】Vue2:观看视频4个小时带你快速入门Vuewww.bilibili.com/video/BV12J411m7MG【练习】参考源码：github.com/ZzZzzzxc/vueneteasecloudmusic【入门】观看视频B站讲的最好的Vue3+TS从入门到精通www.bilibili.com/video/BV1CK411u75GP37~P53。【练习】参考源码：github.com/qinting513/Vue3TS_TodoList.git【官方】阅读完Vue官方文档v3.cn.vuejs.org/guide/。【总结】Vue学习笔记：Vue入门学习mrbird.cc/VueLearnNote.htmlAngular1.观看视频Angular零基础入门教程www.bilibili.com/video/BV1M44y1k7JKFlutter/Dart学习1.Dart学习：阅读Dart语言基础入门篇zhuanlan.zhihu.com/p/101332443`Dart`与`Java`、`TypeScript`、`C`等语言惊人的相似，阅读上面的入门文章即可编程。如果没有面向对象编程基础，可观看视频DartFlutter2入门实战视频教程2021年更新www.bilibili.com/video/BV1S4411E7LYP1~P142.完成github.com/AweiLoveAndroid/Flutterlearning中Dart相关例子代码练习。3.Flutter学习：技术胖的Flutter学习路线jspang.com/detailed?id=58，这个视频是配blog笔记的，便于复习和查找。视频地址：Flutter基础视频教程www.bilibili.com/video/BV15t411U7yf其他可选：观看视频DartFlutter2入门实战视频教程2021年更新www.bilibili.com/video/BV1S4411E7LYP15~4.完成github.com/AweiLoveAndroid/Flutterlearning中Flutter相关例子代码练习。5.阅读Flutter实战book.flutterchina.club/。【入门】Flutter基础系列之入门一www.cnblogs.com/LeeGof/p/10493238.html【入门】Flutter基础系列之混合开发二www.cnblogs.com/LeeGof/p/10925672.html【练习】wechat_flutterFlutter版本微信github.com/fluttercandies/wechat_flutter开源项目【项目】awesomeflutter:Flutterlibraries,tools,tutorials,articlesgithub.com/Solido/awesomeflutter【项目】flutter常用140+组件的demogithub.com/alibaba/fluttergoUIgoteam/JQueryEasyUI1.5.xOfInsdepTheme码云Gitee.comgitee.com/xiahuibin/JQueryEasyUI1.5.xOfInsdepThemeloafer/jQuery.easyuiextend:jqueryeasyuiextensiongithub.com/loafer/jQuery.easyuiextend组件|Elementelementcn.eleme.io//zhCN/component/tableGitHubElemeFE/element:AVue.js2.0UIToolkitforWebgithub.com/ElemeFE/elementvueelementadminpanjiachen.github.io/vueelementadmin//dashboard鱼蛋儿/elementadmin码云Gitee.comgitee.com/yupeng957/elementadminlayui经典模块化前端框架www.layui.com/Bilibili/flv.js:HTML5FLVPlayergithub.com/Bilibili/flv.jsWeexweexproject.io/SVGSVG教程|菜鸟教程www.runoob.com/svg/svgtutorial.htmlXML问题:使用SVG编程www.ibm.com/developerworks/cn/xml/xmatters40/InteractiveSVGComponents|Peter'sWebsitewww.petercollingridge.co.uk/interactivesvgcomponentschokcoco/SVG:SVG奇思妙想github.com/chokcoco/SVGkbwood/svg:jQuerySVGplugingithub.com/kbwood/svggilbarbara/logos:AhugecollectionofSVGlogosgithub.com/gilbarbara/logoscolebemis/feather:Simplybeautifulopensourceiconsgithub.com/colebemis/feathersvgdotjs/svg.js:ThelightweightlibraryformanipulatingandanimatingSVGgithub.com/svgdotjs/svg.jsadobewebplatform/Snap.svg:TheJavaScriptlibraryformodernSVGgraphics.github.com/adobewebplatform/Snap.svgaptana/studio3rcp:ThisrepositorycontainstheRCPcodeforAptanaStudio3.Thisisthewrapper/packagingtomakeusanEclipsebasedstandaloneproduct.github.com/aptana/studio3rcpGeertjanWielenga/HTMLWYSIWYGgithub.com/GeertjanWielenga/HTMLWYSIWYGbatik详解yydcj的专栏CSDN博客blog.csdn.net/yydcj/article/details/8489419基于EMS图形子系统二进制与SVG图形文件同步转换的设计与实现_电工电气_中国百科网www.chinabaike.com/t/9642/2014/0414/2062213.html前端框架一套时尚好看的easyui皮肤gitee.com/tianyu1993/easyuisuperthemeTopJUI前端框架基于最新稳定版jQueryEasyUI构建www.topjui.com/", "misc/[SkillsMap]-区块链.md": "TOC2019版go语言+区块链学习路线图（含大纲+视频+工具+资料）blog.csdn.net/whczbk/article/details/94436774以太坊【教程】用Go来做以太坊开发goethereumbook.org/zh/比特币【教程】二十四小时玩转比特币钱包开发www.chaindesk.cn/witbook/9/70Java比特币开发教程:创建比特币钱包juejin.cn/post/6844903822469365768USDTUSDT的三种类型zhuanlan.zhihu.com/p/83905387ERC20tokenstandardRESTfulserviceusingSpringBootandweb3jgithub.com/web3labs/erc20restserviceweb3j样例程序github.com/ethjava/web3jsample区块链挖矿原理及区块链交易的七个步骤www.jianshu.com/p/a216c7c0de7f区块链学习路上的一些资料作为参考github.com/cancerts/studyblockchainreferrenceSolidity官方文档中文版wiki.jikexueyuan.com/project/solidityzh/以太坊官网文档中文版wiki.jikexueyuan.com/project/ethereum/汪晓明对区块链、以太坊的思考wangxiaoming.com/blog/archives/【资料】区块链学习路上的一些资料作为参考github.com/cancerts/studyblockchainreferrence【资料】收集所有区块链BlockChain技术开发相关资料github.com/chaozh/awesomeblockchaincn【教程】北京大学肖臻老师《区块链技术与应用》公开课www.bilibili.com/video/av37065233/区块链技术与应用视频笔记（14）blog.csdn.net/volunteer1024/article/details/95016814区块链技术与应用视频笔记（59）blog.csdn.net/volunteer1024/article/details/98221582第10讲BTC分叉blog.csdn.net/volunteer1024/article/details/100558255第11讲课堂问答blog.csdn.net/volunteer1024/article/details/100558276第1416讲ETH以太坊概述、账户、状态树blog.csdn.net/volunteer1024/article/details/100564872视频课程区块链技术核心概念与原理讲解www.imooc.com/learn/988java从零开始开发区块链技术www.bilibili.com/video/av43326226/区块链技术从入门到精通www.bilibili.com/video/av31859009", "misc/[SkillsMap]-工具.md": "TOC工具使用Eclipse远程调试（远程服务器端监听www.cnblogs.com/jianliangWu/p/7110681.html阿里巴巴程序员常用的15款开发者工具www.infoq.cn/article/1jV*BDxGwld6CWDVIt48非常全的VsCode快捷键blog.csdn.net/p358278505/article/details/74221214eclipse使用jetty:run命令调试blog.csdn.net/huaieli1/article/details/79494871nginx配置locationrootbw_0927博客园www.cnblogs.com/my_life/articles/7070805.htmlDocker学习笔记2Docker常用命令CSDN博客blog.csdn.net/we_shell/article/details/38368137xpath的学习www.cnblogs.com/xxyBlogs/p/4244073.html工具：chrome插件xpathhelper详细的批处理文件bat脚本命令blog.csdn.net/ankang654321/article/details/103644637Markdown编辑工具好的MD编辑器的标准1.可以贴图，且图片保存在文件的同级目录，相对地址加载2.支持大纲，且有标题能多级编号3.可以即时预览VSCode常用markdown插件MarkdownAllinOnemarkdownindexmarkdownaddindexPasteImage1.文件>首选项>设置>填入paste，设置Path值为${currentFileDir}/img，（img目录会自动创建）2.屏幕截图之后，使用ctrl+alt+v粘贴成markdown图片MarkdownPreviewEnhanced。各种功能包括：文件导入文件导出（HTML，PDF，Word，Ebook，RFT）定制扩展（修改默认CSS）princexml导出PDF需要blog.csdn.net/Max_xws/article/details/85319679", "misc/《五项管理》.md": "五项管理，终于收集齐了，与大家分享！《心态管理》、《目标管理》、《时间管理》、《学习管理》《行动管理》第一部分《心态管理》1、任何限制都是从自己的内心开始的（如果你连自己都不相信，你又怎么能够指望别人相信你，不要再给自己设限，那样你将白来一世，世界上没有后悔药可以买，人最终还是要靠自己，除此之外谁也帮不了你）2、心态决定未来（你的思维、行动、未来的世界早都是由你的心态已经决定好了的，你想最终怎么过，那就要问问你自己有什么样的心态了）只能告诉你：积极的心态像太阳，照到哪里哪里亮，而消极的心态就像是月亮，初一、十五不一样3、生活就是一面镜子，你用什么态度对待它，他就用什么态度回馈你（你是笑还是哭呢，全在你一念之间，好好想想到底该怎样去照“镜子”）4、成功====心态*能力（能力不会为零，要想数值更大，成功的机会更多，你该怎么办？这种算术问题不用我教了吧）5、有斗志再大的困难都不怕，一旦失去斗志，你将往往一事无成（持之以恒不是谁都能做到的，时刻扪心自问一下，你怎么样？）6、先有交流的机会；再有交心的机会；才有交易的机会（人都要为自己而活，不要活在别人的世界里，自己认为对的就抓紧时间去做吧，那样即使失败也不会后悔）7、内心的世界控制外在的世界（不要低估自己的潜意识，好好利用一下，存在定有道理）8、要学会心态转换（挫折==存折；压力===动力；障碍===最爱）9、改变别人也许很难，那就试着改变自己并影响他人（我们可以做的就是用乐观的心态感染周围的人）10、事情在你手里出了差错，记住是你自己的问题不能怪罪他人11、永远想你得到的，不要想你失去的（不要给自己找郁闷）12、不冒险比冒险更危险（失败是你通往成功所积累的财富，失败越多，财富越大，更何况你冒险了并不一定失败，更大程度会是成功）13、你认为你行你就行（自己否定自己，别人认为你行你也行不了）14、帮助别人就是帮助自己（人之初、性本善）15、上帝为你关上一扇门，同时又为你打开一扇窗（阳光一般是从窗户照射进来的，你又何必留恋那黑暗之门）16、只有管好自己才能管好别人（不要把制度当成狼狗，只要别人不要自己，身体力行，作出榜样）第二部分《目标管理》1、有目标者自有千计万计，无目标者只感千难万难（目标就是灯塔，让你少走弯路的引导者）2、目标不明确，努力再多也是劳而无功（与其做无用功，不如先找好灯塔方向不对，努力白费）3、做对的事比把事做对更重要（对的事情就是你的目标）4、人之所以伟大，是因为目标伟大5、世界上没有懒惰的人，只有没有目标的人（没有目标就没有动力）6、目标聚集原则（瞄准靶心再开枪；锁定客户在出手；不要用机关枪打鸟；不要大海里捞针；目标要单一，精准并聚焦）7、实现目标没有捷径可以走（不经历风雨怎能见彩虹）8、目标要不断校正（与时俱进，但大的方向要走对）9、企业家的高度决定了企业的高度，企业家的远见决定了企业的远见10、只要你有目标整个世界都为你让路11、成功的尺度不是做了多少工作二十获得多少成果12、把目标分解成远期、中期和近期（督促自己去逐步完成）第三部分时间管理1、时间用在哪里，你的结果就在哪里2、你抛弃时间，时间也会抛弃你3、浪费时间等于慢性自杀（有效利用时间能拓展你生命的宽度，浪费时间就等于缩短你的生命）4、从不浪费时间的人，没有功夫抱怨时间不够用5、做事从不拖延（给自己设定时限，并督促自己去实现）6、条理要清晰（能做到的要马上行动，待做的事情记入日志，保留的东西立即归档，做不出决定的先扔掉）7、要马上行动（立即记录，立即行动，天天反省，马上改进）8、20%的重要事项要用80%的时间来保证完成9、一万年太久，只争朝夕（珍惜现在，而不是打算明天将怎么怎么样）10、没有安排不了的时间，只有自己没有安排时间11、时间管理上的帕金森定律（给你多少时间你花多少时间，时间太多反而让你托磨工作，效率极低，并且会托磨到最后一刻，所以你唯一需要做的就是如何提高你的工作效率）12、会时间管理的人是少做而不是多做（并不是你做的多，就代表你是用功的，应把时间花在最重要的事情上）13、时间的最大损失是拖延、期待和依赖将来14、人生最大的成功就是在最短的时间内达成最多的目标15、富人爱时间穷人爱金钱时间一去不复返，千金散尽还复来第四部分《学习管理》1、参加读书分享会（讨论心得，互相学习）2、很多时候我们不缺少学习而缺少的是练习（不用于到实践中就等于白学）3、专家是持续学习出来的（每天学习一小时，一年后成为专家，三年行业专家，五年国家级专家，你能做到吗？看似简单，先试试再说）4、向一流人士学习，与成功人士为伍（学习一流人士的成功经验可以帮助我们少走弯路，与成功人士交朋友可以扩大人脉资源）5、大量学习成功者所读的书籍（里面定有走向成功的规律可循）6、每天进步1%一年之后的今天你就进步了365%（何乐而不为）每天学习一些新知识，每天进步一点点，总会有质变的一天7、把学到的知识总结归纳，能够说清楚才是自己的，否则书读的再多也白费8、现在更需要专家，而不是通才（就像看病，很多人是去找专家的）9、相信你为工作付出的永远比它给你的要少（不要天天哭着喊着喊累，为什么要这样呢？）10、最有效的学习方式就是“做”（“听”能吸收２0％；“说”能吸收５0％；“做”要吸收７0％）11、不要只低头拉磨，还要长抬头看天（外面的世界是精彩的，不要把自己封闭起来）12、时刻问自己两句（１、我学到了什么２、工作上我将如何改进）13、学习是一把手的工程（学习力就是企业的竞争力）14、高知高酬，高智高位15、明天的文盲将会是那些不会主动寻求新知识的人第五部分《行动管理》１、责任/２＝0（如果一件事交给两个人去做就会造成容易推诿，推卸责任，办事拖沓）２、行动是治疗恐惧的良药（要害怕什么就去做什么）３、穿上鞋子才知道哪里夹脚（先行动起来，在行动中纠正、调整、完善、检查）４、把相同卖的不同（你比竞争对手做得更好不容易，做得不同却很容易）５、任何事都是做出来的不是说出来的６、行动比语言更能取信于人Actionspeakslouderthanwords７、士兵要死在战场上不能死在战壕里；销售人员要死在市场上，不能死在工厂里８、跟对人，做对事用对方法９、世上没有做不成的事，只有做不成事的人１０、永远把注意力集中在解决问题的方法上１１、人之初，性本懒，要想做，制度管１２、读万卷书，不如行万里", "misc/《卓有成效的管理者》.md": "核心观点我们的工作必须是卓有成效的，而卓有成效是可以学会的。那么怎样做到卓有成效呢，德鲁克给出了如下方法：“时间管理为重要的工作留出“整块”时间”:“把眼光集中在自己的贡献和价值上”:“充分发挥人的的长处”;“要事优先集中于重要的领域，”;“有效决策－做正确的事”这5个方法,看起来似乎有些平淡无奇，但是，深入浅出的观点背后是入木三分的深刻，反复咀嚼后更体会到甘甜无比回味无穷。\u000b1、时间管理为重要的工作留出“整块”时间时间是一个稀缺资源，如不能有效利用，将很难卓有成效。但是,各种会议、协调工作、沟通交流包围着我们，让我们常常疲于奔命日常事务而荒于要务。我们常常觉得，有一件重要的任务，比如说整理项目文档。因为复杂，需要留待有时间时慢慢解剖，然而时间几个月后都没有到来；因为时间总被电话、邮件,琐碎的事务分割成一块块的……德鲁克说，重要的来做。例如做一个计划，整理项目文档，用45个小时集中精力也许就能做出雏形，然后零敲碎打修修补补即可；如果每天只花少量的时间，哪怕用一个月时间也做不出来。问题是，怎样找到整块的时间呢？德鲁克也开出了药方：追踪时间记录，删除不必要的浪费。人们对时间的印象往往和实际存有差距。一位CEO言之凿凿地说，他的时间1/3花在会见重要客户，1/3用于商谈业务，1/3用于重要社会活动。但拿过秘书做的时间统计后，他惊讶地发现，原来自己花很多时间帮熟悉的老客户催订单，这原本是销售经理的事情。另一位每天疲于参加各种宴会和社会活动的CEO，经过仔细鉴别之后发现，有相当多的活动本来是不必参加的，而主人的邀请不过是碍于情面。授权。授权不是把自己的工作交给别人去做，而是只做属于自己，别人无法替代的工作。所以德鲁克建议:比如一上班,就列出自己一天的任务，然后为重要工作留出整块时间，琐事集中处理。2、我们必须把目光集中到贡献上,着眼于对企业的贡献。通过强调贡献，使自身的价值转化组织成果.组织聘我们，就是希望我们对组织有贡献,重视贡献就是重视成果,就是希望我们不是为了完成任务而工作,而是为了取得成果而工作,许多人重视勤奋,但忽略成果,我们经常感觉自己忙忙碌碌,回过头,却不知道自己忙了些什么。一个人能重视贡献，是人才发展最大的动力，可以将眼光放得更远，这样也就提高自己的工作水准。重视贡献的人最后都成为了有所作为的人，他们之所以成功，因为他们能适应不同的价值观承诺.3、要求充分发挥人的长处使平凡的人做出不平凡的事。组织不能依赖于天才,因为天才稀少如凤毛麟角。绩效精神要求每个人都充分发挥他的长处,把个人放在他能做什么上，而不是他不能做什么上。优秀的组织都懂得利用每个人的长处,同时还使其成员的缺点相抵消。4、要事优先集中于重要的领域，有效的管理者坚持把重要的事放在前面做，精力集中于少数主要领域,每次只做好一件事。在少数重要的领域当中，如果有优秀的绩效就可以产生重要的成果。实际上“要事优先”是和“掌握自己的时间”相辅相成的。也是支撑着管理者工作卓有成效的两大支柱，缺一不可。我们所关心的不再是如何处理时间资源，而是管理者的终极产品组织和管理者的绩效问题。没有什么比忙忙碌碌更容易，没有什么比事半功倍更难。推荐”高效理念黄金法则――麦肯锡卓越工作方法”5、有效决策－做正确的事有效决策的五个要素非常重要:1.了解问题的性质，是经常性的，还是突发性的个案，用制定规范解决，还是根据实际情况个案处理。2.要确定边界条件，哪些是原则性的问题，哪些可以机动灵活。3.权衡和比较各种方案。特别是对立的方案,让我们从另外的角度,去审视和看待问题.4.兼顾执行的具体措施，让决策变成可以被落实贯彻的行动。5.重视意见的反馈，来印证和检查决策的正确性和有效性。有了以上五点,我想所有的难题都可以找到解决方案。德鲁克经典管理箴言一个平静无波的工厂，必是管理上了轨道，如果一个工厂高潮迭起，大家忙得不可开交，就必是管理不善。管理好的工厂，总是单调无味，没有任何激动人心的事件，那是因为凡是可能发生的危机都早已预见，且已将解决办法变成了例行工作。张瑞敏也说:过去好的工厂的标志,总是轰轰烈烈，大干快上而又激动人心的，但仔细琢磨，那些”心中无数决心大”的誓师大会,表面上是轰轰烈烈，但从本质上看对提高管理的有效性却没有任何帮助，那些在突发事件中表现英勇的人和事的确激动人心，但我们需要的不是停留在对这些英雄人物大张旗鼓的表彰上，而是要扎扎实实建立避免发生这类突发事件的机制。就是要防患于未然，将例外管理变成例行管理.一个组织的“士气”并不意味着“人们在一起相处得是否好”，其检验标准应该是绩效。如果人与人之间的关系不以达成出色绩效为目标，那么实际上就是不良的人际关系，就是互相迁就，互相包庇,并会导致团队士气的萎靡。在工作的环境下，如果我们不能有所成就，就算我们能与人和谐相处，愉快交谈，那又有什么意义呢?反过来说:如果能在工作上取的成绩，即使偶尔疾言厉色，也不至于影响人际关系.“我永远不会提拔一个从不犯错误、特别是从不犯大错误的人担任高层的工作。他肯定将成为一个工作平庸的管理者。”“人们工作时，不可避免犯有这样或那样的错误”。“一个人越好，他犯的错误就越多――因为他会努力尝试更多的新东西。”会议是管理者每日使用的管理工具,所以,为了使会议更加有效,有效的管理者会问：“我为什么要召开这次会议，是为了取得某项决策，还是为了宣布什么？还是为了澄清我们应该做些什么,”他在会前一定要想清楚会议的目的，因为他一定坚持:会议必须真正有所贡献.所以,有效的管理者会提前说明会议的目的，要求达成的贡献，同时，他还会在会议过程中设法让会议紧紧围绕主题，在会议结束之前，他应当回到开场所介绍的主题，使会议获得的结论和主题相符。", "misc/《多空转折一手抓》.md": "前言唯有量价关系才是所有指标的最先行指标。商品的涨跌都是市场主力作量作价的结果。“随势操作善设停损，多头看支撑，空头看压力，严格执行停损才能小赔出场。反之，达设定的涨跌幅满足，则波段获利了结，以达大赚小赔的目的。”操作不要急躁，行情是等来的，当机会来时胆大心细，如台北股市即使一年才出现一次大多头买进时机或大空头放空时机，只要掌握住一两次就够了。“滚石不生苔，短线不聚财”。从基础到进阶，除了研读历史外，还要不断累积实务经验。我坚守的操作方法是“严设停损，资金控管，波段随势操作”。波段操作是以长线为基础，时间短至数月，长至数年。既然是波段操作，当然就是尽量使用半年以上的日线或周线来做趋势上的判断，当型态上的结构有机会到达转折时，小时线或五分钟线便是掌握先机的重要参考指标，所以看五分钟线或小时线并不是为了要作短线，而是因为判断长线的趋势，即将出现转折的时候，可利用较短的五分钟线或小时线，抢得先机作积极的介入。而此时的五分钟线或小时线，也大多是拉长至两三个月来看量价变化是否出现契机，例如K线型态上作出约三个月的底部。当来到上缘颈线量缩关前整理判断时机已成熟时，一旦五分钟线或小时线带量突破颈线，便作积极介入同时设好停损即可，主要看的还是波段的大利润。历史线图的型态与量价结构所产生的变化是绝对要研读。", "misc/《游戏改变世界》.md": "!_v_images/20191118221753.png本书的两个感悟点游戏的四大特征目标、规则、反馈系统、自愿参与这让我想到，怎样提供工作和学习的效果，并且自愿参与，不觉厌烦。我为了儿子制作了周任务卡，没有设定主任务（相当于老王或boss），设定每天可能任务（一般任务），供孩子选择，每完成一项任务，按照规则加分，获得荣誉加分（游戏中的奖励），各种犯规要扣分（被小怪给打了）。在工作中，制定目标一定要可度量，所以类似燃尽图很重要，可以看任务进展，实时反馈。游戏与社交微信仅只是聊天，就能汇集那么多人。游戏的诱惑比聊天大得多，可以想象用游戏把你的亲朋好友联系在一起。你可以远方的父母一起玩麻将、斗地主，你们可以比积分，是多么美妙。但是目前还没有这样的游戏。", "misc/区块链.md": "TOC学习过程区块链（BlockChain）结构解析blog.csdn.net/yinanmo5569/article/details/80313710Python开发区块链Python实现最简单的区块链mp.weixin.qq.com/s?src=11&timestamp=1570764209&ver=1905&signature=Fo09EY6xZp2oEL6cH7XjnOhKIiPn63xU0ey2*Ws3yCEzOEZ0nfrStidxbVzmWcaAIQeyvzxbCJn5CfgCZZ7KVM2liEKThiiXCPeYqttVPBFUhj893uKxmmxC9T5ibKr&new=1用Python从零开始创建区块链learnblockchain.cn/2017/10/27/build_blockchain_by_python/1第1课1.1比特币1.1.1比特币起源BitcoinBTC:APeertoPeerElectronicCashSystem点对点电子现金系统中本聪在2009年初挖出第一批比特币总量不超过2100万枚1.1.2比特币底层机制去中心化，P2P分布式数字货币系统共识机制POW工作量证明非对称加密算法数字签名区块链账本技术1.1.3比特币特性硬通货跨境交易易携带只需一个私钥隐秘性只暴露钱包地址无货币超发1.1.4比特币钱包钱包就是P2P里的P节点，主要用来管理私钥和比特币转账地址钱包分类轻钱包只存储维护跟你自己交易相关的数据中心化钱包数字货币交易所钱包下载地址：bitcoin.org/zh_CN/download1.1.5比特币产生比特币由矿工挖矿产生生成的比特币被记录在矿工的名下比特币通过矿工的公钥哈希值锁定比特币通过交易UTXO在节点之间转移UTXO未花费的交易1.2区块链1.2.1区块链分布式账本系统!_v_images/20191120203705.png共识机制POW工作量证明通过挖矿证明自己是善意节点，并获得生成区块和在该区块记账的权利基于P2P网络，每个全节点都存储着最全的比特币交易记录新区块通过包含前一个区块头部的哈希值区块的唯一标识建立链接关系区块里装的就是所有的比特币交易记录UTXO1.2.2区块链网络区块链节点矿工运行于强大或专用的硬件（比如ASIC）之上，主要目的是挖矿全节点这些节点验证矿工挖出来的块的有效性，并对交易进行确认。SPV节点简单支付验证，如钱包节点1.2.3区块链挖矿在全网中和其他节点竞争计算解一个难题的过程证明自己是非恶意节点获得的权利和义务记账权把交易写入区块里广播义务把区块在全网广播获得的奖励挖矿奖励12.5BTC收取交易手续费1.2.4区块链共识机制拜占庭将军问题共识机制之一!_v_images/20191120203727.pngPOWProofofWork工作量证明通过付出大量工作代价证明自己是非恶意节点计算一个随机数nonce，算出的正确随机数即POW获取记账权利打包交易并通知其它节点理性人都是逐利的，POW抑制了节点的恶意动机1.2.5区块链交易确认当一项交易被链上的区块收录后，就是交易确认在此区块之后每产生一个区块，此项交易的确认数相应加1经过6个以上区块确认的交易才是安全确认的，因为篡改成本巨大比特币钱包可以设置交易确认数1.2.6区块链区块生成!_v_images/20191120203748.png矿工在挖矿前要组建区块将coinbase交易打包进区块将交易池中高优先级的交易打包进区块创建区块头部!_v_images/20191120203804.png挖矿成功后，将计算出来的随机数noncePOW填入区块头部，并向临近节点传播1.2.7区块链区块验证相邻节点收到新区块后，立即做以下验证验证POW的nonce值是否符合难度值检查时间戳是否小于当前时间两小时检查merkle树根是否正确检查区块size要小于区块size的上限第一笔交易必须是coinbase交易验证每个交易1.2.8区块链分类公有链任何人都可以参与使用和维护，信息公开，如比特币，以太坊等联盟链若干组织共同维护，使用有权限限制，信息受保护，如银联组织私有链集中管理者进行限制，内部少数人可以使用，信息不公开1.2.9区块链篡改账本双花问题：同一笔比特币被支付多次!_v_images/20191120203825.png!_v_images/20191120204008.png!_v_images/20191120204032.png!_v_images/20191120204051.png1.3密码学1.3.1密码学对称加密对称加密加解密钥相同缺点：无法确保密钥被安全传递常用算法：DES、3DES（TripleDES）、AES等!_v_images/20191120204311.png1.3.2密码学非对称加密非对称加密公私钥加密对，公钥加密，私钥解密!_v_images/20191120204322.png!_v_images/20191120204333.png公钥由私钥生成，私钥可以推导出公钥从公钥无法推导出私钥优点：解决了密钥传输中的安全行问题常用算法：RSA、ECC（椭圆曲线加密算法使用场景：SSH安全验证等问题：解决了信息传送的问题，如何验证发送方是正确的了?1.3.3密码学哈希Hash哈希将一段数据任意长度经过计算转换成一段定长的数据不可逆性几乎无法通过哈希的结果推导出原文无碰撞性两个不同原文哈希后的结果一定不同常用算法：MD5，SHA256使用场景数据库中的用户密码存储MD5挖矿计算SHA2561.3.4密码学数字签名数字签名公私钥加密对，私钥签名，公钥解签名使用场景比特币交易验证等!_v_images/20191120204346.png1.3.5Java实现区块链与比特币区块链结构挖矿生成新区块共识机制比特币交易比特币钱包区块链P2P网络通讯!_v_images/20191120204402.png比特派第2课区块链整体结构设计与实现共识机制工作量证明原理挖矿算法!_v_images/20191120204416.png```java//挖矿算法//创建一个空的区块链List<Block>blockchain=newArrayList<>;//生成创世区块Blockblock=newBlock1,System.currentTimeMillis,newArrayList<Transaction>,1,\"1\",\"1\";//加入创世区块到区块链里blockchain.addblock;System.out.printlnJSON.toJSONStringblockchain;//创建一个空的交易结合List<Transaction>txs=newArrayList<>;Transactiontx1=newTransaction;Transactiontx2=newTransaction;Transactiontx3=newTransaction;txs.addtx1;txs.addtx2;txs.addtx3;//加入系统奖励的交易TransactionsysTx=newTransaction;txs.addsysTx;//获取当前区块链里的最后一个区块BlocklatestBlock=blockchain.getblockchain.size1;intnonce=1;Stringhash=\"\";whiletrue{hash=CryptoUtil.SHA256latestBlock.getHash+JSON.toJSONStringtxs+nonce;ifhash.startsWith\"0000\"{System.out.println\"=====计算结果正确，计算次数为：\"+nonce+\",hash:\"+hash;break;}nonce++;System.out.println\"计算错误，hash:\"+hash;}BlocknewBlock=newBlocklatestBlock.getIndex+1,System.currentTimeMillis,txs,nonce,latestBlock.getHash,hash;blockchain.addnewBlock;System.out.println\"挖矿后的区块链：\"+JSON.toJSONStringblockchain;```!_v_images/20191120204437.png密码学非对称加密非对称加密公私钥加密对，共要加密，私钥解密公钥由私钥生成，私钥可以推到出公钥从公钥无法推导出私钥优点：解决了密钥传输中的安全问题常用算法：RSA、ECC（椭圆曲线加密算法）使用场景：SSH安全验证等问题：解决了信息传送的问题，如何验证发送方是正确的？!_v_images/20191120204516.png```JAVA@TestpublicvoidtestEncryptthrowsException{System.err.println\"公钥加密――私钥解密\";StringinputStr=\"abc\";bytedata=inputStr.getBytes;byteencodedData=RSACoder.encryptByPublicKeydata,publicKey;bytedecodedData=RSACoder.decryptByPrivateKeyencodedData,privateKey;StringoutputStr=newStringdecodedData;System.err.println\"加密前:\"+inputStr+\"\\n\\r\"+\"解密后:\"+outputStr;assertEqualsinputStr,outputStr;}```密码学哈希（Hash）哈希讲一段数据（任意长度）经过计算转换成一段定长的数据不可逆性几乎无法通过哈希的结果推导出原文无碰撞行两个不同原文哈希后的结果一定不同常用算法：MD5、SHA256使用场景：数据库中的用户密码存储（MD5）挖矿计算（SHA256）密码学数字签名1、数字签名：公私钥加密对，私钥签名，公钥验证签名。2、使用场景：比特币交易验证等。!_v_images/20191120204542.png```JAVA@TestpublicvoidtestSignthrowsException{System.err.println\"私钥签名――公钥验证签名\";StringinputStr=\"sign\";bytedata=inputStr.getBytes;//产生签名Stringsign=RSACoder.signdata,privateKey;System.err.println\"签名:\\r\"+sign;//验证签名booleanstatus=RSACoder.verifydata,publicKey,sign;System.err.println\"状态:\\r\"+status;assertTruestatus;}```生成钱包```JAVA//本地生成公私钥对Map<String,Object>initKey=RSACoder.initKey;StringpublicKey=RSACoder.getPublicKeyinitKey;StringprivateKey=RSACoder.getPrivateKeyinitKey;returnnewWalletpublicKey,privateKey;```3第3课：比特币的设计与实现比特币交易UTXO交易输出交易输入比特币余额3.1比特币UTXOUTXOunspenttransactionoutput未花费交易输出比特币拥有者的公钥锁定（加密）的一个数字UTXO就是比特币，比特币系统中只有UTXO,没有比特币新的UTXO由挖矿或交易产生UTXO存在全节点的数据库里转账交易消耗自己的UTXO,同时生成新的UTXO,并用接受者的公钥锁定比特币系统中用户的“余额”实际上并不直接存在，而是通过计算得来3.2比特币交易模型交易输出（UTXO）锁定的比特币数量锁定脚本（用接收者的公钥哈希）交易输入（UTXO+解锁脚本）解锁脚本（发送者的签名和公钥）签名对发送者和接收者的公钥哈希以及整个交易签名!_v_images/20191120204624.png!_v_images/20191120204643.png3.2比特币交易全流程!_v_images/20191120204701.pngcoinbase的系统交易，input为空。3.3交易代码```JAVA//交易发起方WalletwalletSender=Wallet.generateWallet;//交易接收方WalletwalletReciptent=Wallet.generateWallet;TransactionInputtxIn=newTransactionInputtx2.getId,10,null,walletSender.getPublicKey;TransactionOutputtxOut=newTransactionOutput10,walletReciptent.getHashPubKey;Transactiontx3=newTransactionCryptoUtil.UUID,txIn,txOut;//假定tx2之前已经被打包进区块，也就是已经被记录进账本了tx3.signwalletSender.getPrivateKey,tx2;txs.addtx3;```3.4签名代码对发送者和接收者的公钥哈希以及整个交易签名```java/***用私钥生成交易签名**@paramprivateKey*@paramprevTx*/publicvoidsignStringprivateKey,TransactionprevTx{ifcoinbaseTx{return;}if!prevTx.getId.equalstxIn.getTxId{System.err.println\"交易签名失败：当前交易输入引用的前一笔交易与传入的前一笔交易不匹配\";}TransactiontxClone=cloneTx;txClone.getTxIn.setPublicKeyprevTx.getTxOut.getPublicKeyHash;Stringsign=\"\";try{sign=RSACoder.signtxClone.hash.getBytes,privateKey;}catchExceptione{e.printStackTrace;}txIn.setSignaturesign;}/***生成用于交易签名的交易记录副本**@return*/publicTransactioncloneTx{TransactionInputtransactionInput=newTransactionInputtxIn.getTxId,txIn.getValue,null,null;TransactionOutputtransactionOutput=newTransactionOutputtxOut.getValue,txOut.getPublicKeyHash;returnnewTransactionid,transactionInput,transactionOutput;}```", "misc/工作日志.md": "GolangGomodules使用步骤：blog.csdn.net/fly910905/article/details/104297446Go%20modules%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4%EF%BC%9Agomodinitgomodtidygomodverifygomodvendorgolang如何将interface转为int,string,slice,struct等类型www.fidding.me/article/99SpringBoot＠EnableAutoConfiguration通过＠EnableAutoConfiguration启用Spring应用程序上下文的自动配，这个注解会导人一个EnableAutoConfigurationlmportSelector的类，而AutoConfigurationlmportSelector这个类会去读取一个spring.factories下key为EnableAutoConfiguration对应的类全限定名的值。exclude一个AutoConfiguration在`application.properties`文件加入下面这行。`spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration`或者`@EnableAutoConfigurationexclude=SecurityAutoConfiguration.class`@SpringBootApplication的exclude不起作用。@EnableConfigurationPropertiesYapi安装启动安装```mkdiryapicdyapigitclonegithub.com/YMFE/yapi.gitvendors//或者下载zip包解压到vendors目录（clone整个仓库大概140+M，可以通过`gitclonedepth=1github.com/YMFE/yapi.gitvendors`命令减少，大概10+M）cpvendors/config_example.json./config.json//复制完成后请修改相关配置cdvendorsnpminstallproductionregistryregistry.npm.taobao.orgnpmruninstallserver//安装程序会初始化数据库索引和管理员账号，管理员账号名可在config.json配置nodeserver/app.js//启动服务器后，请访问127.0.0.1:{config.json配置的端口}，初次运行会有个编译的过程，请耐心等候```启动启动yapi:/home/dyys/myyapi/startyapi.sh利用pm2方便服务管理维护。```shellnpminstallpm2g//安装pm2cd{项目目录}pm2start\"vendors/server/app.js\"nameyapi//pm2管理yapi服务pm2infoyapi//查看服务信息pm2stopyapi//停止服务pm2restartyapi//重启服务```安装gitweb参考：fcgiwrap和nginx安装aandds.com/blog/toolfcgiwrap.htmlSystemctl用法详解windard.com/blog/2020/06/26/LinuxService安装和配置fcgiwrap安装：`yuminstallfcgiwrap`启动：`systemctlstatusfcgiwrap.service`文件`/lib/systemd/system/fcgiwrap.service`：```shellUnitDescription=SimpleCGIServerAfter=nssuserlookup.targetServiceEnvironmentFile=/etc/sysconfig/fcgiwrapExecStart=/usr/sbin/fcgiwrap${DAEMON_OPTS}c${DAEMON_PROCS}方式一：nohupfcgiwrapfc4sunix:/run/fcgiwrap.socket&：nginx和web服务必须是一台电脑方式二：nohupfcgiwrapfc4stcp:0.0.0.0:9000&：两台电脑启动2个fcgiwrapworker进程ExecStart=/usr/sbin/fcgiwrapfc2sunix:/run/fcgiwrap.socket暂停1秒，等待/run/fcgiwrap.socket生成ExecStartPost=/bin/sleep1ExecStartPost=/usr/bin/chownnginx:nginx/run/fcgiwrap.socketUser=nginxGroup=nginxInstallWantedBy=multiuser.targetAlso=fcgiwrap.socket```修改监听套接字文件的owner：`chownnginx:nginx/var/run/fcgiwrap.socket`。fcgiwrap.service文件已经写入，可以省去。自启动：`systemctlenabledfcgiwrap.service`安装gitweb`yuminstallgitweb`默认gitweb是安装到apache目录中的，也就是/var/www/git目录下，专门用来显示gitweb页面配置nginx```location/gitweb.cgi{root/var/www/git/;includefastcgi_params;gzipoff;fastcgi_paramSCRIPT_NAME/var/www/git/gitweb.cgi;fastcgi_paramGITWEB_CONFIG/etc/gitweb.conf;fastcgi_passunix:/var/run/fcgiwrap.socket;}location/{root/var/www/git/;indexgitweb.cgi;}```配置ReviewBoard的RepositoryRawFileURLMask:192.168.31.200:8180/?p=blocks/blockscomponents.git;a=blob_plain;f=<filename>;h=<revision>整合gogs与ReviewBoardreviewboard对gogs这种第三方的git仓库支持，在添加`Repository`时，只能通过`RawfileURLmask`来实现。AddgetblobAPI4857github.com/gogs/gogs/issues/4857错误：Re:fatal:Notagitrepository:'None'HTTP400,APIError224www.mailarchive.com/reviewboard@googlegroups.com/msg20895.htmlrbtools.api.errors.BadRequestError:fatal:notagitrepository:'None'示例：Repositorytype:GitPath:cddyys.ddns.net:3000/blocks/blockscomponents.gitRawFileURLMask:cddyys.ddns.net:3000/blocks/blockscomponents/raw/2.0.x/<filename>?id=<revision>gitdifffullindex>b.diffrbtpostpdtrackingbranch=origin/2.0.xdifffilename=a.diffsummary=init_blogdescription=\"completeblogindex\"targetpeople=guanjh调试exuser注释掉Task.class的@Component，WebDestroyAction.class的@Componentspring容器启动后执行Spring容器启动完成后，执行初始化加载工作blog.csdn.net/xiaojin21cen/article/details/83418470```java@ComponentpublicclassInitBeanTestimplementsApplicationListener<ContextRefreshedEvent>{//此方法会被多次调用@OverridepublicvoidonApplicationEventContextRefreshedEventevent{/**在web项目中，存在两个容器，一个是rootapplicationcontext，另一个就是我们自己的projectNameservletcontext（作为rootapplicationcontext的子容器）。这种情况下，就会造成onApplicationEvent方法被执行两次。为了避免上面提到的问题，我们可以只在rootapplicationcontext初始化完成后调用逻辑代码*/ifevent.getApplicationContext.getParent==null{//rootapplicationcontext没有parent//TODO这里写下将要初始化的内容}}}```在springboot工程环境的junit测试基于纯spring方式此方式事务是起作用的。```xml<context:annotationconfig/><context:componentscanbasepackage=\"com.ex\"><context:excludefiltertype=\"annotation\"expression=\"org.springframework.stereotype.Controller\"/><context:excludefiltertype=\"annotation\"expression=\"org.springframework.web.bind.annotation.RestController\"/><context:excludefiltertype=\"annotation\"expression=\"org.springframework.boot.autoconfigure.SpringBootApplication\"/><context:excludefiltertype=\"annotation\"expression=\"org.springframework.web.servlet.config.annotation.EnableWebMvc\"/><context:excludefiltertype=\"assignable\"expression=\"com.ex.web.aspect.AppSignCheck\"/><context:excludefiltertype=\"assignable\"expression=\"com.ex.admin.aspect.AdminPermissionAspect\"/></context:componentscan><beanclass=\"com.dyys.framework.util.SpringHelper\"/><beanid=\"transactionManager\"class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\"><propertyname=\"dataSource\"ref=\"dsMain\"></property></bean><tx:annotationdriventransactionmanager=\"transactionManager\"></tx:annotationdriven><!DAO接口所在包名，Spring会自动查找其下的类><beanname=\"mainSqlScannerConfigurer\"class=\"org.beetl.sql.ext.spring.BeetlSqlScannerConfigurer\"><!哪些类可以自动注入><propertyname=\"basePackage\"value=\"com.ex\"/><!通过类后缀来自动注入Dao><propertyname=\"daoSuffix\"value=\"Mapper\"/><propertyname=\"sqlManagerFactoryBeanName\"value=\"mainSqlManager\"/></bean><beanid=\"mainSqlManager\"class=\"org.beetl.sql.ext.spring.SqlManagerFactoryBean\"><propertyname=\"cs\"><beanclass=\"org.beetl.sql.ext.spring.SpringConnectionSource\"><propertyname=\"masterSource\"ref=\"dsMain\"></property><!还可以设置从数据库slaves></bean></property><propertyname=\"dbStyle\"><beanclass=\"org.beetl.sql.core.db.MySqlStyle\"/></property><propertyname=\"sqlLoader\"><beanclass=\"org.beetl.sql.core.loader.MarkdownClasspathLoader\"><propertyname=\"sqlRoot\"value=\"sql\"></property></bean></property><propertyname=\"nc\"><beanclass=\"org.beetl.sql.core.DefaultNameConversion\"/></property><propertyname=\"interceptors\"><list><beanclass=\"org.beetl.sql.ext.DebugInterceptor\"></bean></list></property></bean>```测试用例为```java@RunWithSpringRunner.class@PropertySource\"classpath:application.properties\"@ContextConfigurationlocations={\"classpath*:springtest.xml\"}@EnableAutoConfigurationexclude=WebMvcAutoConfiguration.classpublicclassCoinTest{@AutowiredprivateCoinServicecoinService;@TestpublicvoidaddCoinAndFinanceAccount{Coincoin=newCoin\"WKKk\",CoinGroup.MAINSTREAM_COIN.value;LongadminId=11L;coin=coinService.addCoinAndFinanceAccountcoin,adminId;Assert.assertNotNullcoin;}}```基于springboot方式此方式事务不起作用。重写一个Application类。```java@SpringBootApplicationexclude=WebMvcAutoConfiguration.class@ComponentScanexcludeFilters={@ComponentScan.Filtertype=FilterType.ASSIGNABLE_TYPE,value={WebApplication.class,AppSignCheck.class,AdminPermissionAspect.class},@ComponentScan.Filtertype=FilterType.ANNOTATION,value={EnableWebMvc.class,Controller.class,RestController.class}}@EnableTransactionManagementpublicclassTestApplication{publicstaticvoidmainStringargs{SpringApplication.runTestApplication.class,args;}@Bean@Order100publicSpringHelperspringHelper{returnnewSpringHelper;}}```测试用例为：```java@RunWithSpringRunner.class@SpringBootTestclasses=TestApplication.class,webEnvironment=SpringBootTest.WebEnvironment.NONE@TransactionalpublicclassCoinServiceTest{@AutowiredprivateCoinServicecoinService;@TestpublicvoidaddCoinAndFinanceAccount{Coincoin=newCoin\"WKKk\",CoinGroup.MAINSTREAM_COIN.value;LongadminId=11L;coin=coinService.addCoinAndFinanceAccountcoin,adminId;Assert.assertNotNullcoin;}}```mintty乱码在cmder的settings>启动>任务中设置：`minttyoLocale=zh_CNoCharset=GBK`", "misc/证券投资.md": "基金基金手续费如何计算？www.csrc.gov.cn/pub/fujian/xxfw/tzzsyd/201312/t20131225_240378.htm交易系统的思路有了，就是按照“森林法则”去考虑“买什么，什么时候买，买了之后怎么办”三个问题。“买什么”就是选择自己熟悉的“小姑娘”来买。“什么时候买”，左侧交易是觉得股票属低估时候买入，右则交易是自己觉得确认大盘或个股形成底部形态时买入。“买了之后怎么办”是考虑卖出的问题：止损时卖出，股票高估时卖出，大盘或个股形成顶部形态时卖出。重在执行。请大家讨论、批判。教材中“牛市结束，长线资金离场，这也是判断牛熊的另一个辅助手段。”请问周老师，长线资金离场是用什么指标表示的?在哪里可以看得出来长线资金离场?有没有具体判断标准？谢谢长线资金离场，一般是大盘指数总体亏损20%。或是个股总体亏损20%。我理解的交易系统，就是在技术分析的基础上，用来克服解决“买”和“卖”的随意性、盲目性的操作纪律守则。如何建立交易系统，老师已经讲得很清楚了。之所以很多同学还感觉茫然，无从入手，是因为还没学习到技术分析的部分。不用着急，老师的技术分析部分讲得很精彩，特别是“看图说话”部分，可以从中学习到很多思路和方法。美国大盘是从0开始涨到现在这么高，我想中国大盘也应该如此，一句话，在熊市选准被低估的股票，然后安心，等待牛市的到来，不是说了21世纪是中国的世纪，什么叫中国的世纪，说白了，还是经济，股市又是经济的晴雨表，相信中国，还有一句话，是《三国演义》学来的，原话：古话云，天下大势，分久必合，合久必分……借用一个，沪深股势，涨久必跌，跌久必涨，牛久必熊，熊久必牛，现在处于一个熊市，我们正好可以做三件事，第一，听一下周老师的课，算是取经；第二，补一点股市、经济、金融的基本知识；第三，学习之后，希望通过周老师帮助下，选到几支被低估的股票，在关注中，在被窝中，等待牛市的到来，说的非常棒。我们苦练杀敌本领，一方面是投资技术，一方面是情绪管理，把这些东西都做好，一定可以获得稳定的投资收益，最终实现财务自由。", "Coding/01-Groovy惯用法.md": "TOC第3章正则表达式搜索字符串```groovyPatternpattern=~/^.*?groovy.*$/definput='Probablytheeasiestwaytogetgroovy'+'istotryworkingwithcollections.'ifinput==~/^.*?groovy.*$/{println'Foundgroovy'}ifinput=~/^.*?groovy.*$/{println'Foundgroovy'}defmatcher='TheGroovyCookBookcontainsGroovyrecipes'=~/.oo.\\s/println\"<${matcher00}>\"println\"<${matcher01}>\"println\"<${matcher10}>\"println\"<${matcher11}>\"matcher.each{match>match.each{group>println\"<$group>\"}}input='TheGroovyCookBookcontainsGroovyrecipes'printlninput.replaceAll/\\b\\w*?oo\\w*?\\b/{match>match.toUpperCase}```GroovyBean```groovyclassStudent{LongidStringname}defstudent=newStudentstudent.setName'Charlie'assertstudent.name=='Charlie'//如果类明确定以了构造方法，命名参数构造方法将失效defstudent2=newStudentid:100,name:'Jack'//不可变属性@ImmutableclassCustomer{Stringname,lastNameLongid}defcustomer=newCustomerid:200,name:'Mark',lastName:'Hogan'//unabletoresolveclassImmutable,unabletofindclassforannotationcustomer.name='John'//注解@ToString@ToStringincludeNames=true,excludes='lastName,age'@EqualsAndHashCode@Canonical//==hashCode,equals,toString```构造方法继承```groovy//java的构造方法是不能继承的importgroovy.transform.InheritConstructors@InheritConstructorsclassBusinessExceptionextendsException{}assertnewBusinessException'hello'.message=='hello'defb1=newBusinessException'missingresource'defb2=newBusinessException'catastrophicfailure',b1assertb2.cause.message=='missingresource'```对象Clonejava对象clone是实现Cloneable接口的clone方法。```groovy@AutoCloneclassVehicle{StringbrandStringtypeLongwheelsNumberEngineengine}classEngine{inthorseEngineNumberliter}defv1=newVehiclebrand:'Ferrari',type:'Testarossa',wheelsNumber:4defe1=newEnginehorseEngine:390,liter:4.9v1.engine=e1//assignenginetocardefv2=v1.clone//cloneprintln'Originalvehicleengineliters:'+v1.engine.literprintln'Clonedvehicleengineliters:'+v2.engine.literv2.engine.liter=8println'Originalvehicleengineliters:'+v1.engine.liter//Originalvehicleengineliters:4.9//Clonedvehicleengineliters:4.9//Originalvehicleengineliters:8```闭包```groovydefdoubling={arg1>printlnarg1*2}1,2,3,4.eachdoubling//classExpensiveResource{defopen{println'opened!'}defwriteDatadata{println\"datawritten!$data\"}defclose{println'closed!'}}defe=newExpensiveResourcetry{e.open}finally{e.close}defsafeResourceClosureclosure{defresource=newExpensiveResourcetry{resource.openclosureresource}finally{resource?.close}}safeResource{it>it.writeData'helloworld!'}//defmultiply={x,y>x*y}multiply3,5//curry传入的参数按照形参的顺序defclosureByFour=multiply.curry4closureByFour7//deffilterList={filter,list>list.findAllfilter}defeven={it%2==0}defodd={!evenit}defevenFilterList=filterList.curryevendefoddFilterList=filterList.curryoddassert0,2,4,6,8==evenFilterList0..8assert1,3,5,7==oddFilterList0..8```闭包DSL```groovyimportgroovy.transform.*@CanonicalclassShoppingCart{List<Book>items=UseruserAddressshippingData}@CanonicalclassBook{LongidStringtitleBigDecimalprice}@CanonicalclassUser{LongidStringnameAddressaddress}@CanonicalclassAddress{StringstreetStringcityStringcountry}classECommerceTestDataBuilder{ShoppingCartshoppingCartdefbooks=ShoppingCartbuildclosure{shoppingCart=newShoppingCartclosure.delegate=thisclosureshoppingCart.items=booksshoppingCart}voiditemsintquantity,closure{closure.delegate=thisquantity.times{books<<newBookclosure}}/***methodMissing是实现DSL最关键的。闭包里的titleRANDOM_TITLE的title会触发此方法*/defmethodMissingStringname,args{Bookbook=books.lastifbook.hasPropertyname{defdataStrategy=isDataStrategyargsifdataStrategy{book.@\"$name\"=dataStrategy.execute}else{book.@\"$name\"=args0}}else{thrownewMissingMethodExceptionname,ECommerceTestDataBuilder,args}}defisDataStrategystrategyData{defstrategyClass=nulltry{ifstrategyData.length==1{strategyClass=strategyData0.newInstance}else{strategyClass=strategyData0.newInstance*strategyData1,1}if!strategyClassinstanceofDataPopulationStrategy{strategyClass=null}}catchExceptione{}strategyClass}}interfaceDataPopulationStrategy{defexecute}classRANDOM_TITLEimplementsDataPopulationStrategy{deftitleCache=defignoredTitleWords='Page','Sort','Next'voidgetRandomBookTitles{defslurper=newXmlSlurperslurper.setFeature'apache.org/xml/features/nonvalidating/loadexternaldtd',falsedefdataUrl='m.gutenberg.org/ebooks/search.mobile'deforderBy='/?sort_order=random'defhtmlParser=slurper.parse\"${dataUrl}${orderBy}\"htmlParser.'**'.findAll{it.@class=='title'}.each{ifit.text.tokenize.disjointignoredTitleWords{titleCache<<it.text}}}defexecute{iftitleCache.size==0{'randomBookTitles'}'titleCache.pop'}}classRANDOM_IDimplementsDataPopulationStrategy{LongminValLongmaxValRANDOM_IDmin,max{minVal=minmaxVal=max}defexecute{doublernd=newRandom.nextDoubleminVal+longrnd*maxValminVal}}defshoppingCart=newECommerceTestDataBuilder.build{items5{titleRANDOM_TITLEidRANDOM_ID,100,200000price100}}assertshoppingCart.items.size==5shoppingCart.items.each{assertit.price==100assertit.id>100&&it.id<200000}```其它动态属性dynamicproperties```groovyclassEntity{defdynamicProperties=://setterdefpropertyMissingStringname,value{dynamicPropertiesname=value}//getterdefpropertyMissingStringname{dynamicProperties=name}}classUserextendsEntity{StringfirstNameStringlastName}Useruser=newUser;user.firstName=\"Jagadeesh\";user.lastName=\"Manne\";user.name=\"$user.firstName$user.lastName\";//addingdynamicproperty\"name\"thatdoesntexistinUserdomainprintln\"Name:$user.name\";```", "Coding/01-Java_roadmap.md": "TOC二、架构设计理解运用23中设计模式，深入理解《企业架构模式》。2.1设计模式2.2企业架构模式2.3常见模式分析MVC模式：SpringMVC原理AOPCGLIB和InvocationHandler的区别：cglib.sourceforge.net/动态代理模式Javassist实现AOP：//www.csg.ci.i.utokyo.ac.jp/~chiba/javassist/ASM实现AOP：asm.ow2.org/FAQ使用模板方法模式和策略模式实现IOC不用synchronized和lock，实现线程安全的单例模式2.4微服务与SOA微服务API网关RPC框架三、大数据数据存储知识关系型数据库MySQL如何看执行计划如何搭建MySQL主备binlog是什么Derby，H2，PostgreSQLSQLiteNoSQL大数据知识Zookeeper，在linux上部署zkSolr，Lucene，ElasticSearch在linux上部署solr，solrcloud，，新增、删除、查询索引Storm，流式计算，了解Spark，S4在linux上部署storm，用zookeeper做协调，运行stormhelloworld，local和remote模式运行调试stormtopology。Hadoop，离线计算Hdfs：部署NameNode，SecondaryNameNode，DataNode，上传文件、打开文件、更改文件、删除文件MapReduce：部署JobTracker，TaskTracker，编写mrjobHive：部署hive，书写hivesql，得到结果Presto：类hive，不过比hive快，非常值得学习分布式日志收集flume，kafka，logstash数据挖掘，mahout参考资料zookeeper.apache.org/lucene.apache.org/solr/github.com/nathanmarz/storm/wikihadoop.apache.org/prestodb.io/flume.apache.org/，logstash.net/，kafka.apache.org/mahout.apache.org/四、网络与安全网络编程知识用Java写一个简单的静态文件的HTTP服务器实现客户端缓存功能，支持返回304实现可并发下载一个文件使用线程池处理客户端请求使用nio处理客户端请求支持简单的rewrite规则上述功能在实现的时候需要满足“开闭原则”用Java实现FTP、SMTP协议什么是CDN？如果实现？DNS起到什么作用？搭建一个DNS服务器搭建一个Squid或ApacheTrafficServer服务器www.squidcache.org/trafficserver.apache.org/en.wikipedia.org/wiki/Domain_Name_System网络安全知识什么是DES、AES什么是RSA、DSA什么是MD5，SHA1什么是SSL、TLS，为什么HTTPS相对比较安全什么是中间人攻击、如果避免中间人攻击什么是DOS、DDOS、CC攻击什么是CSRF攻击什么是CSS攻击什么是SQL注入攻击什么是Hash碰撞拒绝服务攻击了解并学习下面几种增强安全的技术www.openauthentication.org/HOTPwww.ietf.org/rfc/rfc4226.txtTOTPtools.ietf.org/rfc/rfc6238.txtOCRAtools.ietf.org/rfc/rfc6287.txten.wikipedia.org/wiki/Salt_cryptography用openssl签一个证书部署到apache或nginx五、推荐书籍《深入Java虚拟机》《深入理解Java虚拟机》《EffectiveJava》《七周七语言》《七周七数据》《Hadoop技术内幕》《HbaseInAction》《MahoutInAction》《这就是搜索引擎》《SolrInAction》《深入分析JavaWeb技术内幕》《大型网站技术架构》《高性能MySQL》《算法导论》《计算机程序设计艺术》《代码大全》《JavaScript权威指南》参考：Java工程师成神之路www.hollischuang.com/archives/489Java开发必备知识编程语言Groovy_Linksgithub.com/virtualdogbert/Groovy_LinksGroovy的SQL模块www.jianshu.com/p/a0e301f79f9bJava8Streamsmapexampleswww.mkyong.com/java8/java8streamsmapexamples/Java8CConvertListtoMapwww.mkyong.com/java8/java8convertlisttomap/java8的lambda中的map相关操作blog.csdn.net/wabiaozia/article/details/84262195数据库MyBatisPlus入门视频课程www.imooc.com/learn/1130常用工具库modelMapper入门及使用解析www.jianshu.com/p/d97f9ea2d3caCGLIBBeanCopier和BeanMap等实现grefr.iteye.com/blog/2053748开源项目hsweb后台管理基础框架github.com/hsweb/hswebframeworkiBase4J项目gitee.com/iBase4J/iBase4JJEPF软件快速开发平台www.jepf3.com/工具使用Eclipse远程调试（远程服务器端监听www.cnblogs.com/jianliangWu/p/7110681.htmlEclipse开发工具之安装插件Jrebelsegmentfault.com/a/1190000005746934阿里巴巴程序员常用的15款开发者工具www.infoq.cn/article/1jV*BDxGwld6CWDVIt48非常全的VsCode快捷键blog.csdn.net/p358278505/article/details/74221214eclipse使用jetty:run命令调试blog.csdn.net/huaieli1/article/details/79494871Nginx入门指南wiki.jikexueyuan.com/project/nginx/", "Coding/01《深入理解Java虚拟机2nd》.md": "第2章Java内存区域与内存溢出异常2.2运行时数据区域!_v_images/20200403094930.png2.2.1程序计数器（ProgramCounterRegister）较小的内存空间字节码的行号指示器“线程私有”无OutOfMemoryError情况2.2.2Java虚拟机栈线程私有，生命周期与线程相同方法的调用过程对应着一个栈帧（StackFrame）在虚拟机栈中入栈到出栈的过程栈帧存储方法的局部变量表、操作数栈、动态链接、方法出口等信息局部变量表存放了编译期可知的各种基木数据类型、对象引用reference、returnAddress类型局部变量表所需的内存空间在编译期间已经确定两种异常状况：如果线程请求的栈深度大于虚拟机所允许的深度，将抛出StackOverflowError异常如果虚拟机栈可以动态扩展，如果扩展时无法申请到足够的内存，就会抛出OutOfMemoryError异常2.2.3本地方法栈（NativeMethodStack）类似虚拟机栈，为调用Native方法服务也会抛出StackOverflowError和OutOfMemoryError异常2.2.4Java堆（heap）被所有线程共享的一块大内存所有的对象实例以及数组都要在堆上分配堆是垃圾收集器管理的主要区域物理上不连续、逻辑上是连续的即可如果在堆中没有内存完成实例分配，并且堆也无法再扩展时，将会她出OutOfMemoryError异常2.2.5方法区（MethodArea,NonHeap）被所有线程共享存储类信息、常量、静态变量、JIT编译后的代码等为堆的一个逻辑部分可以不实现垃圾收集，这区域的内存回收目标主要是针对常量池的回收和对类型的卸载2.2.6运行时常量池（RuntimeConstantPool）存放各种字面量和符号引用运行期间也可能将新的常量放人池中2.2.7直接内存不是虚拟机运行时数据区的一部分超过物理内存的限制，可导致OutOfMemoryError异常NIO的DirectByteBuffer对象直接操作这块内存的引用设置Xmx2.3HotSpot虚拟机对象探秘", "Coding/02-Python惯用法.md": "TOC学习资料：Python教程www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000Python3教程www.runoob.com/python3/python3tutorial.htmlJSON操作load：读取json文件```python读取json文件内容,返回字典格式withopen'./source_file/info.json','r',encoding='utf8'asfp:json_data=json.loadfpprint'这是文件中的json数据：',json_dataprint'这是读取到文件数据的数据类型：',typejson_data```dump：写入json文件```python将字典数据写入到json文件中dict1={'name':'张三','age':18,'sex':'男'}withopen'./source_file/info.json','a',encoding='utf8'asfp:json.dumpdict1,fp,ensure_ascii=False　　如果ensure_ascii''为false，则返回值可以包含非ascii值```loads：将json字符串转换成字典格式```python将json字符串转换成字典格式str1='{\"name\":\"张三\",\"age\":18,\"sex\":\"男\"}'print'这是转换后的数据：',json.loadsstr1```dumps：将字典格式数据转换成json格式;```python将字典格式数据转换成json格式dict1={'name':'张三','age':18,'sex':'男'}print'这是将字典转换之后的数据：',json.dumpsdict1,ensure_ascii=False如果ensure_ascii''为false，则返回值可以包含非ascii值```日期时间```python获取当前时间now=datetime.datetime.nowdatetime=>string格式化输出now.strftime'%Y%m%d%H:%M:%S'string=>datetime字符串转日期t_str='2012030516:26:23'd=datetime.datetime.strptimet_str,'%Y%m%d%H:%M:%S'在datetime模块中有timedelta类，这个类的对象用于表示一个时间间隔，比如两个日期或者时间的差别。计算两个日期的间隔d1=datetime.datetime.strptime'2012030517:41:20','%Y%m%d%H:%M:%S'd2=datetime.datetime.strptime'2012030217:41:20','%Y%m%d%H:%M:%S'delta=d1d2printdelta.days今天的n天后的日期。now=datetime.datetime.nowdelta=datetime.timedeltadays=3n_days=now+delta```自定义排序```pythonimportfunctoolsdefcmpa,b:ifa1==b1:return0eliflena1>=lenb1anda1>b1:return1else:return1emap={'a':'3','b':'2'}sortedLinks=sortedemap.items,key=functools.cmp_to_keycmp```文件操作读取文件最后一行```pythondef__get_last_lineself,filename:\"\"\"getlastlineofafile:paramfilename:filename:return:lastlineorNoneforemptyfile\"\"\"try:filesize=os.path.getsizefilenameiffilesize==0:returnNoneelse:withopenfilename,'rb'asfp:touseseekfromend,mustusemode'rb'offset=8initializeoffset设置偏移量时注意不要超过文件总的字节数，否则会报OSErrorwhileoffset<filesize:offsetcannotexceedfilesizefp.seekoffset,where中where=0,1,2分别表示从文件头，当前指针位置，文件尾偏移，缺省值为0，但是如果要指定where=2，文件打开的方式必须是二进制打开，即使用’rb’模式fp.seekoffset,2readoffsetcharsfromeofrepresentbynumber'2'lines=fp.readlinesreadfromfptoeofiflenlines>=2:ifcontainsatleast2linesreturnlines1thenlastlineistotallyincludedelse:offset*=2enlargeoffset注意边界条件的处理，比如文件只有一行的情况fp.seek0lines=fp.readlinesreturnlines1exceptFileNotFoundError:printfilename+'notfound!'returnNone```语法三元运算符参考：Python之三元运算、集合、函数www.cnblogs.com/hhfzj/p/6978092.html```pythonc=aifa>1elseb如果a大于1的话，c=a，否则c=bss=iforiinrange1,11ifi%2==0循环111间的值（不包括11），如果值能被2整除（即取偶数）```Set```pythona.定义一个列表，通过强制转换来定义集合nums=1,1,2,3,5,6,77,8num_set=setnumsb.直接定义num_set1={1,2,3,3,4}集合不能通过下标来访问元素s.remove333删除元素，如果元素不存在就会报错s.pop删除一个随机的元素，并返回删除的元素s.discare111如果删除的元素存在，删除，不存在不做处理```可变参数```pythondefpost*args:想传多少个参数就传多少个，将传入的参数放到一个元组里printargs调用post'001','denglu',post输出：'001','denglu',<functionpostat0x000001EBEF237400>post```关键字参数```pythondefkw**kwargs:参数不固定，个数不限，和其它类型参数混用时，顺序为：必填参数，默认值参数，可变参数和关键字参数。printkwargs参数被转化为一个字典调用kwkwage=18,name='aaa'd={'age':18,'name':'aaa'}kw**d传入字典调用的时，就得写**{'age':18,'name':'aaa'}```字符串查找定位```pythonchapters=urls=chforchinchaptersidx=urls.indexurlPrefix+posMap.getnovel'name'```字符串与dict转换```pythonimportjsonjson_str='{\"name\":\"jay\",\"sex\":\"male\",\"age\":22}'JSON到字典转化：dictinfo=json.loadsjson_str输出dict类型字典到JSON转化：jsoninfo=json.dumpsdictinfo输出str类型```文件操作遍历文件```pythondefwalkdirrootdir:三个参数：分别返回1.父目录2.所有文件夹名字（不含路径）3.所有文件名字forparent,dirnames,filenamesinos.walkrootdir:fordirnameindirnames:print\"dirpath:\"+os.path.joinparent,dirnameforfilenameinfilenames:print\"filepath:\"+os.path.joinparent,filename```glob文件查找**glob**```pythonimportglobglob.glob'd:\\a\\*\\*.txt'glob.glob'./glob_?.png'glob.glob'../glob_09.png'glob.glob'glob_09.*'```**iglob**获取一个迭代器iterator对象，使用它可以逐个获取匹配的文件路径名。与glob.glob的区别是：glob.glob同时获取所有的匹配路径，而glob.iglob一次只获取一个匹配路径。```pythonimportglobfiles=glob.iglob'*.png'forpnginfiles:printpng```**多模式匹配来搜索文件**```pythonimportitertoolsasit,glob,osdefmultiple_file_types*patterns:returnit.chain.from_iterableglob.globpatternforpatterninpatternsforfilenameinmultiple_file_types\"*.txt\",\"*.py\":addasmanyfiletypearguementsrealpath=os.path.realpathfilenameprintrealpath```", "Coding/02-Python爬虫.md": "TOCrequests库的用法1.get/post请求参数也是字典，也可以传递json类型的参数：```pythonimportrequestsfromfake_useragentimportUserAgentheaders={\"UserAgent\":UserAgent.random}url=\"www.baidu.cn/index/login/login\"params={\"user\":\"1351351335\",账号\"password\":\"123456\"密码}response=requests.posturl,headers=headers,data=paramsresponse.text```2.IP代理```pythonheaders={\"UserAgent\":UserAgent.random}url=\"httpbin.org/get\"proxies={用户名:密码@IP:端口号\"http\":\"yonghuming:123456@192.168.1.1:8088\"}设置访问时间requests.get\"baidu.com/\",timeout=0.1requests.geturl,headers=headers,proxies=proxies```3.session自动保存cookies```pythonheaders={\"UserAgent\":UserAgent.chrome}login_url=\"www.baidu.cn/index/login/login\"params={\"user\":\"yonghuming\",用户名\"password\":\"123456\"密码}session=requests.Sessionresponse=session.postlogin_url,headers=headers,data=paramsinfo_url=\"www.baidu.cn/index/user.html\"resp=session.getinfo_url,headers=headersresp.text```4.获取响应信息`resp.json`获取响应内容以json字符串`resp.text`获取相应内容以字符串`resp.content`获取响应内容以字节的方式`resp.headers`获取响应头内容`resp.url`获取访问地址`resp.encoding`获取网页编码`resp.request.headers`请求头内容`resp.cookie`获取cookieBeautifulSoup课程内容1.爬虫简介2.简单爬虫架构3.URL管理器：管理待抓取URL集合和已抓取URL集合防止重复抓取、防止循环抓取4.网页下载器urllib25.网页解析器BeautifulSoup6.完整实例爬取百度百科Python词条相关的1000个页面数据网页下载器urllib2方法1：最简洁方法```pythonimportur1lib2直接请求response=urllib2.urlopenwww.baidu.com'获取状态码，如果是2ee表示获取成功printresponse.getcode读取内容cont=response.read```方法2：添加data、httpheaderimporturllib2```python创建Request对象request=ur11ib2.Requestur1添加数据request.add_dataa'，‘12添加http的headerrequest.add_header‘UserAgent'，‘Mozilla/5.e'发送请求获取结果response=ur1lib2.urlopenrequest```方法3：添加特殊情景的处理器：HTTPCookieProcessor,ProxyHandler,HTTPSHandler,HTTPRedirectHandler```pythonimportur1lib2，cookielib创建cookie容器cj=cookielib.CookieJar创建1个openeropener=ur11ib2.build_openerur1lib2.HTTPCookieProcessorcj给ur11ib2安装openerur1lib2.install_openeropener使用带有cookie的ur11ib2访问网页response=url1ib2.urlopen\"www.baidu.com/\"```三种方法的示例：```pythonimporturllib2ur1=\"www.baidu.com\"print'第一种方法’response1=ur11ib2.urlopenur1printresponsel.getcodeprintlenresponse1.readprint“第二种方法”request=ur1lib2.Requesturlrequest.add_header\"useragent\"，\"Mozilla/5.e\"response2=ur11ib2.urlopenrequestprintresponse2.getcodeprintlenresponse2.readprint‘第三种方法’cj=cookielib.CookieJaropener=ur11ib2.build_openerur11ib2.HTTPCookieProcessorcjur11ib2.install_openeropenerresponse3=ur11ib2.urlopenur1printresponse3.getcodeprintcjprintresponse3.read```网页解析器Python有哪几种网页解析器？正则表达式：模糊匹配html.parser：结构化解析BeautifulSoup：结构化解析lxml：结构化解析BeautifulSoup安装：pipinstallbeautifulsoup4测试：importbs4解析步骤创建BeautifulSoup对象搜索节点findall、find按节点名称按节点属性值按节点文字访问节点：名称、属性、文字```pythonfrombs4importBeautifulSoup根据HTML网页字符串创建Beautifulsoup对象soup=BeautifulSouphtml_doc，HTML文档字符串'html.parse',HTML解析器from_encoding=‘utf8'HTML文档的编码方法：find_allname，attrs，string查找所有标签为a的节点soup.find_all'a'查找所有标签为a，链接符合/view/123.htm形式的节点soup.find_alla'，href=/view/123.htm'soup.find_all'a'，href=re.compiler\"/view/\\d+\\.html\"查找所有标签为div，class为abc，文字为Python的节点soup.find_alldiv'，class_=‘abc'，string=‘Python'得到节点：<ahref=‘1.htm12>Python</a>获取查找到的节点的标签名称node.name获取查找到的a节点的href属性node‘href2获取查找到的a节点的链接文字node.get_text```BeautifulSoup实例```pythonsoup=BeautifulSouphtml_doc，‘html.parser'，from_encoding='utf8'print‘获取所有的链接”1inks=soup.find_all'a'forlinkinlinks：printlink.name，link'href'，link.get_textprint‘获取Lacie的链接’linknode=soup.find'a'，href='example.com/Lacie'printlink_node.name，link_node'href'，link_node.get_textprint'正则匹配'link_node=soup.find'a',href=re.compiler\"ill\"print‘获P段落文字pnode=soup.find'p'，class_=\"title\"printp_node.name，p_nodel.get_text```Scrapy爬虫框架!_v_images/20191129175709.pngscrapy爬虫项目开发分成四步：新建项目、明确目标、制作爬虫、存储内容安装pipinstallscrapy编译Twised时需要VisualC++BuildTools，可以在这来下载安装：MicrosoftVisualC++BuildToolswww.xdowns.com/soft/38/138/2017/soft_226169.htmldownload_box新建scrapy项目新建项目`scrapystartprojectdouban`douban\\spiders进入douban\\spiders目录，执行：`scrapygenspiderdouban_spidermovie.douban.com`明确目标分析`movie.douban.com/top250`，需要抓取序号、电影名、导演、演员、星级、评价数、描述等。```python序号serial_number=scrapy.Field电影的名称movie_name=scrapy.Field电影的介绍introduce=scrapy.Field星级star=scrapy.Field电影的评论数evaluate=scrapy.Field电影的描述describe=scrapy.Field```爬虫文件编写（制作爬虫）```pythonclassDoubanSpiderSpiderscrapy.Spider:爬虫名称name='douban_spider'允许的域名allowed_domains='movie.douban.com'入口url，扔到调度器里面去start_urls='movie.douban.com/top250'defparseself,response:printresponse.text```进入douban\\spiders目录，执行：`scrapycrawldouban_spider`windows下运行会出现错误：>Couldnotfindaversionthatsatisfiestherequirementwin32apifromversions:Nomatchingdistributionfoundforwin32api解决办法：`pipinstallpypiwin32`远程运行，新建main.py```pythonfromscrapyimportcmdlinecmdline.execute'scrapycrawldouban_spider'.split```保存数据常见问题处理scrapy模拟登录代码演示及cookie原理说明www.jianshu.com/p/830ca5623211", "Coding/02-Python自动化测试.md": "TOCSeleniumPython+Selenium安装及环境配置python使用3.7.2，selenium版本为3.141.0，Firefox版本为52，Geckdriver版本：v0.15.0，chrome版本为73.0.3683.68，IE11，IEDriverServer_x64_3.8.0。IE11测试时，输入字符和动作太慢，跑一个用例需要很长时间，不建议使用。Selenium安装selenium版本为3.141.0```shellpipinstallselenium查看是否安装成功pipshowselenium```浏览器及驱动安装Firefox和chrome要选择合适的版本，版本低了高了都不行。驱动文件需要放在环境变量中，例如可以放在：%PYTHON_HOME%\\Scripts目录下。参考：selenium对应三大浏览器（谷歌、火狐、IE）驱动安装www.cnblogs.com/qiezizi/p/8632058.htmlFirefox使用52版没有出错Firefox需安装驱动：geckdriver，版本v0.15.0可用，版本v0.24.0不可用。下载地址：github.com/mozilla/geckodriver/releases?after=v0.17.0IEIE版本为11，项目需要这个版本，其它版本没有试过。IE11的驱动为：IEDriverServer_x64_3.8.0。版本3.9不可用，无法启动IE11。下载地址：seleniumrelease.storage.googleapis.com/index.html常出现的错误：>UnexpectederrorlaunchingInternetExplorer.Browserzoomlevelwassetto109%.Itshouldbesetto100%将浏览器的缩放调为100%，在状态栏可调>UnexpectederrorlaunchingInternetExplorer.ProtectedModesettingsarenotthesameforallzones.EnableProtectedModemustbesettothesamevalueenabledordisabledforallzones.将所有区域的保护模式勾选去掉即可，如下!_v_images/20191121204959.pngchromechrome版本为73.0.3683.68，对应驱动版本相同，下载地址：npm.taobao.org/mirrors/chromedriver/例子程序```pythonfromseleniumimportwebdriver导入webdriver包fromselenium.webdriver.common.keysimportKeysimporttimedriver=webdriver.Firefox初始化一个火狐浏览器实例：driverdriver=webdriver.Chrome初始化一个IE浏览器实例：driverdriver.maximize_window最大化浏览器time.sleep5暂停5秒钟driver.get\"www.baidu.com\"通过get方法，打开一个url站点driver.find_element_by_id\"kw\".clickdriver.find_element_by_id\"kw\".cleardriver.find_element_by_id\"kw\".send_keys\"java\"driver.find_element_by_id\"kw\".send_keysKeys.ENTER```控制已经打开的chromeChromeDevTools协议可以调试Chrome浏览器，利用它启动chrome后会打开一个端口，selenium通过此端口和chrome交互。`chrome.exeremotedebuggingport=9222userdatadir=\"C:\\selenum\\AutomationProfile\"``userdatadir`指定Chrome配置文件的目录，如果不指定，使用默认目录。不指定时，selenium控制代码如下：```python对应你的chrome的用户数据存放路径profile_dir=r\"C:\\Users\\xxxx\\AppData\\Local\\Google\\Chrome\\UserData\"chrome_options=webdriver.ChromeOptionschrome_options.add_experimental_option\"debuggerAddress\",\"127.0.0.1:9222\"chrome_options.add_argument\"userdatadir=\"+os.path.abspathprofile_dirdriver=webdriver.Chromechrome_options=chrome_options```KatalonRecorder插件安装KatalonRecorder是一个chrome浏览器插件，直接在扩展市场可以安装。安装完成后，可以像录制宏一样录制测试脚本，测试脚本可以导出为python等语言脚本。可以参考：KatalonRecorder自动录制Selenium爬虫脚本www.jianshu.com/p/52ed88e89b57Selenium编程技巧学习资料：SeleniumPython中文文档seleniumpythonzh.readthedocs.io/en/latest/locatingelements.html滚动浏览器屏幕只有在屏幕显示范围内元素，才能被点击等操作。所以要操作这些元素，必须把它的位置滚动到显示区域。方法如下：```python方法一element.location_once_scrolled_into_view此方法滚动不是很准确方法二driver.execute_script\"window.scrollTo0,document.body.scrollHeight;\"滚动一屏```多窗口、多frame切换多窗口切换：```pythondriver.get\"www.baidu.com\"获取百度搜索窗口句柄search_windows=driver.current_window_handle获取打开所有窗口句柄all_handles=driver.window_handlesforhandleinall_handles:ifhandle!=search_windows:driver.switch_to_windowhandle......driver.close关闭当前窗口driver.switch_to_windowsearch_windowsdriver.quit注销WebDriver，并关闭所有相关的窗口```多frame切换：```python通过frame的Id来切换，也可以element来切换driver.switch_to.frame'xURSiframe'.....driver.find_element_by_id\"dologin\".clickdriver.switch_to.default_content跳回最外层的页面```Elementisnotclickableatpoint错误及四种解决方法参考：selenium报错Elementisnotclickableatpoint及四种解决方法blog.csdn.net/lilongsy/article/details/76152620四种原因和解决办法：元素尚未加载让执行等待一会儿。```pythonfromselenium.webdriver.support.uiimportWebDriverWaitWebDriverWaitdriver,10.untilEC.title_contains\"元素\"```元素在iframe里元素在iframe里，在窗口里找是找不到元素的，更是无法点击。所以，要切换到iframe里去找元素。```pythondriver.switch_to_frame\"frameName\"根据框架名来切换driver.switch_to_frame\"frameName.0.child\"子框架driver.switch_to_default_content返回```元素不在显示窗里当元素不在浏览器的显示屏幕内，需要滚动屏幕，使之位于可视范围内。```python任选一种ele.location_once_scrolled_into_viewdriver.execute_script\"window.scrollTo0,document.body.scrollHeight;\"```要点击的元素被覆盖可以使用事件链来解决。例如下拉菜单，通过hover，让子菜单显示，就可以点击了。```pythonmenu=driver.find_element_by_css_selector\".nav\"hidden_submenu=driver.find_element_by_css_selector\".navsubmenu1\"ActionChainsdriver.move_to_elementmenu.clickhidden_submenu.perform```selenium中POST请求参考：selenium爬虫中的post坑www.freebuf.com/column/169007.html如果在selenium程序中，需要对一个rest接口发起POST请求，有三种方式：第三方库，如：seleniumrequests```pythonfromseleniumrequestsimportFirefoxwebdriver=Firefoxresponse=webdriver.request'POST','www.google.com/'printresponse```ajax```pythonbrower=webdriver.Firefoxfirefox_options=fireFoxOptionsjs=\"\"\"varxmlhttp=newXMLHttpRequest;xmlhttp.open\"GET\",\"127.0.0.1/get.php\",false;xmlhttp.setRequestHeader\"Contenttype\",\"application/xwwwformurlencoded\";xmlhttp.setRequestHeader\"UserAgent\",\"Mozilla/5.0\";xmlhttp.send\"test=1\";returnxmlhttp.responseText;\"\"\"brower.implicitly_wait30time.sleep30resp=brower.execute_scriptjs```拼接form表单其原理是解析了原生的post请求后，将其传递的参数重构为form表单，最后再将这些新生成的代码存入html网页。最后，程序会再借用selenium定位submit元素，触发事件提交表单。不推荐这种方式，太麻烦。", "Coding/Java开发工具.md": "TOCIntellijIDEA快捷键十大IntellijIDEA快捷键blog.csdn.net/dc_726/article/details/42784275IntellijIDEA的快捷键、常用技巧和相关设置blog.csdn.net/zyjustin9/article/details/84694543eclipse快捷键Eclipse常用快捷键及使用技巧blog.csdn.net/weixin_30572613/article/details/95037110eclipse必备插件eExplorer`culmat.github.io/eExplorer/updatesite/`QuickBookmarksplugin和GrepConsole`eclipse.schedenig.name`EclipseWebDevelopmentToolsEnhancedClassDecompilerJRebelHTMLEditorUMLPlugin:**ObjectAidUML**：类图很好，时序图要收费。www.objectaid.com/update/current**AmaterasUML**：图不能隐藏Attributes和Operations，时序图不能从代码反向生成，完全需要手动完成。我们真的需要完全从代码生成的SequenceDiagram吗？手动也不错，能按照编码者的意愿画图。github.com/takezoe/amaterasmodelerGradle介绍```groovyrepositories{//mavenLocalmaven{url\"maven.aliyun.com/repository/public\"}//maven{url\"192.168.31.200:8081/nexus/content/groups/public/\"}}configurations{compile.excludemodule:'commons'all*.excludegroup:'org.gradle.test.excludes',module:'reports'}```Maven常用命令```shell安装jar到本地库：mvninstall:installfileDfile=D:\\pinyin4j2.5.0.jarDgroupId=net.pinyin4jDartifactId=pinyin4jDversion=2.5.0Dpackaging=jarDgeneratePom=trueDcreateChecksum=true安装jar到私服mvndeploy:deployfileDfile=D:\\pinyin4j2.5.0.jarDgroupId=net.pinyin4jDartifactId=pinyin4jDversion=2.5.0Dpackaging=jarDrepositoryId=et_nexus_repoDurl=10.143.132.66:8081/nexus/content/repositories/thirdparty创建web项目mvnarchetype:generateDarchetypeArtifactId=mavenarchetypewebappDinteractiveMode=falseDgroupId=com.cdjdgmDartifactId=webshell跳过测试DskipTests不执行测试用例，但编译测试用例类生成相应的class文件至target/testclasses下。Dmaven.test.skip=true不执行测试用例，也不编译测试用例类。```常用项```xml<properties><!SettingthesourceandtargetoftheJavaCompiler><maven.compiler.source>1.8</maven.compiler.source><maven.compiler.target>1.8</maven.compiler.target><!文件拷贝时的编码><project.build.sourceEncoding>UTF8</project.build.sourceEncoding><project.reporting.outputEncoding>UTF8</project.reporting.outputEncoding><!编译时的编码><maven.compiler.encoding>UTF8</maven.compiler.encoding></properties><!常用repository仓库><repositories><repository><id>aliyunrepo</id><name>Aliyunrepo</name><url>maven.aliyun.com/repository/public</url></repository></repositories><!发布部署到私服Nexus><pluginRepositories><pluginRepository><id>aliyunrepo</id><url>maven.aliyun.com/repository/public</url></pluginRepository></pluginRepositories><distributionManagement><repository><id>releases</id><url>cddyys.ddns.net:8081/nexus/content/repositories/releases/</url></repository><snapshotRepository><id>snapshots</id><url>cddyys.ddns.net:8081/nexus/content/repositories/snapshots/</url></snapshotRepository></distributionManagement><!修改~/.m2/settings.xml><servers><server><id>releases</id><!和pom.xml的distributionManagement中保持一致><username>deployment</username><password>your_pwd</password></server></servers>```Git常用记住密码git和tortoiseGit都不能记住用户名密码了。修复方法如下：```shellgitconfigcredential.helperstoregitconfigunsetcredential.helpergitconfigglobalcredential.helperstore```checkout子目录以github.com/geekhac/to...子目录为例：```shellgitinittodomvc&&cdtodomvc设置允许克隆子目录gitconfigcore.sparsecheckouttrue设置要克隆的仓库的子目录路径echo'/examples/react/*'>>.git/info/sparsecheckoutgitremoteaddorigingithub.com/geekhac/to...gitpulloriginmaster```强制更新`gitfetchall``gitresethardorigin/master`", "Coding/SkillsMap-JavaEE.md": "Spring【专题】SpringBoot基础教程blog.didispace.com/SpringBoot基础教程/【详解】震精！SpringBoot内存泄露，排查竟这么难！mp.weixin.qq.com/s/UgUXeWBUy67UsZt18s3mdQSpringMVC更灵活的控制json返回（自定义过滤字段）diamondfsd.com/article/ae89cf4ef6794cc09882f02e0240866eCustomErrorMessageHandlingforRESTAPI|Baeldungwww.baeldung.com/globalerrorhandlerinaspringrestapi【每日一博】基于Groovy实现SpringBean的动态加载推酷www.tuicool.com/articles/JNFbim基于Groovy实现SpringBean的动态加载CSDN博客blog.csdn.net/luxianping/article/details/52144782利用Spring管理热加载的Groovy对象juejin.cn/post/6844903640700813325基于Groovy实现SpringBean的动态加载blog.csdn.net/luxianping/article/details/52144782gitee.com/joshuazhan/demo4j/tree/master/spring/groovy/dynamicDevelopersCustomRequestMappingHandlerMappingwww.bountysource.com/issues/43045647customrequestmappinghandlermappinggroovy编写spring的controller三支持annotation快马扬鞭须努力！ITeye博客sillycat.iteye.com/blog/562780SpringMVC源码总结（二）mvc:annotationdriven以及@Controller和@RequestMapping的那些事乒乓狂魔源码研究群QQ345731741已搬往开源中国ITeye博客lgbolgger.iteye.com/blog/2105108ConfigurethehandlermappingpriorityinSpringMVCwww.mkyong.com/springmvc/configurethehandlermappingpriorityinspringmvc/GuidetoSpringHandlerMappings|Baeldungwww.baeldung.com/springhandlermappingsTypesofSpringHandlerAdapters|Baeldungwww.baeldung.com/springmvchandleradaptersSpringBootBucket1.0.0发布，SprintBoot全家桶开源中国社区www.oschina.net/news/93900/springbootbucket10?from=20180311Spring3.1.0实现原理分析一.类型转换roberts939299的专栏CSDN博客blog.csdn.net/roberts939299/article/details/69666281Spring，为内部方法新起一个事务，此处应有坑。等你归去来博客园www.cnblogs.com/yougewe/p/7466677.html8.6SpringBoot集成SpringSecurity简书www.jianshu.com/p/08cc28921fd0spring动态创建bean开源中国社区www.oschina.net/code/snippet_1387007_48362xiaoweizha/springbootebean:springbootebeanmysql配置整合github.com/xiaoweizha/springbootebeanspringmvcFreemarkernotloadingremotetemplateStackOverflowstackoverflow.com/questions/35171306/freemarkernotloadingremotetemplateSpringBoot分离打包踩坑无法加载classClassNotFoundExcep...简书www.jianshu.com/p/32d38a7fd20aSpringdataredis:serializer实例深入一点,你会更加快乐ITeye博客shiftaltctrl.iteye.com/blog/1887370Howto:scaninterfacesinacustomSpringnamespacejavaasylum.blogspot.com/2013/02/howtoscaninterfacesincustomspring.htmlBeanFactoryPostProcessor学习笔记blog.csdn.net/lsm135/article/details/53300912SpringIoc容器Bean实例化的几种场景blog.csdn.net/bubaxiu/article/details/41415685MyBatisMyBatisPlus入门视频课程www.imooc.com/learn/1130MyBatisPlus开发指南mp.baomidou.com/guide/mybatisplus的使用入门简书www.jianshu.com/p/ceb1df475021常见问题|MyBatisPlusjobob.gitee.io/mp3doc/faq/如何使用：map下划线自动转驼峰mybatis&ndash;MyBatis3|动态SQLwww.mybatis.org/mybatis3/zh/dynamicsql.htmlMybatisPlus学习笔记简书www.jianshu.com/p/5df97ea42978MyBatis传入多个参数的问题mingyue1818博客园www.cnblogs.com/mingyue1818/p/3714162.html【详解】Mybatis自定义拦截器与插件开发mp.weixin.qq.com/s/8zAvIsjZNgG1tH4FN6UQSAbaomidou/mybatisplussamples:MyBatisPlusSamplesgithub.com/baomidou/mybatisplussamplesmybatisjava.sql.SQLException:ORA00907:缺失右括号jackpk的专栏CSDN博客blog.csdn.net/jackpk/article/details/49894541Crown:Crown以SpringBoot2为基础，打造一个快速开发的Web应用脚手架。文档地址：gitee.com/cancerGit/CrownMyBatis使用指南www.mybatis.org/mybatis3/zh/index.htmlMyBatisPlus使用指南mp.baomidou.com/guide/MyBatis学习总结blog.csdn.net/javalean/article/category/7621882深入理解MyBatis（五）―MyBatis的插件机制blog.csdn.net/u013967175/article/details/77917642实现类似MyBatis的注解Mappermy.oschina.net/gjhuai/blog/994174ormHowtousedynamicSQLqueryinMyBatiswithannotationhowtouseselectProvider?StackOverflowstackoverflow.com/questions/6685655/howtousedynamicsqlqueryinmybatiswithannotationhowtouseselectprovide插件机制MyBatis允许使用插件拦截具体的方法调用，具体的拦截点包含四类：Executor：update，query，flushStatement，commit，rollback，getTransaction，close，isClosed等方法；ParameterHandler：getParameterObject，setParameters等方法；ResultSetHandler：handleResultSets，handleOutputParameters；StatementHandler：prepare，parameterize，batch，update，query在初始化Configuration对象时会解析标签生成Interceptor实例并加入拦截器链InterceptorChain；插件生成的时机就是Executor，ParameterHandler，ResultSetHandler，StatementHandler这四个接口的实现类初始化的时候，会调用pluginAll方法，根据InterceptorChain拦截链中的拦截器决定是否生成代理类；拦截器执行的顺序是：Executor，ParameterHandler，ResultSetHandler，StatamentHandler;Jacksonjackson中自定义处理序列化和反序列化blog.csdn.net/liuxiao723846/article/details/42921333自定义忽略规则Jacksonserialization:howtoignoresuperclasspropertiesstackoverflow.com/questions/26945580/jacksonserializationhowtoignoresuperclassproperties在POJO的json序列化字符串中加入自定义属性stackoverflow.com/questions/14714328/jacksonhowtoaddcustompropertytothejsonwithoutmodifyingthepojoShiromonkeyk/oauth2shiroredis:oauth2shiro与Redis的整合,更符合实际项目需要github.com/monkeyk/oauth2shiroredisshiro集成OAuth2学习体会香菇猫的博客CSDN博客blog.csdn.net/u013627689/article/details/78058152Shiro学习系列blog.csdn.net/qq_34021712/column/info/26947springboot整合shiroshiro介绍一springboot整合shiro快速入门二springboot整合shiroWhitelabelErrorPage解决三springboot整合shiro配置记住我四springboot整合shiroehcache缓存五springboot整合shirosession管理六springboot整合shiro在线人数以及并发登录人数控制七springboot整合shiro登录失败次数限制八springboot整合shiro实现验证码认证九springboot使用shiro整合redis作为缓存十Shiro使用redis作为缓存解决shiro频繁访问Redis十一解决Shiro频繁访问Redis读取和更新session十二shiro整合oauth2.0服务端和客户端实现入门教程十三关于shiro使用密码加密加盐之后序列化失败的问题十四springboot整合shiro对密码进行MD5并加盐处理十五springboot整合shiro实现自己的登出十六springboot整合shiro关于登出时,redis中缓存没有清理干净的问题十七springboot整合shiroSimpleAuthenticationInfo参数该使用username还是User实体十八filter&realm绑定多登陆入口，区分前后台www.jianshu.com/p/eab0b28f6fea安全认证框架Shiro二）shiro过滤器工作原理blog.csdn.net/achenyuan/article/details/78541529SessionDAOvsCacheManagerSessionDAO、CacheManager两者的职责不一样。SessionDAO可以实现有缓存的，也可以实现没有的；而CacheManager不仅仅用于CachingSessionDAO，还有CachingRealmCacheManager实例会自动地直接传送到SessionDAO（通过EnterpriseCacheSessionDAO实现CacheManagerAware接口的性质）。然后，当SessionManager要求EnterpriseCacheSessionDAO去持久化一个Session时，它使用一个CacheManager去存储Session数据。如果想Session存于Redis中，有两种方式：1、实现Redis的SessionDAO就行；2、实现Redis的CacheManager，而SessionDao使用EnterpriseCacheSessionDAO，并设置cacheManager。集群Apacheshiro集群实现系列www.bbsmax.com/A/GBJrlweEd0/备用：blog.csdn.net/lishehe/article/details/45218251apacheshiro集群实现（一）session共享blog.csdn.net/michaelliuyang/article/details/8819852apacheshiro集群实现（二）―cache共享blog.csdn.net/michaelliuyang/article/details/8820390使用Redis让Shiro实现集群jetgeng.github.io/blog/html/2014/09/07/redis_shiro.htmlOAuth2、Token、JWT、CAS登录shiro整合oauth2.0服务端和客户端实现入门教程十三blog.csdn.net/qq_34021712/article/details/80510774teedao例子代码github.com/zhangtr/teedaoShrio框架Token认证思路blog.csdn.net/u011687186/article/details/80702912shiro实现免密登录，解决三方登录问题blog.csdn.net/qq_40194399/article/details/85539158shiro框架的构建以及与JWT的整合github.com/HowieYuan/ShiroSpringBootShiro基于SpringBoot+JWT搭建简单的restful服务github.com/SmithCruise/SpringBootShirospringboot2.0集成shiro和pac4jcas单点登录www.cnblogs.com/suiyueqiannian/p/9359597.htmlSession问题shiro的session和servlet的session的区别blog.csdn.net/suruiliang/article/details/78824448shiro将ServletHttpSession包装成了ShiroHttpSessionblog.csdn.net/u013628152/article/details/84031784springmvc下shiro的session,request等问题www.cnblogs.com/vinozly/p/5080692.htmlSession数据共享的前后端分离Shiro实战www.cnblogs.com/shenjixiaodao/p/7426594.htmlspringrain技术详解5shiro的httpSessionwww.9iu.org/2013/12/20/springrain5shirohttpsession.htmljsessionid传递方式对session实现机制bbs.landingbj.com/showtopic.jsp?rootid=174571&CPages=1解决iframe中jsessionid无法传递导致session丢失的问题618119.com/archives/2007/12/19/48.html实现跨域cookie共享www.verydemo.com/demo_c432_i2937.htmlFreeMarkerFreeMarker缓存处理blog.csdn.net/J080624/article/details/78648845SpringSecurity【官方】SpringSecurity中文文档www.springcloud.cc/springsecurity.html", "Coding/SkillsMap-Java语言.md": "TOCJava语言Java新功能：github.com/gjhuai/java8tutorialJava设计模式：github.com/gjhuai/javadesignpatterns【练习】70k星iluwatar/javadesignpatternsgithub.com/iluwatar/javadesignpatternsgithub.com/gjhuai/javasamplesgithub.com/eugenp/tutorials.git【入门】int与byte、byte相互转换blog.csdn.net/wenqiangluyao/article/details/100161769【入门】JAVA：byte和int类型的转换原码反码补码blog.csdn.net/changhuzichangchang/article/details/106332199【详解】java序列化，看这篇就够了www.cnblogs.com/9dragon/p/10901448.html【详解】Java的深拷贝和浅拷贝www.cnblogs.com/ysocean/p/8482979.html【详解】Java―Map集合详解（HashMap/Hashtable/LinkedHashMap/Properties/TreeMap/WeakHashMap/IdentityHashMap/EnumMap）blog.csdn.net/Andya_net/article/details/105382344Groovy_Linksgithub.com/virtualdogbert/Groovy_LinksGroovy的SQL模块www.jianshu.com/p/a0e301f79f9bJava8简明教程黄小非blog.csdn.net/jiankunking/article/details/51479024Java8简明教程飞龙blog.didispace.com/books/java8tutorial/Java8Streamsmapexampleswww.mkyong.com/java8/java8streamsmapexamples/Java8CConvertListtoMapwww.mkyong.com/java8/java8convertlisttomap/java8的lambda中的map相关操作blog.csdn.net/wabiaozia/article/details/84262195【详解】全网把Map中的hash分析的最透彻的文章，别无二家blog.csdn.net/hollis_chuang/article/details/80248617【详解】21张图带你领略集合的线程不安全mp.weixin.qq.com/s/IvSGGcUXq3z7b9yyYHUKvA【详解】我工作三年了，该懂并发了（干货）mp.weixin.qq.com/s/Ov_QnfM4QSiFLL1HBxdEsg奇偶校验的概念haige_666的博客CSDN博客blog.csdn.net/haige_666/article/details/81022302一些简单的编程练习题文章伯乐在线blog.jobbole.com/53039/Javatip:Howtoreadfilesquickly|NadeauSoftwarenadeausoftware.com/articles/2008/02/java_tip_how_read_files_quicklyFileChannelwithByteBufferandbytegets面试必备：30个Java集合面试问题及答案推酷www.tuicool.com/articles/YbMbYbr狗屎一样的代码！快，重构我！mp.weixin.qq.com/s/4vLU0T5xkeVHNfoT2qSV9Q?client=tim&ADUIN=15756953&ADSESSION=1553564018&ADTAG=CLIENT.QQ.5603_.0&ADPUBNO=26882SerializationandClassloaders|Reflectionsrsankarx.wordpress.com/2012/06/08/javaserializationclassloaders/JavaGarbageCollectionBasicswww.oracle.com/webfolder/technetwork/tutorials/obe/java/gc01/index.htmlt5Java算法生成全局唯一的IdIdGenCSDN博客blog.csdn.net/high2011/article/details/79192761xuminwlt/j360idgen:ID生成服务器,多种高性能ID生成策略github.com/xuminwlt/j360idgen【JAVA】系统唯一ID生成方案讨论CSDN博客blog.csdn.net/simonchi/article/details/56276878基于事件流构建的服务github.com/jasonGeng88/blog/blob/master/201706/event.mdJVM以《分布式JAVA应用基础与实践》的目录为纲，查阅《深入理解Java虚拟机》的细节，高并发查阅《JAVA并发编程实战》。简称《分J》、《深J》、《并J》阅读《深入理解Java虚拟机_JVM高级特性与最佳实践_第3版》（一）自动内存管理Java内存区域与内存溢出异常【原理】JVM之内存模型zhuanlan.zhihu.com/p/44296601【详解】浅谈JavaString.internwww.jianshu.com/p/0d1c003d2ff5【专栏】GC性能优化blog.csdn.net/renfufei/category_9268307.html【练习】8种典型JavaOutOfMemoryExamplegithub.com/rangareddy/rangajavaoom中英文对照版：github.com/cncounter/outofmemoryerror英文原版：plumbr.io/outofmemoryerror当一个Java程序响应很慢时如何查找问题当一个Java程序频繁FullGC时如何解决问题，如何查看垃圾回收日志当一个Java应用发生OutOfMemory时该如何解决，年轻代、年老代、永久代解决办法不同，导致原因也不同编程验证软引用，弱引用，虚引用垃圾收集器与内存分配策略【原理】JVM之类加载机制zhuanlan.zhihu.com/p/44340596【原理】JVM之代码优化zhuanlan.zhihu.com/p/44432381【原理】JVM之线程并发zhuanlan.zhihu.com/p/44517264【原理】JVM与操作系统zhuanlan.zhihu.com/p/44401058【原理】volatile非线程安全解析blog.csdn.net/wsh596823919/article/details/82698357【原理】骚操作：不重启JVM，如何替换掉已经加载的类？mp.weixin.qq.com/s/GCJ5vUsnUSb5VTBoz0zSFw【入门】这几款JVM故障诊断处理工具你还不会mp.weixin.qq.com/s/t7G1tSrNJ603nIpgzMY2uw【详解】快速定位生产故障问题JVM进程CPU占用率高于100blog.csdn.net/flysqrlboy/article/details/79314521【原理】Java垃圾回收（思维导图）blog.csdn.net/gjhuai/article/details/118565990【原理】深入理解JVM垃圾收集机制JDK1.8cloud.tencent.com/developer/article/1069187【原理】Java――七种垃圾收集器+JDK11最新ZGCblog.csdn.net/CrankZ/article/details/86009279【原理】打工人，从JMM透析volatile与synchronized原理blog.csdn.net/javachengzi/article/details/115303495Java执行机制主要阅读《分J》3.1节、《深J》的第三部分类文件结构类加载机制类执行机制案例分析tomcat类加载机制OSGI类加载机制字节码与动态代理FAQ写一个程序要求实现javap的功能（手工完成，不借助ASM等工具）Tomcat【详解】史上最强Tomcat8性能优化blog.csdn.net/ThinkWon/article/details/102744033【详解】记一次线上商城系统Tomcat、JVM高并发的优化mp.weixin.qq.com/s/Bp4TB1aoDmJE5jqHIP22xg【详解】Tomcat架构原理解析到架构设计借鉴mp.weixin.qq.com/s/ocjTeevXHi1zLtMz3rMBeQ详解tomcat的连接数与线程池www.cnblogs.com/kismetv/p/7806063.htmlJetty类加载问题处理hadix的专栏博客频道CSDN.NETblog.csdn.net/hadixlin/article/details/40426455JVM之类的加载机制Gavin博客频道CSDN.NETblog.csdn.net/gavin_john/article/details/61208054tomcat的类加载器初步认识简书www.jianshu.com/p/9f1df03b0f2b手写一个简化版Tomcat布衣小工博客园www.cnblogs.com/itbuyixiaogong/p/9067116.htmlnginx+tomcat7（8）集群，负载均衡和session共享CSDN博客blog.csdn.net/remote_roamer/article/details/51133790并发主要阅读《分J》第4章、《深J》的第五部分、《并J》全书。【书籍】Java7并发编程指南中文版ifeve.com/java7concurrencycookbook/【详解】Java并发之AQS详解www.cnblogs.com/waterystone/p/4920797.htmlThreadLocal全攻略：使用实战，源码分析，内存泄露分析blog.csdn.net/wo541075754/article/details/116081575聊聊并发（一）――深入分析Volatile的实现原理www.infoq.cn/article/ftfjavavolatile聊聊并发（二）――JavaSE1.6中的Synchronizedwww.infoq.cn/article/javase16synchronized聊聊并发（三）――JAVA线程池的分析和使用www.infoq.cn/article/javathreadPool聊聊并发（四）――深入分析ConcurrentHashMapwww.infoq.cn/article/ConcurrentHashMap聊聊并发（五）――原子操作的实现原理www.infoq.cn/article/atomicoperation聊聊并发（六）――ConcurrentLinkedQueue的实现原理分析www.infoq.cn/article/ConcurrentLinkedQueue聊聊并发（七）――Java中的阻塞队列www.infoq.cn/article/javablockingqueue聊聊并发（八）――Fork/Join框架介绍www.infoq.cn/article/forkjoinintroduction聊聊并发――生产者消费者模式www.infoq.cn/article/producersandconsumersmode双重检查锁定与延迟初始化www.infoq.cn/article/doublecheckedlockingwithdelayinitializationJava多线程（八）线程状态图www.cnblogs.com/mengdd/archive/2013/02/20/2917966.htmlNIO与并发包Java内存模型与线程线程安全与锁优化FAQBIO、NIO、AIO的区别？Reactor、Preactor区别？线程池原理什么是锁，锁的种类有哪些，每种锁有什么特点，适用场景是什么？同步机制有哪些？写一个死锁的程序什么是守护线程，守护线程和非守护线程的区别以及用法？volatile的作用？线程与进程多线程与多进程1――以操作系统的角度述说线程与进程blog.csdn.net/luoweifu/article/details/46595285多线程与多进程2――线程优先级与线程安全sunlogging.blog.csdn.net/article/details/46701167多线程与多进程3――Java中的多线程sunlogging.blog.csdn.net/article/details/46673975I/O模型:BIO、NIO、AIOUnix网络编程的5种I/O模型zhuanlan.zhihu.com/p/121826927常用工具库modelMapper入门及使用解析www.jianshu.com/p/d97f9ea2d3caCGLIBBeanCopier和BeanMap等实现grefr.iteye.com/blog/2053748", "Coding/SkillsMap-编程语言.md": "算法【练习】C语言经典100例github.com/hubojing/C100Practice【练习】十大排序算法zhuanlan.zhihu.com/p/42586566【练习】常见数据结构blog.csdn.net/qq_37043100/category_7502686.html二叉树的建立与遍历blog.csdn.net/qq_37043100/article/details/80171535顺序循环队列blog.csdn.net/qq_37043100/article/details/79878940单链表blog.csdn.net/qq_37043100/article/details/79537822双向链表blog.csdn.net/qq_37043100/article/details/79624459链栈blog.csdn.net/qq_37043100/article/details/79706288【练习】常见算法题分类总览blog.csdn.net/pcwl1206/article/details/97390314【练习】数据结构和算法必知必会的50个代码实现github.com/wangzheng0822/algo【原理】一口气搞懂「链表」，就靠这20+张图了mp.weixin.qq.com/s/HWu2eOHEPGi44jgi4VRoXgPython【入门】Python基础入门www.codersrc.com/pythonsimple廖雪峰的Python教程www.liaoxuefeng.com/wiki/1016959663602400Python3教程www.runoob.com/python3/python3tutorial.html用Python做科学计算&mdash;用Python做科学计算old.sebug.net/paper/books/scipydoc/index.htmlPython框架Flask项目实战教程jamesben博客园www.cnblogs.com/jsben/p/4909964.htmlgithub.com/gjhuai/fanxiangcePython自动化测试selenium爬虫被检测到该如何破？知乎www.zhihu.com/question/50738719SeleniumwithPythondocumentationseleniumpython.readthedocs.io/如何突破网站对selenium的屏蔽\\_鲲鹏Web数据抓取www.sitedigger.com/html/articles/20180821/653.htmlpython爬虫selenium抓取今日头条（ajax异步加载）www.cnblogs.com/hellangels333/p/8762112.htmlSeleniumPython中文文档2documentationseleniumpythonzh.readthedocs.io/en/latest/locatingelements.htmlweb自动化测试（python3）许西城的博客（记录点滴）许西城CSDN博客blog.csdn.net/CCGGAAG/column/info/16881Golang【入门】Go语言简明教程studygolang.com/articles/13958【书籍】Go语言高级编程AdvancedGoProgrammingchai2010.cn/advancedgoprogrammingbook/【练习】golang教程学习笔记github.com/gjhuai/golangStudy【项目】gozero微服务框架github.com/taltech/gozero/blob/master/readmecn.md【项目】Go数据中台系统github.com/jackluo2012/datacenter说明：我用gozero一周实现了一个中台系统xie.infoq.cn/article/5adaa270170ad23e8108ea4b8【书籍】《Go程序设计语言》【练习】Go语言圣经《Go程序设计语言》习题汇总segmentfault.com/a/1190000021285503【详解】Go程序内存泄露问题快速定位zhuanlan.zhihu.com/p/368567370【详解】如何写出优雅的Go语言代码draveness.me/golang101/【练习】Go学习、Go进阶、Go实用工具类、Gokit，GoMicro微服务实践、Go推送hub.fastgit.org/hwholiday/learning_tools", "Coding/SkillsMap-计算机基础.md": "Unicode和UTF8、UTF16、UTF32之间的关系blog.csdn.net/hongsong673150343/article/details/88584753", "Coding/编程方法感悟.md": "小模块开发方法：1、编写Story。不会写的、懒得写的人，可以简单的将需求一条一条的列出来2、画出业务流程。可以使用流程图、时序图、数据流图、活动图、协作图3、画出ER图。并在ER图上推演业务流程。4、定义出接口，并为每一个接口写上注释。注释内按照实现流程来写。这些接口通常是Service方法5、写单元测试。优先测试Service方法6、实现代码。7、按照业务流程进行测试。这个测试是集成测试8、整理业务流程，完成需求、设计文档编写。开发eatamail有感建立模型：数据对象有：SMTP服务器，邮件方法和原则：ER分析方法分块与类的设计：读取邮件的XML配置文件读取邮件模板并实例化发送邮件方法和原则：分块组合和职责单一找出每一个块提供的对外方法：读取邮件的XML配置文件读取XML解析XML文件，转换为Java对象读取邮件模板并实例化读取模板实例化模板并输出文本内容发送邮件初始化邮件配置发送邮件方法和原则：面向接口编程设计方法的实现细节采用流程图、时序图、方法注释来理清流程方法和原则：思考重于实现为每个方法建立测试用例，并逐一测试方法和原则：测试驱动开发以结果为导向编码方法和原则：由果及因，小步快跑VS由因及果，一步到位完善文档编写使用手册、README整理设计文档方法和原则：后期文档重于前期文档", "management/01-GJH简历_中文.md": "管江淮```性别：男出生年月：19771学历：硕士工作年限：10+年电话：18109032120电子邮件：15756953@qq.com```教育经历本科，1997/92001/7，成都理工大学，计算机软件专业。硕士，2006/92009/7，电子科技大学，软件工程。专业技能熟悉且多次负责从零建立软件研发团队，运作研发团队，善于建设团队和培养人才；熟练面向对象的系统分析与设计，具有多个行业分析与产品规划经验；熟练基于SpringBoot/SpringCloud/dubbo分布式系统架构设计，具有分布式系统架构经验；了解Oracle/MySQL/MongoDB/Redis等数据库；了解大前端，了解Vue/Flutter；工作经历**TechnicalDirector,2018/3至今,成都道衍云算科技有限公司**与朋友一起创业，担任技术总监，负责公司的技术与研发工作；在决策层面，负责制定产品发展路径、确定技术路线、定岗位明职责、制定研发管理过程、制定运维实施制度等工作；在团队建设方面，负责制定岗位明职责、制定人才发展晋升通道、按职位制定学习和培养方案、招聘、培训等；在研发执行方面，负责产品整体规划与分层细化、组织人力团队、定职责、监督与指导、工作评价等工作，完成三评审：需求评审、计划评审、代码评审；在架构方面，负责投标技术方案编写、制定产品技术方案、制定或评审架构设计、核心架构实现等；在运维客服方面，建立实施流程、与客户沟通机制、客户反馈处理机制等；公司产品业务涉及电厂信息化、智能环卫、基建信息化、区块链、高考志愿等行业；下属团队35人，分4个研发组（每组46开发人员和1个测试人员）、一个架构组（3人）、一个产品设计组（3人）、一个运维组（5人）。**TechnicalDirector/Architect,2014/52018/3,成都交大光芒科技股份有限公司**担任架构师，负责公司铁路SOA分布式信息化平台的架构设计与实现，以及各业务项目的设计与评审；担任技术总监，负责研发过程优化与管理、产品体系规划、技术方案决策、人员培养；下属团队分产品设计组、研发组、测试组，产品设计组3人，测试组3人，研发组15+人数；获得1次最佳创新员工，1次优秀员工。**TechnicalDirector,2012/122014/4,成都易达出行科技有限公司**加入朋友的创业团队，担任技术总监，负责公司租车产品的研发工作；完成了公司基础平台的架构设计与实现，实现了租车产品的上线运营；下属团队10+人，测试、运维、产品、美工各1人，App开发2~4人、后端开发4+人。**TechnicalManager/Architect,2011/52012/10,丰益（上海）信息技术有限公司**担任公司成都研发部技术经理，负责建立成都团队、制定研发管理过程；兼任架构师，负责公司全国农产品收购系统架构设计、项目管理工作；下属团队12人，测试2人，产品经理由上海同事担任。**ProjectManager/Teacher,2009/72011/4,四川华迪信息技术有限公司**担任项目经理，负责电子政务项目、健康检查项目的投标宣讲、需求调研、设计与开发，团队人数10+；担任培训讲师，负责大学生实训项目，教授过多门课程，管理过多个班级。**SoftwareEngineer,2004/92005/5,亚信成都分公司**从事电信业务（经营分析）开发与维护。**SoftwareEngineer/ProjectSoftwareManager,2001/72004/7,东软（大连）国际合作事业部**担任项目经理，负责对日ERP项目的开发和管理工作；02年和03年连续两年被授予东软年度优秀员工，期间被派往日本一段时间；下属团队分3个研发小组，每组58人，独立的测试团队。项目经历**高考生涯规划平台**2020/112021/57个月>担任角色：Architect>承担任务：1）完成整体的技术架构；2）完成产品设计。>此产品旨在为高考后的准大学生提供未来的职业规划服务，此平台是一个基于云服务的多租户平台。目前覆盖功能包括院校及专业管理、个人性格评测、分数线管理、职业学习、志愿填报、专家服务、加盟商管理、分销管理、支付等等。**城市智慧环卫平台**2020/8至今10个月>担任角色：Architect>承担任务：1）完成整体的技术架构；2）完成产品设计。>此产品旨在为城市环境卫生提供解决方案，环卫行业方兴未艾，此方案并不全面。目前覆盖垃圾分类、垃圾清运、资源再回收、街道清扫等。主要功能包括楼宇垃圾分类、网格化管理、清运调度管理、清扫排班与考勤管理、回收分拣管理等等。**能源集团基建管理系统**2019/5至今15+个月>担任角色：Architect>承担任务：1）完成整体的技术架构；2）完成产品设计。>此产品旨在为管理和协调能源集团基础设施。板块上覆盖工程施工管理、基建安全管理、后评估管理等。主要功能包括工程标准管理、项目管理、商务物资管理、进度管控、质量管理、项目验收、安全随手拍、安全网格化管理、后评估管理等等。**能源集团垃圾焚烧厂业务信息化平台**2018/3至今20+个月>担任角色：Architect>承担任务：1）完成整体的技术架构；2）完成产品设计。>此产品旨在为整个垃圾焚烧电厂提供信息化解决方案。板块上覆盖生产管理系统MES、安全监控系统SIS、指标分析系统等。主要功能包括设备管理、两票三制管理（工作票、操作票、交接班、巡检、维修）、发电设备数据采集与监控、发电指标分析等等。**铁路供电运营及维护平台**2014/82015/1113个月>担任角色：Architect>承担任务：1）完成整体的技术架构；2）完成产品设计。>此产品旨在为铁路供电段业务提供信息化解决方案。覆盖铁路供电业务的调度、接触网、变电、配电、轨道车、给水等几大专业的业务。核心功能包括调度作业计划、电调命令管理、铁路设备管理、接触网巡视、6C、施工计划、配电设备巡视与检修等等。**途咖租车移动互联网平台**2012/122014/315个月>担任角色：ProductManager/Architect>承担任务：1）完成整体的技术架构；2）完成产品设计、验收。>此产品是一个租车的移动互联网应用。提供App、微信、机顶盒、Web等多种途径订车，由自动调度服务器调度整个业务流程，并提供业务支撑及管理。**农产品收购系统**2011/62012/814个月>担任角色：Architect>承担任务：1）完成系统整体的技术架构；2）完成产品设计。>此系统是对益海嘉里全国各地工厂的农产品收购业务进行全流程的监控与管理。系统采用JavaEE6技术体系实现，采用IBM的Websphere/DB2集群做为后台支撑，采用Message中间件、流程引擎进行业务解耦，是个大型的企业应用。**电子政务系统**2009/122010/67个月>担任角色：ProjectManager/Architect>承担任务：1）完成需求调研及分析；2）完成系统架构与设计；3）项目管理。>此项目是为成都市及下级县市所有行政权力事项（行政许可、行政处罚、行政强制、行政征收、其他行政权力等）实现在线统一接件和办理系统。此项目采用了基于SSH2的架构实现、基于RUP的分析和设计方法和Scrum的敏捷开发模式。**TME（ERP）**2002/62003/915个月>担任角色：ProjectManager>承担任务：1）项目开发过程管理；2）解决重大技术问题。>此项目是日本NEC公司的一个企业ERP系统。系统基于J2EE的B/S三层架构，前台采用JSP、Swing和Applet，后台采用EJB2实现。此项目人数达25人。", "management/01-在人世间修行.md": "TOC防懈怠，保持终身勤勉：干困难事必有所得金一南国防大学毕业演讲：做有心人、干困难事、立大格局www.bilibili.com/video/BV1YE411s7gq1.作有心人。利用了别人休闲时间。时间最公平。学习后，才产生了灵感。没有功利的学习。学习力是最大竞争力。2.干困难事。为了克服平淡。平淡最能杀死人。理论与实践结合。作难事给生活掀起波澜。克服平淡，激发潜力。必须学习社会实践经验。做难事必有所得。3.立大格局。百年未有大变局。必须付出无与伦比的努力。4.每一份工作都要做好。做人不能忘本。从哪里来，到你里去。战胜对手有两次，第一次在内心。扩大影响圈，缩小关注圈重要的事决定大局，琐碎的事无关紧要你赢不了任何一场辩论在记者采访或访谈节目中，主持人一个问题没有得到明确的答复时，很少打破砂锅问到底。问到底可能会产生争论，不清楚回答已表面对问题的态度。郝给力5分钟视频教如何成为沟通高手《人性的弱点》www.bilibili.com/video/BV1Ys411b7LT重复别人的名字，能获得好感。如果犯错了，请立即认错，让他人感觉重要。你根本赢不了任何一场辩论。双方都在找理由证明自己是对的。讲别人感兴趣的事情。提问式的沟通读书，读事，读人。从书中学习，从周围的事中学习，从别人身上学习，这些都学习都必须深刻的思考。帮别人解决问题，从别人的遇到困难中学习。少吃，多动，多睡肥胖会导致各种疾病。充足的睡眠是补药。教育：激发内生源动力，以行动带教尹建莉：世上最没用的三种教育方法，就是讲道理、发脾气、刻意感动www.jianshu.com/p/867265bfb868阅读：阅读可塑造孩子的智力、品质自由：给孩子选择权、尝试权与犯错误权身教：家长的行动比语言更有说服力非凡的毅力和恒心是迈向成功的阶梯――摘自《给孩子最好的教养》www.jianshu.com/p/b6eed37fe537激发内生源动力，源动力就像免疫力，教育好像药物。言传太抽象，说多了让人厌倦以行动带教是具体的、易学会的。对孩子是引导式的教育、身体力行的教育，批评式教育会带来更多的反抗爸爸妈妈们请对孩子说：1.“孩子，不管发生什么，我都会和你在一起，我永远爱你!”安全感2.“你是独一无二的，走你的路，做你自己!”价值感3.“也许你是对的，我只是建议，决定权在你。”尊严与自我负责4.“相信你能处理好自己的事情，如果需要，我会和你一起面对，尽我的力量陪伴你。”自信与支持5.“你无论做得怎么样，表现如何，你是我亲爱的孩子，我依然爱你。”接纳与鼓励6.“我喜欢你这种行为，不喜欢你那种行为。这不表示我是对的，你是错的。但一切都必须自己体验并承担。”个人化与自我负责这个世界按照自己的方向流动，每粒种子按照原本的样子成长，每个孩子生来就是圆满具足，如其所是，带着对生命无比的信任和祝福，轻轻地对孩子说滋养心性的语言!好文章华为离职副总裁徐家骏给任正非的辞职信blog.csdn.net/lxb18711871497/article/details/88186950从学生的着装到办公室的着装baike.1688.com/doc/viewd2430382.html", "management/01-学习方法.md": "SkillsMap学习原则自己写文档不如去背文档。网上的资料文档太多，自己去再写一遍完全是浪费时间，不如花时间去记住这些知识内容。在SkillsMap中只用记录文档的链接地址。找到最精炼的总结笔记，并定期复习。资料分类：【入门】、【总结】、【详解】、【教程】、【原理】、【例子】、【官方】入门可以用视频，总结一定用文档。总结笔记：可快速复习。如何学习新技术？快速了解：看视频，入门blog，专题blog。解读代码：去搞清楚每一行代码，并笔记记录。代码选择：github上的codetutrial库最佳，零散代码亦可。不是为了保留代码，是为了记住、理解代码。codetutorial库可长期维护，温故知新。系统学习：看书，做笔记。在掌握技术的用法后，看一本书（不要太多的书）系统的梳理知识点。视频课程学习视频只听一遍，没听懂才可以看多遍。（看视频太花时间）边听边切图做Word笔记。看完后，整理Word笔记，写成Markdown笔记。定期复习很重要。书籍、博客学习精研目录，标记感兴趣的章节，列疑问问题。一般不按照章节顺序阅读，按照自己的兴趣点阅读。很多书籍前面讲的都是不重要的话，到了最后才确切的揭示出秘诀。选择性阅读，关注自己是否获得所需的“信息”，而不是翻过页数。大纲式笔记（纸质）。边读边记，只记录三种内容：1、标题2、关键字3、疑问点。按照大纲式笔记复习（复习很重要）。在目录上标重点：“☆”5星表很重要，“△”表较重要，“√”表了解即可。晦涩难懂的书，不奢望一次读懂或纠缠某一段落，需要多次回锅阅读，多次感悟。书签能让你迅速的进入阅读状态。**《如何阅读一本书》书评**如何阅读――做一个伟大的读者book.douban.com/review/1020800/如何阅读《如何阅读一本书》？book.douban.com/review/13163072/类费曼技巧1.写出题目2.假设用自己的语言来向别人解释这个问题，如果卡壳，转入下一步，继续学习经过思考的知识才是真正的知识向别人解释得清的知识才是真正掌握可以独立做思维导图来代替向人解释3.查阅书籍，网络，提问等各种方式来学习这个专题4.第2，3步往复循环ScottYoung牛人的学习方法blog.csdn.net/weixin_30478757/article/details/95760491", "management/01-职业规划.md": "TOC发展方向做一个技术管理型的技术总监。技术不是拿来炫耀的，也没有高下之分，不能解决问题的技术都是无用，脚踏实地的解决工作中各种问题。从以下四个方面提升自己：技术技能精通系统分析设计（OOAD、DDD精通常见数据库：MySQL、MongoDB、Redis、Oracle。精通SpringCloud微服务架构。精通分布式系统架构。精通运维架构：Linux。紧随前沿技术，不一定精通，但一定不能一无所知。管理能力**不急不躁**：大胆假设，小心求证，稳定大于一切。**情绪管理**：控制情绪、利用情绪，不随意挥洒情绪，藏得住话。**清晰表达能力：**：不重复嗦，不多说，不悱不发，简明扼要。团队建设：精通如何建立一个团队、培养一个团队。团队行事制度：需求、设计、实现、测试、发布、运维各个环节标准和规范，以及各个阶段的衔接。产品规划规划一个产品很难，需要对行业和业务特别熟悉，也需要机会。将一个产品细化，让开发人员能实现，这个是业界最缺少的。编程技术栈**应用领域决定使用什么技术或语言，而不是先选语言，再强往应用领域上靠**Java：业务开发、数据库、Web服务Go：计算密集型、中间件、网络应用（互联网的C语言，标准库丰富，但没有JavaEE类的周边生态，不适合写业务，没有websession）Dart/Flutter：移动app和桌面GUI（桌面还未成熟）Vue/Angular/TS：前端UIPython：脚本、数据分析、深度学习、人工智能等CTO职责1.**定战略（制定技术战略）**：结合业务发展需求和现状，制定技术发展战略、对系统架构发展进行规划、组织制定和实施重大技术决策和方案（人工智能、数据中台等）；2.**搭班子（团队建设）**：定岗位明职责、制定人才发展晋升通道、按职位制定技术学习方案、招聘、培养培训3.**带队伍（执行力）**：整体规划、分层细化、组织人力团队、定职责、监督与指导、工作评价三评审：需求评审、计划评审、代码评审4.**制定研发流程**：主导制定并持续优化研发工作流程和规范，保证高效率高质量的技术产出，促进技术成果的沉淀共享，确保技术成果的有效性和持续性；5.**制定研发技术路线**：制定或评审技术架构和数据库设计；优化现有技术框架；负责部门软件构件库的搭建、第三方控件的选型；6.**保障业务**：最大程度支撑部门产品的技术实现和稳定运行，力求技术稳定性和先进性为部门发展提供动力，容量规划预备业务的快速增长；完成各项技术工作相关数据统计分析报告，并据此对部门发展提出合理化建议；7.**新技术研究**：研究部门战略发展相关最新产品和技术的发展方向，调研与产品相符的最新技术，并在系统中使用以提升产品体验。职位要求：2、具备良好的基本功，熟练使用基本的数据结构和算法，深入理解多线程、socket等相关技术；3、熟练掌握Spring等主流的开发框架，深入理解框架实现原理及特性；4、具备良好的编码习惯，结构清晰，命名规范，逻辑性强，代码冗余率低；5、熟悉Java的高级特性，深入理解各种设计模式和应用场景；6、有大规模分布式系统的开发和高可用相关的实践经验，具备设计复杂系统的能力；7、熟练掌握Mongodb数据库，具备Mongodb索引优化、查询优化、分库分表优化、数据库备份还原应用的能力；8、熟练掌握MySql数据库，具备MySql索引优化、查询优化、分库分表优化、数据库备份还原应用的能力；9、熟练掌握一种以上非关系型数据库，理解其使用场景及限制，如：Redis、Memcached等；10、熟悉分布式系统，熟练掌握一种以上服务框架和消息中间件，如：kafka，了解其实现原理；11、熟悉负载均衡和HA的基本原理，熟练掌握一种以上的HA框架，如：ZooKeeper、KeepAlived、LVS、DNAT、SNAT等；12、熟悉前端开发基本原理，熟练掌握一种以上的web框架，如：React、Vue、Angulard；13、对BIM、GIS有相关开发经验者优先；14、具有团队精神和责任感，自驱力强，对技术有持续的热情；15、具有10人以上团队管理经验；16、统招211、985重点大学研究生以上学历；听娱乐NCE英文歌听书籍，拒绝碎片化听广播面试问题集1、JVM内存模型、GC垃圾回收2、JVM问题定位，调试3、Tomcat及JVM调优TODOLIST弄清这几个接口干什么用的`GenericFilterBeanimplementsFilter,BeanNameAware,EnvironmentAware,EnvironmentCapable,ServletContextAware,InitializingBean,DisposableBean`智能报表flutter的学习SpringCloud学习MySQL主从，读写分离TOGAF咨询方案，企业架构学习", "management/02-Java实习人员培养方案.md": "TOCJavaWeb人员培养原则培养对象有一定的Html/CSS、Java编程基础；制定严格的学习计划，可量化的考核标准；20%知识点学习，80%实践练习，以实例练习为主；内容包括Web页面开发、Java编程、RMDB三个部分。第一阶段：Web页面开发简介本阶段是所有前端、后端工程师都必须学习的阶段。本阶段结束后，有志于更深层次的前端开发，可以选择走前端工程师培养路线；而希望走JavaWeb开发方向，可以选择JavaWeb开发。本阶段学习时间大约在2个月左右，需要学习内容包括：HTML、CSS、JS、jQuery、EasyUI等。学习内容学习教材是《网页开发手记.HTML.CSS.JavaScript实战详解》和《jQueryEasyUI教程》，培养对象需要完成指定章节的所有实例开发。《网页开发手记.HTML.CSS.JavaScript实战详解》包括四个篇章，分别为：HTML基本知识、CSS样式控制、JavaScript编程、综合实战。《jQueryEasyUI教程》主要是实例讲解。考核方式在培养期间，培养对象需要按周提交自己编写的教材中的实例；培养期结束，提供所有实例。现场考核：在脱网的情况下，完成一个网站开发，可自选题目，也可选择《网页开发手记》中的综合实例（个人网站、门户网站）。现场考核：在脱网的情况下，完成一个基于EasyUI的CRUD程序（数据通过JSON模拟）。考核对象需要在8小时内完成现场考核。学习进度快者，可以提前考核。进度安排第1周：完成HTML基本知识学习。第2周：完成CSS样式表学习。第3、4周：完成JavaScript学习。第5周：完成个人网站开发。第6周：完成门户网站开发。第7、8周：完成EasyUI技术学习。第二阶段：JavaWeb开发简介在完成Web页面开发培训阶段后，方可进入本阶段学习。本阶段学习时间大约在2个月左右，需要学习内容包括：Java常用开发技术、数据库SQL。本阶段需要完成一个实验项目开发。学习内容Java常用开发技术教材为《Java经典实例第三版》节选，主要内容是Java基础知识，培养对象需要完成节选章节的所有实例开发。数据库SQL教材为《SQL必知必会第4版》，包括全书的所有内容，培养对象需要熟练掌握书中所有实例。基于Spring的数据库编程，本部分主要参考本公司的项目实例，公司会安排导师讲解培训。【任务跟踪管理系统】实验项目开发。考核方式在培养期间，培养对象需要按周提交自己编写的教材中的实例；培养期结束，提供所有实例。完成实验项目开发，根据完成情况打分。现场考核：在脱网的情况下，完成从《Java经典实例第三版》选取4道题目和一个Java编程题目，以及2道综合的SQL题目。现场考核：基于公司的框架完成一个简单CRUD应用，前端要求使用EasyUI。考核对象需要在8小时内完成现场考核。进度安排第1周：完成《Java经典实例》字符串、数字处理两部分学习。第2周：完成《Java经典实例》日期时间、结构化数据两部分学习。第3周：完成《SQL必知必会第4版》前14章关于DQL学习。第4周：完成《SQL必知必会第4版》后8章学习。第5周：完成基于Spring的公司框架demo讲解，并完成demo开发。第6、7周：独立完成【任务跟踪管理系统】实验项目开发。任务安排要求：注册一个网络笔记app。记录在查询资料中遇到各种问题和答案。每遇到的问题，多问几个为什么。任务01、tomcat优化及性能测试编写一个简单的javaweb程序。使用servlet或SpringMVC都行。在CentOS上安装tomcat，并运行此web应用。调试tomcat配置参数使其并发性能达到最优。使用并发性能测试工具（如：ab，JMeter等）测试此应用，给出测试数据。", "management/02-关于架构团队的思考.md": "我个人认为架构组的主要职责有以下几点：提供技术培训。这一点在我们公司尤为重要。首先、培养前端开发人员。公司人员流动相对稳定，而前端开发人员不好招聘，如果我们自己来培养应届毕业生，花费13个月完全可以培养出比较好的前端开发人员的，而招聘前端人员基本是招不到。第二、实施CodeReview，提高大家的编码能力。我们公司开发人员学习技术热情太低，必须培养学习热情。我自己刚毕业那会，一个月都要看一两本技术书，但是公司大部分开发人员桌子上没有书，也不见大家一起讨论技术问题。第三、主办技术论坛。每12周一个技术专题分享和讨论。建立学习机制、提高员工的能力能提高团队的开发能力、能提高员工对公司的向心力。长远的技术储备能使得项目技术难题变少。我很渴望将自己的经验和技术知识传递给大家。平台规划与实现。主要负责应用架构、基础设施架构、信息安全架构，核心代码实现，但不应该是所有代码实现。我的优势是我的经验、我的架构设计能力，其他我并不占优势，而现在我的角色也就是一个普通开发人员，这对我个人或公司都是浪费。技术前瞻性研究。如果我们没有做这项工作，那么当业务市场、产品需要某种技术时，只能抓瞎，比如：大数据技术我们一年前就说研究（2016年计划里面我就写了），现在PHM项目需要大数据技术，我们没有储备，这种风险太大，项目基本不可能成功。在比如：机器人项目虽然在9月份以后才会考虑监控中心开发，但是里面技术很多都是以前信息化这边没有涉及的，如果不提前准备，想要年底出一个原型，那么风险也是巨大的。难点攻关。现在即使有难点攻关，大家找到我，我也只能发表一下意见，没时间去研究。所以技术难题有两种结果：第一被置之不理；第二项目组人自己研究。项目组自己研究首先会拖慢项目进度，其次是他们经验毕竟有限，不会有很好解决方案。比如：6C浏览器播放图片速度慢的问题，樊经理找过我，但是真的没时间，从去年到现在一直项目组自己研究，但他们又能做什么？业务产品的架构与实践。产品架构设计。我们的产品开发过程一般是直接从需求到实现，一般都没有设计人员参与，导致可能结果是产品需要设计上进行重构，比如：去年我主导的设备建模与设备管理DB设计，这都是不改不行了，而这种基础改动都是伤筋动骨的，代价高昂。仅仅去年一个多月去搞这个产品架构设计的事，我不知道我们的产品还有多少这种设计不合理的。开发实践改进。比如：前后端分离的开发方式，对业务的代码如何测试问题。为了摆脱一般性琐碎任务的干扰，完成我们的主要目标，**架构组这边急需人员组成团队，没有高级的，初级也凑活，即使应届生也比没有强**。如果长期这种一个人，也做不了什么，对我自己是浪费时间，对公司也是浪费成本。", "management/02-管理过程.md": "!assets/00/2017111882ed70ff.pngTOC编制迭代功能清单列出单周期内需要完成的功能清单标明优先级、工时估计迭代计划会制定迭代任务清单任务标明优先级、工时估计功能需求宣讲、答疑任务领取或分配将bug修复纳入开发计划每日立会每人说明三件事：昨天完成了什么？今天计划做什么？遇到什么问题或障碍？不超过10分钟，站立开会拉动故事墙（无bug方算完成）产品和程序设计由需求人员、设计人员、开发人员共同讨论、设计产品UI、功能设计代码结构设计、接口定义技术难点解决编码开发功能分解成任务（包括功能任务、非功能任务）和需求人员讨论需求，和设计人员讨论设计按验收标准自测，自测完毕交付给测试人员CodeReview代码规范检查代码用法检查、知识传递发现Bug抽象共通组件测试需求人员按照验收标准进行功能验收，不符合项超过3条打回自测部署系统，测试人员细化丰富验收标准，并进行测试，登记Bug测试人员将细化后的验收标准做出checklist，逐条打钩确认出具纸质的checklist方能发布验收测试按照《需求定义》中的验收标准，一旦超过3条，打回开发人员自测有需求人员、设计人员来验收反思总结会总结本迭代的好的经验、失败的教训制定改进措施风险管理建立风险跟踪表，实时跟踪技术风险：及时了解、记录跟踪、解决风险业务风险：需求不清、产品设计不合理客户风险：客户及时配合、客户印象风险管理风险：工程和管理过程不合理、开发人员情绪不积极其他风险：项目组周报项目进展下周计划风险管理", "management/03-JD职位描述.md": "TOCJava工程师工作职责：1、参与产品设计规划、需求分析与讨论、理解软件功能；2、负责软件开发，单元测试和维护等工作，确保项目的进度和质量；3、参与软件概要设计、详细设计说明书、数据库设计等技术文档编写；任职要求：1、扎实的JAVA基础知识，精通面向对象编程；2、熟悉Spring等框架使用，了解其运行原理；3、熟悉SQL编写，熟练掌握至少一种常用数据库（Oracle、MySql）；4、掌握一般的JS、HTML页面开发，熟悉easyui优先；5、工作积极主动，乐于沟通，热爱学习。初级前端工程师1、岗位描述：1）负责前端界面的前端构建，各类交互设计与实现；2）前端样式和脚本的模块设计及优化；3）配合后台开发人员完成项目；2、任职要求：1）熟练掌握HTML5、CSS等网页制作技术，熟悉页面架构和布局；2）熟练掌握JavaScript、Ajax、DOM等前端技术，掌握面向对象编程思想；3）对js框架应用（如jQuery/layUI/Vue.js等）有一定的经验；4）对css/JavaScript性能优化、解决多浏览器兼容性问题有一定的经验；5）对用户体验、交互操作流程、及用户需求有深入理解；6）有强烈的上进心和求知欲，善于学习和运用新知识，善于沟通和逻辑表达，有强烈的团队意识和执行力。项目经理任职条件：1、全日制本科毕业，软件工程或相关专业毕业，具备3年以上的IT项目管理经验。2、从事过3年以上编码工作，熟悉Java、Spring、MyBatis、Oracle、MySQL等语言或技术；3、具备良好的交流、沟通能力、书面表达能力、团队协作精神。4、具备较强的逻辑分析和需求问题梳理能力，熟悉软件文档编写及管理。5、良好的责任感与抗压性，快速的学习能力。6、有敏捷项目管理、或PMP等认证者优先考虑；岗位职责：1、项目经理对项目的实施和管理，制定项目实施项目计划并跟踪执行；2、管理客户各种问题和需求，维护和客户的良好关系，持续发展业务；3、协调公司内的开发人员的工作安排；4、对已上线产品的进行维护，对需求变更进行开发；5、完成需求文档、实施文档、培训文档、验收文档等项目文档编写；", "management/03-前端人员面试题.md": "前言只看问题点这里markyun.github.io/2015/FrontendDeveloperQuestions/\"Questions\"看全部问题和答案点这里github.com/markyun/Myblog/tree/master/FrontendDeveloperQuestions/QuestionsandAnswers\"QuestionsandAnswers\"**前端开发所需掌握知识点概要：**HTML&CSS：对Web标准的理解（结构、表现、行为）、浏览器内核、渲染原理、依赖管理、兼容性、CSS语法、层次关系，常用属性、布局、选择器、权重、盒模型、Hack、CSS预处理器、CSS3、Flexbox、CSSModules、Documentflow、BFC、HTML5（离线&存储、Histoy,多媒体、WebGL\\SVG\\Canvas）；JavaScript：数据类型、运算、对象、Function、继承、闭包、作用域、事件、Prototype、RegExp、JSON、Ajax、DOM、BOM、内存泄漏、跨域、异步请求、模板引擎、模块化、Flux、同构、算法、ECMAScript6、Nodejs、HTTP、其他：主流MVVM框架React\\Vue\\Angular、HybridApp\\ReactNative\\Weex、TypeScript、RESTFul、WEB安全、前端工程化、依赖管理、性能优化、重构、团队协作、可维护、易用性、SEO、UED、前端技术选型、快速学习能力等；HTMLHTML行内元素有哪些？块级元素有哪些？空void元素有那些？```首先：CSS规范规定，每个元素都有display属性，确定该元素的类型，每个元素都有默认的display值，如div的display默认值为“block”，则为“块级”元素；span默认display属性值为“inline”，是“行内”元素。（1）行内元素有：abspanimginputselectstrong（强调的语气）（2）块级元素有：divulollidldtddh1h2h3h4…p（3）常见的空元素：<br><hr><img><input><link><meta>鲜为人知的是：<area><base><col><command><embed><keygen><param><source><track><wbr>```html5有哪些新特性、移除了那些元素？如何处理HTML5新标签的浏览器兼容问题？如何区分HTML和HTML5？```1HTML5现在已经不是SGML的子集，主要是关于图像，位置，存储，多任务等功能的增加。绘画canvas;用于媒介回放的video和audio元素;本地离线存储localStorage长期存储数据，浏览器关闭后数据不丢失;sessionStorage的数据在浏览器关闭后自动删除;语意化更好的内容元素，比如article、footer、header、nav、section;表单控件，calendar、date、time、email、url、search;新的技术webworker,websocket,Geolocation;移除的元素：纯表现的元素：basefont，big，center，font,s，strike，tt，u;对可用性产生负面影响的元素：frame，frameset，noframes；2支持HTML5新标签：IE8/IE7/IE6支持通过document.createElement方法产生的标签，可以利用这一特性让这些浏览器支持HTML5新标签，浏览器支持新标签后，还需要添加标签默认的样式。当然也可以直接使用成熟的框架、比如html5shim;<!ifltIE9><script>src=\"html5shim.googlecode.com/svn/trunk/html5.js\"</script><!endif>3如何区分HTML5：DOCTYPE声明\\新增的结构元素\\功能元素```HTML5的离线储存工作原理？```在用户没有与因特网连接时，可以正常访问站点或应用，在用户与因特网连接时，更新用户机器上的缓存文件。原理：HTML5的离线存储是基于一个新建的.appcache文件的缓存机制不是存储技术，通过这个文件上的解析清单离线存储资源，这些资源就会像cookie一样被存储了下来。之后当网络在处于离线状态下时，浏览器会通过被离线存储的数据进行页面展示。在线的情况下，浏览器发现html头部有manifest属性，它会请求manifest文件，如果是第一次访问app，那么浏览器就会根据manifest文件的内容下载相应的资源并且进行离线存储。如果已经访问过app并且资源已经离线存储了，那么浏览器就会使用离线的资源加载页面，然后浏览器会对比新的manifest文件与旧的manifest文件，如果文件没有发生改变，就不做任何操作，如果文件改变了，那么就会重新下载文件中的资源并进行离线存储。离线的情况下，浏览器就直接使用离线存储的资源。```详细的使用请参考：HTML5离线缓存manifest简介yanhaijing.com/html/2014/12/28/html5manifest/有趣的HTML5：离线存储segmentfault.com/a/1190000000732617请描述一下cookies，sessionStorage和localStorage的区别？```cookie是网站为了标示用户身份而储存在用户本地终端（ClientSide）上的数据（通常经过加密）。cookie数据始终在同源的http请求中携带（即使不需要），记会在浏览器和服务器间来回传递。sessionStorage和localStorage不会自动把数据发给服务器，仅在本地保存。存储大小：cookie数据大小不能超过4k。sessionStorage和localStorage虽然也有存储大小的限制，但比cookie大得多，可以达到5M或更大。有期时间：localStorage存储持久数据，浏览器关闭后数据不丢失除非主动删除数据；sessionStorage数据在当前浏览器窗口关闭后自动删除。cookie设置的cookie过期时间之前一直有效，即使窗口或浏览器关闭```如何在页面上实现一个圆形的可点击区域？```1、map+area或者svg2、borderradius3、纯js实现需要求一个点在不在圆上简单算法、获取鼠标坐标等等```CSSCSS选择符有哪些？哪些属性可以继承？```1.id选择器（myid）2.类选择器（.myclassname）3.标签选择器（div,h1,p）4.相邻选择器（h1+p）5.子选择器（ul>li）6.后代选择器（lia）7.通配符选择器（*）8.属性选择器（arel=\"external\"）9.伪类选择器（a:hover,li:nthchild）*可继承的样式：fontsizefontfamilycolor,ULLIDLDDDT;*不可继承的样式：borderpaddingmarginwidthheight;```margin和padding有什么区别，分别适合什么场景使用？```margin是用来隔开元素与元素的间距；padding是用来隔开元素与内容的间隔。margin用于布局分开元素使元素与元素互不相干；padding用于元素与内容之间的间隔，让内容（文字）与（包裹）元素之间有一段```CSS优先级算法如何计算？```*优先级就近原则，同权重情况下样式定义最近者为准;*载入样式以最后载入的定位为准;优先级为:同权重:内联样式表（标签内部）>嵌入样式表（当前文件中）>外部样式表（外部文件中）。!important>id>class>tagimportant比内联优先级高```如何居中div？分别写出水平居中、让绝对定位的div居中、水平垂直居中。```css水平居中div{width:200px;margin:0auto;}让绝对定位的div居中div{position:absolute;width:300px;height:300px;margin:auto;top:0;left:0;bottom:0;right:0;backgroundcolor:pink;/*方便看效果*/}水平垂直居中div{position:relative;/*相对定位或绝对定位均可*/width:500px;height:300px;top:50%;left:50%;margin:150px00250px;/*外边距为自身宽高的一半*/backgroundcolor:pink;/*方便看效果*/}```JavaScriptJavaScript有几种类型？请画出它们的堆栈图，并说明堆和栈的区别。```栈：原始数据类型（Undefined，Null，Boolean，Number、String）堆：引用数据类型（对象、数组和函数）两种类型的区别是：存储位置不同；原始数据类型直接存储在栈stack中的简单数据段，占据空间小、大小固定，属于被频繁使用数据，所以放入栈中存储；引用数据类型存储在堆heap中的对象,占据空间大、大小不固定。如果存储在栈中，将会影响程序运行的性能；引用数据类型在栈中存储了指针，该指针指向堆中该实体的起始地址。当解释器寻找引用值时，会首先检索其在栈中的地址，取得地址后从堆中获得实体```如何解决跨域问题?请尽可能多列出解决方案。```jsonp、iframe、window.name、window.postMessage、服务器上设置代理页面```请编写两个jQuery的扩展将数组转化为json字符串，然后再转化回来？```js$.fn.stringifyArray=functionarray{returnJSON.stringifyarray}$.fn.parseArray=functionarray{returnJSON.parsearray}然后调用：$\"\".stringifyArrayarray```介绍一下你对浏览器内核的理解？```主要分成两部分：渲染引擎layoutengineer或RenderingEngine和JS引擎。渲染引擎：负责取得网页的内容（HTML、XML、图像等等）、整理讯息（例如加入CSS等），以及计算网页的显示方式，然后会输出至显示器或打印机。浏览器的内核的不同对于网页的语法解释会有不同，所以渲染的效果也不相同。所有网页浏览器、电子邮件客户端以及其它需要编辑、显示网络内容的应用程序都需要内核。JS引擎则：解析和执行javascript来实现网页的动态效果。最开始渲染引擎和JS引擎并没有区分的很明确，后来JS引擎越来越独立，内核就倾向于只指渲染引擎。```VUEvif和vshow有什么区别？```vshow仅仅控制元素的显示方式，将display属性在block和none来回切换；而vif会控制这个DOM节点的存在与否。当我们需要经常切换某个元素的显示/隐藏时，使用vshow会更加节省性能上的开销；当只需要一次显示或隐藏时，使用vif更加合理。```Vue中如何监控某个属性值的变化？比如监控data中，obj.a的变化。```jswatch:{obj:{handlernewValue,oldValue{console.log'objchanged'},deep:true}}//deep属性表示深层遍历，但是这么写会监控obj的所有属性变化，并不是我们想要的效果，所以做点修改：watch:{'obj.a':{handlernewName,oldName{console.log'obj.achanged'}}}//还有一种方法，可以通过computed来实现，只需要：computed:{a1{returnthis.obj.a}}```请列出一些你经常访问的学习网站", "management/03-面试素质考查点.md": "TOC非技术考查参考：HR常问面试问题及考察点m.138job.com/Info/1107681、考察口头表达能力`注意应聘者的语言逻辑性、用语修辞度、口头禅、语言波幅等。`1.请您先用35分钟介绍一下自己。2.请介绍一下你上一份工作的主要工作内容。3.请介绍一下你最近的一个项目情况（项目是干什么的、清晰的项目内容结构）？2、考察灵活应变能力`这涉及到应聘者的工作态度与价值观。`1.您为何要离开目前服务的这家公司？这些离职原因你和你的主管沟通过吗？（待遇、成长空间、人际氛围等）2.您在选择工作中更看重的是什么？（成长空间、培训机会、发挥平台、薪酬等）3.你觉得你上一份工作，有哪些方面做得好？有哪些方面做得不足？是否有改善措施？3、考察兴趣爱好`这关系到应聘者的知识广博度和学习能力。`1.你觉得你在技术上有哪些需要补足的？最近你有没有很想去学习的技术或知识？为什么想学这些？2.您工作之余有哪些兴趣爱好？兴趣中有没有比较擅长的？4、考察情绪控制力`招聘时，应该尽量了解应聘者对压力的承受能力。`1.假如您的上司是一个严厉、手腕强硬，给您巨大压力的人，您觉得这种领导方式对您有何利、弊？2.您被布置了一项以前从未触及过的、或者非常困难的任务，你怎么处理？5、考察上进心与自信心1.说说您未来35年的职业规划。2.你最近在学习什么技术？为什么去学习此技术？你是怎么学习的。6、考察责任感与归属意识1.你上一家公司有什么你比较喜欢？有什么你比较反感？你跟这个公司的同事还有联系吗？2.假如你所在的项目组，你发现一个没人管的严重风险，如果你会怎么做？7、考察计划与控制能力1.你平常是凭着一股冲劲做事，还是按计划做事？说说你的怎样做工作计划的？2.假如你给别人布置一个任务，你觉得要给他说清哪些内容？（任务细节、完成时间、完成标准）Java考察点一般开发人员面试时，需要考察三个基本方面：java、db、spring。高层次人员在次基础上，增加一些随机即时性问题。JavaStringBuilderVS字符串相加如何在循环遍历过程中，删除list中一个元素？涉及到钱数时，为什么不能用float或double？应该用什么类型？ArrayList与数组的差异？ArrayList的add怎么实现？equals、hashCode相关的问题HashMap的实现原理DB介绍一下左右链接、内外链接数据库的四种隔离级别？脏读怎么产生的？Spring你知道的Spring注解有哪些？怎样注入一个成员变量？如何在Springbean实例化后运行一段代码？Spring的事务机制如何实现的？事务传播机制有几种？", "management/[SkillsMap]-管理.md": "SkillsMap管理【书籍】团队管理方法论《给你一个团队你能怎么管》读后总结zhuanlan.zhihu.com/p/99802197【书籍】《硝烟中的Scrum和XP》读书笔记www.jianshu.com/p/2bd253912065【书籍】《一分钟经理人》读书笔记zhuanlan.zhihu.com/p/333485105", "management/秦仓面试总结.md": "主要技术问题jvm参数配置hashmap实现原理线程池缺点rpc框架实现原理微服务内存回收数据库隔离级别kafka的原理我的思考这份工作虽然薪水比我现在高很多，但是我不准备跳。原因有：这次面试的确没有准备，不是最佳状态，需要搞清楚上面的技术问题，就这样状态都能达到40w，提升自己才有更好结果。这次是一个试水，看看自己离互联网公司的架构大拿有多少差距，以后没隔一段时间要去互联网公司面试，称称自己。**架构能做到50岁吗？以后怎样转管理？是否还有人要我这种技术人员，后路在何方？**（必须在3年内达到架构顶点，再看看接下来的路怎么走）最近也有一些创业机会，我这边也想尝试一下，即使不成功，也要从现在开始准备创业需要的技术。我的目标我3年内的目标有以下几个：**技术加深，关注高薪职位**。3年内达到架构大牛的级别（站在高处看看43岁以后的路怎么走）**积累部件，关注创业机会**。准备创业需要的技术、行业知识、人脉学习财务、理财知识，以后即便不做软件也要能财务自由", "product/6C检测监测.md": "系统角色车间计划执行及缺陷处置员检测计划执行、缺陷整改反馈缺陷分析员数据处理适配器、缺陷识别缺陷审核员缺陷整改延期审批、缺陷销号方案编制及处置结果核实员缺陷整改方案、缺陷整改核实查询统计员查询与统计、设备查询统计数据综合分析员数据综合分析基础信息管理员设备信息管理系统管理员系统管理供电段计划编制员检测计划编制计划审核员检测计划签收计划执行及缺陷处置员检测计划执行、缺陷整改反馈缺陷分析员Ftp上传客户端、数据处理适配器、缺陷识别、超限实时报警、缺陷审核员缺陷整改通知、缺陷整改延期审批、缺陷销号方案编制及处置结果核实员缺陷整改方案、缺陷整改核实查询统计员查询与统计、设备查询统计数据综合分析员数据综合分析基础信息管理员设备信息管理系统管理员系统管理铁路局级系统计划编制员转发1C检测计划、4C检测计划管理查询统计员查询与统计、设备查询统计数据综合分析员数据综合分析系统管理员系统管理总公司级系统计划编制员1C检测计划查询统计员查询与统计、设备查询统计数据综合分析员数据综合分析系统管理员系统管理", "product/ERP集团管理套件.md": "!_v_images/20191120204933.png", "product/GM系统集成资质申报.md": "高铁供电智慧运营管理云平台研发背景2014年广州、昆明等供电段提出建设统合段内众多部门综合信息化解决方案的要求，同时铁总的十三五规划也针对信息的整合提出要求。而现实的行业现状是快速扩充运输能力需要安全保障，如何保证如此高速、高密度、高复杂性的路网的运输与运营安全变得非常重要；铁路行业装备数量和水平迅速提高使得提高资产的利用率、降本增效势在必行；铁路行业缺乏企业化的运营，如何提高铁路运营效率，挖掘运输潜力，实现现代化的铁路运营管理也是十分急迫。这都反映出铁路供电行业对全行业业务整合的要求日渐强烈，用户对应用系统的业务集成、数据整合、性能等方面要求更高，常规的垂直应用架构已无法应对，分布式服务架构以及流动计算架构势在必行，亟需一个治理系统确保架构有条不紊的演进。简介按照公司领导的要求和设计理念，于2015年研发部开始调研及设计满足行业需求的信息化平台。和公司领导研讨决定，我们要打造“标准化、流程化、协同化、移动化”的综合管理信息平台――“四化平台”，在供电信息化行业形成“二个中心”――数据中心、业务中心。“四化平台”将以平台化建设基础、以流程整合为纽带、以生产运营为核心、以移动应用和门户整合为手段来建设，建立供电行业的数据存储、处理、分析利用的中心和各部门业务整合业务处理中心，改变数据不统一和数据孤岛现状，改变各部门业务孤立，系统众多的现状。主要功能DIP平台是光芒公司对铁路供电业务的深入调研，收集铁路总公司、路局以及供电段的多方需求，为支撑铁路供电业务的持续快速发展，提供一体化、全方位的信息化技术解决方案。DIP平台基于插件思想和SOA思想建设，提供应用集成、统一认证及授权、分布式流程管理器、服务容器、数据交换以及基础应用开发框架中间件等。总体结构如下图：!_v_images/20191120211915.png实现光芒自己的应用开发框架。Framework提供了全栈的开发支持，它包括高效ORM、基于扁平化的UI组件库、Web框架、代码生成工具等。Framework做到了轻量级，便于扩展，简单的编程模型，便于使用。ORM提供了一个通用的Dao层，简化数据库访问操作，使得业务代码编写集中在Service层，简化了编程模型。扁平化的UI组件库采用的是流行的扁平化的风格，方便使用，提高开发效率，提供了漂亮的界面设计。代码生成工具提供了生成单表的CRUD的代码，减少部分编码工作。实现基于插件思想的应用集成容器。插件容器是用于集成其他应用子系统和第三方系统。对应用插件子系统的集成提供完整的集成机制，同时应用插件子系统需要遵循插件容器的接入准则和规范，插件容器应用子系统提供统一认证及授权服务、分布式的流程管理支持、统一的门户界面集成等。基于插件思想的插件容器有以下优势：第一、将复杂的大系统切分成独立的插件子系统，独立开发、独立部署，降低复杂度，提高访问性能。第二、是各个子系统关注业务本身，而不用关注权限控制、流程管理、门户主界面等功能。插件的架构图如下：!_v_images/20191120211938.png实现了统一认证及授权。统一认证与授权为各个基于平台的子系统提供人员、组织、功能权限与数据权限管理，各子系统功能基于无状态来实现。它减轻了开发人员开发项目的工作量及时间，并且保证了权限系统的一致性，为供电段众多分散的子系统整合提供了整合基础。其架构图如下：!_v_images/20191120211952.png实现了分布式流程管理器。分布式流程管理器提供独立于应用的流程管理，它以服务的方式提供流程引擎的功能，可分布式部署，应用系统采用服务调用的方式管理流程。我们还开发了轻量级的流程设计器，支持常用浏览器,支持常用的流程控制节点，支持自动调用节点等。市面上多是嵌入式的流程引擎，独立的流程引擎只有大公司才有，它为复杂的企业化业务集成提供了整合支持。其架构图如下：!_v_images/20191120212056.png实现了服务容器。服务容器提供服务的注册（自动发现）、服务路由、服务的管理、服务运行监控等功能。服务容器思想来源于SOA架构的企业服务总线（即ESB），但比一般的ESB要轻量很多，它可分布式部署，支持负载均衡，为高并发提高了基础。除此之外，服务容器还提高了方便的分布式调用框架，便于和业务系统集成。服务容器是DIP平台的核心之一，它是SOA思想的体现，它将业务功能服务化，提供了业务功能级别的复用，降低业务系统的复杂度，便于系统的扩展与升级。其架构图如下：!_v_images/20191120212113.png实现了自定义流程中间件。自定义流程中间件提供简单业务流程的审批功能，用户可以根据自己的需要定义审批流程，并可以设置每一步的审批内容，可以提交每一步的审批意见。自定义流程中间件能简化一部分业务功能的开发，提高业务的开发效率。实现了扁平化UI组件库。UI组件库采用扁平化的设计规范，UI的组件外观设计非常清新和漂亮，兼顾组件的易用性，提供了界面上要用到的几乎所有组件。采用此UI组件库能非常容易的开发出精美的页面，且易于学习，极大的提高了页面的开发效率。实现了智能表单。智能表单是通过工具的配置，在不编写代码的情况下，读取数据库表的结构，生成数据库表与实体的映射关系、页面及后台代码，完成单表或多表的简单的操作功能。使用智能表单能极大的提高开发效率，降低开发成本，缩短开发周期，促使软件的尽快交付。实现了API网关。API网关主要用处是将外部请求反向路由到内部具体的服务上，屏蔽后台服务的复杂性，除此之外它还提供了API接口的安全认证和防爬虫、限流和容错功能、接口监控和日志等功能。API网关能为移动APP应用及第三方应用提供接口支持。技术特点平台采用基于SOA体系架构。是为了解决在网络环境下业务集成的需要，通过连接能完成特定任务的独立功能实体实现的一种软件系统架构。SOA是一个组件模型，它将应用程序的不同功能单元（称为服务）通过这些服务之间定义良好的接口和契约联系起来。在本平台中，所有服务单元均遵循SOA设计方法，并通过服务组合完成一个具体的数据同步任务。平台使用简单。平台的开发模型足够简洁，各模块间是松耦合。平台的简单化保证了开发者和使用者在短时间内能够掌握，并且可以灵活扩展，降低调试难度，提供开发速度。此外，平台开发必须使用最常用的技术，各种封装接口必须简洁且丰富，并为封装的接口提供单元测试，使用者可以参照使用。平台的组件化设计。平台采用分层设计，各层中的功能设计遵循组件化的原则。保证各功能组件内部高内聚，外部松耦合，明确定义组件内部和外部的依赖关系，明确定义组件之间交互接口。并提供方便的组件组合机制，按需取用，保证各业务组件之间可以自由的组合使用。平台的扩展性。平台应能接入整合其他异构或同构的系统。平台提供统一的认证、功能整合、数据整合的机制，接入既有的系统。基于平台新开发的系统，遵循平台的接口规范，平台可以方便的部署和卸载这些系统。实时数据采集和数据交换中心研发背景简介数据交换平台是一个在异构的系统之间高速交换数据的工具，实现了在任意的内部系统、外部系统之间的数据交换。内部系统之间的数据交换包括：数据库数据交换、缓存数据交换、消息队列的数据交换、RPC服务数据交换已经文件系统文件交换。外部数据交换是通过接口的方式来进行交换，可支持多种数据协议格式。数据交换平台的结构图如下：!_v_images/20191120212151.png主要功能技术特点（1）高度灵活性：灵活的系统架构可以快速有效地响应业务逻辑的变化，操作人员可以通过修改系统配置来满足来自系统内部和外部的需求变化。（2）可维护性：以最小的代价满足业务的变化，系统使用了以下方法：系统基础结构和应用服务的分离；自成体系的独立的业务组件；数据，数据访问对象和业务对象的分离。（3）优化性能：系统设计时，根据各种技术的不同特点进行筛选以提高性能。例如PL/SQL被用来处理高容量的批处理工作，使用当代主流软/硬件技术如集群和负载平衡来确保稳定性。（4）系统安全性：针对各环节，采取必要的权限和内控机制，防范安全漏洞。统计分析的各项数据信息的准确性、安全性要求很高。为了保证系统的安全可靠，整个系统采用各种软硬件技术将系统核心的信息与用户操作界面进行有机的隔离和授权访问，达到有权者畅通无阻、无权者寸步难行的效果。（5）数据的准确性：监控系统内数据流，保证数据在各环节的一致。保证系统数据的准确性，一方面，在数据库设计层面，我们考虑使用数据的约束控制，如主、外键，另外，在数据之间的关系层面上，我们提供了必要的检测程序，再者，在流程实现层面，保证事务的一致性，即只有整个事务全面成功后才能提交整个事务等等。1、SOA：面向服务的体系结构（ServiceOrientedArchitecture，SOA）是为了解决在Internet环境下业务集成的需要，通过连接能完成特定任务的独立功能实体实现的一种软件系统架构。SOA是一个组件模型，它将应用程序的不同功能单元（称为服务）通过这些服务之间定义良好的接口和契约联系起来。在本平台中，所有服务单元均遵循SOA设计方法，并通过服务组合完成一个具体的数据同步任务。2、支持同构和异构数据交换：平台允许数据交换的双方是异构和同构的。所谓同构是指源和目标系统之间是完全相同的，数据库表结构也是相同的；若为异构是指源和目标系统之间存在一定的差异性，数据库表结构也可能是不相同。3、支持全量同步：平台能实现针对数据源的全量同步，将源系统指定表中的数据一次性全部同步到目标系统；4、支持增量同步：平台会将源系统指定数据库表中所增加的数据，按照一定时间规则逐次同步到目标业务系统；5、支持复制方式同步：平台支持将源系统中的数据以全量或者增量的方式复制到目标业务系统，源系统中的数据保持不变；6、支持迁移方式同步：平台支持将源系统中的数据以全量或者增量的方式迁移到目标业务系统，但迁移成功后，源系统中的相应数据会被全部删除。这点是迁移方式和复制方式同步所存在的最根本性区别；7、同步报文规范：将同步业务功能统一制定成标准XML业务规范。规范主要由元数据和业务报文等两方面组成。元数据称为数据单元，是通过定义、标识、表示以及允许值等一系列属性描述的数据单元，在特定的语义环境中被认为是不可再分的最小数据单元。业务报文则是根据具体同步业务需求对数据元进行有机组合，从而形成一个具有特定业务含义的集合。8、内容过滤：本平台支持对交换的数据进行内容过滤，确保只有满足一定条件的数据才能够成功同步到目标系统。9、格式转换：当源和目标系统的数据库结构存在差异时，系统提供的格式转换功能会对表字段和内容进行转换。10、支持多种数据库：本平台目前主要支持主流的几种数据库，如Oracle、MySql、SqlServer等，其他数据库正在测试中；11、支持大字段类型交换：本平台支持对大字段型的数据表进行同步，如blob、clob等类型。12、同步交易记录：对平台处理的同步交易进行记录。平台将记录交易的处理时间、处理状态、报文内容等信息，为交易跟踪和分析统计提供数据依据；13、支持国际化：本平台支持语言国际化，目前已经有中文和英文两个版本；数据中心应用模式满足纵向和横向各部门之间的不同管理关系需求，支持集中和分级管理模式，实现“一个平台管理服务中心、多领域业务中心、部门节点”三层管理结构应用需求。平台提供多种部门节点数据和应用接入方式，即可采用前置机接入方式，亦可采用应用直接接入方式。平台提供一体化的应用桥接功能，无需单独部署部门独立的“桥接系统”，大大降低应用系统接入平台“最后一公里”的难度和成本。高灵活性和扩展性。平台采用了面向服务的架构SOA服务技术，由松藕合、图形化可配置的接口和数据处理服务组件构成的交换服务流程可灵活动态地改变，并适应节点应用系统不断升级改造和数据结构常变化的现实需求。支持多种数据传输方式（包括TCP、Http、MQ等），并结合不同传输方式的特点，充分利用不通传输方式的优势，提供可靠、健壮的传输实现。安全可靠的数据交换服务。平台提供安全可靠的数据传输能力，保证数据的完整性、一致性，使传输的数据不丢失、不重复，次序不乱，传且只传一次，并具备跨越多个网络环境，穿透多重防火墙的能力；除了采用一般的数据加密传输技术外，并采用SSL/TLS协议实现安全连接与传输，可与第三方认证授信机构进行数字证书的签发。数据交换平台功能结构图如下：!_v_images/20191120212220.png数据采集平台。数据采集平台作为数据中心信息来源，主要任务是对来自不同部门，不同类型的数据进行收集。数据采集平台提供统一的数据采集方式，方便不后台数据集成、数据存储平台信息通信。可以定义标准的数据采集模板，支持随时随地采集（在线、离线），支持标准的采集数据存储方式。在这种架构下，可以直接调用数据库接口倒入数据，也可以通过调用WebService向数据集成平台发请求。数据交换中心。数据交换中心实现数据中心的数据采集与分发，提供对被交换信息进行打包、解包、过滤、审核、装载入库等数据交换服务接口。一方面它负责从各分系统中提取采集来的数据，将其导入到数据中心中；另一方面，它负责将数据中心共享库中的数据根据分系统的需要，分发到它们的系统数据库中。数据交换中心实现了数据中心平台不各业务系统之间的数据交换、各业务部门各业务系统之间的统一信息交换，为各部门协同工作、协同办公、各种业务系统之间的业务整合提供支撑平台。数据交换中心在交换平台中，起到数据统一交换的作用：各应用发送到中心的数据，由交换中心根据预先配置的交换规则交换到目标系统中，传输内容可精确定制，包括全表和增量数据。数据交换适配器。数据交换适配器通过系统管理、数据压缩、加密、数据交换、路由解析、断点续传等技术保证各系统之间安全、准确的数据交换。一方面，数据交换适配器将采集中的数据提交给数据中心；另一方面，各业务系统通过它接收从数据中心分发过来的数据，进行转换，并存入相应的共享库中。适配器工作在应用系统端，负责该系统与其他应用系统的数据交换，支持实时、定时、状态触发等各种数据采集方式；支持多种数据源的数据采集，包括Oracle、DB2、SQLServer、Dbf、Access、Excel、TXT、XML、大对象数据、文件等多种形式，可定制开发特殊数据源。统一配置管理。统一配置管理包括交换基础信息配置和交换业务配置。交换基础信息配置是指交换节点、交换通道及网络拓扑配置。交换业务配置指所有的交换业务、交换规则、交换路径都在这里进行配置及管理。统一配置实现图形化的配置管理，实现交换流程设计，简捷的鼠标拖拽操作方式，交换流程的设计支持一对一、一对多、多对一、多对多等多种数据交换方式。统一监控管理。统一监控管理包括交换环境监控和交换业务数据监控。交换环境的监控主要是指各个交换节点以及整个交换网络的监控，通过之前在配置管理中配置好的一个交换网络拓扑图可以很清晰的监控到整个交换网络及网络中各交换节点的状态是否正常；当发现交换节点有异常的显示后，可以查看此交换节点详细的监控，包括交换服务器资源占用情况、交换服务器上各交换流程的运行情况等信息。交换业务数据监控指在数据交换中，用户最关心的是数据是否正确、完整的交换到指定的目的地，现有数据平台从多个角度去完成了数据交换的监控及告警。安全保障。在与业务无关的通讯中间件基础上，数据传输支持常用的多种加密技术，保证数据传输过程的安全，在数据传输过程中，提供数据缓冲和发送校验等多种技术保障，保证数据传输完整性。交大光芒GMPMOS铁路供电维修与运营管理系统软件基础业务软件平台：是以业务为导向和驱动的、可快速构建应用软件的软件平台。包括集成应用平台、开发体系。编写要点：侧重业务和应用功能，体现开发模式，强调在此之上可快速构建何类子系统或子功能等。内容还可细化：如数据库支持何种数据库，操作系统兼容何种操作系统，数据总线采用何种协议等。简介GMRPSMOS铁路供电维修与运营管理系统是针对铁路供电设备（尤其是接触网相关设备）的维修及运营而建立的资产管理与作业管理相结合的综合管理信息化系统，对铁路供电设备（尤其是接触网相关设备）进行全生命周期的资产设备管理，对铁路供电运营维修/检修作业进行通过作业计划系统进行合理有效调控；功能概述（参考【铁一院《铁路供电运营维护管理信息化方案研究报告20160307a》】）设备建模管理设备建模管理是整个设备管理的核心功能，利用设备实施源头的设计信息、厂家信息及采集信息，通过对所有供电专业设备及零部件的数据信息模型构建，能够非常方便的进行设备的动态及静态信息管理，从而实现对设备及零部件的全生命周期进行跟踪和维护，形成生态发展模式，推动设备管理由定期管理向寿命管理的转变。设备管理设备管理是针对接触网、变电及电力等专业中涉及到的公用性质数据信息的管理和维护，包括对铁路线别、站场区间、牵引变电所、电力变配电所、接触网、电力线路等信息。基础数据作为设备管理的基石，是构建完整设备数据信息不可分割的重要组成部分，也是实现设备级运行、检修、跟踪和维护的基础。计划管理计划管理是对接触网、变电及电力等专业设备在运行、检测及检修等活动时需要编制的计划信息进行维护管理，包括年、月、周、日及临时计划等。通过将相关的设备信息编入计划中，实现设备级的计划管理模式，从而帮助用户真正合理地制定出符合铁路供电信息化修程修制的设备管理模式，避免漏检漏修等问题的出现。作业管理作业管理包括日常巡视、工作票、检测检修过程等信息的管理，是整个检测检修过程的记录和维护。作业管理涉及到整个作业过程信息的收集和维护管理，包括作业前的出工准备、材料及工具准备、人员准备、作业过程安全卡控、作业完成及收工等信息。根据计划进行作业派工，包括工作票的填写、上报、审核，以及派工单、作业过程的登记、审核等操作，可以自动更新设备的状态，导出作业票、派工单等数据。设备缺陷管理对来自日常巡视、作业过程中发现的电化缺陷信息进行管理，缺陷来源多种多样，如：SCADA、6C等。作业规范管理作业规范是指在作业执行前和执行中的相关信息的配置，包括作业检测项、作业工具、作业材料，以及执行过程中的安全措施和规范信息等。知识库管理知识库中包括各种规章制度以及颁布的规范，还有所辖地区的文档设计资料和运维过程中记录和生成的经验案例。技术特点设备模型化抽象设备信息、建立设备全生命周期模型，将设备模型信息接入设备运营维护管理之中，形成从项目设计阶段到施工阶段直至运营维护管理阶段全过程的具有“一模多用”的全生命周期特性的设备信息库。设备建模技术有助于运维管理的设备信息编码统一，减少后期信息重复录入，提高信息精准度；有助于设计、施工和运维之间的信息互联互通，有助于运维单位在管理过程中全面、快捷地掌握设计及施工信息，减少故障分析所消耗的时间，提高运维管理水平；有助于运维管理指导设计、施工，实现工程预介入，减少运维成本，提高运维协作能力。功能模块化模块化设计需要模块本身具有通用性，且模块之间相对独立、并通过接口进行交互。本系统中各个模块的设计充分考虑了通用性，可以根据不同的业务需求选用不同的模块；而各模块又是非常独立的，所以方便了各个功能模块的开发与调试。模块化优点有：第一、模块的通用性使得模块可以更广泛的复用，大量利用已有的经过测试和使用的模块，可以降低产品研发的风险，提高产品的可靠性和质量；第二、使用经过实践验证的模块可以大大缩短研发周期，从而加快产品研发进度；第三、采用成熟的经过验证的模块，可以大大降低研发成本；第四、相对独立的模块划分，有利于企业研发团队分工，规范不同团队间的信息接口，进行更为深入的专业化研究和不同模块系统的并行开发。流程可定制在对各个供电段业务流程进行梳理后，我们形成一套相对标准的工作流程，并采用专业的流程引擎来管理流程，使得业务流程可以定制化。流程定制化兼顾各个供电段业务流程的差异性，能在较短的时间内通过流程的配置完成业务流程开发。通过在作业过程中引入智能终端和相关专业App的使用，帮助作业人员提高作业效率和规范作业过程，并为监控人员提供实时的作业信息和事后作业过程的回溯，从而为不断优化作业执行过程及效率提供了基础数据信息，实现作业流程可追溯，运维闭环管理。GIS可视化展示通过GIS地理信息系统实现对铁路沿线供电设备及周边地理信息的有效掌握，结合“一杆一档”、“一台一档”、设计图纸信息、设备信息、设备缺陷、天窗信息和巡检记录等数据库，在卫星地图中实现设备精准定位、联动设备基础信息，并可对巡检过程中的路线记录和设备遗漏进行集中反映。移动化办公支持提供对移动App支持，有以下优点：1）无论是车间或工区，不再需要电脑才能办公作业，只需通过移动App就可以完成作业工作。2）无论工作人员在哪儿，都可以及时处理自己相关的工作，可以提高工作的效率。3）加强了远程协作，通过移动App在远程提供业务支持。4）可以很方便对一些突发性事件的处理、应急性事件的部署。图形化展示本系统采用可视化技术，利用计算机图形学和图像处理技术,将将海量数据信息以直观、生动、高效地展示给相关操作使用人员的相关实现数据转换为图形或图像在屏幕上显示出来,并进行交互处理。多种数据库、多种操作系统支持本系统采用业界流程的开发技术，保证了系统对多种数据库（如：Oracle、SQLServer等）的支持，可以在各种不同的数据源之间平滑切换；同时系统基于Java技术体系，可以在各种流行的操作系统上运行，兼顾运行环境的多样性。架构!_v_images/20191120212323.png本系统架构如上图所示，系统建立在光芒公司信息化基础平台之上，提供多种操作系统、多种数据库的支持；系统充分考虑基础组件的通用性，将流程配置、设备建模、图形化展示、GIS可视化作为独立于业务的基础组件来构建，并在此基础上，建立整个系统的业务框架，并将各个业务模块建立在此业务框架之上，确保了核心业务模块的建设遵循模块化的原则。系统的核心业务有：计划管理、作业管理、缺陷管理、设备管理、设备履历管理、台帐管理、知识库、作业规范管理、查询统计等。系统提供两种用户界面：传统Web方式和移动App的方式。", "product/中科软应急指挥系统解决方案.md": "一、概述中科软应急指挥系统解决方案是一个充分利用现代网络技术、计算机技术和多媒体技术，以**资源数据库、方法库和知识库为基础，以地理信息系统、数据分析系统、信息表示系统**为手段，实现对**突发事件数据的收集、分析、对应急指挥的辅助决策、对应急资源的组织、协调和管理控制**等指挥功能。该系统在面对突发事件时，能够为指挥首长和参与指挥的业务人员和专家，提供各种通讯和信息服务，提供决策依据和分析手段以及指挥命令实施部署和监督方法，能及时、有效地调集各种资源，实施灾情控制和医疗救治工作，减轻突发事件对居民健康和生命安全造成威胁，用最有效的控制手段和小的资源投入，将损失控制在最小范围内。!_v_images/20191120213013.png**方案实现目标**在数据采集和信息处理方面，实现突发事件信息的采集、传输、存储、处理、分析、预案确定及启动全过程的信息化、自动化和网络化。在预警方面，建立分布式可逐级监测和处理突发事件信息管理网络，实现对突发事件的评估与预警触发启动；在会商方面，利用视频接收设备、通讯系统、数据库系统、地理信息系统等设施，为指挥首长、业务人员和专家提供大屏幕显示和信息服务，随时为首长决策提供各种有效而生动的辅助决策信息；在决策支持方面，形成一套具有实时监测、科学预测、及时有效发布和动态反馈评估等功能的辅助决策系统，实现对突发事件应急处理的决策支持。在资源调度方面，通过系统对应急资源的科学调度，充分保证对特定突发事件应急处理所需资源的配置。在公众信息发布方面，能及时向社会公众发布紧急救助信息服务和善后处理工作信息。**方案特色**中科软在监测、预警和应急领域提供“监测、预警、应急”一体化的应急决策指挥解决方案，实现系统“平战结合”的建设思想。基于我们丰富的监测系统设计经验，我们提供一套快速的监测系统开发和部署框架；以多样化、可扩展的可靠信息渠道解决应急指挥中必须的信息来源问题；基于数据仓库和数据挖掘技术，提供多类行业的数据分析和预警模型，实现监测与预警联动；融合门户技术和关键指标仪表盘设计技术，结合系统中丰富的系统分析模块，实现各种业务数据的显示界面集成，便于决策者快速、直观地了解信息、把握全局；以业界主流和开放的技术标准和设计模式，提供开放的、平台级的应用编程接口和管理工具，既满足各级政府部门快速拓展和实施系统，又便于保护投资，使系统长期健康发展。二、总体框架应急决策指挥系统涉及领域广，技术层次深，系统的构架也是比较复杂，总体来讲，其框架图如下：!_v_images/20191120213026.png根据北京市《应急指挥系统信息化技术支撑体系》，北京市的应急系统能够体系结构细化为下图：!_v_images/20191120213041.png中科软依据据北京市的总体框架，结合中科软多年应急系统的经验，进一步细化应用框架到可实施框架，从下向上依次是**基础设施层、数据中心层、资源整合层、应用支撑层、应用层、综合门户**，并有安全保障体系和运行维护与支持体系保障系统的正常运行。如下图所示：!_v_images/20191120213052.png基础设施层：整个系统的底层是信息系统的基础设施，这包括网络及通讯设施、主机服务器及存储系统、视频会议系统、大屏幕数据演示系统，以及操作系统、数据库管理系统及网络通讯基础设施等，这些是系统最基本的运行基础。数据中心：数据是整个系统的基础，基础数据经过采集、处理、标准化、传输、存储，形成系统资源库，为系统提供了高效的业务分析、决策、交换、共享的数据环境。主要包括以下数据库：模型数据库知识数据库方法数据库预案数据库人口基础数据库灾情数据库地理信息空间数据库基础字典数据库资源数据库资源整合层：应急指挥需要多部门、多系统联动配合，如果彼此孤立，不能实现信息共享，就会形成的“信息孤岛”。造成缺乏可比数据、缺乏分析、缺乏管理。难以获得全面的业务信息，就会影响业务和决策的效率和准确性。通过提供应用整合服务、业务整合服务、数据整合服务连接相关职能部门的系统、业务、数据，最大程度的解决信息孤岛，最大限度地利用现有的数据资源。应用支撑层：应用支撑层的设计直接影响系统的稳定性、安全性及可靠性等重要因素，中科软凭借多年的软件开发经验，采用低耦合，高内聚的设计思想，基于开放的标准在该层部署应用部件，为系统高效、可靠的运行提供保障。包括：决策支持系统业务支持系统GIS引擎工作流引擎全文检索消息中间件信息推送内容管理用户管理权限管理通用数据接口应用层中科软应急决策系统根据突发事件应急的特点，综合各种数据信息及处理软件，缺省提供了辅助会商决策系统、数据收集与管理系统、信息处理与分析系统、资源管理系统、信息发布系统等应用系统，并可根据需要，快速的扩展业务系统。综合门户综合门户系统建立了一个灵活、规范的信息组织管理平台和全网范围的网络协作环境，实现集成的信息采集、内容管理、信息搜索，能够直接组织各类共享信息和内部业务基础信息，面向不同使用对象，通过门户技术实现个性化服务，从而实现初步的信息整合；门户不同的用户提供个性化、服务，实现用户的统一认证、统一管理，提供实时信息访问及多系统协同工作。三、基础平台解决方案应急基础平台是基于先进信息技术、网络技术、GIS技术、通信技术和应急信息资源基础上的，充分利用现有资源，依托政府系统电子政务建设，建立统一应急指挥网络平台，实现紧急事件报警的统一接入与交换。根据突发公共事件突发性、区域性、持续性等特点，以及应急组织指挥机构及其职责、工作流程、应急响应、处置步骤、处置方案等应急业务的集成，应急指挥系统基础平台建设主要包括以下几个方面。1.音视频系统；2.会议系统；3.通信系统；4.后勤保障系统!_v_images/20191120213117.png音视频系统：音视频系统贯穿在整个应急指挥中心的日常工作、应急受理、指挥调度、管理系统等等各种活动中，是应急指挥系统最有效的信息获取、协调指挥的手段之一；是应急指挥系统与指挥人员人机交互的最主要的表现形式。包括但不限于下列子系统：音视频整合系统（将各种不同格式的音像信号整合后接入指挥中心）大屏幕显示系统远程视频监控视频点播系统综合指挥席会议系统：会议系统是应急指挥系统对于突发公共事件进行协调处理、信息分析、决策以及指令下达的重要工具，实现各级指挥部门直接交流，成为应急指挥系统最有效的信息获取，协调指挥的手段之一。包括但不限于下列子系统：数字会议系统电话会议系统视频会议系统通信系统通信系统是完成日常应急值守和确保各类突发公共事件处置的重要技术保障平台，是应急指挥系统协调指挥的主要途径。应急指挥中心的通信系统即要覆盖多个下级专项指挥部，同时又要保障与上级应急指挥中心的通信，实现在紧急状况下调度指挥和协调管理。包括但不限于下列子系统：有线通信系统无线通信系统后勤保障系统后勤保障系统的作用是确保应急指挥平台各种设备的可靠运行，确保各种应急数据的传输、存储及灾备，并为指挥中心内部人员提供安全和舒适的工作环境。包括但不限于下列子系统：机房建设（包括机房装修、配电、空调等）综合布线系统计算机网络系统数据存储系统异地灾备系统音、视频存储系统中央控制系统安防系统（含监控和门禁系统）不间断电源系统四、软件解决方案!_v_images/20191120213137.png突发事件监测功能突发公共事件的发生具有分散性、隐蔽性、积聚性和突发性的特点，因此根据这些特点建立了事件监测的机制，能从日常管理的系统数据中、日常管理作业流程中、各种监测数据及其他相关的应用系统通过数据的抽取发现突发公共事件隐患的功能，并利用各种数据挖掘工具，进行突发公共事件信息的挖掘分析，做到突发事件及早发现、消灭，提前预防、及时处理。突发事件预警功能根据坚持预防为主的原则，突发公共事件应急系统需要根据不同专业特点建立各种突发公共事件预测预警模型，日常管理系统不断为模型输入参数，一旦模型计算结果出现异常情况时，系统必须能够通过预先设定的途径进行报警，并自动通过电话、传真、Email、短信等方式提醒突发公共事件相关人员。事件信息上报处理本系统能够根据不同专业的突发事件的管理模式及报告制度，设定该专业的突发事件的报送流程。突发公共事件一旦发生，系统必须能够自动地根据已经配置好的报送流程，根据事件等级的不同，直接报送到不同的直报机构，同时，根据不同的事件等级将信息报送或抄送不同的应急指挥中心。资源管理与调度突发公共事件应急指挥部根据突发公共事件等级和预案对所涉应急资源集中管理和统一调度。由于各个专业应急指挥部涉及的不同专业的应急资源具有不同的调度权限，应急资源的调度指令的下达根据调度权限逐级下达。应急资源的现场调度情况，通过系统直接反馈到应急指挥部，指挥部根据现场情况及时进行预案的调整。并且系统具备应急资源分配功能，能够设置本专业应急资源的空间分布、资源属性以及分配和调度方式。内容管理与信息发布系统能及时向系统内用户发布专业信息，提供专业应急信息的服务功能；并能及时向公众发布事件发展情况、紧急救助信息服务和善后处理工作信息。在目录集成的基础上，实现了综合信息门户与外部网站的集成，能够对访问用户进行统一管理，同时根据安全权限开放信息，提供信息查询与浏览功能。在发布方式上，支持空间信息的Web发布。恢复重建管理灾情信息录入功能除了通过灾情数据采集模块及数据整合模块获得基础数据外，通过该功能能够对灾情信息进行补充（包括文字信息、数据信息、图片信息、录象信息、空间位置信息等），便于系统进行灾情分析，建立重建方案。灾情分布分析功能能够将各种灾情以空间信息为基础进行灾情分布分析，以地理信息系统为依托，显示各类灾情分布图。灾后清理功能辅助管理灾后清理工作，计算清理的工作量，专业人员，所需资源。并能调度各种灾后清理资源。恢复重建模型分析功能能够为不同专业的突发事件建立恢复重建的分析模型，评估模型。利用突发公共事件分析模型，系统对突发公共事件的危害进行分析，为恢复重建提供建设建议方案供选择。通过评估模型对各种重建方案作出评估，以便确定最优的恢复重建方案。平时信息管理系统平时管理功能是为满足应急指挥中心在非应急状态下的日常工作需要而实现的。通过对国内外灾害事件汇总分析、预警准备、突发事件管理、综合查询、预案管理、知识库管理、方法库管理、情报管理、日常办公、外事管理等功能的执行管理，达到预测、预防突发公共事件的目的。模拟培训功能系统应提供仿真演习的功能，能通过仿真演习对应急队伍进行培训和演练。系统能够通过统一的综合门户系统和外网门户，建立各个专业应急教育培训栏目，为应急指挥工作人员加强专业技能培训，广大的民众提供应对突发公共事件的基础知识。通过培训教育，提高工作人员指挥分析能力，提供广大民众应对突发公共事件的应对能力。数据交换与共享交换与共享系统是各类应用系统业务信息统一的数据交换和信息共享的平台，是多个应用系统实现信息整和的重要手段。数据交换系统采用多种模式与现有的系统有机集成，是信息系统统一中最为基础的部分，其建设目标是：提供一个标准的、可靠的数据交换系统，为各个应用系统提供数据交换的公共模块；简化、规范各个应用系统的开发；统一管理数据的流量监控，数据加密压缩处理等，使网络利用更高效；为各个应用系统之间、异构数据库之间、不同的网络系统之间的信息提供整和的手段；为内部系统与外部系统提供统一的、安全的、可靠的连接手段。地理信息（GIS）系统GIS应用划分成基于C/S结构的应用和基于B/S结构的应用两种。前一种结构适用于实现数据的采集、入库、编辑和复杂的空间分析、专题制图等应用，主要是面向数据维护人员和专业分析人员使用的，以及为领导和专家提供辅助决策和分析之用；而后一种结构比较适合于实现简单的地图发布、空间查询等应用，主要面向的是广大的Internet用户。由于这两种结构各有优缺点，而从指挥中心的总体角度来看，两种结构的应用都是不可缺少的。系统的总体结构将是一个同时包含了C/S和B/S两种结构的混合型、综合型结构。系统结构如下：!_v_images/20191120213209.png包括但不限于下列功能：空间数据维护以地理信息空间数据库和数据仓库的方式方便地统一管理地理空间数据和相应的属性数据，并能够对空间数据进行数据转载、转换、存储、更新等操作。GIS制图与输出基于地理信息系统平台，以多种比例的电子地图为基础，各种比例尺空间数据库能够无缝嵌套使用。图素的分专题图绘制图素的分层绘制图例、标注的绘制栅格数据的嵌入地图的硬拷贝输出GIS空间分析根据空间分析作用的数据性质不同，分为：①基于空间图形数据的分析运算；②基于非空间属性的数据运算；③空间和非空间数据的联合运算。解决所涉及到地理空间的实际问题，提取和传输地理空间信息，特别是隐含信息，以辅助决策空间专题分析空间专题分析的目的是解决某类与地理空间有关的问题，涉及多种空间分析操作的组合。空间专题分析的定制空间专题分析的存储空间专题分析的修改空间专题分析的扩展专题分析数据的输入专题分析数据的输出空间查询管理检索某类与地理空间有关的数据。", "product/从技术细节看美团架构.md": "编者按：本文是根据ArchSummit北京2015大会上美团网现任技术委员会主席夏华夏的演讲《从技术细节看美团架构》整理而成。很多人认为，电商都没有什么技术含量，电商没有什么门槛，入门的门槛并不高，电商很痛苦，需要不停地去扫街，不停地去拜访各个商家，要在用户和商家之间拉客接客。国内曾经出现的团购类网站有6400多家，到四年多以后的现在，美团已经是成为国内最大的本地生活服务平台，不管怎么说，现在美团在这些电商，至少团购类的电商里边是走的比较成功的，如果说电商真的是没有门槛，那难道说美团走到现在是因为幸运吗？那必然不是因为运气，如果大家知道王兴，美团的创始人，他在这个行业内有个非常响亮的外号，叫国内史上最倒霉的连环创业者。因为他之前做过像校内网，做过饭否，最后都是因为一些莫名其妙的原因就没有做起来，或者发生了很多问题。但是美团现在他做得非常好，那肯定不是因为运气。其实在我们内部，很多同学也在做思考总结，我们希望找出一些比较好的东西能留下来，然后以后继续保持，在这其中分析来分析去，其中有一部分很重要的原因，就是我们技术团队的努力。今天与大家分享的，就是在技术团队中，不断追求极致努力的一小部分经验。首先第一部分给大家介绍美团的技术架构，架构是如何演变的。第二部分讲一讲美团的业务架构，在业务方面如何做一些业务流程的优化。最后第三部分介绍O2O技术，如何实现线上和线下都用技术来做优化贯通的。第一部分首先讲一讲技术架构，其实在初期的时候，美团的技术架构非常简单，的确在最初2010年、2011年的时候，技术是没有门槛的，任何一个人都可以写一个电商的网站。这就是一个最初期的架构，一个比较典型的LAMP架构，前端加上Apache/PHP，后端是MySQL，当然我们会有一些运维的工作在里面。可能大家如果自己写个网站的话，一开始都是这种架构，这种架构一开始也很好用。然后慢慢的，当业务量大了之后，我们发现整个系统的性能跟不上。那时候我们也只是做一些简单的优化就够了，比如说一开始我们是在前端，就是在Nginx和Apache之间加一些Varnish的缓存，然后在后端，我们可能用Memcached来减少MySQL的压力，这些都是缓存，整个架构还是没有太大的变化，还是一个优化了的LAMP架构。然后到2011年的时候，我们开始做移动端，这时候架构还是没有太大的变化，只不过是在Apache这种已有服务的API前面，又包了一层。就是我们在提供给PC端的同时，我们也包了一层移动的API，这样我们可以继续给手机端的用户提供服务。这个时候其实也就是简单地把LAMP架构做了一点点扩展，但是已经可以支撑很多很多的用户，很多很多的容量了。我们在这种架构的前提下发展，直到我们想去做新的业务。美团一开始起步是个团购公司，后来我们去做一些新的，比如说酒店业务、电影业务，直到现在大家可能使用过的美团外卖的业务。当我们去做很多不同的业务的时候，我们发现做每一个业务似乎需要添加一些新的部分，这样一个部分、一个部分堆积，对很多技术的同学来说，这是不能容忍的，那我们怎么去改进它呢？我们希望把中间的很多的公共的东西，与业务无关的东西抽取出来，形成一些公共的技术的组件，这样可以为很多的不同的业务来使用，发展到现在，形成这样一个看起来稍微复杂的架构。在最底层会有云平台，对内对外都有服务，会有云主机、云存储、虚拟网络，包括一些负载均衡的东西。在云平台上面，我们会有一些基础的组件，这些基础组件跟业务的逻辑相隔比较远，它会有比如配置，队列中心，注册中心，包括一些SQL和NoSQL的存储等等，这些技术组件我们在所有的业务里都会使用，所以我们把它提取出来，作为我们的技术组件提供给业务能用。再往上，确实有一些东西是与业务结合比较多，比如说用户中心、支付、搜索、推荐、风险控制，以及建立用户的一些地理位置的库，这些东西是与业务是有交互的。但是我们去分析之后发现在不同的业务里面，这些组件还是差不多的，所以我们也是把它抽象出来，现在叫业务组件，这些业务组件在所有的业务之间也是共用。再往上才是我们各个不同的业务的，真正的比较独特的一些逻辑。在这些业务逻辑前面，是前端的接入，这个前端接入其实对不同的业务也是一样的，它会有前端的接入和转发，会有前端内容的过滤，就是一些防抓取，防攻击这样的内容过滤。比如说为了做用户访问性能的优化，我们会做大量的各种各样内容的缓存，包括CDN也好，包括我们内部不同层次之间，包括一些验证码的服务。所以在这种架构下面，当我们再要去做一个新的业务的时候，我们就关注在中间业务逻辑这一块就可以了，这样可以很快地去拓展新的业务逻辑，而且每一个人，每一个团队，只关注真正最有价值的那一部分的软件的开发。那当然两边会有我们的，运维的工作，安全的工作，是在每一层都会涉及的。但是整个这样一个逻辑发展到现在，我们是觉得最适合我们美团现在这个阶段的一套技术架构，那从一开始的最简单的LAMP，到现在可能我们分了很多很多个组件、很多很多层，这些架构看起来是非常非常不一样的。但是我们现在回想起来并不觉得说，原来的就不好，现在的就好。我们觉得在公司发展的不同的阶段，一开始就最适合那种最简单的情况，如果说我们一开始，比如说美团2010年成立的时候就上这种很复杂的架构的话，那可能我们2010年底才把软件开发完，那时候上线的时候，可能已经有五千多家团购网站在线上了，所以这是不切实际的。所以整体来说，我们觉得在整个技术架构的演变过程中，就是找当前真正能够满足我们业务需求的。另外一个特点，大家也可以看到，在我们的整个的架构里面，大量应用了一些开源的东西，从最初的LAMP架构的时候，包括MySQL、Apache，到现在我们一些很复杂的架构里面，比如说搜索，现在会用到Lucene，会用到Solr，在云主机、云平台这一块，我们会用到比如说OpenStack的一些个组件，包括比如存储的Swift等等，用到很多的开源的东西。开源产品拿过来当然会加速我们的这种开发的周期，但是开源产品我们也不仅仅是单单把它拿过来，因为任何一个开源的产品，如果你要拿到一个比较复杂的业务里，你就会发现它不是那么匹配的，它总是有些边边角角，比如说要与系统的集成，或者很多开源产品，它在大规模的情况下，高并发的情况下，考虑地并不是那么周到。所以我们在开源的基础上做了大量的优化，一方面能让我们的整个系统能做更好地水平的扩展、系统的扩展、系统的优化，同时也让整个的用户体验能够更好。总结下来，就是在技术架构方面，想跟大家分享这么几点，一个就是整个技术架构总是在不断地结合业务在不断地演化，还有就是至少从美团来说，我们是在开源软件的基础上，然后不断地做集成，不断地做优化，最后，软件开发的时候，不管是在对用户体验来说，还是对工程师自己的体验，我们总是在追求一些极致，这样的情况下，我们的技术架构就自然而然的在不断地演变了。第二部分分享一些业务架构方面，我们做的优化。点击放大图像这个图是一个比较复杂的图，我们也不去讲它的太多的细节，大概分析一下，上面这一块其实是刚才给大家看的，对用户访问端，它所涉及到的一些组件，一些部分。但是对于电商来说，其实它还有一个很复杂的生产系统，这个生产系统就是说我们怎么去跟生产商谈单，谈完之后，我们怎么把这个单子录到线上，怎么去编辑，怎么去审核等等，这个单子的生产我们叫生产系统。除此之外，还有整个公司的运营，一些市场的营销推广，我们怎么去拉动我们新的用户，怎么去拉动我们的新的商家等等，所以就涉及到很多的业务的模块。整个的这个框架，细节我们不关注，但是第一感觉肯定是非常复杂，这个复杂的业务架构有一个什么后果呢？一般来说，它会让整个流程非常复杂，当流程复杂了，那自然而然带来的整个效率低下，所以对于技术团队来说，我们一个努力就是在不断地去优化我们的业务架构，不断地让流程简单，让效率更高，那怎么来优化呢？我们有一些自己总结出来的方法论，就是让复杂的事情简单化。一个很复杂的业务架构，我们希望对它做很多理解和梳理，梳理的过程中，我们就会发现一部分步骤其实是不需要的，可以省略的，这是一种简化；还有一个就是，当我们梳理完了，发现每一个步骤都需要的时候，我们会尽量地把一个复杂的东西拆成很多比较小块的，易于把控的一些东西，这就是一个把复杂东西简单化的一个过程。当把一个复杂的东西拆成了简单的小的东西之后，我们就容易地去对这个简单的模块，简单的功能进行标准化。所谓的标准化，就是去制订一个标准，这个东西该怎么做，应该实现什么目的，做了之后我们怎么去衡量。所以这三个是非常重要，就是我要去做什么，我怎么做，然后怎么去衡量。如果把每一个简单的东西都处理好了之后，这个简单的东西就成了一个标准的东西，标准的东西在很多时候就比较容易去推广。这就是标准化的过程，如果整个的标准比较完善了，那我们就希望把这个标准固化下来，固化下来就是说整个的工作就会变成一个很简单的流程。招几个新的员工，然后给他们一个手册，告诉他们，照着这个手册一步一步，第一步做什么，第二步做什么，第三步做什么，这就是流程化的东西。如果发展到这个时候，其实复杂的东西已经可以比较高效地往下运作了。但是对于计算机来说，对于搞技术的同学来说，我们知道，其实计算机它最擅长的东西就是处理这种简单的流程，所以我们如果做到流程化，就有了一个自动化的基础，我们可以用计算机来把这些固化的流程完成，这样最终就把复杂的事情能够尽量地做到自动化。我来举一个简单的例子，尤其是后面流程化和自动化这个东西，大家可能不是那么理解。就是我们在上单，所谓上单就是一个单子，比如一个餐馆售卖的东西，就是本地服务的一个产品，我们叫一个单子。上单的时候，我们的销售同学和商家谈了一个问题，最终要上到我们的整个网站里边。我们今年上半年曾经做过一个很大的努力就是，上单的时候我们希望免审核、免写、免编辑，为什么要这么做呢？给大家介绍一下旧有的流程，在旧有的流程里边，销售团队可能从签订合同开始，还不算他一开始跟商家去谈私人关系，去一次一次的沟通，那时候可能要碰很多壁，即使是商家已经同意了要和你合作了，那销售的同学就可以和商家签订合同，从这个时候就进入我们生产流程，然后要到我们的审核团队去审核合同，看这个合同的价格，定价是不是合理，是不是偏高，或者偏低，因为偏高了损害用户的这个利益，偏低了之后美团要贴钱，所以要去审核，包括一些法律的东西，是不是合法，一些条款是不是合法，这是审核，如果审核不通过，要打回来，重新签，如果审核通过了，回到我们的编辑团队，那编辑的团队会干什么？会把合同里的东西输成文档变成文字，变成一个文本的描述，然后还包括编辑的同学，摄影师的团队，他们会去每个商家去拍很多菜品的照片，或者商家门头的照片等等，还要把这些照片再去剪切，包括打上防伪的美团的水印等等，这些就是我们编辑团队原来要做得，他要把所有的这些东西原材料变成一个网上的单子，上了单子之后，先在一个系统里给商家看，这是我要给用户展示的东西，这样行不行？商家说可以，我们就可以最终给用户来卖了，那在这个整个的流程，从签订合同开始，到最后用户能够看到这个单子，这之间的时间是7到10天，这是一个非常非常长的时间，因为7到10天就可以对对商家带来很多很多流量。我们现在每天的销售额是几亿人民币，如果我们每个单子都拖到7到10天的话是不可忍受的。那技术团队就会想怎么去优化这个流程。我们其实做了几件事情，第一个就是说把业务流程所有的东西尽量在线化，比如说离线运行的东西。有的编辑的同学他本来是去签一个纸质的合同，纸质的合同寄到我们编审那边，编审的同学要去一条一条的读这个纸质的合同，这个是很难容忍的，这个是没办法提升的。我们首先就把很多的，比如说合同，尽量在线上来填合同，还有摄影师拍的照片，尽量直接传到网上，不要通过一个其他的渠道，U盘等等来传。这样所有的东西在线上了以后，我们才有了所有用计算机处理的一个基础。还有一个就是，我们希望所有的数据结构化。举一个例子，对于一个餐馆来说，我们可能往往会有很多的条款，比如说他这个餐馆是几点到几点营业，这个单子是几点到几点可以用，用的条件包括你可以用包间，或者不可以用包间，以及是否提供停车位，还有一些菜单的东西，这些东西在最初的时候，就是我们编辑的同学一条一条对着那个合同把它用手录成一大段文字，这样不是结构化的东西。我们结构化的努力，就是我们把每一项条款都变成我们数据里的一个结构化的单元，比如说你的这个单子在什么时间可用，星期几，几点几分到几点几分可以用，这个本身就是一个数据存储的项目。当结构化之后，销售上单的时候，它就是一个表单，一个表格这么填写，最后生成的数据就不是一大段文字了，而是很多结构化的数据。这个数据有什么好处？比如说我们生成单子的时候，如果要改版，它很容易做一些改版，或者说我们商家要调整一个价格，就只把价格那个项目给商家来做调整就可以了。不用担心商家改的时候，把一些条款的其他东西改掉。然后还包括，比如说现在会在PC端和这个移动端同时显示同样的单子，其实因为显示器的差别，我们在PC端和移动端的显示肯定是不一样的。只有当我们把它结构化之后，我们才能自动地匹配不同的显示环境，这就是结构化的一个好处。再比如说，我们会把一切可量化的东西量化，就是价格我们不希望输入一个字符串的几块钱，因为这个东西计算机是不容易去理解的，我们希望如果它是数字的，比方说价格，你就填一个价格，如果进价是多少，我卖价是多少，还有可使用时间，就用时间的格式来填，这样的好处就是我们的审核就变得非常容易。我们的审核团队，它根本不需要人工的去读这个东西，只要我们把规则制订好了，那计算机就可以把这个量化的东西一条一条地过一下。所以当我们做了这些努力之后，我们新的流程变成什么样子了呢？销售团队同样还是要去填合同，但是他填写一个表格的数据，填写好后这个表格的数据，系统会自动地审查，自动地生成一个单子，然后立刻可以给商家做确认，商家确认之后，就可以上线给用户了。然后，做了这些努力之后，我们把中间的很多环节和步骤，包括人力都省掉了，我们不需要那么多编辑的同学，不需要那么多审核的同学，而且整个的流程会走地非常顺畅，非常快，便捷。给大家看一下收益是什么呢？这是从今年1月份到9月份的一个数据，蓝线是我们每个月的上单量，从今年1月份，除了2月份，2月份因为是春节，整个的上单量有所下降，其余几个月份上单量一直是非常快速的往上涨的，一直到现在，每个月我们美团上的单子有40多万单不同的消费单，这种单子做一个假设，如果有一个吃喝玩乐的达人，他每天去吃一单美团的单子的，那40万单够他吃一千年。假设我们这个单子能持续一千年，我们会提供非常非常丰富的单子给用户做选择，上这么多的单我们的单均成本，我们从原来的很高，现在已经降到了个位数。如果我们没有做刚才那些努力的话，我们是根本不可能实现这么多的上单量，我们的成本也不可能降下来。因为我们把成本压的很低，就可以为商家提供更好的服务，也给用户提供更好的优惠，这就是技术给我们带来的一些优势。最后第三点，给大家分享一下，在线上线下这两部分，技术都是可以去做的，我们说O2O，O2O是什么？就是Online+Offline，就是线下加线上。有一部分同学可能会有一些误解，可能技术只是在线上的，其实不是那样，技术它不分线上、线下，它在线上线下都是非常重要的，需要贯穿线上线下。我在这里给大家举两个例子，线上的就不举了，因为技术都是在优化线上的东西。给大家举两个例子，看我们怎么去用技术来优化线下的一些东西。第一个就是外卖单子这个流程中，我们做了一个外卖打印机。先给大家介绍一下背景，美团外卖整个下单是怎么样的？比如用户下单，在我们的网站上说，我要买一个砂锅饭，在哪个餐馆买，我要送到什么地方，我们就需要通知商家，通知商家的时候，要告诉他用户要买什么，他地址是什么，电话是什么，然后我们的商家的厨师去做菜，小二就要去送餐，用户完成消费。美团外卖是2013年的11月13号上线的，第一单的时候，最初的时候，我们怎么处理呢？那个时候真的很原始，当然我们一开始还是做了个手机的APP，用户在手机的APP上下单，我们会有美团的外卖的这个同学，包括一些客服的同学，也包括一些很多技术的同学也帮忙打电话，我们就打电话通知商家说，某某定了一个什么单子，然后他的地址是什么，电话是什么，告诉商家。商家怎么办？就只能用这个纸笔记下来，交给厨师，说你去做饭，厨师做完了，把小纸条给配送的同学，配送的同学就去给用户来送东西，这个里面过程是非常痛苦的。当然那时候大家做的很有热情，非常喜欢打电话，看到我们有用户进来，一天从一单十几单到几百单，大家打电话打得很兴奋。但是很快发现承受不了，因为打一单，对美团的开销是说，一单哪怕只需要一分钟去给商家打电话，几百单的时候还行。一天一个人8小时工作，哪怕你持续不停的给商家打电话，那一分钟打一个也就四百多单，你可以帮用户定四百多单。但是当这个单子增长很快的时候，我们就发现我们人力跟不上了，技术的同学都去打电话了，技术同学受不了。商家也很痛苦，因为打电话的时候，很多的信息是说不准确的，他要记电话号码，如果记不清的话，他还要再打过来问刚才那个单子电话是什么，包括地址，有些地址字还比较难写。我们为了解放，首先我们解放我们自己，我们不给商家打电话了，我们给商家开发一个APP，每个商家只要安装了这个APP，他在手机上就可以接到通知。一旦有用户下单，APP上就会有通知说谁谁下了一个单，这时候老板根据APP上的信息，拿张纸，找个笔，把它写下来，然后给厨师。这个时候你会发现说，至少美团的同学们这个工作就省下来了。但是商家的工作，他虽然抄得准确一点，不用从电话里抄，直接从APP上抄，但是还是要做大量的工作，包括这个小纸条传来传去，有的人写得笔迹不是那么清楚。后来我们再进一步，我们APP接到一个打印机上，这个APP有可能是一个手机的APP，也有可能是电脑上的一个应用程序，这个APP连着打印机，一旦用户下单，打印机就会打出一个小条来，他拿这个小条，这个信息就非常准确了。商家不用花时间去写了，这时候就可以给厨师去做菜，厨师做完了交给配送员去送菜，这个就比较方便了。后来我们还是发现这个也不是很好，一般这个APP总是在老板那里的，如果说好几个人拿着APP会出现问题，好几个人拿的话，比如老板和老板娘都拿着，他们可能都去打，一个定单可能打了两份；或者说，有时候说老板拿着这个APP，但是老板刚好不在，那他就打不了。有的店，他就不得不买一台电脑放在那，但是电脑对于很多小的外卖店，还是一笔额外的开销。因为现在手机上网的多，但是电脑上网的人已经很少了，还是对商家有很多不方便的地方。今年5月份的时候，我们的硬件的团队，他们就说我们自己来做一个云打印机。所谓云打印机就是它自己可以联网，联网的时候有很多联网的方式，比如说我可以插一个手机卡，通过手机的网络来联网，或者我也可以通过WiFi来联网，联网之后，手机下单的时候，我们的美团后台的服务器会把这个单子的信息直接推送到这个云打印机上，这个云打印机就像一个POS机那样，是一个很小的设备，会自动地打印出单子的信息，这样就大大得解放了我们美团的同学和商家的同学。这是一个我们用技术来优化商家端这边的流程的一个例子。接下来给大家举一个，我们怎么去用技术优化用户端的例子。我们在用户端也有很多线下的工作，其中一个工作就是用户运营。我们有一种需求叫“拉新”运营团队，他们的任务就是对一些已经注册了美团的帐号，但是过来逛了一圈，最后没买东西就走了，可能来逛了好几次，他还是没买，这时候美团就急了，美团急了怎么办呢？给你10块钱，你赶紧买一个吧。因为很多用户的确是这样，他没买可能是因为他不知道网上怎么支付。他支付流程没做通，或者说他可能就不太习惯，所以我们希望把这些用户转化成一个习惯于在网上消费的用户，让他体验一下，可能体验一下他觉得好，他可以以后接着买。给用户10块钱，20块钱，做一些优惠活动，吸引用户完成首次的购买。那其实我们这边的花销是真金实银的，我们是给用户很多免费，对于美团来说薄利多销，利很薄，所以我们希望少花钱，多办事，这个钱能少给就少给，能不给就不给，运营的团队，就跟我们技术的同学聊，问这个事情能不能优化？我们就去分析，先去分析这些用户到底是什么样的用户，发现用户有很多类，一类是有一些用户他虽然来逛了一圈，或者逛了几圈，他还没买，但是假以时日，可能再过几天，最后他还是会自动的转化，所以有一些用户的这种自动转化的可能性是比较高的。还有一些用户，他可能来了几次，他可能每次就是来逛逛，每次逛逛，就像逛街一样，虽然他不买，但是逛着也很爽，看着菜单他可能口水直流，也觉得挺爽。所以有些用户，就是你不给他刺激，他就完不成自动的转化。然后还有一些用户质量低，所谓质量低就是对美团的质量，我给他券的时候他就过来买个东西，比如我给他10块钱，他可以过来买个11块钱的东西，然后转身就跑了，我不给他券，他就半年不过来，美团又忍不住，又给他10块钱，他又过来看了看买了个9块钱的东西就走了。对这种用户不是说质量低，对美团来说当然我们希望尽量这种薅羊毛式的这种用户，他来当然我们也欢迎，但是不来我们也就不去拉拢了。还有一些用户就是，属于用户质量比较高的那些用户，如果我们一旦帮助他转化，就是越过了这个首次消费这个坎的话，他可能就成为一个很高频的，习惯于在美团消费的用户，我们叫高质量用户。对于美团来说，我们希望真正运营的对象，真正拉拢的对象就是在这些，我如果不给他刺激，他自己可能转化不了，然后同时如果他转化了，他对美团的销售额的贡献会比较大。这种用户，对其他三个象限，比如说第一象限里边，这部分用户我不需要给他发券了，发券就是对美团来说浪费钱了，我们叫浪费，当然也没浪费。对下面这两个象限呢，因为用户本身质量比较低，所以他来和不来至少对美团的最后的获利来说没有大的关系，那我们怎么去找出这部分用户？这是运营的同学给技术团队提出了一个要求，那我们怎么去做呢？做用户画像，在美团其实有大量的用户的数据。我们可以看到，他什么时候注册的美团，他从什么浏览器，从什么操作系统，然后包括说，他去看了哪些单子，浏览了什么单子，他做了什么搜索，他用的是什么手机，这些信息我们都有。有大量的数据，那我们从这些数据里面就给用户画像，我们会去判断用户的各种属性，这些属性有一些是，可能用户在注册的时候就会告诉我们了，比如说性别，年龄，包括邮箱，这些可能本身他注册的时候就会告诉我们，还有一些是需要我们去分析，比如说这个是否结婚了，他的职业是什么，然后包括他的地理位置，地理位置当然比较好拿，因为很多，现在我们绝大部分用户是在手机上的，他一旦在手机上做周边的这种搜索，我们就可以拿到他的地理位置，地理位置的话，我们就可以知道，比如说他是一个学校的用户，是学生，还是说一个工业园区的一个白领，还是一个比如金融街的一个比较高大上的一个这个金融界人士。邮箱也很重要，比如说我们发现用户是qq.com的这种用户，跟gmail.com的用户，他是两类不一样的用户，他所关注的东西，感兴趣的东西都不一样。我们也会去分析用户的收入水平和消费水平，收入水平就是我们可能根据他的职业，根据他的年龄的工作年限去判断，他是在一个高收入，还是低收入，然后消费水平相对来说，有可能他虽然收入很高，但是他过来看的单子都是一些比如打折打得很狠，比如吃一顿饭人均20块钱这种也有。所以收入水平和消费水平我们是分开来判断，然后会判断这个用户是倾向于最优惠的价格，他还是讲求比较高的质量，就是订酒店的时候是99块钱的酒店，还是说899的五星级酒店等等。我们会去做一些分析，我们根据用户他浏览的历史，他去看了哪些单子，他去做了什么搜索，我们就可以知道他的品类偏好，他到底是喜欢美食，还是喜欢去看电影，还是喜欢去唱卡拉OK，这种娱乐，这些也可以判断出来，再加上一些正常的统计的数据，比如说用户搜索了多少次了，然后他去浏览了多少次，就是来逛街逛了多少次了，他是不是有收藏一些他比较喜欢的一些单子等等，这些很多很多的属性加起来，我们就建了用户画像的这种数据库，然后有了这些属性，那我们接到运营同学的需求的时候，我们就会对用我们的用户画像里的数据先做特征的选择，做特征的提取，甚至有一些属性，比如说年龄这个属性，我们会做很多特征的离散化，就是把一个属性离散成几百个，甚至几万个这种属性，放到我们的机器学习的模型里面去训练一些模型，最后我们用一些分类模型去，其实最后我们选的是SVM，就是支持项连机这种机器学习的算法，训练出的模型，它的准确度相对来说，看起来没有那么高，但是效果已经很明显，沃勒准确率是75%，判断用户是不是真的在左上角那个象限里，准确度75%，召回率能达到68%。有了这个技术支撑，最后我们运营的单位成本，比如说我们拉新运营的单位成本就可以降低35%，总共的拉新运营开支就节省了30%。所以这个就是我们在技术，在线下的用户运营这边做的一个努力。大家可以看到刚才举了两个例子，一个是在商家端，一个是在用户端，其实不管怎么样，我们在线下技术可以做很多很多的优化，让我们线下的效率做很多的提升，那正是所有这些一个一个的优化，加起来就可以把美团的整个的生产效率提升上去，把我们的成本降下来，这样我们最后的获利就是美团越来越有竞争力。今天给大家分享的一些小的例子，最后总结一下，把它总结成几点。第一点，就是的确我们的技术架构是要随着业务的发展而不断地变化的，不一定一个复杂的的一个完善的架构就是好的，而是看，我们现在的公司是处在什么阶段，如果是一个初创的公司，那大家还是要小步快跑，一个简单有效的方案就行了。第二我们是随着业务发展，在一些开源软件的技术上不断的优化，业务流程我们也不断的做一些标准化，自动化，就是刚才给大家讲了我们四个原则，就是把复杂的东西简单化，简单的东西标准化，标准的东西流程化，流程的东西再自动化，这是我们在业务流程方面的一个优化的原则。第三个就是在技术上的，技术不仅仅对线上有用，在线下的每一个操作里，我们在不停地看我们能做一些什么样的优化。最后一句话就是，一个简单的事情，哪怕像美团这样，很多人觉得简单的事情要把它做到极致，就是真正做到极致，也会有足够多的这种技术挑战，足够高的门槛，所以我觉得现在很多O2O的创业的团队来说，他们做得事情看起来非常简单，但是只要大家不断地优化，不断地极致，不断地朝着极致去发展，你就可以在竞争中胜出。这个就是给大家分享的美团的技术团队，我们做的很多的努力。", "product/写给非数据人的数据世界入门指南.md": "写给非数据人的数据世界入门指南提交我的留言加载中已留言写给非数据人的数据世界入门指南20160425Heidi格物志人人都是产品经理人人都是产品经理人人都是产品经理微信号woshipm功能介绍产品经理不再是一个单纯的职位，而是一种思维方式，这种思维是所有互联网人必备的，做互联网的人不能不懂产品，关注产品，改变生活。因为我做过交互设计――会画DEMO；和PD接触时间长――多少知道PRD怎么写；又给分析师提过需求――知道数据大概怎么回事……所以，我就“随波逐流”成了数据产品的产品经理。插句后话，以后在晋升面试或者转岗面试时，当面试官问我怎么就突然从交互设计师转成数据产品经理时，最早我也是讲的随波逐流的故事……然后被挑战比较严重，后来换个说法：Whynot?有这个机会，大家都信任你，又不给你压力，又能学习到新领域的知识，和新的人打交道，同时还能继续沿用交互设计的技能知识，Whynot?然后对方就颔首了，所以讲故事的角度是多么重要。说点这段故事中，让我真正坚定起来的两句话：一个老大说：“给你机会去试错，错了大不了重头再来。”另一个老大说：“设计师盯着皮肤看，产品经理要了解整体的经络组织和骨骼，更重要的是要知道数据作为血液如何在流通。你有机会深入皮肤之下看一下，再回来看皮肤感觉又不一样了。”所以我是带着这个人体经络图的即视感忐忐忑忑接下了数据产品经理这个新的岗位的。不用别人说，我也知道有两座大山需要翻：1.数据2.产品经理。本文的目标不指导就业，不提供数据分析解决方案，不承诺对任何人都必要有效。根据个人仅有的经验、心得，我只能：1.面向对数据分析、数据产品有兴趣但是又有点畏惧的交互设计师、产品经理2.希望能够让你们“减少对于数据世界的恐惧”，使用数据的语言“顺畅沟通”。欢迎进入数据的世界还记得你学习游泳的经历吗？记得我当时就是怎么都不敢下水。我的教练告诉我的最有用的一句话是：你会憋气吧？你试试在浅水区里什么都不要做，松开栏杆，憋住气，让自己沉下去。如果你受不了了，反正你一站就站起来了。我一想，也对，反正浅水区嘛。于是第一次松开了栏杆。奇怪的事情发生了。我居然不会沉入水底耶~甚至透过泳镜看别人的脚扑腾扑腾！原来水里的世界没有那么的可怕！克服了这个对水的恐惧后，才开始慢慢学习各种动作，开始享受水的乐趣。数据的世界对于不了解它的人而言，正如这神秘的水一样。那么我提供的让你不怕“水”的心得有：两个词、一个立方体、一张流程图你准备好了吗？1两个词先复习一下你可能也听过的两句话：如果你无法量化，那就无法很好管理。无细分，不分析。第一句话来自管理大师彼得德鲁克，第二句话则是分析界的金玉良言了。这两句话里就隐含着我说的这两个词。接下来，再来看一句话：成交10亿人民币！肯定没有人单独说这样的话，一般情况，这句话前都要加上一些“定语”，比如“今年截至到7月份，全国蔬菜市场”，或“去年9月，女装市场”，或“过去N年，东三省猪肉市场”……等等。这些语境里，也隐含着这两个词。再来看一张图：这是刚入门时，为了追求PPT的好看，做的一张概念图。虽然当时还没有体会到两个词的重要，但是从感觉上，我画了以上的图，有位前辈说，维度还不够。哦，我后来才知道，中间的圈里，我大部分呈现的是度量，而下面的几个圈，我列了重要的一些维度。至于上面的几个圈里，应该是呈现的分析专题或功能。至于你平时有机会接触到的各种数据可视化，报表，也基本上脱离不了这两个词，比如，若你去客服部门分析客户来电量（下图仅供演示，非真实场景数据）你按时间趋势来看总体来电量。当你发现某个月或某周来电量波动较大，你就需要添加别的“角度”来进一步细分。你按热线来细分来电量，看看来电拨打的什么热线。当你发现某个热线来电量波动异常后，你又需要进一步细分，看看此热线的来电是被什么接起公司承接的……下面不卖关子了。有些人可能已经猜到了，我要分享的这两个词就是：维度+度量。下图中，我将重点放到大道至简几个字，以及维度+度量上，而维度和度量下面分别放了所在家族的一些其他常用词汇，我稍后会解释。我始终认为在这条路上，我有一个两词之师，当我比较迷茫的时候，他就像当时教我游泳的导师一样，告诉我：你不需要了解那么多，只要了解数据的世界没有那么复杂，知道有什么维度，看什么度量，然后怎么呈现出来即可。对，他没有时间教我别的，也没有分享过任何文档给我，只告诉了我这句话，但是让我受益至今，因为那一刻，就是恍然大悟。所以我现在也分享给你们。定义度量：即Metrics,指量化的数值。一般都有个名称，比如网页浏览次数，网页浏览时长，支付宝成交金额等等。平时，我们一般会叫成“指标”，但是在专业语境，你需要知道，指标和度量还是有些差异，比如某些场合，他们会用指标特指一些经过计算的度量结果，比如拿度量A（网站总浏览次数），除以度量B（网站总浏览人数），得到一个新的指标（网站人均浏览次数），用以衡量网站粘性。但是我建议你平时使用两者可以通用。维度：即Dimension。指我们平时看事物的角度。比如，同样是网站浏览次数（PV），我们可以从日期角度去看，也可以以流量来源去看（来自直接访问的、来自微博的、来自搜索的等），也可以以新老用户分群来看。更多的场景是同时以两个维度的组合去看，比如这样的图，就是同时结合了时间、来源两个维度对网站流量进行分析：两者你知道如何清楚区分吗？虽然从定义上，你可以看出明显不同，但是现实中，却还是有人喜欢乱用――把明明属于维度的东西写成“我要看什么指标”，或者喜欢用“我想从收藏人数这个维度去看”，虽然我属于强迫症，喜欢帮别人的需求纠错，被冠以扣字眼的“名号”，但是在这件事情，我一定要抠到底。而且，你抠清楚了，以后你的世界也清晰很多。区分的一个方法：维度，一定是有成员值的，且成员值是可以枚举出来的――不管它有多少，大不了你多花点时间去枚举，总之是一定可以枚举的，且会维持一定的稳定性。比如，日期这个维度，几月几号一定是有限的，一年也就365天，如果是年这个维度，也是一样的。城市这个维度更好理解了吧？其他你需要了解的度量：除了指标这个有着略略差异的俗称外，有时还会遇到衍生指标这个说法，比如拿指标A和指标B做运算得到的指标C就叫做衍生指标。此外，还要注意可累加以及不可累加的度量说法，比如网站UV（独立访问用户数），这个指标就是典型的不可累加的度量：某网站1月1日UV=100个，1月2日UV=200个，但是这两天的UV不等于300个，因为1月2日的独立用户数里可能包含了1月1日的用户，所以如果要得到2天的UV，需要重新计算而不能直接相加。而像成交类的金额，不涉及到去重的问题，就叫可累加的度量。维度维度的层次：即Level。有些维度是独立并列的关系，比如城市维度和时间维度。但是有些维度之间有层次关系，比如省份维度和城市维度，行业维度和类目维度，年级维度和班级维度等。有层次关系的维度，则可用于“钻取”场景中，先汇总到比较粗的维度，当有需要的时候，可以层层钻取到更加明细的维度，此时，也会把这些维度叫做某维度类型的不同“粒度”――比如会有一个虚拟的维度类型曰地区维度，而把省份、城市、区叫做地区维的粒度。维度的层次根据不同的需求，可能会钻取到很细（Details）,那就是通常我们说的\"明细数据\"了。比如分析成交金额时，从行业维度，细分到一级类目乃至叶子类目，最后，钻取到某个独立的商品ID（不能再细了），商品ID就是最细小的层次维度。这么说可能会把你绕晕，那么还是画个图吧（我真的适合当唐僧似的老师……os□to）如上图所示，左列也即维度，不管是国家、省份、城市，都是维度，但因为他们有层次关系，所以，有时会被描述为地区维度的不同粒度或层次（明白了吧）。而右侧就是每个维度的维度成员了，有时也被叫成维度值。在可累加的度量中，每一个维度值相加，应该等于上级维度的某成员值总和。比如若城市A只有三个区，这三个区的人口总数应该等于城市A的。维度的属性：用以描述维度的一些属性，比如上图中“城市”这个维度吧，它可能会有一些属性特征，比如城市类型：省会城市、地级市、县级市等，那么有一个分析需求，可能还会按不同城市类型汇总细分。这种情况，维度的属性会成为分析中的维度。这时，你可能会明白，平时为什么那么多表单要填写各种字段，这些字段，都可能是分析时的维度哦~码了这么多，休息一下，给你们放张图：当时小贝和马云一碰面，无论在阿里还是网络上，都出现了一个两难的问题：到底是选谁当老公呢？（能有这个问题的妹子，你真想多了……），其实这里仔细分析，无非也是涉及到维度和度量两词：维度：人啊。维度成员：马云、小贝度量：众位妹子和弟弟们无非就是按自己心目中的算法给两位成员计算颜值、财富，以及自己心目中的权重，衡量一个综合指数了……我可不敢随便填。最后，发现两难的选择，只能得到一个结论是：左边的当老公，右边的当爸爸。点评：做梦吧您。总结一下两个词的应用：无论你听怎么复杂的需求，以及无论你有多么复杂的需求，请有倾向地提炼这两个词，因为这是你做数据产品、数据分析或者可视化设计的基础的基础：翻了自己的电脑半天，终于翻出一个不敏感的文档，供参考，下图就是移动数据分析中的需求交付模版之一：左侧列举度量，右侧标注出此度量需要看的维度，有时还会注明维度之间是否要交叉组合查询。不展开。2一个立方体其实本文的精华就在两个词之间了。下面您看不看都成。立方体在数据的世界里叫做Cube。我想为何有立方体这个概念，应该是它很形象地能够表达出多维的概念，至少有3维，如上图所示，成交100亿的金额，是一个大立方体的总量。如果按季度、行业、地区三个维度来分析，我们可以清楚地知道第三季度A地区女装行业有多少――也即我用橙色标注的那一个切块的量，是吗？那如果是我要知道B地区女装行业四季度的成交总和呢？你怎么切给我？空间感好的同学已经知道怎么切了，你知道吗？这只是切块。我们还可以切片，比如我想要知道B地区所有行业的四个季度的成交总和，怎么切？我想要知道男装行业所有地区四个季度的成交总和怎么切？具体怎么切，你们自己意会吧，篇幅有限，不展开。现实分析场景中，恐怕不只三个维度，比如还要加上销售部门维度、销售渠道维度呢~那么立方体可就复杂了，空间感差一些的同学，就想想不出来这个立方体什么样子了吧，事实上，数据开发同学会用雪花模型或者星型模型去建设这些立方体。你只要有这个立方体的概念就可以了……数据分析就是像玩魔方一下，拨弄着这些立方体。在网上找了一个包含了我刚才说的钻取、汇总的概念的立方体再给你们感受下，想要详细学习的同学可以搜索“数据立方体”继续研究。我刚才举的那几个切块、切片的案例有毛用啊？现实生活中，你提需求的时候，不可能让你画个立方体吧？是的，我们是以表格的方式去看数据的，比如第一个切块，是什么表格呢?站在行业负责人，尤其是女装负责人的视角，可能是这样的一个报表：当然，如果是某地区销售经理，有可能是这样的：所以就有各种数据透视分析的视角。总结数据分析就是在拨弄各种数据立方体，你可以切片、切块、钻取、汇总，你所玩的魔方每一块，就是一个具体的度量值，是什么数字，则是多种维度交叉后的结果。工作实践中，数据产品经理会考虑做出更加方便易用的“立方体玩法”以供普通用户使用：如，在分析客户来电的自动语音导航服务中，我们就可以按不同的维度去对比看用户在导航菜单里按键量，下图所示是“按菜单对比”的界面，在“对比按”中可以进行切换其他对比视角。至于左侧的两个筛选，也即指筛选数据集合（切片或切块了），比如限定某几个热线和菜单去看。3一张图片了解了维度、度量两个词，又有了立方体之概念，让我们再来看数据是怎么产生，怎么被放到用户界面上供查询使用的。巧妇难为无米之炊。数据不是凭空产生的，当需求方提出想要什么样的数据分析的时候。首先要检视的是，TA需求中涉及到的维度是否确定被采集到？度量的计算成本是否高？比如若一个需求想要分析不同买家分层的留存，买家分层是一个新维度，需求方是按骨灰级、高级、新手等对买家进行分层。且什么叫骨灰级？系统里并未对买家进行打标记，且不同类目的骨灰级算法还不一样，加上算法定义本身也在磨合。这种情况下，我们应该和需求方一起推动业务系统完成打标，而不是自己接下这个需求，在数据仓库ETL环节完成。了解ETL：这个是做数据工作绕不开的术语，E抽取、清洗――T（转换）――L（装载），抽取是从各个业务系统中抽取所需的数据，然后完成语义层、逻辑层的转换，比如不同系统中记录销售渠道这个维度，有的叫做saleschannel，有的叫做channel，需要转化为同一个概念。装载，也可以理解成抽取、清洗、转换好了，装载到另外一个空间里，供多维查询服务应用调用。当然，则个领域，水很深，我只能简单描述一下，再深的也担心大家晕菜了――毕竟本文是写给非数据人的。（其实作者本人也讲不粗来了……哈哈）应用我说了，我无法教你具体复杂的数据分析案例。我希望能够借助本文和你分享下如何建立起比较专业的数据分析思路――数据产品经理本身也应该可以是优秀的数据分析师。1三部曲――建立分析框架1.建立分析框架：了解业务、以及业务想要什么（目标）。2.提交数据需求:根据你的访谈、梳理，得到业务流程、业务愿景以及目标，那么就可以和需求方共同确认“看什么”以及“怎么看”。好的数据产品经理或者数据分析师，永远不是坐等需求方提出他要看什么度量和维度，而是要引导对方看更合适的东西以回答他关于目标是否达成的问题。3.进行数据分析：使用多种维度，进行总体的、细分的、多维的分析，当发现问题时，能够使用这些维度的组合帮助用户找到影响原因。一切都基于你有多了解业务：下图是几年前的老图了，左侧是业务流程图，右侧是概念中的数字体系示意（可视化是为了更好和需求方沟通）。PPT里因为存在具体业务的案例，不便分享，到此为止吧。如果有时间的话，我还是会编脱离具体业务的案例的……这就是写博客的苦逼之处，工作中都是工作的案例，为了写篇博客，还得自己再编一套有板有眼的故事……2三部曲――提交数据需求故意放了张你可能看不清楚的图（os□to），所以别问我要大图了，谢谢~左侧就是度量分类和度量，从标注了颜色底色开始的就是维度了，标了颜色的也即此指标需要被计算到所需的维度，灰色的表示不需要，黄色和绿色（以及上面的数字1、2），表示优先级不同，黄色的当然是高优先级了。比如黄色上我写的数字应该是1,也即第一优先级。实际上，依据不同的场景，当然可以有很多简化，比如无需标注优先级之类的。此外，还需要单独提供维度和度量的详细口径定义说明表格，这时最好和分析师一起，详细进行确认。3三部曲――进行数据分析你提的需求不管是做成报表、还是做成具体可视化的界面，总之如果已经开发出来了，就来玩魔方吧。只是报表有可能你得导出来在EXCEL里玩魔方。（即使是可视化的界面，也依赖于对方设计得是否易用）最简单的分析是逐级钻取，如：复杂的则需要多维交叉：比如，当分析某个APP的Activeusers,当我已经锁定某个省份有问题的时候，我们既可以继续钻取到城市去明晓细节，又可以交叉到品牌，看不同省份间品牌偏好的问题。比如是否小城市中安卓品牌的人更加活跃。留点作业：要记得思考哦1.Detail页面的设计师被追责，怎么应对？某日，负责搜索结果页（LIST）的设计师来找商品详情页（Detail），他好容易做了LIST页面的改版，而且结果也确实喜人，从List页面到Detailye页面的转化率确实提升了（比如原来100万的人来到List页面，只有40万继续点击到Detail,改版后，变成了50万）。但是不幸的是，总体从L到订单的转化率却没有提升，反而下降了。请问，如果你是Detail的分析师，如何和List的分析师一起想办法分析什么原因？2.挂羊头卖狗肉的Banner，怎么用数据证明其反而有害无益？有时为了爆眼球效应，你的老板会要求你做个华而不实的banner,比如明明活动页（LandingPage）里都是一些潘坎品，却偏偏在banner上用潘康募鄹穹乓恍└叽笊系牟品图片。想要吸引人点击进去。而确实点击效果很好！过去放凤姐一晚，100个人里只有5个人点，现在放了林志玲一晚，100个人居然有99个人点击。老板很高兴，而且确实成交额似乎是比过去略微高那么一点点了。现在，除了用道德说辞说服老板不要这么做，还有别的方式吗？最后，分享给各位的心得是：你现在也知道，数据本身需要经过分析师的定义、数据源系统的采集、数据开发的开发以及展现设计，任何一个环节，可能会产出错误的数据，所以数据本身未必100%靠谱。此外，数据的解读，需要保持谨慎批判之心。比如同样是小明语文得了59分，如果你不了解上下文以及历史趋势的话，会认为小明没考好，有的人甚至会得出小明语文不好的结论。而要是了解他上个季度每次语文考试都只有30多分，又会得出小明虽然语文不好但是明显进步了。而要是了解到这个班级平均分数只有49分，你又会觉得小明简直太赞了！所以，单纯的一个数字本身没有任何意义，要窥一斑，更要知全貌。此外，数据会被有心计的故意利用，而向你呈现部分事实（他不是在弯曲事实，而是只呈现对他有利的一面），数据本身有那么多维度以及层次，导致解读的方式完全可以被利用。所以，要记得我本文的最后提点：对于产品经理和分析师来讲，最针对的是我们基于对于业务的深入理解而产生的直觉。不要盲目被数据拉着走。只有有较好的直觉，我们才能有更合理的假设，有了这个合理的假设，才能够更好解读数据以及提数据的需求。而不是在各种数据的海洋里玩数据的游戏而浪费时间。作者：Heidi格物志阅读原文精选留言该文章作者已设置需关注才可以留言写留言该文章作者已设置需关注才可以留言写留言加载中以上留言由公众号筛选后显示了解留言功能详情微信扫一扫关注该公众号", "product/平台创新总结.md": "2015年研发部系统组在信息化方面主要完成了分布式信息化集成平台设计与研发，以下简称DIP平台。2015这一年我们完成了DIP平台的前期调研、需求目标的确定、架构设计、开发实现以及DIP平台在信息化项目中的试用等工作，初步实现了一个可以用于生产环境的分布式信息化平台。DIP平台研发背景及目标建设背景2014年广州、昆明等供电段提出建设统合段内众多部门综合信息化解决方案的要求，同时铁总的十三五规划也针对信息的整合提出要求。而现实的行业现状是快速扩充运输能力需要安全保障，如何保证如此高速、高密度、高复杂性的路网的运输与运营安全变得非常重要；铁路行业装备数量和水平迅速提高使得提高资产的利用率、降本增效势在必行；铁路行业缺乏企业化的运营，如何提高铁路运营效率，挖掘运输潜力，实现现代化的铁路运营管理也是十分急迫。这都反映出铁路供电行业对全行业业务整合的要求日渐强烈，用户对应用系统的业务集成、数据整合、性能等方面要求更高，常规的垂直应用架构已无法应对，分布式服务架构以及流动计算架构势在必行，亟需一个治理系统确保架构有条不紊的演进。建设目标按照公司领导的要求和设计理念，于2015年研发部开始调研及设计满足行业需求的信息化平台。和公司领导研讨决定，我们要打造“标准化、流程化、协同化、移动化”的综合管理信息平台――“四化平台”，在供电信息化行业形成“二个中心”――数据中心、业务中心。“四化平台”将以平台化建设基础、以流程整合为纽带、以生产运营为核心、以移动应用和门户整合为手段来建设，建立供电行业的数据存储、处理、分析利用的中心和各部门业务整合业务处理中心，改变数据不统一和数据孤岛现状，改变各部门业务孤立，系统众多的现状。困难与挑战2015年年初，公司决定研发光芒信息化平台后，研发部系统组面临众多困难：DIP平台涉及到很多不熟悉的技术，技术攻关难度较大：插件式的系统集成，分布式流程引擎，分布式的服务容器等。人员短缺和流失。项目成立之初只有两人，中途还出现一人离职，DIP平台项目组一直是12个人状态，平时还要支持业务组一些工作。公司在分布式系统的架构和设计方面积累较少，学习曲线陡峭。开发周期较短，DIP平台真正开发时间在半年左右的时间，剩余的时间在做平台的测试与改进、平台对业务组的技术支持等工作。DIP平台成果DIP平台是光芒公司对铁路供电业务的深入调研，收集铁路总公司、路局以及供电段的多方需求，为支撑铁路供电业务的持续快速发展，提供一体化、全方位的信息化技术解决方案。DIP平台基于插件思想和SOA思想建设，提供应用集成、统一认证及授权、分布式流程管理器、服务容器、数据交换以及基础应用开发框架中间件等。实现光芒自己的应用开发框架。Framework提供了全栈的开发支持，它包括高效ORM、基于扁平化的UI组件库、Web框架、代码生成工具等。Framework做到了轻量级，便于扩展，简单的编程模型，便于使用。ORM提供了一个通用的Dao层，简化数据库访问操作，使得业务代码编写集中在Service层，简化了编程模型。扁平化的UI组件库采用的是流行的扁平化的风格，方便使用，提高开发效率，提供了漂亮的界面设计。代码生成工具提供了生成单表的CRUD的代码，减少部分编码工作。实现基于插件思想的应用集成容器。插件容器是用于集成其他应用子系统和第三方系统。对应用插件子系统的集成提供完整的集成机制，同时应用插件子系统需要遵循插件容器的接入准则和规范，插件容器应用子系统提供统一认证及授权服务、分布式的流程管理支持、统一的门户界面集成等。基于插件思想的插件容器有以下优势：第一、将复杂的大系统切分成独立的插件子系统，独立开发、独立部署，降低复杂度，提高访问性能。第二、是各个子系统关注业务本身，而不用关注权限控制、流程管理、门户主界面等功能。实现了统一认证及授权。统一认证与授权为各个基于平台的子系统提供人员、组织、功能权限与数据权限管理，各子系统功能基于无状态来实现。它减轻了开发人员开发项目的工作量及时间，并且保证了权限系统的一致性，为供电段众多分散的子系统整合提供了整合基础。实现了分布式流程管理器。分布式流程管理器提供独立于应用的流程管理，它以服务的方式提供流程引擎的功能，可分布式部署，应用系统采用服务调用的方式管理流程。我们还开发了轻量级的流程设计器，支持常用浏览器,支持常用的流程控制节点，支持自动调用节点等。市面上多是嵌入式的流程引擎，独立的流程引擎只有大公司才有，它为复杂的企业化业务集成提供了整合支持。实现了服务容器。服务容器提供服务的注册（自动发现）、服务路由、服务的管理、服务运行监控等功能。服务容器思想来源于SOA架构的企业服务总线（即ESB），但比一般的ESB要轻量很多，它可分布式部署，支持负载均衡，为高并发提高了基础。除此之外，服务容器还提高了方便的分布式调用框架，便于和业务系统集成。服务容器是DIP平台的核心之一，它是SOA思想的体现，它将业务功能服务化，提供了业务功能级别的复用，降低业务系统的复杂度，便于系统的扩展与升级。实现了自定义流程中间件。自定义流程中间件提供简单业务流程的审批功能，用户可以根据自己的需要定义审批流程，并可以设置每一步的审批内容，可以提交每一步的审批意见。自定义流程中间件能简化一部分业务功能的开发，提高业务的开发效率。目前，DIP平台已经使用在郑州铁路局的信息安全项目、综合信息管理的设备履历项目，明年将大规模的使用在运维、6C等项目上。展望未来2015年研发部系统组基本开发完成一个基本可用的、能集成企业业务的、基于插件思想和SOA的企业信息化基础化平台。从技术上来看，DIP平台将目前IT业界流行的技术和思想应用在其中，具有一定的先进性和创新性。从功能及业务应用上来看，已实现了作为一个企业信息化平台的核心功能，基本满足一般信息项目的需求。DIP平台还有很多工作也做，它需要更丰富的功能，它需要更高的稳定性、更优的性能表现。在我们的规划中，我们还将提供数据交换中间件，为数据中心建设提供基础；提供API服务网关，为移动应用及第三方应用提供支持；提供完善的平台及应用系统监控功能，为系统的稳定运行提供保障。未来对GIS、报表、内容管理等多个方面提供支持。", "product/昆明供电段应急指挥系统解决方案.md": "参考：电力应急指挥解决方案www.techstar.com.cn/caseinfo.aspx?m=20100723115246312667融智通电网应急指挥解决方案www.rongzhitong.com/jjfa/jjfa51.html中科软应急指挥系统解决方案www.sinosoft.com.cn/khyal/E_ggws_news/ggws_news_0001.html一、概述昆明供电段应急指挥系统解决方案是一个充分利用现代网络技术、计算机技术和多媒体技术，以**基础资源数据库、知识库为基础，以地理信息系统、数据分析系统、信息表示系统**为手段，实现对**应急情况数据的收集、分析、对应急指挥的辅助决策、对应急资源的组织、协调和管理控制**等指挥功能。该系统在面对突发事件时，能够为指挥领导和参与指挥的业务人员和专家，提供各种通讯和信息服务，提供决策依据和分析手段以及指挥命令实施部署和监督方法，能及时、有效地调集各种资源，实施险情控制和抢险工作，用最有效的控制手段和小的资源投入，将损失控制在最小范围内。**方案实现目标**对各种应急预案进行管理，包括预案分类、分级以及预案附件上传，包括应急预案的增加、删除、修改、查询、附件下载和基本信息的导出。在数据采集和信息处理方面，实现应急情况（异常信息）的采集、传输、存储、处理、分析、预案确定及启动全过程的信息化、自动化和网络化。在预警方面，建立处理突发事件信息管理网络，实现对突发事件的评估与预警触发启动；在会商方面，利用视频接收设备、通讯系统、数据库系统、地理信息系统（GIS）等设施，为指挥领导、业务人员和专家提供大屏幕显示和信息服务，随时为领导决策提供各种有效而生动的辅助决策信息；在决策支持方面，形成一套具有实时监测、科学预测、及时有效发布和动态反馈评估等功能的辅助决策系统，实现对突发事件应急处理的决策支持。在资源调度方面，通过接入第三方物资管理系统对应急资源（线路图纸、工具、材料等）的科学调度，充分保证对特定突发事件应急处理所需资源的配置。**方案特色**应急指挥系统的建设是建立在光芒集成开发平台之上的，平台为应急指挥提供服务和数据的支撑，保证基础数据的共享、服务的共用，在基础软硬件上提供了保障。在监测、预警和应急领域提供“监测、预警、应急”一体化的应急决策指挥解决方案，实现系统“平战结合”的建设思想。基于我们在铁路供电行业的业务积累，应急指挥系统将以多样化、可扩展的可靠信息渠道解决应急指挥中必须的信息来源问题；基于数据仓库和数据挖掘技术，提供多类行业的数据分析和预警模型，实现监测与预警联动；光芒集成开发平台提供了门户集成技术和关键指标仪表盘设计技术，结合系统中丰富的系统分析模块，实现各种业务数据的显示界面集成，便于决策者快速、直观地了解信息、把握全局；以业界主流和开放的技术标准和设计模式，提供开放的、平台级的应用编程接口和管理工具，既满足供电段快速拓展和实施系统，又便于保护投资，使系统长期健康发展。二、总体框架应急指挥系统涉及领域广，技术层次深，系统的构架也是比较复杂，总体来讲，其框架图如下：!_v_images/20191120212750.png光芒公司依据铁路供电领域的应急决策指挥的要求，结合以往的应急指挥系统的经验，在光芒集成开发基础平台基础上，进一步细化应用框架到可实施框架，从下向上依次是**基础设施层、数据中心层、资源整合层、应用支撑层、应用层、综合门户**，并有安全保障体系和运行维护与支持体系保障系统的正常运行。如下图所示：!_v_images/20191120212805.png基础设施层：整个系统的底层是信息系统的基础设施，这包括网络及通讯设施、主机服务器及存储系统、视频会议系统、大屏幕数据演示系统，以及操作系统、数据库管理系统及网络通讯基础设施等，这些是系统最基本的运行基础。数据中心：数据是整个系统的基础，基础数据经过采集、处理、标准化、传输、存储，形成系统资源库，为系统提供了高效的业务分析、决策、交换、共享的数据环境。主要包括以下数据库：知识数据库预案数据库应急事件库应急材料库设备资源（图纸、物资等）数据库地理信息空间数据库组织基础数据库人员基础数据库资源整合层：应急指挥需要多部门、多系统联动配合，如果彼此孤立，不能实现信息共享，就会形成的“信息孤岛”。造成缺乏可比数据、缺乏分析、缺乏管理。难以获得全面的业务信息，就会影响业务和决策的效率和准确性。通过提供应用整合服务、业务整合服务、数据整合服务连接相关职能部门的系统、业务、数据，最大程度的解决信息孤岛，最大限度地利用现有的数据资源。应用支撑层：应用支撑层的设计直接影响系统的稳定性、安全性及可靠性等重要因素，光芒公司凭借多年的软件开发经验，采用低耦合，高内聚的设计思想，基于开放的标准在该层部署应用部件，为系统高效、可靠的运行提供保障。包括：GIS服务流程引擎全文检索消息中间件信息推送服务内容管理数据交换权限管理报表服务应用层光芒公司应急决策系统根据突发事件应急的特点，综合各种数据信息及处理软件，缺省提供了辅助会商决策系统、数据收集与管理系统、信息处理与分析系统、资源管理系统、信息发布系统等应用系统，并可根据需要，快速的扩展业务系统。综合门户综合门户系统建立了一个灵活、规范的信息组织管理平台和全网范围的网络协作环境，实现集成的信息采集、内容管理、信息搜索，能够直接组织各类共享信息和内部业务基础信息，面向不同使用对象，通过门户技术实现个性化服务，从而实现初步的信息整合；门户不同的用户提供个性化、服务，实现用户的统一认证、统一管理，提供实时信息访问及多系统协同工作。三、基础设施解决方案应急基础平台是基于先进信息技术、网络技术、GIS技术、通信技术和应急信息资源基础上的，充分利用现有资源，依托供电段信息化建设，建立统一应急指挥网络平台，实现紧急事件报警的统一接入与交换。根据突发公共事件突发性、区域性、持续性等特点，以及应急组织指挥机构及其职责、工作流程、应急响应、处置步骤、处置方案等应急业务的集成，应急指挥系统基础平台建设主要包括以下几个方面。1.音视频系统；2.会议系统；3.通信系统；4.后勤保障系统音视频系统：音视频系统贯穿在整个应急指挥中心的日常工作、应急受理、指挥调度、管理系统等等各种活动中，是应急指挥系统最有效的信息获取、协调指挥的手段之一；是应急指挥系统与指挥人员人机交互的最主要的表现形式。包括但不限于下列子系统：音视频整合系统（将各种不同格式的音像信号整合后接入指挥中心）大屏幕显示系统远程视频监控视频点播系统综合指挥席会议系统：会议系统是应急指挥系统对于突发事件进行协调处理、信息分析、决策以及指令下达的重要工具，实现各级指挥部门直接交流，成为应急指挥系统最有效的信息获取，协调指挥的手段之一。包括但不限于下列子系统：数字会议系统电话会议系统视频会议系统通信系统为应急抢修通过通信保障，应急指挥通信平台整合现有通信资源，如视频会议终端、手机、调度电话、行政电话、集群、卫星通信、PAD等都作为应急指挥中的通信手段，有效的融合，才能保证指令的有效下达，最终才能做到信息对称。应急指挥中心的通信系统即要覆盖多个下级部门，同时又要保障与上级的通信，实现在紧急状况下调度指挥和协调管理。包括但不限于下列子系统：有线通信系统无线通信系统后勤保障系统后勤保障系统的作用是确保应急指挥平台各种设备的可靠运行，确保各种应急数据的传输、存储及灾备，并为指挥中心内部人员提供安全和舒适的工作环境。包括但不限于下列子系统：机房建设（包括机房装修、配电、空调等）综合布线系统计算机网络系统数据存储系统异地灾备系统音、视频存储系统中央控制系统安防系统（含监控和门禁系统）不间断电源系统四、软件解决方案!_v_images/20191120212828.png应急指挥系统主要功能1、异常信息监测功能完成各自对异常信息（应急情况）的监控监测，而应急指挥系统从这些系统获取异常信息，并管理好这些异常信息。对发生的应急情况进行分析，确定应急事件的类型、等级，否是构成启动对应的应急预案。突发事件的发生具有分散性、隐蔽性、积聚性和突发性的特点，因此根据这些特点建立了异常信息监测的机制，能从接触网、电力、变电等系统通过数据的抽取发现突发事件隐患的功能，并利用各种数据挖掘工具，进行突发事件信息的挖掘分析，做到突发事件及早发现、消灭，提前预防、及时处理。2、异常信息分析与预警根据坚持预防为主的原则，突发事件应急系统需要根据不同专业特点建立各种突发事件预测预警模型，日常管理系统不断为模型输入参数，一旦模型计算结果出现异常情况时，系统必须能够通过预先设定的途径进行报警，并自动通过电话、传真、Email、短信等方式提醒突发事件相关人员。3、会商决策抢修中，领导在应急指挥中心，可以随时享受现场传回的照片，视频录像，文字，语音汇报，有利于分析决策，可以与现场人员任意组织会议对工作加以指导和了解。即使有些领导因为出差，无法及时赶赴现场，现场实施人员可通过系统上报现场的照片，或者语音，或者视频、录像让不在现场的领导也可以清楚的了解到现场的进展情况，并加入与现场的互动，快速作出指示。4、应急资源管理与调度应急指挥中心根据应急事件等级和预案对所涉应急资源集中管理和统一调度。由于各个专业应急指挥中心涉及的不同专业的应急资源具有不同的调度权限，应急资源的调度指令的下达根据调度权限逐级下达。应急资源的现场调度情况，通过系统直接反馈到应急指挥部，指挥中心根据现场情况及时进行预案的调整。并且系统具备应急资源分配功能，能够设置本专业应急资源的空间分布、资源属性以及分配和调度方式。5、应急事件录入功能除了通过应急事件数据采集模块及数据整合模块获得基础数据外，通过该功能能够对应急事件进行补充（包括文字信息、数据信息、图片信息、录象信息、空间位置信息等），便于系统进行应急事件分析，建立抢修方案。在抢修完成后，可以将处理结果录入到系统，完成对应急事件的管理。6、应急知识库管理通过收集国内外铁路供电行业的应急事件所需各种知识，汇总编排后录入系统，提供综合查询、对外使用接口等功能，快速简易的查询知识库内容。7、教育培训功能系统能够通过统一的综合门户系统，建立各个专业应急教育培训栏目，为应急指挥工作人员加强专业技能培训，广大铁路职工提供应对突发事件的基础知识。通过培训教育，提高工作人员指挥分析能力，提供广大铁路职工应对突发事件的应对能力。7、地理信息系统（GIS）支持GIS电子地图作为业务信息的载体，可提供对业务信息在地图上的直观定位、可视化展示、查询和专题分析。利用地理信息特有的空间关联关系，可以建立多种业务信息之间的空间关联关系，寻找业务信息之间的分布规律和空间关系，为指挥决策、情报分析等提供依据。利用地理信息可以实现对控制力量、命令执行情况的动态管理与监督，对应急态势的实时掌控，实现对应急力量的科学化管理、合理的调度。GIS系统是应急指挥中心系统的重要辅助系统，它利用SOA模型设计出包含了多层次的多种应用和技术组件，为用户提供基于网络的桌面、移动服务以及应用程序的Web服务。包括但不限于下列功能：空间数据维护以地理信息空间数据库和数据仓库的方式方便地统一管理地理空间数据和相应的属性数据，并能够对空间数据进行数据转载、转换、存储、更新等操作。GIS制图与输出基于地理信息系统平台，以多种比例的电子地图为基础，各种比例尺空间数据库能够无缝嵌套使用。GIS空间分析解决所涉及到地理空间的实际问题，提取和传输地理空间信息，特别是隐含信息，以辅助决策空间专题分析空间专题分析的目的是解决某类与地理空间有关的问题，涉及多种空间分析操作的组合。空间查询管理检索某类与地理空间有关的数据。", "product/水力发电生产管理信息系统.md": "项目内容新华水力发电集团生产管理信息系统（以下简称“PMIS”）是以新华发电公司发展规划确定的管理为基础，配合集团体制、机制、管理和技术的持续创新，充分利用现代信息技术，建立和形成满足集团公司及其分子公司的协同运转、高效管理和科学决策需要的新华发电公司综合信息系统。系统建设内容主要体现在以下三个方面：1、建立电厂运行实时数据采集平台。分析研究集团所属各类发电厂对电厂运行实时信息的需求情况和利用方法，建立一套集团统一的电厂运行指标体系标准，并依据该标准设计出数据库的主要数据结构，同时保留可扩充性。针对集团总部、区域分公司和各发电厂对实时数据需求的不同，按照统一的接口标准分别提取各自所需的关键指标数据，并进行长期存储和加工处理。2、建立各级电厂运行实时监测系统。在集团公司本部，以抽取上来的各发电厂实时数据为基础，建设集团电厂运行实时监测系统，成为集团公司未来的生产监测指挥中心。在各区域分公司，以抽取上来的各发电厂实时数据为基础，建设区域分公司运行实时监测系统，成为区域分公司未来的运行监测指挥中心。在各发电厂，以建立的实时数据库为基础，建设运行实时监测系统。3、为集团化生产调度提供所需信息。实现对各下属发电厂生产运营状况的在线监视，跟踪机组运行状态，反映其生产运营中发生的生产事故和有较大影响的紧急事件,并能通过系统实时向总公司报告；满足生产运营信息的收集、整理、汇总、分析及向集团公司上报的要求；分析所辖电厂机组运行的经济性，指导协调管辖电厂的生产运营和电力市场有关工作。系统架构PMIS全面基于面向服务的体系架构（SOA）和N层B/S体系模式，自底向上分为基础设施层、数据层、基础应用层、业务应用层和表示层。采用分层的技术架构具有很强的扩展性、可维护性和安全性。系统功能架构如下图所示：!_v_images/20191120205015.png", "product/水电厂运行管理系统.md": "项目内容水电厂运行管理系统（以下简称“HOMS”）是在先进的设计理念和管理思想的基础上，充分结合水电企业的运行管理特点和电厂生产管理的业务需求，专门为水电企业管理者量身定做的产品，因此该系统符合湖南白竹洲水电站信息化建设要求。HOMS以发电生产、设备为核心，以工单为主线，全面覆盖水电企业生产、资产、经营、预算、决策支持等管理领域，并可将生产实时数据与管理信息有机集成，帮助水电企业及下属电厂快速有效地构建管控一体、分层管理的信息化集成平台。项目建设内容主要包括运行值班、运行台账管理、定期工作管理、工作票管理、操作票管理、设备管理、缺陷管理、实时系统、物资管理、相关方管理、检修管理、安全管理、标准资料管理、系统管理等应用功能。系统架构HOMS全面基于面向服务的体系架构（SOA）和N层B/S体系模式，自底向上分为基础设施层、数据层、基础应用层、业务应用层和表示层。采用分层的技术架构具有很强的扩展性、可维护性和安全性。HOMS提供对移动设备（安卓操作系统）的产品支持，即水电厂运行管理安卓客户端系统（HOMSforAndroid），该系统基于Android（安卓）平台设备，与HOMS系统同步的数据库，协助企业便捷高效地进行水电企业信息化管理。系统功能架构如下图所示：!_v_images/20191120205041.png", "product/水电站生产运行管理系统.md": "水电站生产运行管理系统1、设备管理系统采用树状与列表型双结构管理电站内设备，通过树状结构可以方便的查找到目的设备以及父子关系的设备，从而完成对现场设备的监控和跟踪，并进行维护和更新设备和运行位置的基本信息。另外设备可以与我公司KKS水电编码系统联合使用完成对设备编码和定位的目的。2、物资管理物资管理指对物品或工具的接收、保管、保养、发放、回收等环节的过程控制，本模块主要包括库存管理、物资入库、物质出库、领料与退料、库存盘点、物资采购等。3、工具管理工器具的管理包括日常借用、归还和日常维护，此外还有专用工具的年检和安全试验、工器具的报修、报废和添置等。4、运行管理运行部是电厂的核心部门，担负着上级部门下发到全厂发电任务的重任，因此发电运行的管理功能也是本系统的重点。运行管理模块基本囊括了运行过程中日常的各种记录与操作过程，同时提供方便灵活的两票流程处理功能，为电站和员工提供了安全工作的保障。主要内容有各种运行记录、ON_CALL记录、实时参数记录、规程管理、两票管理和相应报表输出等。5、安全监督管理完善的安全监督工作可以达到减少事故、促进工作的目的，本系统安全监督功能包含了水电站常见的各项工作，如：安全性评价、人员安全管理、设施安全管理、异常故障管理、安措管理、事故管理、安全检查管理、上级指令管理、安全文明生产管理、两票考核管理、安全奖惩管理等。6、预防性维护管理通过合理的预防性维修可以达到防止意外事故、预防计划外停机的目的。通过本功能可以建立预防性维修计划来定义在设备或位置上周期性执行的预防性维修工作。系统支持按照时间、里程表、日历、季节和时间触发的预防性维修。此外，还可以产生需要对多个位置和设备同时进行的检查性预防性维修，也可以通过建立预防性维修计划来定义电厂的大小修项目。7、故障代码管理管理设备或工具的故障信息代码，对每个设备或者工具建立树状管理结构，故障代码信息包含故障代码编号、故障问题及现象、故障原因分析、故障处理措施等信息。通过对设备故障代码的出现趋势分析可以指导维护人员及时采取合适的预防性维护措施。同时历史代码也为今后故障诊断与处理提供有价值的参考作用。8、计划管理计划管理按照目前常用的一套现行计划管理体系编制，实现计划以及合同的电子化管理，该体系包括计划的申报、汇总、审核、批准、执行、完成情况评价等。9、员工管理实现对员工简历、培训、特殊工种及员工考核的管理。10、标准工作包在维修的过程中，可以把一些实际的经验和习惯的做法归纳总结起来，作成在执行某些特定工作任务的标准工作包供日后参考。11、查询统计统一管理系统中各种综合信息的统计查询与报表生成，通过管理员设置可以生成各种专业型查询统计报表，对系统状态一目了然。12、系统管理系统管理模块实现对水电站生产运行管理系统的设计、配置等功能。通过系统配置，我们能为水电站生产运行管理系统设计业务流程、规划系统授权、对现有的应用程序客户化修改以达到适应各项目的不同需求、对系统内的标准参数和运行参数进行配置、对系统辅助应用程序进行设置等。!_v_images/20191120205150.png", "product/铁路6C业务结构.md": "!_v_images/20191120204812.png", "product/需求调研及分析方法.md": "信息化的四个阶段**第一阶段**：现实世界对象的电子化存储和统计分析**第二阶段**：对象之间数据、动作的流程化&自动化伴随着数据大集中、管理分布式、数据深挖掘的大趋势**第三阶段**：负责管理这些对象的人的工作的监控&KPI考核一边考核这些人的工作绩效,一边监控这些人的工作漏洞**第四阶段**：信息化系统的移动化、分享化、社会化需求调研的关键对象实体对象（物）：系统管理的实体对象，ER图的对象及关系即体现这些。组织机构及业务角色（人）：1、记录每一个Role关注的功能。业务流程（事件）：1、按业务领域划分来分析。2、按Role来分析。业务用例（细节）：具体的功能点细节分析报表（考核）：任务完全情况监控和KPI考核移动化：尽量的将业务移动化需求分析步骤与方法1、从客户/集成商那得到仅有的一点可怜的需求信息如果对需求不太了解,一般来说不要直接询问客户细节2、了解客户行业背景，可在百度文库上看一下这个行业相关的信息化解决方案3、向客户确认清楚项目的管理对象，最好是能够了解一下客户的信息化、业务流程、和分布式/集中式管理等现状4、按照上面的【信息化的四个阶段】+【需求调研的关键对象】来解构用户的信息化需求，拟定我们的解决方案和功能清单5、制作UI原型，并与客户确认，完善对象关键字段，确定业务用例的细节。系统创新和亮点流程创新管理创新体验创新技术创新"}